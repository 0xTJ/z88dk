
;;
;; sdcc bugfixes
;;

	jp  ____sdcc_z80_pop_ei
=
	call	____sdcc_z80_pop_ei
	ret

	push	bc
	call	____sdcc_z80_pop_ei
	pop	bc
=
	call	____sdcc_z80_pop_ei

	push	de
	call	____sdcc_z80_pop_ei
	pop	de
=
	call	____sdcc_z80_pop_ei

	push	hl
	call	____sdcc_z80_pop_ei
	pop	hl
=
	call	____sdcc_z80_pop_ei

	push	bc
	call	____sdcc_z80_push_di
	pop	bc
=
	call	____sdcc_z80_push_di

	push	de
	call	____sdcc_z80_push_di
	pop	de
=
	call	____sdcc_z80_push_di

	push	hl
	call	____sdcc_z80_push_di
	pop	hl
=
	call	____sdcc_z80_push_di

;;
;; sdcc code size reductions
;;

	push	bc
	ld	de,%1
	ld	hl,%2
	call	____sdcc_ll_add_deix_hlix
	pop	bc
=
	ld	de,%1
	ld	hl,%2
	call	____sdcc_ll_add_deix_hlix

	push	bc
	ld	de,%1
	ld	hl,%2
	call	____sdcc_ll_sub_deix_hlix
	pop	bc
=
	ld	de,%1
	ld	hl,%2
	call	____sdcc_ll_sub_deix_hlix

	push	bc
	ld	hl,%1
	call	____sdcc_ll_push_hlix
	pop	bc
=
	ld	hl,%1
	call	____sdcc_ll_push_hlix

	push	bc
	call	____sdcc_ll_push_mhl
	pop	bc
=
	call	____sdcc_ll_push_mhl

	push	de
	call	____sdcc_lib_setmem_hl - %1
	pop	de
=
	call	____sdcc_lib_setmem_hl - %1

	push	bc
	call	____sdcc_lib_setmem_hl - %1
	pop	bc
=
	call	____sdcc_lib_setmem_hl - %1
