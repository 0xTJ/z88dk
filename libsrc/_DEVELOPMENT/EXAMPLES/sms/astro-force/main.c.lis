1     0000              MODULE main_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9879 (MSVC)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_z80_pop_ei
176   0000              	EXTERN ____sdcc_z80_pop_ei_jp
177   0000              	EXTERN ____sdcc_z80_push_di
178   0000              
179   0000              ;--------------------------------------------------------
180   0000              ; Public variables in this module
181   0000              ;--------------------------------------------------------
182   0000              	GLOBAL _main
183   0000              	GLOBAL _InitPlayStage
184   0000              	GLOBAL _UpdateStagePassB
185   0000              	GLOBAL _UpdateStagePassA
186   0000              	GLOBAL _InitStageData
187   0000              	GLOBAL _InitCustomStageData
188   0000              	GLOBAL _InitStageSprite
189   0000              	GLOBAL _UpdatePlayer
190   0000              	GLOBAL _UpdatePlayerState1
191   0000              	GLOBAL _UpdatePlayerState2
192   0000              	GLOBAL _UpdatePlayerState3
193   0000              	GLOBAL _UpdatePlayerState4
194   0000              	GLOBAL _UpdatePlayerState5
195   0000              	GLOBAL _UpdatePlayerState6
196   0000              	GLOBAL _CheckShootPlayer
197   0000              	GLOBAL _MovePlayer
198   0000              	GLOBAL _DrawPlayer
199   0000              	GLOBAL _InitPlayerSprite
200   0000              	GLOBAL _InitPlayer
201   0000              	GLOBAL _UpdatePlayerIndicators
202   0000              	GLOBAL _CheckPlayerEnemyshootCollision
203   0000              	GLOBAL _CheckPlayerEnemyCollision
204   0000              	GLOBAL _UpdatePowerup
205   0000              	GLOBAL _InitPowerups
206   0000              	GLOBAL _InitPowerupSprites
207   0000              	GLOBAL _InitPlayershoots
208   0000              	GLOBAL _InitPlayershoot
209   0000              	GLOBAL _UpdatePlayershoots
210   0000              	GLOBAL _UpdatePlayershoot
211   0000              	GLOBAL _InitPlayershootSprites
212   0000              	GLOBAL _DrawPlayerShoot
213   0000              	GLOBAL _KillEnemyshoots
214   0000              	GLOBAL _InitEnemyshoots
215   0000              	GLOBAL _UpdateEnemyshoots
216   0000              	GLOBAL _UpdateEnemyshoot
217   0000              	GLOBAL _RemoveEnemyshoot
218   0000              	GLOBAL _CheckMapCollision
219   0000              	GLOBAL _InitEnemyshootSprites
220   0000              	GLOBAL _InitStage8
221   0000              	GLOBAL _UpdateStage8
222   0000              	GLOBAL _CheckCollisionStage7
223   0000              	GLOBAL _InitStage7
224   0000              	GLOBAL _UpdateStage7
225   0000              	GLOBAL _CheckStage7PlayerMovement
226   0000              	GLOBAL _UpdateStage6
227   0000              	GLOBAL _InitStage6
228   0000              	GLOBAL _UpdateStage5
229   0000              	GLOBAL _InitStage5
230   0000              	GLOBAL _InitStage4
231   0000              	GLOBAL _UpdateStage4
232   0000              	GLOBAL _UpdateStage3
233   0000              	GLOBAL _InitStage3
234   0000              	GLOBAL _InitStage2
235   0000              	GLOBAL _UpdateStage2
236   0000              	GLOBAL _CheckCollisionStage2
237   0000              	GLOBAL _CheckCollisionStage1
238   0000              	GLOBAL _InitStage1
239   0000              	GLOBAL _UpdateStage1
240   0000              	GLOBAL _InitGameoverStage
241   0000              	GLOBAL _InitSelectorStage
242   0000              	GLOBAL _UpdateSelectorMarks
243   0000              	GLOBAL _InitIntroStage
244   0000              	GLOBAL _setIntroStageGraphics
245   0000              	GLOBAL _InitIntroScroll
246   0000              	GLOBAL _InitFinishStage
247   0000              	GLOBAL _InitIntro4Stage
248   0000              	GLOBAL _InitIntro3Stage
249   0000              	GLOBAL _InitIntro2Stage
250   0000              	GLOBAL _DoIntro2Scroll
251   0000              	GLOBAL _InitIntro1Stage
252   0000              	GLOBAL _InitJukeboxStage
253   0000              	GLOBAL _UpdateJukeboxInfo
254   0000              	GLOBAL _InitLogoStage
255   0000              	GLOBAL _InitMikGamesStage
256   0000              	GLOBAL _UpdateScripts
257   0000              	GLOBAL _UpdateScript
258   0000              	GLOBAL _RemoveScript
259   0000              	GLOBAL _InitScripts
260   0000              	GLOBAL _InitEnemies
261   0000              	GLOBAL _UpdateEnemies
262   0000              	GLOBAL _UpdateEnemy
263   0000              	GLOBAL _RemoveEnemy
264   0000              	GLOBAL _checkEnemyPlayerShoot
265   0000              	GLOBAL _InitRSGThing
266   0000              	GLOBAL _UpdateRSGThing
267   0000              	GLOBAL _UpdateStage8BossC
268   0000              	GLOBAL _FinishStage8BossC
269   0000              	GLOBAL _InitStage8BossC
270   0000              	GLOBAL _UpdateStage8BossB
271   0000              	GLOBAL _InitStage8BossB
272   0000              	GLOBAL _UpdateStage8BossB3
273   0000              	GLOBAL _UpdateStage8BossB2
274   0000              	GLOBAL _UpdateStage8BossB1
275   0000              	GLOBAL _UpdateStage8BossA
276   0000              	GLOBAL _InitStage8BossA
277   0000              	GLOBAL _InitStage8Lateral
278   0000              	GLOBAL _UpdateStage8Lateral
279   0000              	GLOBAL _UpdateTurnShip
280   0000              	GLOBAL _InitTurnShip
281   0000              	GLOBAL _UpdateSkullBoneC
282   0000              	GLOBAL _UpdateSkullBoneCMovement
283   0000              	GLOBAL _UpdateSkullBoneAB
284   0000              	GLOBAL _InitSkullBoneC
285   0000              	GLOBAL _InitSkullBoneB
286   0000              	GLOBAL _InitSkullBoneA
287   0000              	GLOBAL _UpdateStage6Object
288   0000              	GLOBAL _UpdateStage6EndBossB
289   0000              	GLOBAL _InitStage6EndBossB
290   0000              	GLOBAL _UpdateStage6EndBossB1
291   0000              	GLOBAL _UpdateStage6EndBossB0
292   0000              	GLOBAL _UpdateStage6EndBoss
293   0000              	GLOBAL _UpdateStage6EndBoss5
294   0000              	GLOBAL _UpdateStage6EndBoss4
295   0000              	GLOBAL _UpdateStage6EndBoss3A
296   0000              	GLOBAL _UpdateStage6EndBoss3
297   0000              	GLOBAL _UpdateStage6EndBoss2
298   0000              	GLOBAL _UpdateStage6EndBoss1
299   0000              	GLOBAL _UpdateStage6EndBoss0
300   0000              	GLOBAL _DoSkullShootDirectionB
301   0000              	GLOBAL _DoSkullShootDirection
302   0000              	GLOBAL _LaunchSkullBoneC
303   0000              	GLOBAL _CreateCustomBoneC
304   0000              	GLOBAL _ResetSkullState
305   0000              	GLOBAL _FinishStage6EndBoss
306   0000              	GLOBAL _UpdateStage5Cloud
307   0000              	GLOBAL _UpdateStage3Star
308   0000              	GLOBAL _UpdateStarMovement
309   0000              	GLOBAL _InitStage3Star
310   0000              	GLOBAL _UpdateStage3EndBoss
311   0000              	GLOBAL _UpdateStage3EndBoss1
312   0000              	GLOBAL _UpdateStage3EndBoss2
313   0000              	GLOBAL _DoStage3EndBossCrossShooting
314   0000              	GLOBAL _UpdateStage3Laser
315   0000              	GLOBAL _InitStage3Laser
316   0000              	GLOBAL _UpdateSpaceShooter
317   0000              	GLOBAL _UpdateSpaceAsteroid
318   0000              	GLOBAL _InitSpaceAsteroid
319   0000              	GLOBAL _UpdateSpaceStation
320   0000              	GLOBAL _FinishSpaceStation
321   0000              	GLOBAL _UpdateSpaceStation2
322   0000              	GLOBAL _UpdateSpaceStation1
323   0000              	GLOBAL _UpdateStage2EndBoss
324   0000              	GLOBAL _UpdateStage2EndBoss3
325   0000              	GLOBAL _UpdateStage2EndBoss1
326   0000              	GLOBAL _UpdateStage2EndBoss2
327   0000              	GLOBAL _UpdateVulcanLaser
328   0000              	GLOBAL _InitVulcanLaser
329   0000              	GLOBAL _UpdateVulcanBird
330   0000              	GLOBAL _InitVulcanBird
331   0000              	GLOBAL _UpdateVulcanLava
332   0000              	GLOBAL _InitVulcanLava
333   0000              	GLOBAL _UpdateVulcanVulcan
334   0000              	GLOBAL _UpdateVulcanTankStop
335   0000              	GLOBAL _UpdateVulcanTankRight
336   0000              	GLOBAL _UpdateVulcanTankLeft
337   0000              	GLOBAL _UpdateVulcanTankCommon
338   0000              	GLOBAL _UpdateVulcanStation
339   0000              	GLOBAL _FinishVulcanStation
340   0000              	GLOBAL _UpdateStage7Object
341   0000              	GLOBAL _UpdateStage7EndBossB
342   0000              	GLOBAL _UpdateStage7EndBoss
343   0000              	GLOBAL _DoWormMovement
344   0000              	GLOBAL _InitStage7EndBoss
345   0000              	GLOBAL _InitStage7EndBossB
346   0000              	GLOBAL _UpdateStage7MiddleBoss
347   0000              	GLOBAL _InitStage7MiddleBoss
348   0000              	GLOBAL _FinishStage7MiddleBoss
349   0000              	GLOBAL _UpdateStage7MiddleBoss2
350   0000              	GLOBAL _UpdateStage7MiddleBoss1
351   0000              	GLOBAL _UpdateStage7MiddleBoss0
352   0000              	GLOBAL _DrawAracMoving
353   0000              	GLOBAL _UpdateMonsterHead
354   0000              	GLOBAL _UpdateMonsterMissil
355   0000              	GLOBAL _InitMonsterMissilLeft
356   0000              	GLOBAL _UpdateMonsterBlob
357   0000              	GLOBAL _UpdateStage1EndBoss
358   0000              	GLOBAL _UpdateStage1EndBoss1
359   0000              	GLOBAL _UpdateStage1MiddleBoss
360   0000              	GLOBAL _FinishStage1MiddleBoss
361   0000              	GLOBAL _UpdateStage1MiddleBoss1
362   0000              	GLOBAL _UpdateStage1MiddleBossB
363   0000              	GLOBAL _InitStage1MiddleBossB
364   0000              	GLOBAL _UpdateStage1MiddleBossC
365   0000              	GLOBAL _InitStage1MiddleBossC
366   0000              	GLOBAL _UpdateFortressDoor
367   0000              	GLOBAL _UpdateFortressCannon
368   0000              	GLOBAL _InitFortressCannonRight
369   0000              	GLOBAL _UpdateFortressWave
370   0000              	GLOBAL _UpdateFortressSearcher
371   0000              	GLOBAL _UpdateFortressPhantom
372   0000              	GLOBAL _InitFortressPhantom
373   0000              	GLOBAL _UpdateStage5EndBoss
374   0000              	GLOBAL _UpdateStage5EndBoss4
375   0000              	GLOBAL _UpdateStage5EndBoss3
376   0000              	GLOBAL _UpdateStage5EndBoss2
377   0000              	GLOBAL _UpdateStage5EndBoss1
378   0000              	GLOBAL _UpdateStage5EndBoss0
379   0000              	GLOBAL _UpdateStage5Missile
380   0000              	GLOBAL _UpdateWW2Ship
381   0000              	GLOBAL _UpdateWW2Zeppelin
382   0000              	GLOBAL _InitWW2Zeppelin
383   0000              	GLOBAL _UpdateWW2PlaneB
384   0000              	GLOBAL _UpdateWW2Plane
385   0000              	GLOBAL _InitWW2Plane
386   0000              	GLOBAL _UpdateStage2Object
387   0000              	GLOBAL _UpdateStage4Object
388   0000              	GLOBAL _UpdateStage4EndBossB
389   0000              	GLOBAL _InitStage4EndBossB
390   0000              	GLOBAL _UpdateStage4EndBoss
391   0000              	GLOBAL _UpdateStage4EndBoss7
392   0000              	GLOBAL _UpdateStage4EndBoss6
393   0000              	GLOBAL _UpdateStage4EndBoss5
394   0000              	GLOBAL _UpdateStage4EndBoss4
395   0000              	GLOBAL _UpdateStage4EndBoss3
396   0000              	GLOBAL _UpdateStage4EndBoss2
397   0000              	GLOBAL _UpdateStage4EndBoss1
398   0000              	GLOBAL _DoStage4EndBossSinusMovementVert
399   0000              	GLOBAL _UpdateStage4MiddleBoss
400   0000              	GLOBAL _FinishStage4MiddleBoss
401   0000              	GLOBAL _UpdateStage4MiddleBoss4
402   0000              	GLOBAL _UpdateStage4MiddleBoss3
403   0000              	GLOBAL _UpdateStage4MiddleBoss2
404   0000              	GLOBAL _UpdateStage4MiddleBoss1
405   0000              	GLOBAL _UpdateSpreadShip
406   0000              	GLOBAL _InitSpreadShip
407   0000              	GLOBAL _UpdateBombShip
408   0000              	GLOBAL _InitBombShipRight
409   0000              	GLOBAL _InitBombShipLeft
410   0000              	GLOBAL _UpdateRectShip
411   0000              	GLOBAL _UpdateWaveShip
412   0000              	GLOBAL _InitWaveShip
413   0000              	GLOBAL _UpdateIntro3Object
414   0000              	GLOBAL _UpdateIntro3Object3
415   0000              	GLOBAL _UpdateIntro3Object2
416   0000              	GLOBAL _UpdateIntro3Object1
417   0000              	GLOBAL _DrawIntro3Object
418   0000              	GLOBAL _InitIntro3Object
419   0000              	GLOBAL _UpdateIntroStar
420   0000              	GLOBAL _InitIntroStar
421   0000              	GLOBAL _UpdateIntroSidePlayer
422   0000              	GLOBAL _InitIntroSidePlayer
423   0000              	GLOBAL _UpdateIntroOvni
424   0000              	GLOBAL _UpdateWarning
425   0000              	GLOBAL _InitWarning
426   0000              	GLOBAL _InitSpawnedExplosion
427   0000              	GLOBAL _InitExplosions
428   0000              	GLOBAL _InitExplosionSprite
429   0000              	GLOBAL _UpdateExplosions
430   0000              	GLOBAL _InitExplosion
431   0000              	GLOBAL _UpdateExplosion
432   0000              	GLOBAL _RemoveExplosion
433   0000              	GLOBAL _InitBarrom
434   0000              	GLOBAL _DoBarrom
435   0000              	GLOBAL _UpdateBarrom
436   0000              	GLOBAL _updatescrollact
437   0000              	GLOBAL _UpdateScroller
438   0000              	GLOBAL _AddScrollers
439   0000              	GLOBAL _InitScroller
440   0000              	GLOBAL _MoveMap
441   0000              	GLOBAL _InitMap
442   0000              	GLOBAL _DrawMap
443   0000              	GLOBAL _SetStaticEnemies
444   0000              	GLOBAL _SetMapLines
445   0000              	GLOBAL _getTileAt
446   0000              	GLOBAL _InitTimeredLabels
447   0000              	GLOBAL _InitTimeredLabel
448   0000              	GLOBAL _UpdateTimeredLabels
449   0000              	GLOBAL _UpdateTimeredLabel
450   0000              	GLOBAL _RemoveTimeredLabel
451   0000              	GLOBAL _ClearTimeredLabelLine
452   0000              	GLOBAL _UpdatePSG
453   0000              	GLOBAL _UpdateStage
454   0000              	GLOBAL _checkgamepause
455   0000              	GLOBAL _InitStage
456   0000              	GLOBAL _LoadFont
457   0000              	GLOBAL _ClearTiles
458   0000              	GLOBAL _WriteNumber
459   0000              	GLOBAL _WriteText
460   0000              	GLOBAL _UpdateScroll
461   0000              	GLOBAL _ClearScreen
462   0000              	GLOBAL _fillBackground
463   0000              	GLOBAL _InitConsole
464   0000              	GLOBAL _InterruptHandler
465   0000              	GLOBAL _LoadSpritePalette
466   0000              	GLOBAL _LoadBGPalette
467   0000              	GLOBAL _LoadGraphics
468   0000              	GLOBAL _LoadTiles
469   0000              	GLOBAL _LoadSprite
470   0000              	GLOBAL _DrawQuadSprite
471   0000              	GLOBAL _DrawSpriteArray
472   0000              	GLOBAL _changeBank
473   0000              	GLOBAL _myRand
474   0000              	GLOBAL _barromy
475   0000              	GLOBAL _barromx
476   0000              	GLOBAL _state
477   0000              	GLOBAL _stage1musicreplayed
478   0000              	GLOBAL _jukeboxcheckkey
479   0000              	GLOBAL _jukeboxselectedsong
480   0000              	GLOBAL _jukeboxselectedline
481   0000              	GLOBAL _stage3stars
482   0000              	GLOBAL _barromtime
483   0000              	GLOBAL _stage8phase
484   0000              	GLOBAL _lastplayedmusiclooped
485   0000              	GLOBAL _lastplayedmusicbank
486   0000              	GLOBAL _lastplayedmusic
487   0000              	GLOBAL _powerupcounter
488   0000              	GLOBAL _powerupv
489   0000              	GLOBAL _powerupt
490   0000              	GLOBAL _powerupy
491   0000              	GLOBAL _powerupx
492   0000              	GLOBAL _numinterrupts
493   0000              	GLOBAL _stage4playrays
494   0000              	GLOBAL _spawnedexplosiontime
495   0000              	GLOBAL _spawnedexplosionheight
496   0000              	GLOBAL _spawnedexplosionwidth
497   0000              	GLOBAL _spawnedexplosionposy
498   0000              	GLOBAL _spawnedexplosionposx
499   0000              	GLOBAL _dojukebox
500   0000              	GLOBAL _introstagevelx
501   0000              	GLOBAL _introstageposx
502   0000              	GLOBAL _timeredlabels
503   0000              	GLOBAL _numtimeredlabels
504   0000              	GLOBAL _scripts
505   0000              	GLOBAL _numscripts
506   0000              	GLOBAL _scrolls
507   0000              	GLOBAL _disablescroll
508   0000              	GLOBAL _scrolltimes
509   0000              	GLOBAL _scrollact
510   0000              	GLOBAL _scrollactspeedx
511   0000              	GLOBAL _scrollactspeedy
512   0000              	GLOBAL _numscrolls
513   0000              	GLOBAL _playstagebank
514   0000              	GLOBAL _mapbank
515   0000              	GLOBAL _musicbank
516   0000              	GLOBAL _mapstaticsbank
517   0000              	GLOBAL _mapstaticscount
518   0000              	GLOBAL _mapstatics
519   0000              	GLOBAL _lastbank
520   0000              	GLOBAL _oldmappositiony
521   0000              	GLOBAL _mappositiony
522   0000              	GLOBAL _mappositionx
523   0000              	GLOBAL _maptiles
524   0000              	GLOBAL _maplineslength
525   0000              	GLOBAL _maplines
526   0000              	GLOBAL _enemies
527   0000              	GLOBAL _numenemies
528   0000              	GLOBAL _explosions
529   0000              	GLOBAL _numexplosions
530   0000              	GLOBAL _playstageshootspeed
531   0000              	GLOBAL _enemyshoots
532   0000              	GLOBAL _numenemyshoots
533   0000              	GLOBAL _shootcount
534   0000              	GLOBAL _playershoots
535   0000              	GLOBAL _numplayershoots
536   0000              	GLOBAL _playershootmax
537   0000              	GLOBAL _playershootlevel
538   0000              	GLOBAL _playerspeed
539   0000              	GLOBAL _playerside
540   0000              	GLOBAL _playershootcounter
541   0000              	GLOBAL _playercounter
542   0000              	GLOBAL _playertype
543   0000              	GLOBAL _playery
544   0000              	GLOBAL _playerx
545   0000              	GLOBAL _gamepause
546   0000              	GLOBAL _gamestock
547   0000              	GLOBAL _gamelevel
548   0000              	GLOBAL _exitplaystage
549   0000              	GLOBAL _numplayers
550   0000              	GLOBAL _laststagenum
551   0000              	GLOBAL _stagenum
552   0000              	GLOBAL _updateplaystage
553   0000              	GLOBAL _playstage
554   0000              	GLOBAL _basestage
555   0000              	GLOBAL _sprite164anim
556   0000              	GLOBAL _sprite82anim
557   0000              	GLOBAL _stageframe4mod
558   0000              	GLOBAL _stageframe2mod
559   0000              	GLOBAL _stageframe
560   0000              	GLOBAL _keystatus
561   0000              	GLOBAL _PlaySound
562   0000              	GLOBAL _PlayMusic
563   0000              	GLOBAL _DoCommonBossAppearingFunction
564   0000              	GLOBAL _DoEnemyWait
565   0000              	GLOBAL _DoSideShoot
566   0000              	GLOBAL _DoStage1BossDirectionShoots
567   0000              	GLOBAL _DoAracPatternMovement
568   0000              	GLOBAL _DoSkullSinusMovement
569   0000              	GLOBAL _SkullAccelX
570   0000              	GLOBAL _SkullAccelY
571   0000              	GLOBAL _SkullBoneCMove
572   0000              	GLOBAL _TestSkullOut
573   0000              	GLOBAL _GetEnemyDirection
574   0000              	GLOBAL _KillEnemy
575   0000              	GLOBAL _KillEnemies
576   0000              	GLOBAL _InitEnemy
577   0000              	GLOBAL _InitScript
578   0000              	GLOBAL _InitEnemyshootDirection
579   0000              	GLOBAL _SpreadEnemyshootDirection
580   0000              	GLOBAL _InitEnemyshootLaser
581   0000              	GLOBAL _InitEnemyshoot
582   0000              	GLOBAL _TestEnemyShoot
583   0000              	GLOBAL _TestEnemyShootOne
584   0000              	GLOBAL _TestEnemyShootComplex
585   0000              	GLOBAL _RemovePlayershoot
586   0000              	GLOBAL _InitPowerup
587   0000              	GLOBAL _RemovePlayer
588   0000              	GLOBAL _InitPlayerConstants
589   0000              	GLOBAL _InitStageSprites
590   0000              	GLOBAL _InitAfterBossStage
591   0000              	GLOBAL _UpdatePlayStage
592   0000              ;--------------------------------------------------------
593   0000              ; Externals used
594   0000              ;--------------------------------------------------------
595   0000              	GLOBAL _PSGSFXFrame
596   0000              	GLOBAL _PSGFrame
597   0000              	GLOBAL _PSGRestoreVolumes
598   0000              	GLOBAL _PSGSilenceChannels
599   0000              	GLOBAL _PSGSFXGetStatus
600   0000              	GLOBAL _PSGSFXStop
601   0000              	GLOBAL _PSGSFXCancelLoop
602   0000              	GLOBAL _PSGSFXPlayLoop_callee
603   0000              	GLOBAL _PSGSFXPlayLoop
604   0000              	GLOBAL _PSGSFXPlay_callee
605   0000              	GLOBAL _PSGSFXPlay
606   0000              	GLOBAL _PSGSetMusicVolumeAttenuation_fastcall
607   0000              	GLOBAL _PSGSetMusicVolumeAttenuation
608   0000              	GLOBAL _PSGGetStatus
609   0000              	GLOBAL _PSGStop
610   0000              	GLOBAL _PSGPlayNoRepeat_fastcall
611   0000              	GLOBAL _PSGPlayNoRepeat
612   0000              	GLOBAL _PSGCancelLoop
613   0000              	GLOBAL _PSGPlay_fastcall
614   0000              	GLOBAL _PSGPlay
615   0000              	GLOBAL _SMS_nmi_isr
616   0000              	GLOBAL _SMS_isr
617   0000              	GLOBAL _UNSAFE_SMS_VRAMmemcpy128_callee
618   0000              	GLOBAL _UNSAFE_SMS_VRAMmemcpy128
619   0000              	GLOBAL _UNSAFE_SMS_VRAMmemcpy64_callee
620   0000              	GLOBAL _UNSAFE_SMS_VRAMmemcpy64
621   0000              	GLOBAL _UNSAFE_SMS_VRAMmemcpy32_callee
622   0000              	GLOBAL _UNSAFE_SMS_VRAMmemcpy32
623   0000              	GLOBAL _UNSAFE_SMS_copySpritestoSAT
624   0000              	GLOBAL _SMS_VRAMmemsetW_callee
625   0000              	GLOBAL _SMS_VRAMmemsetW
626   0000              	GLOBAL _SMS_VRAMmemset_callee
627   0000              	GLOBAL _SMS_VRAMmemset
628   0000              	GLOBAL _SMS_VRAMmemcpy_brief_callee
629   0000              	GLOBAL _SMS_VRAMmemcpy_brief
630   0000              	GLOBAL _SMS_VRAMmemcpy_callee
631   0000              	GLOBAL _SMS_VRAMmemcpy
632   0000              	GLOBAL _SMS_getHCount
633   0000              	GLOBAL _SMS_getVCount
634   0000              	GLOBAL _SMS_setLineCounter_fastcall
635   0000              	GLOBAL _SMS_setLineCounter
636   0000              	GLOBAL _SMS_setLineInterruptHandler_fastcall
637   0000              	GLOBAL _SMS_setLineInterruptHandler
638   0000              	GLOBAL _SMS_VDPType
639   0000              	GLOBAL _SMS_resetPauseRequest
640   0000              	GLOBAL _SMS_queryPauseRequested
641   0000              	GLOBAL _SMS_getKeysReleased
642   0000              	GLOBAL _SMS_getKeysHeld
643   0000              	GLOBAL _SMS_getKeysPressed
644   0000              	GLOBAL _SMS_getKeysStatus
645   0000              	GLOBAL _SMS_zeroSpritePalette
646   0000              	GLOBAL _SMS_zeroBGPalette
647   0000              	GLOBAL _SMS_loadSpritePaletteHalfBrightness_fastcall
648   0000              	GLOBAL _SMS_loadSpritePaletteHalfBrightness
649   0000              	GLOBAL _SMS_loadBGPaletteHalfBrightness_fastcall
650   0000              	GLOBAL _SMS_loadBGPaletteHalfBrightness
651   0000              	GLOBAL _SMS_setColor_fastcall
652   0000              	GLOBAL _SMS_setColor
653   0000              	GLOBAL _SMS_loadSpritePalette_fastcall
654   0000              	GLOBAL _SMS_loadSpritePalette
655   0000              	GLOBAL _SMS_loadBGPalette_fastcall
656   0000              	GLOBAL _SMS_loadBGPalette
657   0000              	GLOBAL _SMS_setSpritePaletteColor_callee
658   0000              	GLOBAL _SMS_setSpritePaletteColor
659   0000              	GLOBAL _SMS_setBGPaletteColor_callee
660   0000              	GLOBAL _SMS_setBGPaletteColor
661   0000              	GLOBAL _SMS_copySpritestoSAT
662   0000              	GLOBAL _SMS_finalizeSprites
663   0000              	GLOBAL _SMS_addSpriteClipping_callee
664   0000              	GLOBAL _SMS_addSpriteClipping
665   0000              	GLOBAL _SMS_setClippingWindow_callee
666   0000              	GLOBAL _SMS_setClippingWindow
667   0000              	GLOBAL _SMS_hideSprite_fastcall
668   0000              	GLOBAL _SMS_hideSprite
669   0000              	GLOBAL _SMS_updateSpriteImage_callee
670   0000              	GLOBAL _SMS_updateSpriteImage
671   0000              	GLOBAL _SMS_updateSpritePosition_callee
672   0000              	GLOBAL _SMS_updateSpritePosition
673   0000              	GLOBAL _SMS_reserveSprite
674   0000              	GLOBAL _SMS_addSprite_callee
675   0000              	GLOBAL _SMS_addSprite
676   0000              	GLOBAL _SMS_initSprites
677   0000              	GLOBAL __RST18_SMS_crt0_RST18
678   0000              	GLOBAL _SMS_crt0_RST18
679   0000              	GLOBAL __RST08_SMS_crt0_RST08
680   0000              	GLOBAL _SMS_crt0_RST08
681   0000              	GLOBAL _SMS_loadTileMapArea_callee
682   0000              	GLOBAL _SMS_loadTileMapArea
683   0000              	GLOBAL _SMS_loadSTMcompressedTileMapArea
684   0000              	GLOBAL _SMS_loadTileMap_callee
685   0000              	GLOBAL _SMS_loadTileMap
686   0000              	GLOBAL _SMS_loadPSGaidencompressedTiles_callee
687   0000              	GLOBAL _SMS_loadPSGaidencompressedTiles
688   0000              	GLOBAL _SMS_loadTiles_callee
689   0000              	GLOBAL _SMS_loadTiles
690   0000              	GLOBAL _SMS_waitForVBlank
691   0000              	GLOBAL _SMS_setSpriteMode_fastcall
692   0000              	GLOBAL _SMS_setSpriteMode
693   0000              	GLOBAL _SMS_useFirstHalfTilesforSprites_fastcall
694   0000              	GLOBAL _SMS_useFirstHalfTilesforSprites
695   0000              	GLOBAL _SMS_setBackdropColor_fastcall
696   0000              	GLOBAL _SMS_setBackdropColor
697   0000              	GLOBAL _SMS_setBGScrollY_fastcall
698   0000              	GLOBAL _SMS_setBGScrollY
699   0000              	GLOBAL _SMS_setBGScrollX_fastcall
700   0000              	GLOBAL _SMS_setBGScrollX
701   0000              	GLOBAL _SMS_VDPturnOffFeature_fastcall
702   0000              	GLOBAL _SMS_VDPturnOffFeature
703   0000              	GLOBAL _SMS_VDPturnOnFeature_fastcall
704   0000              	GLOBAL _SMS_VDPturnOnFeature
705   0000              	GLOBAL _SMS_init
706   0000              	GLOBAL _ffsll_callee
707   0000              	GLOBAL _ffsll
708   0000              	GLOBAL _strxfrm_callee
709   0000              	GLOBAL _strxfrm
710   0000              	GLOBAL _strupr_fastcall
711   0000              	GLOBAL _strupr
712   0000              	GLOBAL _strtok_r_callee
713   0000              	GLOBAL _strtok_r
714   0000              	GLOBAL _strtok_callee
715   0000              	GLOBAL _strtok
716   0000              	GLOBAL _strstrip_fastcall
717   0000              	GLOBAL _strstrip
718   0000              	GLOBAL _strstr_callee
719   0000              	GLOBAL _strstr
720   0000              	GLOBAL _strspn_callee
721   0000              	GLOBAL _strspn
722   0000              	GLOBAL _strsep_callee
723   0000              	GLOBAL _strsep
724   0000              	GLOBAL _strrstrip_fastcall
725   0000              	GLOBAL _strrstrip
726   0000              	GLOBAL _strrspn_callee
727   0000              	GLOBAL _strrspn
728   0000              	GLOBAL _strrev_fastcall
729   0000              	GLOBAL _strrev
730   0000              	GLOBAL _strrcspn_callee
731   0000              	GLOBAL _strrcspn
732   0000              	GLOBAL _strrchr_callee
733   0000              	GLOBAL _strrchr
734   0000              	GLOBAL _strpbrk_callee
735   0000              	GLOBAL _strpbrk
736   0000              	GLOBAL _strnlen_callee
737   0000              	GLOBAL _strnlen
738   0000              	GLOBAL _strnicmp_callee
739   0000              	GLOBAL _strnicmp
740   0000              	GLOBAL _strndup_callee
741   0000              	GLOBAL _strndup
742   0000              	GLOBAL _strncpy_callee
743   0000              	GLOBAL _strncpy
744   0000              	GLOBAL _strncmp_callee
745   0000              	GLOBAL _strncmp
746   0000              	GLOBAL _strnchr_callee
747   0000              	GLOBAL _strnchr
748   0000              	GLOBAL _strncat_callee
749   0000              	GLOBAL _strncat
750   0000              	GLOBAL _strncasecmp_callee
751   0000              	GLOBAL _strncasecmp
752   0000              	GLOBAL _strlwr_fastcall
753   0000              	GLOBAL _strlwr
754   0000              	GLOBAL _strlen_fastcall
755   0000              	GLOBAL _strlen
756   0000              	GLOBAL _strlcpy_callee
757   0000              	GLOBAL _strlcpy
758   0000              	GLOBAL _strlcat_callee
759   0000              	GLOBAL _strlcat
760   0000              	GLOBAL _stricmp_callee
761   0000              	GLOBAL _stricmp
762   0000              	GLOBAL _strerror_fastcall
763   0000              	GLOBAL _strerror
764   0000              	GLOBAL _strdup_fastcall
765   0000              	GLOBAL _strdup
766   0000              	GLOBAL _strcspn_callee
767   0000              	GLOBAL _strcspn
768   0000              	GLOBAL _strcpy_callee
769   0000              	GLOBAL _strcpy
770   0000              	GLOBAL _strcoll_callee
771   0000              	GLOBAL _strcoll
772   0000              	GLOBAL _strcmp_callee
773   0000              	GLOBAL _strcmp
774   0000              	GLOBAL _strchrnul_callee
775   0000              	GLOBAL _strchrnul
776   0000              	GLOBAL _strchr_callee
777   0000              	GLOBAL _strchr
778   0000              	GLOBAL _strcat_callee
779   0000              	GLOBAL _strcat
780   0000              	GLOBAL _strcasecmp_callee
781   0000              	GLOBAL _strcasecmp
782   0000              	GLOBAL _stpncpy_callee
783   0000              	GLOBAL _stpncpy
784   0000              	GLOBAL _stpcpy_callee
785   0000              	GLOBAL _stpcpy
786   0000              	GLOBAL _memswap_callee
787   0000              	GLOBAL _memswap
788   0000              	GLOBAL _memset_callee
789   0000              	GLOBAL _memset
790   0000              	GLOBAL _memrchr_callee
791   0000              	GLOBAL _memrchr
792   0000              	GLOBAL _memmove_callee
793   0000              	GLOBAL _memmove
794   0000              	GLOBAL _memmem_callee
795   0000              	GLOBAL _memmem
796   0000              	GLOBAL _memcpy_callee
797   0000              	GLOBAL _memcpy
798   0000              	GLOBAL _memcmp_callee
799   0000              	GLOBAL _memcmp
800   0000              	GLOBAL _memchr_callee
801   0000              	GLOBAL _memchr
802   0000              	GLOBAL _memccpy_callee
803   0000              	GLOBAL _memccpy
804   0000              	GLOBAL _ffsl_fastcall
805   0000              	GLOBAL _ffsl
806   0000              	GLOBAL _ffs_fastcall
807   0000              	GLOBAL _ffs
808   0000              	GLOBAL __strrstrip__fastcall
809   0000              	GLOBAL __strrstrip_
810   0000              	GLOBAL __memupr__callee
811   0000              	GLOBAL __memupr_
812   0000              	GLOBAL __memstrcpy__callee
813   0000              	GLOBAL __memstrcpy_
814   0000              	GLOBAL __memlwr__callee
815   0000              	GLOBAL __memlwr_
816   0000              	GLOBAL _rawmemchr_callee
817   0000              	GLOBAL _rawmemchr
818   0000              	GLOBAL _strnset_callee
819   0000              	GLOBAL _strnset
820   0000              	GLOBAL _strset_callee
821   0000              	GLOBAL _strset
822   0000              	GLOBAL _rindex_callee
823   0000              	GLOBAL _rindex
824   0000              	GLOBAL _index_callee
825   0000              	GLOBAL _index
826   0000              	GLOBAL _bzero_callee
827   0000              	GLOBAL _bzero
828   0000              	GLOBAL _bcopy_callee
829   0000              	GLOBAL _bcopy
830   0000              	GLOBAL _bcmp_callee
831   0000              	GLOBAL _bcmp
832   0000              	GLOBAL _ulltoa_callee
833   0000              	GLOBAL _ulltoa
834   0000              	GLOBAL _strtoull_callee
835   0000              	GLOBAL _strtoull
836   0000              	GLOBAL _strtoll_callee
837   0000              	GLOBAL _strtoll
838   0000              	GLOBAL _lltoa_callee
839   0000              	GLOBAL _lltoa
840   0000              	GLOBAL _llabs_callee
841   0000              	GLOBAL _llabs
842   0000              	GLOBAL __lldivu__callee
843   0000              	GLOBAL __lldivu_
844   0000              	GLOBAL __lldiv__callee
845   0000              	GLOBAL __lldiv_
846   0000              	GLOBAL _atoll_callee
847   0000              	GLOBAL _atoll
848   0000              	GLOBAL _realloc_unlocked_callee
849   0000              	GLOBAL _realloc_unlocked
850   0000              	GLOBAL _malloc_unlocked_fastcall
851   0000              	GLOBAL _malloc_unlocked
852   0000              	GLOBAL _free_unlocked_fastcall
853   0000              	GLOBAL _free_unlocked
854   0000              	GLOBAL _calloc_unlocked_callee
855   0000              	GLOBAL _calloc_unlocked
856   0000              	GLOBAL _aligned_alloc_unlocked_callee
857   0000              	GLOBAL _aligned_alloc_unlocked
858   0000              	GLOBAL _realloc_callee
859   0000              	GLOBAL _realloc
860   0000              	GLOBAL _malloc_fastcall
861   0000              	GLOBAL _malloc
862   0000              	GLOBAL _free_fastcall
863   0000              	GLOBAL _free
864   0000              	GLOBAL _calloc_callee
865   0000              	GLOBAL _calloc
866   0000              	GLOBAL _aligned_alloc_callee
867   0000              	GLOBAL _aligned_alloc
868   0000              	GLOBAL _utoa_callee
869   0000              	GLOBAL _utoa
870   0000              	GLOBAL _ultoa_callee
871   0000              	GLOBAL _ultoa
872   0000              	GLOBAL _system_fastcall
873   0000              	GLOBAL _system
874   0000              	GLOBAL _strtoul_callee
875   0000              	GLOBAL _strtoul
876   0000              	GLOBAL _strtol_callee
877   0000              	GLOBAL _strtol
878   0000              	GLOBAL _strtof_callee
879   0000              	GLOBAL _strtof
880   0000              	GLOBAL _strtod_callee
881   0000              	GLOBAL _strtod
882   0000              	GLOBAL _srand_fastcall
883   0000              	GLOBAL _srand
884   0000              	GLOBAL _rand
885   0000              	GLOBAL _quick_exit_fastcall
886   0000              	GLOBAL _quick_exit
887   0000              	GLOBAL _qsort_callee
888   0000              	GLOBAL _qsort
889   0000              	GLOBAL _ltoa_callee
890   0000              	GLOBAL _ltoa
891   0000              	GLOBAL _labs_fastcall
892   0000              	GLOBAL _labs
893   0000              	GLOBAL _itoa_callee
894   0000              	GLOBAL _itoa
895   0000              	GLOBAL _ftoh_callee
896   0000              	GLOBAL _ftoh
897   0000              	GLOBAL _ftog_callee
898   0000              	GLOBAL _ftog
899   0000              	GLOBAL _ftoe_callee
900   0000              	GLOBAL _ftoe
901   0000              	GLOBAL _ftoa_callee
902   0000              	GLOBAL _ftoa
903   0000              	GLOBAL _exit_fastcall
904   0000              	GLOBAL _exit
905   0000              	GLOBAL _dtoh_callee
906   0000              	GLOBAL _dtoh
907   0000              	GLOBAL _dtog_callee
908   0000              	GLOBAL _dtog
909   0000              	GLOBAL _dtoe_callee
910   0000              	GLOBAL _dtoe
911   0000              	GLOBAL _dtoa_callee
912   0000              	GLOBAL _dtoa
913   0000              	GLOBAL _bsearch_callee
914   0000              	GLOBAL _bsearch
915   0000              	GLOBAL _atol_fastcall
916   0000              	GLOBAL _atol
917   0000              	GLOBAL _atoi_fastcall
918   0000              	GLOBAL _atoi
919   0000              	GLOBAL _atof_fastcall
920   0000              	GLOBAL _atof
921   0000              	GLOBAL _atexit_fastcall
922   0000              	GLOBAL _atexit
923   0000              	GLOBAL _at_quick_exit_fastcall
924   0000              	GLOBAL _at_quick_exit
925   0000              	GLOBAL _abs_fastcall
926   0000              	GLOBAL _abs
927   0000              	GLOBAL _abort
928   0000              	GLOBAL __strtou__callee
929   0000              	GLOBAL __strtou_
930   0000              	GLOBAL __strtoi__callee
931   0000              	GLOBAL __strtoi_
932   0000              	GLOBAL __random_uniform_xor_8__fastcall
933   0000              	GLOBAL __random_uniform_xor_8_
934   0000              	GLOBAL __random_uniform_xor_32__fastcall
935   0000              	GLOBAL __random_uniform_xor_32_
936   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
937   0000              	GLOBAL __random_uniform_cmwc_8_
938   0000              	GLOBAL __shellsort__callee
939   0000              	GLOBAL __shellsort_
940   0000              	GLOBAL __quicksort__callee
941   0000              	GLOBAL __quicksort_
942   0000              	GLOBAL __insertion_sort__callee
943   0000              	GLOBAL __insertion_sort_
944   0000              	GLOBAL __ldivu__callee
945   0000              	GLOBAL __ldivu_
946   0000              	GLOBAL __ldiv__callee
947   0000              	GLOBAL __ldiv_
948   0000              	GLOBAL __divu__callee
949   0000              	GLOBAL __divu_
950   0000              	GLOBAL __div__callee
951   0000              	GLOBAL __div_
952   0000              	GLOBAL _vscanf_unlocked_callee
953   0000              	GLOBAL _vscanf_unlocked
954   0000              	GLOBAL _vprintf_unlocked_callee
955   0000              	GLOBAL _vprintf_unlocked
956   0000              	GLOBAL _vfscanf_unlocked_callee
957   0000              	GLOBAL _vfscanf_unlocked
958   0000              	GLOBAL _vfprintf_unlocked_callee
959   0000              	GLOBAL _vfprintf_unlocked
960   0000              	GLOBAL _ungetc_unlocked_callee
961   0000              	GLOBAL _ungetc_unlocked
962   0000              	GLOBAL _scanf_unlocked
963   0000              	GLOBAL _rewind_unlocked_fastcall
964   0000              	GLOBAL _rewind_unlocked
965   0000              	GLOBAL _puts_unlocked_fastcall
966   0000              	GLOBAL _puts_unlocked
967   0000              	GLOBAL _putchar_unlocked_fastcall
968   0000              	GLOBAL _putchar_unlocked
969   0000              	GLOBAL _putc_unlocked_callee
970   0000              	GLOBAL _putc_unlocked
971   0000              	GLOBAL _printf_unlocked
972   0000              	GLOBAL _gets_unlocked_fastcall
973   0000              	GLOBAL _gets_unlocked
974   0000              	GLOBAL _getline_unlocked_callee
975   0000              	GLOBAL _getline_unlocked
976   0000              	GLOBAL _getdelim_unlocked_callee
977   0000              	GLOBAL _getdelim_unlocked
978   0000              	GLOBAL _getchar_unlocked
979   0000              	GLOBAL _getc_unlocked_fastcall
980   0000              	GLOBAL _getc_unlocked
981   0000              	GLOBAL _fwrite_unlocked_callee
982   0000              	GLOBAL _fwrite_unlocked
983   0000              	GLOBAL _ftell_unlocked_fastcall
984   0000              	GLOBAL _ftell_unlocked
985   0000              	GLOBAL _fsetpos_unlocked_callee
986   0000              	GLOBAL _fsetpos_unlocked
987   0000              	GLOBAL _fseek_unlocked_callee
988   0000              	GLOBAL _fseek_unlocked
989   0000              	GLOBAL _fscanf_unlocked
990   0000              	GLOBAL _freopen_unlocked_callee
991   0000              	GLOBAL _freopen_unlocked
992   0000              	GLOBAL _fread_unlocked_callee
993   0000              	GLOBAL _fread_unlocked
994   0000              	GLOBAL _fputs_unlocked_callee
995   0000              	GLOBAL _fputs_unlocked
996   0000              	GLOBAL _fputc_unlocked_callee
997   0000              	GLOBAL _fputc_unlocked
998   0000              	GLOBAL _fprintf_unlocked
999   0000              	GLOBAL _fileno_unlocked_fastcall
1000  0000              	GLOBAL _fileno_unlocked
1001  0000              	GLOBAL _fgets_unlocked_callee
1002  0000              	GLOBAL _fgets_unlocked
1003  0000              	GLOBAL _fgetpos_unlocked_callee
1004  0000              	GLOBAL _fgetpos_unlocked
1005  0000              	GLOBAL _fgetc_unlocked_fastcall
1006  0000              	GLOBAL _fgetc_unlocked
1007  0000              	GLOBAL _fflush_unlocked_fastcall
1008  0000              	GLOBAL _fflush_unlocked
1009  0000              	GLOBAL _ferror_unlocked_fastcall
1010  0000              	GLOBAL _ferror_unlocked
1011  0000              	GLOBAL _feof_unlocked_fastcall
1012  0000              	GLOBAL _feof_unlocked
1013  0000              	GLOBAL _fclose_unlocked_fastcall
1014  0000              	GLOBAL _fclose_unlocked
1015  0000              	GLOBAL _clearerr_unlocked_fastcall
1016  0000              	GLOBAL _clearerr_unlocked
1017  0000              	GLOBAL _vsscanf_callee
1018  0000              	GLOBAL _vsscanf
1019  0000              	GLOBAL _vsprintf_callee
1020  0000              	GLOBAL _vsprintf
1021  0000              	GLOBAL _vsnprintf_callee
1022  0000              	GLOBAL _vsnprintf
1023  0000              	GLOBAL _vscanf_callee
1024  0000              	GLOBAL _vscanf
1025  0000              	GLOBAL _vprintf_callee
1026  0000              	GLOBAL _vprintf
1027  0000              	GLOBAL _vfscanf_callee
1028  0000              	GLOBAL _vfscanf
1029  0000              	GLOBAL _vfprintf_callee
1030  0000              	GLOBAL _vfprintf
1031  0000              	GLOBAL _vasprintf_callee
1032  0000              	GLOBAL _vasprintf
1033  0000              	GLOBAL _ungetc_callee
1034  0000              	GLOBAL _ungetc
1035  0000              	GLOBAL _sscanf
1036  0000              	GLOBAL _sprintf
1037  0000              	GLOBAL _snprintf
1038  0000              	GLOBAL _scanf
1039  0000              	GLOBAL _rewind_fastcall
1040  0000              	GLOBAL _rewind
1041  0000              	GLOBAL _puts_fastcall
1042  0000              	GLOBAL _puts
1043  0000              	GLOBAL _putchar_fastcall
1044  0000              	GLOBAL _putchar
1045  0000              	GLOBAL _putc_callee
1046  0000              	GLOBAL _putc
1047  0000              	GLOBAL _printf
1048  0000              	GLOBAL _perror_fastcall
1049  0000              	GLOBAL _perror
1050  0000              	GLOBAL _open_memstream_callee
1051  0000              	GLOBAL _open_memstream
1052  0000              	GLOBAL _obstack_vprintf_callee
1053  0000              	GLOBAL _obstack_vprintf
1054  0000              	GLOBAL _obstack_printf
1055  0000              	GLOBAL _gets_fastcall
1056  0000              	GLOBAL _gets
1057  0000              	GLOBAL _getline_callee
1058  0000              	GLOBAL _getline
1059  0000              	GLOBAL _getdelim_callee
1060  0000              	GLOBAL _getdelim
1061  0000              	GLOBAL _getchar
1062  0000              	GLOBAL _getc_fastcall
1063  0000              	GLOBAL _getc
1064  0000              	GLOBAL _fwrite_callee
1065  0000              	GLOBAL _fwrite
1066  0000              	GLOBAL _funlockfile_fastcall
1067  0000              	GLOBAL _funlockfile
1068  0000              	GLOBAL _ftrylockfile_fastcall
1069  0000              	GLOBAL _ftrylockfile
1070  0000              	GLOBAL _ftell_fastcall
1071  0000              	GLOBAL _ftell
1072  0000              	GLOBAL _fsetpos_callee
1073  0000              	GLOBAL _fsetpos
1074  0000              	GLOBAL _fseek_callee
1075  0000              	GLOBAL _fseek
1076  0000              	GLOBAL _fscanf
1077  0000              	GLOBAL _freopen_callee
1078  0000              	GLOBAL _freopen
1079  0000              	GLOBAL _fread_callee
1080  0000              	GLOBAL _fread
1081  0000              	GLOBAL _fputs_callee
1082  0000              	GLOBAL _fputs
1083  0000              	GLOBAL _fputc_callee
1084  0000              	GLOBAL _fputc
1085  0000              	GLOBAL _fprintf
1086  0000              	GLOBAL _fopen_callee
1087  0000              	GLOBAL _fopen
1088  0000              	GLOBAL _fmemopen_callee
1089  0000              	GLOBAL _fmemopen
1090  0000              	GLOBAL _flockfile_fastcall
1091  0000              	GLOBAL _flockfile
1092  0000              	GLOBAL _fileno_fastcall
1093  0000              	GLOBAL _fileno
1094  0000              	GLOBAL _fgets_callee
1095  0000              	GLOBAL _fgets
1096  0000              	GLOBAL _fgetpos_callee
1097  0000              	GLOBAL _fgetpos
1098  0000              	GLOBAL _fgetc_fastcall
1099  0000              	GLOBAL _fgetc
1100  0000              	GLOBAL _fflush_fastcall
1101  0000              	GLOBAL _fflush
1102  0000              	GLOBAL _ferror_fastcall
1103  0000              	GLOBAL _ferror
1104  0000              	GLOBAL _feof_fastcall
1105  0000              	GLOBAL _feof
1106  0000              	GLOBAL _fdopen_callee
1107  0000              	GLOBAL _fdopen
1108  0000              	GLOBAL _fclose_fastcall
1109  0000              	GLOBAL _fclose
1110  0000              	GLOBAL _clearerr_fastcall
1111  0000              	GLOBAL _clearerr
1112  0000              	GLOBAL _asprintf
1113  0000              	GLOBAL __fmemopen__callee
1114  0000              	GLOBAL __fmemopen_
1115  0000              	GLOBAL _playerupdatefunctions
1116  0000              	GLOBAL _difficultlabels
1117  0000              	GLOBAL _monsterheadshootdirecionsy
1118  0000              	GLOBAL _monsterheadshootdirecionsx
1119  0000              	GLOBAL _imagepointers
1120  0000              	GLOBAL _spawners
1121  0000              	GLOBAL _stageinitdata
1122  0000              	GLOBAL _finishlabels
1123  0000              	GLOBAL _intro3labels
1124  0000              	GLOBAL _intro1labels
1125  0000              	GLOBAL _ww2plane_patterns
1126  0000              	GLOBAL _jukebox_names
1127  0000              	GLOBAL _jukebox_songs
1128  0000              	GLOBAL _selectornamestage
1129  0000              	GLOBAL _playershootspeedsy
1130  0000              	GLOBAL _playershootspeedsx
1131  0000              	GLOBAL __SMSlib_VDPFlags
1132  0000              	GLOBAL __SMSlib_SRAM
1133  0000              	GLOBAL _MM_FFFC
1134  0000              	GLOBAL _MM_FFFF
1135  0000              	GLOBAL _stderr
1136  0000              	GLOBAL _stdout
1137  0000              	GLOBAL _stdin
1138  0000              	GLOBAL __MAX_FOPEN
1139  0000              	GLOBAL _enemiesenergy
1140  0000              	GLOBAL _enemiesheight
1141  0000              	GLOBAL _enemieswidth
1142  0000              	GLOBAL _stage8bossbshootspeedy
1143  0000              	GLOBAL _stage8bossbshootspeedx
1144  0000              	GLOBAL _stage8bosscshootspeedy
1145  0000              	GLOBAL _stage8bosscshootspeedx
1146  0000              	GLOBAL _updatestage8bossbfunctions
1147  0000              	GLOBAL _updatestage8bossafunctions
1148  0000              	GLOBAL _updateintro3objectfunctions
1149  0000              	GLOBAL _checkcollisionfunctions
1150  0000              	GLOBAL _vulcanstationshootspeedy
1151  0000              	GLOBAL _vulcanstationshootspeedx
1152  0000              	GLOBAL _vulcantankshootspeedy
1153  0000              	GLOBAL _vulcantankshootspeedx
1154  0000              	GLOBAL _updatestage2endbossfunctions
1155  0000              	GLOBAL _updatespacestationfunctions
1156  0000              	GLOBAL _updatestage7middlebossfunctions
1157  0000              	GLOBAL _updatestage4endbossfunctions
1158  0000              	GLOBAL _updatestage4middlebossfunctions
1159  0000              	GLOBAL _updatestage3endbossfunctions
1160  0000              	GLOBAL _updatestage5endbossfunctions
1161  0000              	GLOBAL _updatestage6endbossfunctions
1162  0000              	GLOBAL _updatestagefunctions
1163  0000              	GLOBAL _initstagefunctions
1164  0000              	GLOBAL _Stage1MiddleBossBPatternY
1165  0000              	GLOBAL _Stage1MiddleBossBPatternX
1166  0000              	GLOBAL _stage6_fade_blue
1167  0000              	GLOBAL _stage6_fade_pink
1168  0000              	GLOBAL _stage3laservely
1169  0000              	GLOBAL _stage3laservelx
1170  0000              	GLOBAL _stage3enemylaserposy
1171  0000              	GLOBAL _stage3enemylaserposx
1172  0000              	GLOBAL _stage2endbossshootpatterny
1173  0000              	GLOBAL _stage2endbossshootpatternx
1174  0000              	GLOBAL _crossbmovingt
1175  0000              	GLOBAL _crossbmovingy
1176  0000              	GLOBAL _crossbmovingx
1177  0000              	GLOBAL _crossamovingt
1178  0000              	GLOBAL _crossamovingy
1179  0000              	GLOBAL _crossamovingx
1180  0000              	GLOBAL _aracmovingt
1181  0000              	GLOBAL _aracmovingy
1182  0000              	GLOBAL _aracmovingx
1183  0000              	GLOBAL _stage1_flashpalette
1184  0000              	GLOBAL _stage8animpalette
1185  0000              	GLOBAL _stage4_seapalette
1186  0000              	GLOBAL _stage4_stormpalette
1187  0000              	GLOBAL _palette_bin
1188  0000              	GLOBAL _skullbshootvely
1189  0000              	GLOBAL _skullbshootvelx
1190  0000              	GLOBAL _skullshootvely
1191  0000              	GLOBAL _skullshootvelx
1192  0000              	GLOBAL _stage8spriteslist
1193  0000              	GLOBAL _stage4spriteslist
1194  0000              	GLOBAL _stage5spriteslist
1195  0000              	GLOBAL _stage6spriteslist
1196  0000              	GLOBAL _stage7spriteslist
1197  0000              	GLOBAL _stage2spriteslist
1198  0000              	GLOBAL _stage1spriteslist
1199  0000              	GLOBAL _stage3spriteslist
1200  0000              	GLOBAL _imagebanks
1201  0000              	GLOBAL _imagebases
1202  0000              	GLOBAL _stage8_scrollers
1203  0000              	GLOBAL _stage6_scrollers
1204  0000              	GLOBAL _stage7_scrollers
1205  0000              	GLOBAL _stage3_scrollers
1206  0000              	GLOBAL _stage5_scrollers
1207  0000              	GLOBAL _stage2_scrollers
1208  0000              	GLOBAL _stage1_scrollers
1209  0000              	GLOBAL _stage4_scrollers
1210  0000              	GLOBAL _killenemyfunctions
1211  0000              	GLOBAL _updateenemyfunctions
1212  0000              	GLOBAL _initenemyfunctions
1213  0000              	GLOBAL _stage7_statics
1214  0000              	GLOBAL _stage3_statics
1215  0000              	GLOBAL _stage3scriptb
1216  0000              	GLOBAL _stage3script
1217  0000              	GLOBAL _stage6scriptb
1218  0000              	GLOBAL _stage6script
1219  0000              	GLOBAL _stage2_statics
1220  0000              	GLOBAL _stage1_statics
1221  0000              	GLOBAL _stage8_statics
1222  0000              	GLOBAL _stage5_statics
1223  0000              	GLOBAL _stage5scriptc
1224  0000              	GLOBAL _stage5scriptb
1225  0000              	GLOBAL _stage5script
1226  0000              	GLOBAL _stage4scriptc
1227  0000              	GLOBAL _stage4scriptb
1228  0000              	GLOBAL _stage4script
1229  0000              	GLOBAL _stagedatamarks
1230  0000              	GLOBAL _finishscript
1231  0000              	GLOBAL _intro3script
1232  0000              	GLOBAL _intro2script
1233  0000              	GLOBAL _intro4script
1234  0000              	GLOBAL _intro1script
1235  0000              	GLOBAL _ww2plane_pattern_f
1236  0000              	GLOBAL _ww2plane_pattern_e
1237  0000              	GLOBAL _ww2plane_pattern_d
1238  0000              	GLOBAL _ww2plane_pattern_c
1239  0000              	GLOBAL _ww2plane_pattern_b
1240  0000              	GLOBAL _ww2plane_pattern_a
1241  0000              	GLOBAL _ww2planemovementx
1242  0000              	GLOBAL _ww2planemovementy
1243  0000              	GLOBAL _jukebox_banks
1244  0000              	GLOBAL _jukebox_repeat
1245  0000              	GLOBAL _sinustable
1246  0000              	GLOBAL _selectormarkt
1247  0000              	GLOBAL _selectormarky
1248  0000              	GLOBAL _selectormarkx
1249  0000              	GLOBAL _selectorstatebasetiles
1250  0000              	GLOBAL _intro1_psg
1251  0000              	GLOBAL _vulcanstation_psgcompr
1252  0000              	GLOBAL _stage8tiles_psgcompr
1253  0000              	GLOBAL _stage8tilemap_m
1254  0000              	GLOBAL _stage8tilemap_l
1255  0000              	GLOBAL _stage8palette_bin
1256  0000              	GLOBAL _player_psgcompr
1257  0000              	GLOBAL _boss2_psg
1258  0000              	GLOBAL _stage8bossc_psgcompr
1259  0000              	GLOBAL _stage8bossb_psgcompr
1260  0000              	GLOBAL _stage8animtilescloudsmov_bin
1261  0000              	GLOBAL _stage8animtilesbmov_bin
1262  0000              	GLOBAL _stage8animtilesamov_bin
1263  0000              	GLOBAL _stage8_psg
1264  0000              	GLOBAL _skullb_psgcompr
1265  0000              	GLOBAL _monsterblob_psgcompr
1266  0000              	GLOBAL _introstage3tiles_psgcompr
1267  0000              	GLOBAL _introstage3tilemap_bin
1268  0000              	GLOBAL _flight_psg
1269  0000              	GLOBAL _escape_psg
1270  0000              	GLOBAL _boss_psg
1271  0000              	GLOBAL _stage7_psg
1272  0000              	GLOBAL _stage5_psg
1273  0000              	GLOBAL _spaceshooter_psgcompr
1274  0000              	GLOBAL _stage8lateral_psgcompr
1275  0000              	GLOBAL _stage3endboss_psgcompr
1276  0000              	GLOBAL _stage2_psg
1277  0000              	GLOBAL _stage1tiles_psgcompr
1278  0000              	GLOBAL _stage1tilemap_m
1279  0000              	GLOBAL _stage1tilemap_l
1280  0000              	GLOBAL _stage1palette_bin
1281  0000              	GLOBAL _spaceasteroidmedium_psgcompr
1282  0000              	GLOBAL _spaceasteroidlittle_psgcompr
1283  0000              	GLOBAL _spaceasteroidbig_psgcompr
1284  0000              	GLOBAL _spaceanimtiles_bin
1285  0000              	GLOBAL _skull_psgcompr
1286  0000              	GLOBAL _scrolltilestage1_bin
1287  0000              	GLOBAL _powerup_psgcompr
1288  0000              	GLOBAL _introstar_psgcompr
1289  0000              	GLOBAL _animtilestage1_bin
1290  0000              	GLOBAL _stage7tiles_psgcompr
1291  0000              	GLOBAL _stage7tilemap_m
1292  0000              	GLOBAL _stage7tilemap_l
1293  0000              	GLOBAL _stage7palette_bin
1294  0000              	GLOBAL _stage7middleboss_psgcompr
1295  0000              	GLOBAL _stage2endboss_psgcompr
1296  0000              	GLOBAL _stage1middleboss_psgcompr
1297  0000              	GLOBAL _stage1endboss_psgcompr
1298  0000              	GLOBAL _norefuge_psg
1299  0000              	GLOBAL _fortressphantom_psgcompr
1300  0000              	GLOBAL _firetiles_bin
1301  0000              	GLOBAL _afterboss_psg
1302  0000              	GLOBAL _stage7a_psg
1303  0000              	GLOBAL _stage4_psg
1304  0000              	GLOBAL _playershoot_psgcompr
1305  0000              	GLOBAL _introstage2tiles_psgcompr
1306  0000              	GLOBAL _introstage2tilemap_bin
1307  0000              	GLOBAL _introstage1tiles_psgcompr
1308  0000              	GLOBAL _introstage1tilemap_bin
1309  0000              	GLOBAL _gameover_psg
1310  0000              	GLOBAL _ww2tank_psgcompr
1311  0000              	GLOBAL _ww2plane_psgcompr
1312  0000              	GLOBAL _stage7animtilese_bin
1313  0000              	GLOBAL _stage7animtilesd_bin
1314  0000              	GLOBAL _stage7animtilesc_bin
1315  0000              	GLOBAL _stage7animtiles_bin
1316  0000              	GLOBAL _stage6_psg
1317  0000              	GLOBAL _stage5endboss_psgcompr
1318  0000              	GLOBAL _stage3tiles_psgcompr
1319  0000              	GLOBAL _stage3tilemap_m
1320  0000              	GLOBAL _stage3tilemap_l
1321  0000              	GLOBAL _stage3palette_bin
1322  0000              	GLOBAL _fortresswave_psgcompr
1323  0000              	GLOBAL _enemyshoot_psgcompr
1324  0000              	GLOBAL _cursors_psgcompr
1325  0000              	GLOBAL _bone_psgcompr
1326  0000              	GLOBAL _ww2cloud_psgcompr
1327  0000              	GLOBAL _watertiles_bin
1328  0000              	GLOBAL _turnship_psgcompr
1329  0000              	GLOBAL _stage6tiles_psgcompr
1330  0000              	GLOBAL _stage6tilemap_m
1331  0000              	GLOBAL _stage6tilemap_l
1332  0000              	GLOBAL _stage6palette_bin
1333  0000              	GLOBAL _stage5tiles_psgcompr
1334  0000              	GLOBAL _stage5tilemap_m
1335  0000              	GLOBAL _stage5tilemap_l
1336  0000              	GLOBAL _stage5palette_bin
1337  0000              	GLOBAL _spreadship_psgcompr
1338  0000              	GLOBAL _logo_psg
1339  0000              	GLOBAL _fortresscannon_psgcompr
1340  0000              	GLOBAL _bombship_psgcompr
1341  0000              	GLOBAL _ww2zeppelin_psgcompr
1342  0000              	GLOBAL _vulcanvulcan_psgcompr
1343  0000              	GLOBAL _vulcanlava_psgcompr
1344  0000              	GLOBAL _vulcanlaser_psgcompr
1345  0000              	GLOBAL _vulcanbird_psgcompr
1346  0000              	GLOBAL _stage7endboss_psgcompr
1347  0000              	GLOBAL _stage1_psg
1348  0000              	GLOBAL _monstermissil_psgcompr
1349  0000              	GLOBAL _monsterhead_psgcompr
1350  0000              	GLOBAL _littleexplosion_psgcompr
1351  0000              	GLOBAL _intro3_psg
1352  0000              	GLOBAL _waveship_psgcompr
1353  0000              	GLOBAL _warning_psgcompr
1354  0000              	GLOBAL _vulcantank_psgcompr
1355  0000              	GLOBAL _stage4tiles_psgcompr
1356  0000              	GLOBAL _stage4tilemap_m
1357  0000              	GLOBAL _stage4tilemap_l
1358  0000              	GLOBAL _stage4palette_bin
1359  0000              	GLOBAL _stage4middleboss_psgcompr
1360  0000              	GLOBAL _stage4endbossc_psgcompr
1361  0000              	GLOBAL _stage4endbossb_psgcompr
1362  0000              	GLOBAL _stage4endboss_psgcompr
1363  0000              	GLOBAL _stage3_psg
1364  0000              	GLOBAL _select_psg
1365  0000              	GLOBAL _rectship_psgcompr
1366  0000              	GLOBAL _introsideplayer_psgcompr
1367  0000              	GLOBAL _introovni_psgcompr
1368  0000              	GLOBAL _intro2_psg
1369  0000              	GLOBAL _endingstagetiles_psgcompr
1370  0000              	GLOBAL _endingstagetilemap_bin
1371  0000              	GLOBAL _ww2ship_psgcompr
1372  0000              	GLOBAL _stage2tiles_psgcompr
1373  0000              	GLOBAL _stage2tilemap_m
1374  0000              	GLOBAL _stage2tilemap_l
1375  0000              	GLOBAL _stage2palette_bin
1376  0000              	GLOBAL _spacestation_psgcompr
1377  0000              	GLOBAL _logotiles_psgcompr
1378  0000              	GLOBAL _logotilemap_m
1379  0000              	GLOBAL _logotilemap_l
1380  0000              	GLOBAL _logopalette_bin
1381  0000              	GLOBAL _fortresssearch_psgcompr
1382  0000              	GLOBAL _silence_psg
1383  0000              	GLOBAL _selectortiles_psgcompr
1384  0000              	GLOBAL _selectorpalette_bin
1385  0000              	GLOBAL _ray_psg
1386  0000              	GLOBAL _powerup_psg
1387  0000              	GLOBAL _playershoot_psg
1388  0000              	GLOBAL _personspalette_bin
1389  0000              	GLOBAL _persons_psgcompr
1390  0000              	GLOBAL _persons_bin
1391  0000              	GLOBAL _pause_psg
1392  0000              	GLOBAL _mikgamestiles_psgcompr
1393  0000              	GLOBAL _mikgamestilemap_bin
1394  0000              	GLOBAL _fortressdoor_psgcompr
1395  0000              	GLOBAL _font_psgcompr
1396  0000              	GLOBAL _explosion_psg
1397  0000              	GLOBAL _enemylaser_psg
1398  0000              	GLOBAL _enemybomb_psg
1399  0000              	GLOBAL _ending_psg
1400  0000              	GLOBAL _bigexplosion_psgcompr
1401  0000              ;--------------------------------------------------------
1402  0000              ; special function registers
1403  0000              ;--------------------------------------------------------
1404  0000              ;--------------------------------------------------------
1405  0000              ; ram data
1406  0000              ;--------------------------------------------------------
1407  0000              	SECTION bss_compiler
1408  0000              _keystatus:
1409  0000  00 00       	DEFS 2
1410  0002              _stageframe:
1411  0002  00 00       	DEFS 2
1412  0004              _stageframe2mod:
1413  0004  00          	DEFS 1
1414  0005              _stageframe4mod:
1415  0005  00          	DEFS 1
1416  0006              _sprite82anim:
1417  0006  00          	DEFS 1
1418  0007              _sprite164anim:
1419  0007  00          	DEFS 1
1420  0008              _basestage:
1421  0008  00          	DEFS 1
1422  0009              _playstage:
1423  0009  00          	DEFS 1
1424  000A              _updateplaystage:
1425  000A  00          	DEFS 1
1426  000B              _stagenum:
1427  000B  00          	DEFS 1
1428  000C              _laststagenum:
1429  000C  00          	DEFS 1
1430  000D              _numplayers:
1431  000D  00          	DEFS 1
1432  000E              _exitplaystage:
1433  000E  00          	DEFS 1
1434  000F              _gamelevel:
1435  000F  00          	DEFS 1
1436  0010              _gamestock:
1437  0010  00          	DEFS 1
1438  0011              _gamepause:
1439  0011  00          	DEFS 1
1440  0012              _playerx:
1441  0012  00          	DEFS 1
1442  0013              _playery:
1443  0013  00          	DEFS 1
1444  0014              _playertype:
1445  0014  00          	DEFS 1
1446  0015              _playercounter:
1447  0015  00          	DEFS 1
1448  0016              _playershootcounter:
1449  0016  00          	DEFS 1
1450  0017              _playerside:
1451  0017  00          	DEFS 1
1452  0018              _playerspeed:
1453  0018  00          	DEFS 1
1454  0019              _playershootlevel:
1455  0019  00          	DEFS 1
1456  001A              _playershootmax:
1457  001A  00          	DEFS 1
1458  001B              _numplayershoots:
1459  001B  00          	DEFS 1
1460  001C              _playershoots:
1461  001C  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
                        	DEFS 15
1462  002B              _shootcount:
1463  002B  00          	DEFS 1
1464  002C              _numenemyshoots:
1465  002C  00          	DEFS 1
1466  002D              _enemyshoots:
1467  002D  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      004D  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
                        	DEFS 50
1468  005F              _playstageshootspeed:
1469  005F  00          	DEFS 1
1470  0060              _numexplosions:
1471  0060  00          	DEFS 1
1472  0061              _explosions:
1473  0061  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      0081  00 00 00 00 00 00 00 00 
                        	DEFS 40
1474  0089              _numenemies:
1475  0089  00          	DEFS 1
1476  008A              _enemies:
1477  008A  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      00AA  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      00CA  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
                        	DEFS 90
1478  00E4              _maplines:
1479  00E4  00 00       	DEFS 2
1480  00E6              _maplineslength:
1481  00E6  00 00       	DEFS 2
1482  00E8              _maptiles:
1483  00E8  00 00       	DEFS 2
1484  00EA              _mappositionx:
1485  00EA  00 00       	DEFS 2
1486  00EC              _mappositiony:
1487  00EC  00 00       	DEFS 2
1488  00EE              _oldmappositiony:
1489  00EE  00 00       	DEFS 2
1490  00F0              _lastbank:
1491  00F0  00          	DEFS 1
1492  00F1              _mapstatics:
1493  00F1  00 00       	DEFS 2
1494  00F3              _mapstaticscount:
1495  00F3  00 00       	DEFS 2
1496  00F5              _mapstaticsbank:
1497  00F5  00          	DEFS 1
1498  00F6              _musicbank:
1499  00F6  00          	DEFS 1
1500  00F7              _mapbank:
1501  00F7  00          	DEFS 1
1502  00F8              _playstagebank:
1503  00F8  00          	DEFS 1
1504  00F9              _numscrolls:
1505  00F9  00          	DEFS 1
1506  00FA              _scrollactspeedy:
1507  00FA  00          	DEFS 1
1508  00FB              _scrollactspeedx:
1509  00FB  00          	DEFS 1
1510  00FC              _scrollact:
1511  00FC  00          	DEFS 1
1512  00FD              _scrolltimes:
1513  00FD  00 00       	DEFS 2
1514  00FF              _disablescroll:
1515  00FF  00          	DEFS 1
1516  0100              _scrolls:
1517  0100  00 00       	DEFS 2
1518  0102              _numscripts:
1519  0102  00          	DEFS 1
1520  0103              _scripts:
1521  0103  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
                        	DEFS 32
1522  0123              _numtimeredlabels:
1523  0123  00          	DEFS 1
1524  0124              _timeredlabels:
1525  0124  00 00 00 00 00 00 
                        	DEFS 6
1526  012A              _introstageposx:
1527  012A  00 00       	DEFS 2
1528  012C              _introstagevelx:
1529  012C  00 00       	DEFS 2
1530  012E              _dojukebox:
1531  012E  00          	DEFS 1
1532  012F              _spawnedexplosionposx:
1533  012F  00          	DEFS 1
1534  0130              _spawnedexplosionposy:
1535  0130  00          	DEFS 1
1536  0131              _spawnedexplosionwidth:
1537  0131  00          	DEFS 1
1538  0132              _spawnedexplosionheight:
1539  0132  00          	DEFS 1
1540  0133              _spawnedexplosiontime:
1541  0133  00          	DEFS 1
1542  0134              _stage4playrays:
1543  0134  00          	DEFS 1
1544  0135              _numinterrupts:
1545  0135  00          	DEFS 1
1546  0136              _powerupx:
1547  0136  00          	DEFS 1
1548  0137              _powerupy:
1549  0137  00          	DEFS 1
1550  0138              _powerupt:
1551  0138  00          	DEFS 1
1552  0139              _powerupv:
1553  0139  00          	DEFS 1
1554  013A              _powerupcounter:
1555  013A  00 00       	DEFS 2
1556  013C              _lastplayedmusic:
1557  013C  00 00       	DEFS 2
1558  013E              _lastplayedmusicbank:
1559  013E  00          	DEFS 1
1560  013F              _lastplayedmusiclooped:
1561  013F  00          	DEFS 1
1562  0140              _stage8phase:
1563  0140  00          	DEFS 1
1564  0141              _barromtime:
1565  0141  00          	DEFS 1
1566  0142              _stage3stars:
1567  0142  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
                        	DEFS 18
1568  0154              _jukeboxselectedline:
1569  0154  00          	DEFS 1
1570  0155              _jukeboxselectedsong:
1571  0155  00          	DEFS 1
1572  0156              _jukeboxcheckkey:
1573  0156  00          	DEFS 1
1574  0157              _stage1musicreplayed:
1575  0157  00          	DEFS 1
1576  0158              ;--------------------------------------------------------
1577  0158              ; ram data
1578  0158              ;--------------------------------------------------------
1579  0158              
1580  0158              IF 0
1581  0158              
1582  0158              ; .area _INITIALIZED removed by z88dk
1583  0158              
1584  0158              _state:
1585  0158              	DEFS 4
1586  0158              _barromx:
1587  0158              	DEFS 12
1588  0158              _barromy:
1589  0158              	DEFS 12
1590  0158              
1591  0158              ENDIF
1592  0158              
1593  0158              ;--------------------------------------------------------
1594  0158              ; absolute external ram data
1595  0158              ;--------------------------------------------------------
1596  0158              	SECTION IGNORE
1597  0000              ;--------------------------------------------------------
1598  0000              ; global & static initialisations
1599  0000              ;--------------------------------------------------------
1600  0000              	SECTION code_crt_init
1601  0000              ;--------------------------------------------------------
1602  0000              ; Home
1603  0000              ;--------------------------------------------------------
1604  0000              	SECTION IGNORE
1605  0000              ;--------------------------------------------------------
1606  0000              ; code
1607  0000              ;--------------------------------------------------------
1608  0000              	SECTION code_compiler
1609  0000              ;	---------------------------------
1610  0000              ; Function myRand
1611  0000              ; ---------------------------------
1612  0000              _myRand:
1613  0000  2A 02 00    	ld	hl,(_state + 2)
1614  0003  E5          	push	hl
1615  0004  2A 00 00    	ld	hl,(_state)
1616  0007  E5          	push	hl
1617  0008  21 19 00    	ld	hl,0x0019
1618  000B  E5          	push	hl
1619  000C  21 0D 66    	ld	hl,0x660d
1620  000F  E5          	push	hl
1621  0010  CD 00 00    	call	__mullong_callee
1622  0013  01 5F F3    	ld	bc,0xf35f
1623  0016  09          	add	hl,bc
1624  0017  22 00 00    	ld	(_state),hl
1625  001A  21 6E 3C    	ld	hl,0x3c6e
1626  001D  ED 5A       	adc	hl,de
1627  001F  22 02 00    	ld	(_state + 2),hl
1628  0022  21 03 00    	ld	hl,_state + 1 + 2
1629  0025  6E          	ld	l, (hl)
1630  0026  C9          	ret
1631  0027              	SECTION code_compiler
1632  0027              ;	---------------------------------
1633  0027              ; Function changeBank
1634  0027              ; ---------------------------------
1635  0027              _changeBank:
1636  0027  DD E5       	push	ix
1637  0029  DD 21 00 00 	ld	ix,0
1638  002D  DD 39       	add	ix,sp
1639  002F  DD 7E 04    	ld	a,(ix+4)
1640  0032  21 F0 00    	ld	hl,_lastbank
1641  0035  96          	sub	a, (hl)
1642  0036  28 0B       	jr	Z,l_changeBank_00103
1643  0038  DD 4E 04    	ld	c,(ix+4)
1644  003B  21 00 00    	ld	hl,_MM_FFFF
1645  003E  71          	ld	(hl),c
1646  003F  21 F0 00    	ld	hl,_lastbank
1647  0042  71          	ld	(hl),c
1648  0043              l_changeBank_00103:
1649  0043  DD E1       	pop	ix
1650  0045  C9          	ret
1651  0046              	SECTION code_compiler
1652  0046              ;	---------------------------------
1653  0046              ; Function DrawSpriteArray
1654  0046              ; ---------------------------------
1655  0046              _DrawSpriteArray:
1656  0046  DD E5       	push	ix
1657  0048  DD 21 00 00 	ld	ix,0
1658  004C  DD 39       	add	ix,sp
1659  004E  F5          	push	af
1660  004F  0E 00       	ld	c,0x00
1661  0051              l_DrawSpriteArray_00107:
1662  0051  79          	ld	a,c
1663  0052  DD 96 09    	sub	a,(ix+9)
1664  0055  30 4B       	jr	NC,l_DrawSpriteArray_00109
1665  0057  DD 7E 07    	ld	a,(ix+7)
1666  005A  81          	add	a, c
1667  005B  47          	ld	b,a
1668  005C  DD 7E 04    	ld	a,(ix+4)
1669  005F  DD 77 FE    	ld	(ix-2),a
1670  0062  DD 7E 05    	ld	a,(ix+5)
1671  0065  DD 77 FF    	ld	(ix-1),a
1672  0068  1E 00       	ld	e,0x00
1673  006A              l_DrawSpriteArray_00104:
1674  006A  7B          	ld	a,e
1675  006B  DD 96 08    	sub	a,(ix+8)
1676  006E  30 20       	jr	NC,l_DrawSpriteArray_00115
1677  0070  DD 56 FE    	ld	d,(ix-2)
1678  0073  DD 34 FE    	inc	(ix-2)
1679  0076  20 03       	jr	NZ,l_DrawSpriteArray_00129
1680  0078  DD 34 FF    	inc	(ix-1)
1681  007B              l_DrawSpriteArray_00129:
1682  007B  DD 7E 06    	ld	a,(ix+6)
1683  007E  83          	add	a, e
1684  007F  C5          	push	bc
1685  0080  D5          	push	de
1686  0081  58          	ld	e,b
1687  0082  D5          	push	de
1688  0083  F5          	push	af
1689  0084  33          	inc	sp
1690  0085  CD 00 00    	call	_SMS_addSprite_callee
1691  0088  D1          	pop	de
1692  0089  C1          	pop	bc
1693  008A  7B          	ld	a,e
1694  008B  C6 08       	add	a,0x08
1695  008D  5F          	ld	e,a
1696  008E  18 DA       	jr	l_DrawSpriteArray_00104
1697  0090              l_DrawSpriteArray_00115:
1698  0090  DD 7E FE    	ld	a,(ix-2)
1699  0093  DD 77 04    	ld	(ix+4),a
1700  0096  DD 7E FF    	ld	a,(ix-1)
1701  0099  DD 77 05    	ld	(ix+5),a
1702  009C  79          	ld	a,c
1703  009D  C6 08       	add	a,0x08
1704  009F  4F          	ld	c,a
1705  00A0  18 AF       	jr	l_DrawSpriteArray_00107
1706  00A2              l_DrawSpriteArray_00109:
1707  00A2  DD F9       	ld	sp, ix
1708  00A4  DD E1       	pop	ix
1709  00A6  C9          	ret
1710  00A7              	SECTION code_compiler
1711  00A7              ;	---------------------------------
1712  00A7              ; Function DrawQuadSprite
1713  00A7              ; ---------------------------------
1714  00A7              _DrawQuadSprite:
1715  00A7  DD E5       	push	ix
1716  00A9  DD 21 00 00 	ld	ix,0
1717  00AD  DD 39       	add	ix,sp
1718  00AF  DD 4E 06    	ld	c,(ix+6)
1719  00B2  C5          	push	bc
1720  00B3  79          	ld	a,c
1721  00B4  F5          	push	af
1722  00B5  33          	inc	sp
1723  00B6  DD 66 05    	ld	h,(ix+5)
1724  00B9  DD 6E 04    	ld	l,(ix+4)
1725  00BC  E5          	push	hl
1726  00BD  CD 00 00    	call	_SMS_addSprite_callee
1727  00C0  C1          	pop	bc
1728  00C1  51          	ld	d,c
1729  00C2  14          	inc	d
1730  00C3  DD 7E 04    	ld	a,(ix+4)
1731  00C6  C6 08       	add	a,0x08
1732  00C8  47          	ld	b,a
1733  00C9  C5          	push	bc
1734  00CA  D5          	push	de
1735  00CB  33          	inc	sp
1736  00CC  DD 7E 05    	ld	a,(ix+5)
1737  00CF  48          	ld	c,b
1738  00D0  47          	ld	b,a
1739  00D1  C5          	push	bc
1740  00D2  CD 00 00    	call	_SMS_addSprite_callee
1741  00D5  C1          	pop	bc
1742  00D6  59          	ld	e,c
1743  00D7  1C          	inc	e
1744  00D8  1C          	inc	e
1745  00D9  DD 7E 05    	ld	a,(ix+5)
1746  00DC  C6 08       	add	a,0x08
1747  00DE  57          	ld	d,a
1748  00DF  C5          	push	bc
1749  00E0  D5          	push	de
1750  00E1  7B          	ld	a,e
1751  00E2  5A          	ld	e,d
1752  00E3  57          	ld	d,a
1753  00E4  D5          	push	de
1754  00E5  DD 7E 04    	ld	a,(ix+4)
1755  00E8  F5          	push	af
1756  00E9  33          	inc	sp
1757  00EA  CD 00 00    	call	_SMS_addSprite_callee
1758  00ED  D1          	pop	de
1759  00EE  C1          	pop	bc
1760  00EF  61          	ld	h,c
1761  00F0  24          	inc	h
1762  00F1  24          	inc	h
1763  00F2  24          	inc	h
1764  00F3  E5          	push	hl
1765  00F4  33          	inc	sp
1766  00F5  58          	ld	e,b
1767  00F6  D5          	push	de
1768  00F7  CD 00 00    	call	_SMS_addSprite_callee
1769  00FA  DD E1       	pop	ix
1770  00FC  C9          	ret
1771  00FD              	SECTION code_compiler
1772  00FD              ;	---------------------------------
1773  00FD              ; Function LoadSprite
1774  00FD              ; ---------------------------------
1775  00FD              _LoadSprite:
1776  00FD  DD E5       	push	ix
1777  00FF  DD 21 00 00 	ld	ix,0
1778  0103  DD 39       	add	ix,sp
1779  0105  DD 7E 08    	ld	a,(ix+8)
1780  0108  F5          	push	af
1781  0109  33          	inc	sp
1782  010A  CD 27 00    	call	_changeBank
1783  010D  33          	inc	sp
1784  010E  DD 4E 04    	ld	c,(ix+4)
1785  0111  DD 46 05    	ld	b,(ix+5)
1786  0114  DD 6E 06    	ld	l,(ix+6)
1787  0117  DD 66 07    	ld	h,(ix+7)
1788  011A  E5          	push	hl
1789  011B  C5          	push	bc
1790  011C  CD 00 00    	call	_SMS_loadPSGaidencompressedTiles_callee
1791  011F  3E 0F       	ld	a,0x0f
1792  0121  F5          	push	af
1793  0122  33          	inc	sp
1794  0123  CD 27 00    	call	_changeBank
1795  0126  33          	inc	sp
1796  0127  DD E1       	pop	ix
1797  0129  C9          	ret
1798  012A              	SECTION code_compiler
1799  012A              ;	---------------------------------
1800  012A              ; Function LoadTiles
1801  012A              ; ---------------------------------
1802  012A              _LoadTiles:
1803  012A  DD E5       	push	ix
1804  012C  DD 21 00 00 	ld	ix,0
1805  0130  DD 39       	add	ix,sp
1806  0132  DD 7E 06    	ld	a,(ix+6)
1807  0135  F5          	push	af
1808  0136  33          	inc	sp
1809  0137  CD 27 00    	call	_changeBank
1810  013A  33          	inc	sp
1811  013B  DD 4E 04    	ld	c,(ix+4)
1812  013E  DD 46 05    	ld	b,(ix+5)
1813  0141  21 00 00    	ld	hl,0x0000
1814  0144  E5          	push	hl
1815  0145  C5          	push	bc
1816  0146  CD 00 00    	call	_SMS_loadPSGaidencompressedTiles_callee
1817  0149  DD E1       	pop	ix
1818  014B  C9          	ret
1819  014C              	SECTION code_compiler
1820  014C              ;	---------------------------------
1821  014C              ; Function LoadGraphics
1822  014C              ; ---------------------------------
1823  014C              _LoadGraphics:
1824  014C  DD E5       	push	ix
1825  014E  DD 21 00 00 	ld	ix,0
1826  0152  DD 39       	add	ix,sp
1827  0154  DD 7E 0A    	ld	a,(ix+10)
1828  0157  F5          	push	af
1829  0158  33          	inc	sp
1830  0159  DD 6E 04    	ld	l,(ix+4)
1831  015C  DD 66 05    	ld	h,(ix+5)
1832  015F  E5          	push	hl
1833  0160  CD 2A 01    	call	_LoadTiles
1834  0163  F1          	pop	af
1835  0164  33          	inc	sp
1836  0165  DD 4E 06    	ld	c,(ix+6)
1837  0168  DD 46 07    	ld	b,(ix+7)
1838  016B  DD 6E 08    	ld	l,(ix+8)
1839  016E  DD 66 09    	ld	h,(ix+9)
1840  0171  E5          	push	hl
1841  0172  C5          	push	bc
1842  0173  21 00 00    	ld	hl,0x0000
1843  0176  E5          	push	hl
1844  0177  CD 00 00    	call	_SMS_loadTileMap_callee
1845  017A  DD E1       	pop	ix
1846  017C  C9          	ret
1847  017D              	SECTION code_compiler
1848  017D              ;	---------------------------------
1849  017D              ; Function LoadBGPalette
1850  017D              ; ---------------------------------
1851  017D              _LoadBGPalette:
1852  017D  DD E5       	push	ix
1853  017F  DD 21 00 00 	ld	ix,0
1854  0183  DD 39       	add	ix,sp
1855  0185  DD 7E 06    	ld	a,(ix+6)
1856  0188  F5          	push	af
1857  0189  33          	inc	sp
1858  018A  CD 27 00    	call	_changeBank
1859  018D  33          	inc	sp
1860  018E  DD 6E 04    	ld	l,(ix+4)
1861  0191  DD 66 05    	ld	h,(ix+5)
1862  0194  DD E1       	pop	ix
1863  0196  C3 00 00    	jp	_SMS_loadBGPalette_fastcall
1864  0199              	SECTION code_compiler
1865  0199              ;	---------------------------------
1866  0199              ; Function LoadSpritePalette
1867  0199              ; ---------------------------------
1868  0199              _LoadSpritePalette:
1869  0199  3E 0F       	ld	a,0x0f
1870  019B  F5          	push	af
1871  019C  33          	inc	sp
1872  019D  CD 27 00    	call	_changeBank
1873  01A0  33          	inc	sp
1874  01A1  21 00 00    	ld	hl,_palette_bin
1875  01A4  C3 00 00    	jp  _SMS_loadSpritePalette_fastcall
1876  01A7              	SECTION code_compiler
1877  01A7              ;	---------------------------------
1878  01A7              ; Function InterruptHandler
1879  01A7              ; ---------------------------------
1880  01A7              _InterruptHandler:
1881  01A7  21 35 01    	ld	hl,_numinterrupts
1882  01AA  34          	inc	(hl)
1883  01AB  C9          	ret
1884  01AC              	SECTION code_compiler
1885  01AC              ;	---------------------------------
1886  01AC              ; Function InitConsole
1887  01AC              ; ---------------------------------
1888  01AC              _InitConsole:
1889  01AC  CD 00 00    	call	_SMS_init
1890  01AF  CD 00 00    	call	_SMS_getKeysStatus
1891  01B2  21 A7 01    	ld	hl,_InterruptHandler
1892  01B5  CD 00 00    	call	_SMS_setLineInterruptHandler_fastcall
1893  01B8  2E C0       	ld	l,0xc0
1894  01BA  CD 00 00    	call	_SMS_setLineCounter_fastcall
1895  01BD  21 10 00    	ld	hl,0x0010
1896  01C0  CD 00 00    	call	_SMS_VDPturnOnFeature_fastcall
1897  01C3  21 20 00    	ld	hl,0x0020
1898  01C6  C3 00 00    	jp  _SMS_VDPturnOnFeature_fastcall
1899  01C9              	SECTION code_compiler
1900  01C9              ;	---------------------------------
1901  01C9              ; Function fillBackground
1902  01C9              ; ---------------------------------
1903  01C9              _fillBackground:
1904  01C9  21 00 78    	ld	hl,0x7800
1905  01CC  CF          	rst	 0x08  ; call __RST08_SMS_crt0_RST08
1906  01CD  01 00 00    	ld	bc,0x0000
1907  01D0              l_fillBackground_00102:
1908  01D0  21 00 00    	ld	hl,0x0000
1909  01D3  DF          	rst	 0x18  ; call __RST18_SMS_crt0_RST18
1910  01D4  03          	inc	bc
1911  01D5  79          	ld	a,c
1912  01D6  D6 80       	sub	a,0x80
1913  01D8  78          	ld	a,b
1914  01D9  DE 03       	sbc	a,0x03
1915  01DB  38 F3       	jr	C,l_fillBackground_00102
1916  01DD  C9          	ret
1917  01DE              	SECTION code_compiler
1918  01DE              ;	---------------------------------
1919  01DE              ; Function ClearScreen
1920  01DE              ; ---------------------------------
1921  01DE              _ClearScreen:
1922  01DE  CD 00 00    	call	_SMS_initSprites
1923  01E1  CD 00 00    	call	_SMS_finalizeSprites
1924  01E4  CD 00 00    	call	_SMS_copySpritestoSAT
1925  01E7  CD C9 01    	call	_fillBackground
1926  01EA  2E 00       	ld	l,0x00
1927  01EC  C3 00 00    	jp  _SMS_setBackdropColor_fastcall
1928  01EF              	SECTION code_compiler
1929  01EF              ;	---------------------------------
1930  01EF              ; Function UpdateScroll
1931  01EF              ; ---------------------------------
1932  01EF              _UpdateScroll:
1933  01EF  DD E5       	push	ix
1934  01F1  DD 21 00 00 	ld	ix,0
1935  01F5  DD 39       	add	ix,sp
1936  01F7  DD 6E 04    	ld	l,(ix+4)
1937  01FA  CD 00 00    	call	_SMS_setBGScrollX_fastcall
1938  01FD  DD 6E 06    	ld	l,(ix+6)
1939  0200  DD E1       	pop	ix
1940  0202  C3 00 00    	jp	_SMS_setBGScrollY_fastcall
1941  0205              	SECTION code_compiler
1942  0205              ;	---------------------------------
1943  0205              ; Function WriteText
1944  0205              ; ---------------------------------
1945  0205              _WriteText:
1946  0205  DD E5       	push	ix
1947  0207  DD 21 00 00 	ld	ix,0
1948  020B  DD 39       	add	ix,sp
1949  020D  DD 6E 07    	ld	l,(ix+7)
1950  0210  AF          	xor	a,a
1951  0211  67          	ld	h,a
1952  0212  CB 3C       	srl	h
1953  0214  CB 1D       	rr	l
1954  0216  1F          	rra
1955  0217  CB 3C       	srl	h
1956  0219  CB 1D       	rr	l
1957  021B  1F          	rra
1958  021C  65          	ld	h,l
1959  021D  6F          	ld	l,a
1960  021E  7C          	ld	a,h
1961  021F  F6 78       	or	a,0x78
1962  0221  4D          	ld	c,l
1963  0222  47          	ld	b,a
1964  0223  DD 6E 06    	ld	l,(ix+6)
1965  0226  16 00       	ld	d,0x00
1966  0228  62          	ld	h, d
1967  0229  29          	add	hl, hl
1968  022A  7D          	ld	a,l
1969  022B  B1          	or	a, c
1970  022C  6F          	ld	l,a
1971  022D  7C          	ld	a,h
1972  022E  B0          	or	a, b
1973  022F  67          	ld	h,a
1974  0230  CF          	rst	 0x08  ; call __RST08_SMS_crt0_RST08
1975  0231  01 00 00    	ld	bc,0x0000
1976  0234              l_WriteText_00104:
1977  0234  DD 6E 04    	ld	l,(ix+4)
1978  0237  DD 66 05    	ld	h,(ix+5)
1979  023A  09          	add	hl,bc
1980  023B  7E          	ld	a,(hl)
1981  023C  6F          	ld	l,a
1982  023D  EB          	ex	de,hl
1983  023E  B7          	or	a,a
1984  023F  28 1D       	jr	Z,l_WriteText_00107
1985  0241  FE 20       	cp	a,0x20
1986  0243  38 EF       	jr	C,l_WriteText_00104
1987  0245  D6 60       	sub	a,0x60
1988  0247  30 EB       	jr	NC,l_WriteText_00104
1989  0249  59          	ld	e, c
1990  024A  50          	ld	d, b
1991  024B  03          	inc	bc
1992  024C  DD 6E 04    	ld	l,(ix+4)
1993  024F  DD 66 05    	ld	h,(ix+5)
1994  0252  19          	add	hl,de
1995  0253  6E          	ld	l, (hl)
1996  0254  26 00       	ld	h,0x00
1997  0256  EB          	ex	de,hl
1998  0257  21 9F 00    	ld	hl,0x009f
1999  025A  19          	add	hl,de
2000  025B  DF          	rst	 0x18  ; call __RST18_SMS_crt0_RST18
2001  025C  18 D6       	jr	l_WriteText_00104
2002  025E              l_WriteText_00107:
2003  025E  DD E1       	pop	ix
2004  0260  C9          	ret
2005  0261              	SECTION code_compiler
2006  0261              ;	---------------------------------
2007  0261              ; Function WriteNumber
2008  0261              ; ---------------------------------
2009  0261              _WriteNumber:
2010  0261  DD E5       	push	ix
2011  0263  DD 21 00 00 	ld	ix,0
2012  0267  DD 39       	add	ix,sp
2013  0269  3B          	dec	sp
2014  026A  DD 4E 06    	ld	c,(ix+6)
2015  026D  DD 7E 08    	ld	a,(ix+8)
2016  0270  81          	add	a, c
2017  0271  DD 77 08    	ld	(ix+8),a
2018  0274  DD 77 FF    	ld	(ix-1),a
2019  0277  DD 5E 06    	ld	e,(ix+6)
2020  027A  DD 56 07    	ld	d,(ix+7)
2021  027D              l_WriteNumber_00101:
2022  027D  4B          	ld	c, e
2023  027E  42          	ld	b, d
2024  027F  1B          	dec	de
2025  0280  78          	ld	a,b
2026  0281  B1          	or	a,c
2027  0282  28 53       	jr	Z,l_WriteNumber_00104
2028  0284  DD 6E 09    	ld	l,(ix+9)
2029  0287  AF          	xor	a,a
2030  0288  67          	ld	h,a
2031  0289  CB 3C       	srl	h
2032  028B  CB 1D       	rr	l
2033  028D  1F          	rra
2034  028E  CB 3C       	srl	h
2035  0290  CB 1D       	rr	l
2036  0292  1F          	rra
2037  0293  65          	ld	h,l
2038  0294  6F          	ld	l,a
2039  0295  7C          	ld	a,h
2040  0296  F6 78       	or	a,0x78
2041  0298  4D          	ld	c,l
2042  0299  47          	ld	b,a
2043  029A  DD 6E FF    	ld	l,(ix-1)
2044  029D  DD 35 FF    	dec	(ix-1)
2045  02A0  26 00       	ld	h,0x00
2046  02A2  29          	add	hl, hl
2047  02A3  7D          	ld	a,l
2048  02A4  B1          	or	a, c
2049  02A5  6F          	ld	l,a
2050  02A6  7C          	ld	a,h
2051  02A7  B0          	or	a, b
2052  02A8  67          	ld	h,a
2053  02A9  CF          	rst	 0x08  ; call __RST08_SMS_crt0_RST08
2054  02AA  D5          	push	de
2055  02AB  21 0A 00    	ld	hl,0x000a
2056  02AE  E5          	push	hl
2057  02AF  DD 6E 04    	ld	l,(ix+4)
2058  02B2  DD 66 05    	ld	h,(ix+5)
2059  02B5  E5          	push	hl
2060  02B6  CD 00 00    	call	__moduint_callee
2061  02B9  D1          	pop	de
2062  02BA  01 CF 00    	ld	bc,0x00cf
2063  02BD  09          	add	hl,bc
2064  02BE  DF          	rst	 0x18  ; call __RST18_SMS_crt0_RST18
2065  02BF  D5          	push	de
2066  02C0  21 0A 00    	ld	hl,0x000a
2067  02C3  E5          	push	hl
2068  02C4  DD 6E 04    	ld	l,(ix+4)
2069  02C7  DD 66 05    	ld	h,(ix+5)
2070  02CA  E5          	push	hl
2071  02CB  CD 00 00    	call	__divuint_callee
2072  02CE  D1          	pop	de
2073  02CF  DD 75 04    	ld	(ix+4),l
2074  02D2  DD 74 05    	ld	(ix+5),h
2075  02D5  18 A6       	jr	l_WriteNumber_00101
2076  02D7              l_WriteNumber_00104:
2077  02D7  33          	inc	sp
2078  02D8  DD E1       	pop	ix
2079  02DA  C9          	ret
2080  02DB              	SECTION code_compiler
2081  02DB              ;	---------------------------------
2082  02DB              ; Function ClearTiles
2083  02DB              ; ---------------------------------
2084  02DB              _ClearTiles:
2085  02DB  21 00 20    	ld	hl,0x2000
2086  02DE  E5          	push	hl
2087  02DF  AF          	xor	a, a
2088  02E0  F5          	push	af
2089  02E1  33          	inc	sp
2090  02E2  26 00       	ld	h,0x00
2091  02E4  E5          	push	hl
2092  02E5  CD 00 00    	call	_SMS_VRAMmemset_callee
2093  02E8  C9          	ret
2094  02E9              	SECTION code_compiler
2095  02E9              ;	---------------------------------
2096  02E9              ; Function LoadFont
2097  02E9              ; ---------------------------------
2098  02E9              _LoadFont:
2099  02E9  3E 02       	ld	a,0x02
2100  02EB  F5          	push	af
2101  02EC  33          	inc	sp
2102  02ED  CD 27 00    	call	_changeBank
2103  02F0  33          	inc	sp
2104  02F1  21 C0 00    	ld	hl,0x00c0
2105  02F4  E5          	push	hl
2106  02F5  21 00 00    	ld	hl,_font_psgcompr
2107  02F8  E5          	push	hl
2108  02F9  CD 00 00    	call	_SMS_loadPSGaidencompressedTiles_callee
2109  02FC  C9          	ret
2110  02FD              	SECTION code_compiler
2111  02FD              ;	---------------------------------
2112  02FD              ; Function InitStage
2113  02FD              ; ---------------------------------
2114  02FD              _InitStage:
2115  02FD  CD 00 00    	call	_PSGStop
2116  0300  CD 00 00    	call	_PSGSFXStop
2117  0303  CD 00 00    	call	_SMS_resetPauseRequest
2118  0306  21 00 00    	ld	hl,0x0000
2119  0309  22 02 00    	ld	(_stageframe),hl
2120  030C  CD DE 01    	call	_ClearScreen
2121  030F  CD DB 02    	call	_ClearTiles
2122  0312  CD E9 02    	call	_LoadFont
2123  0315  21 00 00    	ld	hl,0x0000
2124  0318  E5          	push	hl
2125  0319  2E 00       	ld	l,0x00
2126  031B  E5          	push	hl
2127  031C  CD EF 01    	call	_UpdateScroll
2128  031F  F1          	pop	af
2129  0320  F1          	pop	af
2130  0321  CD 99 01    	call	_LoadSpritePalette
2131  0324  21 40 01    	ld	hl,0x0140
2132  0327  CD 00 00    	call	_SMS_VDPturnOnFeature_fastcall
2133  032A  21 0A 00    	ld	hl,_updateplaystage
2134  032D  36 00       	ld	(hl),0x00
2135  032F  21 35 01    	ld	hl,_numinterrupts
2136  0332  36 00       	ld	(hl),0x00
2137  0334  C9          	ret
2138  0335              	SECTION code_compiler
2139  0335              ;	---------------------------------
2140  0335              ; Function checkgamepause
2141  0335              ; ---------------------------------
2142  0335              _checkgamepause:
2143  0335  CD 00 00    	call	_SMS_queryPauseRequested
2144  0338  7D          	ld	a,l
2145  0339  B7          	or	a, a
2146  033A  28 2D       	jr	Z,l_checkgamepause_00106
2147  033C  CD 00 00    	call	_SMS_resetPauseRequest
2148  033F  3E 01       	ld	a,0x01
2149  0341  21 11 00    	ld	hl,_gamepause
2150  0344  96          	sub	a, (hl)
2151  0345  77          	ld	(hl),a
2152  0346  3D          	dec	a
2153  0347  20 0F       	jr	NZ,l_checkgamepause_00102
2154  0349  21 02 00    	ld	hl,0x0002
2155  034C  E5          	push	hl
2156  034D  21 00 00    	ld	hl,_pause_psg
2157  0350  E5          	push	hl
2158  0351  CD 16 04    	call	_PlayMusic
2159  0354  F1          	pop	af
2160  0355  F1          	pop	af
2161  0356  18 11       	jr	l_checkgamepause_00106
2162  0358              l_checkgamepause_00102:
2163  0358  2A 3E 01    	ld	hl,(_lastplayedmusiclooped - 1)
2164  035B  3A 3E 01    	ld	a,(_lastplayedmusicbank)
2165  035E  6F          	ld	l,a
2166  035F  E5          	push	hl
2167  0360  2A 3C 01    	ld	hl,(_lastplayedmusic)
2168  0363  E5          	push	hl
2169  0364  CD 16 04    	call	_PlayMusic
2170  0367  F1          	pop	af
2171  0368  F1          	pop	af
2172  0369              l_checkgamepause_00106:
2173  0369  C9          	ret
2174  036A              	SECTION code_compiler
2175  036A              ;	---------------------------------
2176  036A              ; Function UpdateStage
2177  036A              ; ---------------------------------
2178  036A              _UpdateStage:
2179  036A  21 02 00    	ld	hl,_stageframe
2180  036D  34          	inc	(hl)
2181  036E  20 02       	jr	NZ,l_UpdateStage_00128
2182  0370  23          	inc	hl
2183  0371  34          	inc	(hl)
2184  0372              l_UpdateStage_00128:
2185  0372  3A 02 00    	ld	a,(_stageframe)
2186  0375  E6 01       	and	a,0x01
2187  0377  32 04 00    	ld	(_stageframe2mod),a
2188  037A  3A 02 00    	ld	a,(_stageframe)
2189  037D  E6 03       	and	a,0x03
2190  037F  32 05 00    	ld	(_stageframe4mod),a
2191  0382  ED 4B 02 00 	ld	bc,(_stageframe)
2192  0386  CB 38       	srl	b
2193  0388  CB 19       	rr	c
2194  038A  79          	ld	a,c
2195  038B  E6 01       	and	a,0x01
2196  038D  32 06 00    	ld	(_sprite82anim),a
2197  0390  ED 4B 02 00 	ld	bc,(_stageframe)
2198  0394  79          	ld	a,c
2199  0395  CB 38       	srl	b
2200  0397  1F          	rra
2201  0398  CB 38       	srl	b
2202  039A  1F          	rra
2203  039B  CB 38       	srl	b
2204  039D  1F          	rra
2205  039E  E6 03       	and	a,0x03
2206  03A0  87          	add	a, a
2207  03A1  87          	add	a, a
2208  03A2  32 07 00    	ld	(_sprite164anim),a
2209  03A5  D6 0C       	sub	a,0x0c
2210  03A7  20 05       	jr	NZ,l_UpdateStage_00102
2211  03A9  21 07 00    	ld	hl,_sprite164anim
2212  03AC  36 04       	ld	(hl),0x04
2213  03AE              l_UpdateStage_00102:
2214  03AE  3A 04 00    	ld	a,(_stageframe2mod)
2215  03B1  B7          	or	a, a
2216  03B2  20 1C       	jr	NZ,l_UpdateStage_00108
2217  03B4  CD 00 00    	call	_SMS_waitForVBlank
2218  03B7  21 35 01    	ld	hl,_numinterrupts
2219  03BA  36 00       	ld	(hl),0x00
2220  03BC  CD 00 00    	call	_SMS_finalizeSprites
2221  03BF  CD 00 00    	call	_UNSAFE_SMS_copySpritestoSAT
2222  03C2  CD 00 00    	call	_SMS_initSprites
2223  03C5  3A 0A 00    	ld	a,(_updateplaystage)
2224  03C8  3D          	dec	a
2225  03C9  20 0E       	jr	NZ,l_UpdateStage_00109
2226  03CB  CD 09 6A    	call	_UpdatePlayStage
2227  03CE  18 09       	jr	l_UpdateStage_00109
2228  03D0              l_UpdateStage_00108:
2229  03D0  3A 35 01    	ld	a,(_numinterrupts)
2230  03D3  B7          	or	a, a
2231  03D4  20 03       	jr	NZ,l_UpdateStage_00109
2232  03D6  CD 00 00    	call	_SMS_waitForVBlank
2233  03D9              l_UpdateStage_00109:
2234  03D9  CD 00 00    	call	_SMS_getKeysStatus
2235  03DC  22 00 00    	ld	(_keystatus),hl
2236  03DF  C9          	ret
2237  03E0              	SECTION code_compiler
2238  03E0              ;	---------------------------------
2239  03E0              ; Function PlaySound
2240  03E0              ; ---------------------------------
2241  03E0              _PlaySound:
2242  03E0  DD E5       	push	ix
2243  03E2  DD 21 00 00 	ld	ix,0
2244  03E6  DD 39       	add	ix,sp
2245  03E8  DD 7E 06    	ld	a,(ix+6)
2246  03EB  3D          	dec	a
2247  03EC  28 07       	jr	Z,l_PlaySound_00101
2248  03EE  CD 00 00    	call	_PSGSFXGetStatus
2249  03F1  7D          	ld	a,l
2250  03F2  B7          	or	a, a
2251  03F3  20 1E       	jr	NZ,l_PlaySound_00104
2252  03F5              l_PlaySound_00101:
2253  03F5  3E 02       	ld	a,0x02
2254  03F7  F5          	push	af
2255  03F8  33          	inc	sp
2256  03F9  CD 27 00    	call	_changeBank
2257  03FC  33          	inc	sp
2258  03FD  DD 4E 04    	ld	c,(ix+4)
2259  0400  DD 46 05    	ld	b,(ix+5)
2260  0403  3E 02       	ld	a,0x02
2261  0405  F5          	push	af
2262  0406  33          	inc	sp
2263  0407  C5          	push	bc
2264  0408  CD 00 00    	call	_PSGSFXPlay_callee
2265  040B  3E 0F       	ld	a,0x0f
2266  040D  F5          	push	af
2267  040E  33          	inc	sp
2268  040F  CD 27 00    	call	_changeBank
2269  0412  33          	inc	sp
2270  0413              l_PlaySound_00104:
2271  0413  DD E1       	pop	ix
2272  0415  C9          	ret
2273  0416              	SECTION code_compiler
2274  0416              ;	---------------------------------
2275  0416              ; Function PlayMusic
2276  0416              ; ---------------------------------
2277  0416              _PlayMusic:
2278  0416  DD E5       	push	ix
2279  0418  DD 21 00 00 	ld	ix,0
2280  041C  DD 39       	add	ix,sp
2281  041E  DD 4E 06    	ld	c,(ix+6)
2282  0421  21 F6 00    	ld	hl,_musicbank
2283  0424  71          	ld	(hl),c
2284  0425  79          	ld	a,c
2285  0426  C5          	push	bc
2286  0427  F5          	push	af
2287  0428  33          	inc	sp
2288  0429  CD 27 00    	call	_changeBank
2289  042C  33          	inc	sp
2290  042D  C1          	pop	bc
2291  042E  DD 46 04    	ld	b,(ix+4)
2292  0431  DD 5E 05    	ld	e,(ix+5)
2293  0434  DD 7E 07    	ld	a,(ix+7)
2294  0437  3D          	dec	a
2295  0438  20 07       	jr	NZ,l_PlayMusic_00102
2296  043A  68          	ld	l, b
2297  043B  63          	ld	h, e
2298  043C  CD 00 00    	call	_PSGPlay_fastcall
2299  043F  18 05       	jr	l_PlayMusic_00103
2300  0441              l_PlayMusic_00102:
2301  0441  68          	ld	l, b
2302  0442  63          	ld	h, e
2303  0443  CD 00 00    	call	_PSGPlayNoRepeat_fastcall
2304  0446              l_PlayMusic_00103:
2305  0446  DD 7E 04    	ld	a,(ix+4)
2306  0449  D6 00       	sub	a, +((_pause_psg) & 0xFF)
2307  044B  20 07       	jr	NZ,l_PlayMusic_00123
2308  044D  DD 7E 05    	ld	a,(ix+5)
2309  0450  D6 00       	sub	a, +((_pause_psg) / 256)
2310  0452  28 18       	jr	Z,l_PlayMusic_00105
2311  0454              l_PlayMusic_00123:
2312  0454  79          	ld	a,c
2313  0455  D6 02       	sub	a,0x02
2314  0457  28 13       	jr	Z,l_PlayMusic_00105
2315  0459  DD 6E 04    	ld	l,(ix+4)
2316  045C  DD 66 05    	ld	h,(ix+5)
2317  045F  22 3C 01    	ld	(_lastplayedmusic),hl
2318  0462  21 3E 01    	ld	hl,_lastplayedmusicbank
2319  0465  71          	ld	(hl),c
2320  0466  DD 7E 07    	ld	a,(ix+7)
2321  0469  32 3F 01    	ld	(_lastplayedmusiclooped),a
2322  046C              l_PlayMusic_00105:
2323  046C  3E 0F       	ld	a,0x0f
2324  046E  F5          	push	af
2325  046F  33          	inc	sp
2326  0470  CD 27 00    	call	_changeBank
2327  0473  33          	inc	sp
2328  0474  DD E1       	pop	ix
2329  0476  C9          	ret
2330  0477              	SECTION code_compiler
2331  0477              ;	---------------------------------
2332  0477              ; Function UpdatePSG
2333  0477              ; ---------------------------------
2334  0477              _UpdatePSG:
2335  0477  3A F6 00    	ld	a,(_musicbank)
2336  047A  B7          	or	a, a
2337  047B  28 09       	jr	Z,l_UpdatePSG_00102
2338  047D  F5          	push	af
2339  047E  33          	inc	sp
2340  047F  CD 27 00    	call	_changeBank
2341  0482  33          	inc	sp
2342  0483  CD 00 00    	call	_PSGFrame
2343  0486              l_UpdatePSG_00102:
2344  0486  CD 00 00    	call	_PSGSFXGetStatus
2345  0489  7D          	ld	a,l
2346  048A  B7          	or	a, a
2347  048B  C8          	ret	Z
2348  048C  3E 02       	ld	a,0x02
2349  048E  F5          	push	af
2350  048F  33          	inc	sp
2351  0490  CD 27 00    	call	_changeBank
2352  0493  33          	inc	sp
2353  0494  C3 00 00    	jp  _PSGSFXFrame
2354  0497              	SECTION code_compiler
2355  0497              ;	---------------------------------
2356  0497              ; Function ClearTimeredLabelLine
2357  0497              ; ---------------------------------
2358  0497              _ClearTimeredLabelLine:
2359  0497  DD E5       	push	ix
2360  0499  DD 21 00 00 	ld	ix,0
2361  049D  DD 39       	add	ix,sp
2362  049F  DD 6E 04    	ld	l,(ix+4)
2363  04A2  AF          	xor	a,a
2364  04A3  67          	ld	h,a
2365  04A4  CB 3C       	srl	h
2366  04A6  CB 1D       	rr	l
2367  04A8  1F          	rra
2368  04A9  CB 3C       	srl	h
2369  04AB  CB 1D       	rr	l
2370  04AD  1F          	rra
2371  04AE  65          	ld	h,l
2372  04AF  6F          	ld	l,a
2373  04B0  7C          	ld	a,h
2374  04B1  F6 78       	or	a,0x78
2375  04B3  67          	ld	h,a
2376  04B4  CF          	rst	 0x08  ; call __RST08_SMS_crt0_RST08
2377  04B5  0E 00       	ld	c,0x00
2378  04B7              l_ClearTimeredLabelLine_00103:
2379  04B7  79          	ld	a,c
2380  04B8  D6 20       	sub	a,0x20
2381  04BA  30 07       	jr	NC,l_ClearTimeredLabelLine_00105
2382  04BC  21 00 00    	ld	hl,0x0000
2383  04BF  DF          	rst	 0x18  ; call __RST18_SMS_crt0_RST18
2384  04C0  0C          	inc	c
2385  04C1  18 F4       	jr	l_ClearTimeredLabelLine_00103
2386  04C3              l_ClearTimeredLabelLine_00105:
2387  04C3  DD E1       	pop	ix
2388  04C5  C9          	ret
2389  04C6              	SECTION code_compiler
2390  04C6              ;	---------------------------------
2391  04C6              ; Function RemoveTimeredLabel
2392  04C6              ; ---------------------------------
2393  04C6              _RemoveTimeredLabel:
2394  04C6  DD E5       	push	ix
2395  04C8  DD 21 00 00 	ld	ix,0
2396  04CC  DD 39       	add	ix,sp
2397  04CE  F5          	push	af
2398  04CF  DD 7E 04    	ld	a,(ix+4)
2399  04D2  DD 77 FE    	ld	(ix-2),a
2400  04D5  17          	rla
2401  04D6  9F          	sbc	a, a
2402  04D7  DD 77 FF    	ld	(ix-1),a
2403  04DA  E1          	pop	hl
2404  04DB  E5          	push	hl
2405  04DC  29          	add	hl, hl
2406  04DD  11 24 01    	ld	de,_timeredlabels
2407  04E0  19          	add	hl,de
2408  04E1  56          	ld	d,(hl)
2409  04E2  E5          	push	hl
2410  04E3  D5          	push	de
2411  04E4  33          	inc	sp
2412  04E5  CD 97 04    	call	_ClearTimeredLabelLine
2413  04E8  33          	inc	sp
2414  04E9  C1          	pop	bc
2415  04EA  3A 23 01    	ld	a,(_numtimeredlabels)
2416  04ED  5F          	ld	e,a
2417  04EE  16 00       	ld	d,0x00
2418  04F0  1B          	dec	de
2419  04F1  DD 7E FE    	ld	a,(ix-2)
2420  04F4  93          	sub	a, e
2421  04F5  DD 7E FF    	ld	a,(ix-1)
2422  04F8  9A          	sbc	a, d
2423  04F9  E2 FE 04    	jp	PO, l_RemoveTimeredLabel_00109
2424  04FC  EE 80       	xor	a,0x80
2425  04FE              l_RemoveTimeredLabel_00109:
2426  04FE  F2 15 05    	jp	P,l_RemoveTimeredLabel_00102
2427  0501  2A 23 01    	ld	hl,(_numtimeredlabels)
2428  0504  2D          	dec	l
2429  0505  26 00       	ld	h,0x00
2430  0507  29          	add	hl, hl
2431  0508  11 24 01    	ld	de,_timeredlabels
2432  050B  19          	add	hl,de
2433  050C  5D          	ld	e, l
2434  050D  54          	ld	d, h
2435  050E  1A          	ld	a,(de)
2436  050F  02          	ld	(bc),a
2437  0510  03          	inc	bc
2438  0511  EB          	ex	de,hl
2439  0512  23          	inc	hl
2440  0513  7E          	ld	a,(hl)
2441  0514  02          	ld	(bc),a
2442  0515              l_RemoveTimeredLabel_00102:
2443  0515  21 23 01    	ld	hl,_numtimeredlabels
2444  0518  35          	dec	(hl)
2445  0519  DD F9       	ld	sp, ix
2446  051B  DD E1       	pop	ix
2447  051D  C9          	ret
2448  051E              	SECTION code_compiler
2449  051E              ;	---------------------------------
2450  051E              ; Function UpdateTimeredLabel
2451  051E              ; ---------------------------------
2452  051E              _UpdateTimeredLabel:
2453  051E  DD E5       	push	ix
2454  0520  DD 21 00 00 	ld	ix,0
2455  0524  DD 39       	add	ix,sp
2456  0526  DD 4E 04    	ld	c,(ix+4)
2457  0529  79          	ld	a,c
2458  052A  17          	rla
2459  052B  9F          	sbc	a, a
2460  052C  69          	ld	l,c
2461  052D  67          	ld	h,a
2462  052E  29          	add	hl, hl
2463  052F  11 24 01    	ld	de,_timeredlabels
2464  0532  19          	add	hl,de
2465  0533  23          	inc	hl
2466  0534  4E          	ld	c,(hl)
2467  0535  0D          	dec	c
2468  0536  71          	ld	(hl),c
2469  0537  79          	ld	a,c
2470  0538  B7          	or	a, a
2471  0539  20 09       	jr	NZ,l_UpdateTimeredLabel_00103
2472  053B  DD 7E 04    	ld	a,(ix+4)
2473  053E  F5          	push	af
2474  053F  33          	inc	sp
2475  0540  CD C6 04    	call	_RemoveTimeredLabel
2476  0543  33          	inc	sp
2477  0544              l_UpdateTimeredLabel_00103:
2478  0544  DD E1       	pop	ix
2479  0546  C9          	ret
2480  0547              	SECTION code_compiler
2481  0547              ;	---------------------------------
2482  0547              ; Function UpdateTimeredLabels
2483  0547              ; ---------------------------------
2484  0547              _UpdateTimeredLabels:
2485  0547  21 23 01    	ld	hl,_numtimeredlabels
2486  054A  7E          	ld	a,(hl)
2487  054B  B7          	or	a, a
2488  054C  28 10       	jr	Z,l_UpdateTimeredLabels_00107
2489  054E  46          	ld	b,(hl)
2490  054F  05          	dec	b
2491  0550              l_UpdateTimeredLabels_00105:
2492  0550  CB 78       	bit	7, b
2493  0552  C0          	ret	NZ
2494  0553  C5          	push	bc
2495  0554  C5          	push	bc
2496  0555  33          	inc	sp
2497  0556  CD 1E 05    	call	_UpdateTimeredLabel
2498  0559  33          	inc	sp
2499  055A  C1          	pop	bc
2500  055B  05          	dec	b
2501  055C  18 F2       	jr	l_UpdateTimeredLabels_00105
2502  055E              l_UpdateTimeredLabels_00107:
2503  055E  C9          	ret
2504  055F              	SECTION code_compiler
2505  055F              ;	---------------------------------
2506  055F              ; Function InitTimeredLabel
2507  055F              ; ---------------------------------
2508  055F              _InitTimeredLabel:
2509  055F  DD E5       	push	ix
2510  0561  DD 21 00 00 	ld	ix,0
2511  0565  DD 39       	add	ix,sp
2512  0567  21 23 01    	ld	hl,_numtimeredlabels
2513  056A  7E          	ld	a,(hl)
2514  056B  D6 03       	sub	a,0x03
2515  056D  30 41       	jr	NC,l_InitTimeredLabel_00103
2516  056F  01 24 01    	ld	bc,_timeredlabels+0
2517  0572  6E          	ld	l,(hl)
2518  0573  26 00       	ld	h,0x00
2519  0575  29          	add	hl, hl
2520  0576  09          	add	hl,bc
2521  0577  DD 7E 06    	ld	a,(ix+6)
2522  057A  77          	ld	(hl),a
2523  057B  23          	inc	hl
2524  057C  DD 7E 07    	ld	a,(ix+7)
2525  057F  77          	ld	(hl),a
2526  0580  21 23 01    	ld	hl,_numtimeredlabels
2527  0583  34          	inc	(hl)
2528  0584  DD 7E 06    	ld	a,(ix+6)
2529  0587  F5          	push	af
2530  0588  33          	inc	sp
2531  0589  CD 97 04    	call	_ClearTimeredLabelLine
2532  058C  33          	inc	sp
2533  058D  DD 6E 04    	ld	l,(ix+4)
2534  0590  DD 66 05    	ld	h,(ix+5)
2535  0593  CD 00 00    	call	_strlen_fastcall
2536  0596  CB 3C       	srl	h
2537  0598  CB 1D       	rr	l
2538  059A  3E 10       	ld	a,0x10
2539  059C  95          	sub	a,l
2540  059D  47          	ld	b,a
2541  059E  DD 7E 06    	ld	a,(ix+6)
2542  05A1  48          	ld	c,b
2543  05A2  47          	ld	b,a
2544  05A3  C5          	push	bc
2545  05A4  DD 6E 04    	ld	l,(ix+4)
2546  05A7  DD 66 05    	ld	h,(ix+5)
2547  05AA  E5          	push	hl
2548  05AB  CD 05 02    	call	_WriteText
2549  05AE  F1          	pop	af
2550  05AF  F1          	pop	af
2551  05B0              l_InitTimeredLabel_00103:
2552  05B0  DD E1       	pop	ix
2553  05B2  C9          	ret
2554  05B3              	SECTION code_compiler
2555  05B3              ;	---------------------------------
2556  05B3              ; Function InitTimeredLabels
2557  05B3              ; ---------------------------------
2558  05B3              _InitTimeredLabels:
2559  05B3  21 23 01    	ld	hl,_numtimeredlabels
2560  05B6  36 00       	ld	(hl),0x00
2561  05B8  C9          	ret
2562  05B9              	SECTION code_compiler
2563  05B9              ;	---------------------------------
2564  05B9              ; Function getTileAt
2565  05B9              ; ---------------------------------
2566  05B9              _getTileAt:
2567  05B9  DD E5       	push	ix
2568  05BB  DD 21 00 00 	ld	ix,0
2569  05BF  DD 39       	add	ix,sp
2570  05C1  3A F7 00    	ld	a,(_mapbank)
2571  05C4  F5          	push	af
2572  05C5  33          	inc	sp
2573  05C6  CD 27 00    	call	_changeBank
2574  05C9  33          	inc	sp
2575  05CA  ED 4B EC 00 	ld	bc,(_mappositiony)
2576  05CE  CB 28       	sra	b
2577  05D0  CB 19       	rr	c
2578  05D2  CB 28       	sra	b
2579  05D4  CB 19       	rr	c
2580  05D6  DD 5E 05    	ld	e,(ix+5)
2581  05D9  16 00       	ld	d,0x00
2582  05DB  69          	ld	l, c
2583  05DC  60          	ld	h, b
2584  05DD  19          	add	hl,de
2585  05DE  7D          	ld	a,l
2586  05DF  44          	ld	b,h
2587  05E0  CB 28       	sra	b
2588  05E2  1F          	rra
2589  05E3  CB 28       	sra	b
2590  05E5  1F          	rra
2591  05E6  CB 28       	sra	b
2592  05E8  1F          	rra
2593  05E9  4F          	ld	c,a
2594  05EA  2A E4 00    	ld	hl,(_maplines)
2595  05ED  09          	add	hl,bc
2596  05EE  6E          	ld	l, (hl)
2597  05EF  AF          	xor	a,a
2598  05F0  67          	ld	h,a
2599  05F1  CB 3C       	srl	h
2600  05F3  CB 1D       	rr	l
2601  05F5  1F          	rra
2602  05F6  CB 3C       	srl	h
2603  05F8  CB 1D       	rr	l
2604  05FA  1F          	rra
2605  05FB  65          	ld	h,l
2606  05FC  6F          	ld	l,a
2607  05FD  DD 7E 04    	ld	a,(ix+4)
2608  0600  4D          	ld	c,l
2609  0601  44          	ld	b,h
2610  0602  0F          	rrca
2611  0603  0F          	rrca
2612  0604  0F          	rrca
2613  0605  E6 1F       	and	a,0x1f
2614  0607  6F          	ld	l,a
2615  0608  26 00       	ld	h,0x00
2616  060A  29          	add	hl, hl
2617  060B  09          	add	hl,bc
2618  060C  ED 4B E8 00 	ld	bc,(_maptiles)
2619  0610  09          	add	hl,bc
2620  0611  44          	ld	b,h
2621  0612  4E          	ld	c, (hl)
2622  0613  C5          	push	bc
2623  0614  3E 0F       	ld	a,0x0f
2624  0616  F5          	push	af
2625  0617  33          	inc	sp
2626  0618  CD 27 00    	call	_changeBank
2627  061B  33          	inc	sp
2628  061C  C1          	pop	bc
2629  061D  69          	ld	l,c
2630  061E  DD E1       	pop	ix
2631  0620  C9          	ret
2632  0621              	SECTION code_compiler
2633  0621              ;	---------------------------------
2634  0621              ; Function SetMapLines
2635  0621              ; ---------------------------------
2636  0621              _SetMapLines:
2637  0621  DD E5       	push	ix
2638  0623  DD 21 00 00 	ld	ix,0
2639  0627  DD 39       	add	ix,sp
2640  0629  DD 6E 04    	ld	l,(ix+4)
2641  062C  DD 66 05    	ld	h,(ix+5)
2642  062F  22 E4 00    	ld	(_maplines),hl
2643  0632  DD 6E 06    	ld	l,(ix+6)
2644  0635  DD 66 07    	ld	h,(ix+7)
2645  0638  22 E6 00    	ld	(_maplineslength),hl
2646  063B  DD 6E 08    	ld	l,(ix+8)
2647  063E  DD 66 09    	ld	h,(ix+9)
2648  0641  22 E8 00    	ld	(_maptiles),hl
2649  0644  DD E1       	pop	ix
2650  0646  C9          	ret
2651  0647              	SECTION code_compiler
2652  0647              ;	---------------------------------
2653  0647              ; Function SetStaticEnemies
2654  0647              ; ---------------------------------
2655  0647              _SetStaticEnemies:
2656  0647  DD E5       	push	ix
2657  0649  DD 21 00 00 	ld	ix,0
2658  064D  DD 39       	add	ix,sp
2659  064F  DD 6E 04    	ld	l,(ix+4)
2660  0652  DD 66 05    	ld	h,(ix+5)
2661  0655  22 F1 00    	ld	(_mapstatics),hl
2662  0658  DD 7E 06    	ld	a,(ix+6)
2663  065B  32 F5 00    	ld	(_mapstaticsbank),a
2664  065E  21 00 00    	ld	hl,0x0000
2665  0661  22 F3 00    	ld	(_mapstaticscount),hl
2666  0664  DD E1       	pop	ix
2667  0666  C9          	ret
2668  0667              	SECTION code_compiler
2669  0667              ;	---------------------------------
2670  0667              ; Function DrawMap
2671  0667              ; ---------------------------------
2672  0667              _DrawMap:
2673  0667  DD E5       	push	ix
2674  0669  DD 21 00 00 	ld	ix,0
2675  066D  DD 39       	add	ix,sp
2676  066F  F5          	push	af
2677  0670  3B          	dec	sp
2678  0671  ED 4B EC 00 	ld	bc,(_mappositiony)
2679  0675  79          	ld	a,c
2680  0676  CB 28       	sra	b
2681  0678  1F          	rra
2682  0679  CB 28       	sra	b
2683  067B  1F          	rra
2684  067C  CB 28       	sra	b
2685  067E  1F          	rra
2686  067F  CB 28       	sra	b
2687  0681  1F          	rra
2688  0682  CB 28       	sra	b
2689  0684  1F          	rra
2690  0685  4F          	ld	c,a
2691  0686  3A F7 00    	ld	a,(_mapbank)
2692  0689  C5          	push	bc
2693  068A  F5          	push	af
2694  068B  33          	inc	sp
2695  068C  CD 27 00    	call	_changeBank
2696  068F  33          	inc	sp
2697  0690  C1          	pop	bc
2698  0691  21 00 00    	ld	hl,0x0000
2699  0694  E3          	ex	(sp), hl
2700  0695              l_DrawMap_00103:
2701  0695  DD 7E FD    	ld	a,(ix-3)
2702  0698  D6 1C       	sub	a,0x1c
2703  069A  DD 7E FE    	ld	a,(ix-2)
2704  069D  17          	rla
2705  069E  3F          	ccf
2706  069F  1F          	rra
2707  06A0  DE 80       	sbc	a,0x80
2708  06A2  30 48       	jr	NC,l_DrawMap_00101
2709  06A4  E1          	pop	hl
2710  06A5  E5          	push	hl
2711  06A6  09          	add	hl,bc
2712  06A7  EB          	ex	de,hl
2713  06A8  2A E6 00    	ld	hl,(_maplineslength)
2714  06AB  C5          	push	bc
2715  06AC  E5          	push	hl
2716  06AD  D5          	push	de
2717  06AE  CD 00 00    	call	__moduint_callee
2718  06B1  EB          	ex	de,hl
2719  06B2  C1          	pop	bc
2720  06B3  2A E4 00    	ld	hl,(_maplines)
2721  06B6  19          	add	hl,de
2722  06B7  6E          	ld	l, (hl)
2723  06B8  AF          	xor	a,a
2724  06B9  67          	ld	h,a
2725  06BA  CB 3C       	srl	h
2726  06BC  CB 1D       	rr	l
2727  06BE  1F          	rra
2728  06BF  CB 3C       	srl	h
2729  06C1  CB 1D       	rr	l
2730  06C3  1F          	rra
2731  06C4  65          	ld	h,l
2732  06C5  6F          	ld	l,a
2733  06C6  EB          	ex	de,hl
2734  06C7  2A E8 00    	ld	hl,(_maptiles)
2735  06CA  19          	add	hl,de
2736  06CB  EB          	ex	de,hl
2737  06CC  DD 7E FD    	ld	a,(ix-3)
2738  06CF  DD 77 FF    	ld	(ix-1),a
2739  06D2  C5          	push	bc
2740  06D3  21 40 00    	ld	hl,0x0040
2741  06D6  E5          	push	hl
2742  06D7  D5          	push	de
2743  06D8  DD 66 FF    	ld	h,(ix-1)
2744  06DB  AF          	xor	a,a
2745  06DC  6F          	ld	l,a
2746  06DD  E5          	push	hl
2747  06DE  CD 00 00    	call	_SMS_loadTileMap_callee
2748  06E1  C1          	pop	bc
2749  06E2  DD 34 FD    	inc	(ix-3)
2750  06E5  20 AE       	jr	NZ,l_DrawMap_00103
2751  06E7  DD 34 FE    	inc	(ix-2)
2752  06EA  18 A9       	jr	l_DrawMap_00103
2753  06EC              l_DrawMap_00101:
2754  06EC  2A EC 00    	ld	hl,(_mappositiony)
2755  06EF  22 EE 00    	ld	(_oldmappositiony),hl
2756  06F2  2E 00       	ld	l,0x00
2757  06F4  CD 00 00    	call	_SMS_setBGScrollX_fastcall
2758  06F7  2E 00       	ld	l,0x00
2759  06F9  CD 00 00    	call	_SMS_setBGScrollY_fastcall
2760  06FC  DD F9       	ld	sp, ix
2761  06FE  DD E1       	pop	ix
2762  0700  C9          	ret
2763  0701              	SECTION code_compiler
2764  0701              ;	---------------------------------
2765  0701              ; Function InitMap
2766  0701              ; ---------------------------------
2767  0701              _InitMap:
2768  0701  DD E5       	push	ix
2769  0703  DD 21 00 00 	ld	ix,0
2770  0707  DD 39       	add	ix,sp
2771  0709  21 00 00    	ld	hl,0x0000
2772  070C  22 EA 00    	ld	(_mappositionx),hl
2773  070F  2A E6 00    	ld	hl,(_maplineslength)
2774  0712  29          	add	hl,hl
2775  0713  29          	add	hl,hl
2776  0714  29          	add	hl,hl
2777  0715  29          	add	hl,hl
2778  0716  29          	add	hl,hl
2779  0717  01 80 FC    	ld	bc,0xfc80
2780  071A  09          	add	hl,bc
2781  071B  22 EC 00    	ld	(_mappositiony),hl
2782  071E  DD 7E 04    	ld	a,(ix+4)
2783  0721  32 F7 00    	ld	(_mapbank),a
2784  0724  21 00 00    	ld	hl,0x0000
2785  0727  22 F1 00    	ld	(_mapstatics),hl
2786  072A  DD E1       	pop	ix
2787  072C  C3 67 06    	jp	_DrawMap
2788  072F              	SECTION code_compiler
2789  072F              ;	---------------------------------
2790  072F              ; Function MoveMap
2791  072F              ; ---------------------------------
2792  072F              _MoveMap:
2793  072F  DD E5       	push	ix
2794  0731  DD 21 00 00 	ld	ix,0
2795  0735  DD 39       	add	ix,sp
2796  0737  F5          	push	af
2797  0738  F5          	push	af
2798  0739  DD 4E 04    	ld	c,(ix+4)
2799  073C  DD 46 05    	ld	b,(ix+5)
2800  073F  2A EA 00    	ld	hl,(_mappositionx)
2801  0742  09          	add	hl,bc
2802  0743  22 EA 00    	ld	(_mappositionx),hl
2803  0746  2A EC 00    	ld	hl,(_mappositiony)
2804  0749  DD 5E 06    	ld	e,(ix+6)
2805  074C  DD 56 07    	ld	d,(ix+7)
2806  074F  19          	add	hl,de
2807  0750  22 EC 00    	ld	(_mappositiony),hl
2808  0753  CB 3C       	srl	h
2809  0755  CB 1D       	rr	l
2810  0757  CB 3C       	srl	h
2811  0759  CB 1D       	rr	l
2812  075B  EB          	ex	de,hl
2813  075C  4B          	ld	c, e
2814  075D  42          	ld	b, d
2815  075E  79          	ld	a,c
2816  075F  CB 38       	srl	b
2817  0761  1F          	rra
2818  0762  CB 38       	srl	b
2819  0764  1F          	rra
2820  0765  CB 38       	srl	b
2821  0767  1F          	rra
2822  0768  4F          	ld	c,a
2823  0769  C5          	push	bc
2824  076A  21 E0 00    	ld	hl,0x00e0
2825  076D  E5          	push	hl
2826  076E  D5          	push	de
2827  076F  CD 00 00    	call	__moduint_callee
2828  0772  DD 74 FF    	ld	(ix-1),h
2829  0775  DD 75 FE    	ld	(ix-2),l
2830  0778  C1          	pop	bc
2831  0779  ED 5B EA 00 	ld	de,(_mappositionx)
2832  077D  CB 3A       	srl	d
2833  077F  CB 1B       	rr	e
2834  0781  CB 3A       	srl	d
2835  0783  CB 1B       	rr	e
2836  0785  16 00       	ld	d,0x00
2837  0787  C5          	push	bc
2838  0788  DD 6E FE    	ld	l,(ix-2)
2839  078B  DD 66 FF    	ld	h,(ix-1)
2840  078E  E5          	push	hl
2841  078F  D5          	push	de
2842  0790  CD EF 01    	call	_UpdateScroll
2843  0793  F1          	pop	af
2844  0794  F1          	pop	af
2845  0795  C1          	pop	bc
2846  0796  2A EE 00    	ld	hl,(_oldmappositiony)
2847  0799  29          	add	hl,hl
2848  079A  9F          	sbc	a,a
2849  079B  29          	add	hl,hl
2850  079C  17          	rla
2851  079D  29          	add	hl,hl
2852  079E  17          	rla
2853  079F  5C          	ld	e,h
2854  07A0  57          	ld	d,a
2855  07A1  79          	ld	a,c
2856  07A2  93          	sub	a, e
2857  07A3  20 05       	jr	NZ,l_MoveMap_00122
2858  07A5  78          	ld	a,b
2859  07A6  92          	sub	a, d
2860  07A7  CA 5C 08    	jp	Z,l_MoveMap_00107
2861  07AA              l_MoveMap_00122:
2862  07AA  3A F7 00    	ld	a,(_mapbank)
2863  07AD  C5          	push	bc
2864  07AE  F5          	push	af
2865  07AF  33          	inc	sp
2866  07B0  CD 27 00    	call	_changeBank
2867  07B3  33          	inc	sp
2868  07B4  C1          	pop	bc
2869  07B5  2A E6 00    	ld	hl,(_maplineslength)
2870  07B8  E5          	push	hl
2871  07B9  C5          	push	bc
2872  07BA  CD 00 00    	call	__moduint_callee
2873  07BD  4D          	ld	c,l
2874  07BE  44          	ld	b,h
2875  07BF  E1          	pop	hl
2876  07C0  2A E4 00    	ld	hl,(_maplines)
2877  07C3  C5          	push	bc
2878  07C4  DD 4E FC    	ld	c,(ix-4)
2879  07C7  DD 46 FD    	ld	b,(ix-3)
2880  07CA  09          	add	hl,bc
2881  07CB  6E          	ld	l, (hl)
2882  07CC  AF          	xor	a,a
2883  07CD  67          	ld	h,a
2884  07CE  CB 3C       	srl	h
2885  07D0  CB 1D       	rr	l
2886  07D2  1F          	rra
2887  07D3  CB 3C       	srl	h
2888  07D5  CB 1D       	rr	l
2889  07D7  1F          	rra
2890  07D8  65          	ld	h,l
2891  07D9  6F          	ld	l,a
2892  07DA  ED 4B E8 00 	ld	bc,(_maptiles)
2893  07DE  09          	add	hl,bc
2894  07DF  EB          	ex	de,hl
2895  07E0  DD 4E FF    	ld	c,(ix-1)
2896  07E3  DD 7E FE    	ld	a,(ix-2)
2897  07E6  CB 39       	srl	c
2898  07E8  1F          	rra
2899  07E9  CB 39       	srl	c
2900  07EB  1F          	rra
2901  07EC  CB 39       	srl	c
2902  07EE  1F          	rra
2903  07EF  47          	ld	b,a
2904  07F0  21 40 00    	ld	hl,0x0040
2905  07F3  E5          	push	hl
2906  07F4  D5          	push	de
2907  07F5  C5          	push	bc
2908  07F6  33          	inc	sp
2909  07F7  AF          	xor	a, a
2910  07F8  F5          	push	af
2911  07F9  33          	inc	sp
2912  07FA  CD 00 00    	call	_SMS_loadTileMap_callee
2913  07FD  3E 0F       	ld	a,0x0f
2914  07FF  F5          	push	af
2915  0800  33          	inc	sp
2916  0801  CD 27 00    	call	_changeBank
2917  0804  33          	inc	sp
2918  0805  2A F1 00    	ld	hl,(_mapstatics)
2919  0808  7C          	ld	a,h
2920  0809  B5          	or	a,l
2921  080A  28 50       	jr	Z,l_MoveMap_00107
2922  080C              l_MoveMap_00101:
2923  080C  2A F3 00    	ld	hl,(_mapstaticscount)
2924  080F  29          	add	hl,hl
2925  0810  ED 4B F1 00 	ld	bc,(_mapstatics)
2926  0814  09          	add	hl,bc
2927  0815  4E          	ld	c,(hl)
2928  0816  23          	inc	hl
2929  0817  D1          	pop	de
2930  0818  46          	ld	b,(hl)
2931  0819  D5          	push	de
2932  081A  79          	ld	a,c
2933  081B  93          	sub	a, e
2934  081C  20 3E       	jr	NZ,l_MoveMap_00107
2935  081E  78          	ld	a,b
2936  081F  92          	sub	a, d
2937  0820  20 3A       	jr	NZ,l_MoveMap_00107
2938  0822  2A F3 00    	ld	hl,(_mapstaticscount)
2939  0825  23          	inc	hl
2940  0826  29          	add	hl,hl
2941  0827  ED 4B F1 00 	ld	bc,(_mapstatics)
2942  082B  09          	add	hl,bc
2943  082C  56          	ld	d,(hl)
2944  082D  2A F3 00    	ld	hl,(_mapstaticscount)
2945  0830  23          	inc	hl
2946  0831  23          	inc	hl
2947  0832  23          	inc	hl
2948  0833  29          	add	hl,hl
2949  0834  ED 4B F1 00 	ld	bc,(_mapstatics)
2950  0838  09          	add	hl,bc
2951  0839  5E          	ld	e,(hl)
2952  083A  2A F3 00    	ld	hl,(_mapstaticscount)
2953  083D  23          	inc	hl
2954  083E  23          	inc	hl
2955  083F  29          	add	hl,hl
2956  0840  ED 4B F1 00 	ld	bc,(_mapstatics)
2957  0844  09          	add	hl,bc
2958  0845  46          	ld	b,(hl)
2959  0846  23          	inc	hl
2960  0847  4E          	ld	c,(hl)
2961  0848  D5          	push	de
2962  0849  C5          	push	bc
2963  084A  33          	inc	sp
2964  084B  CD 23 49    	call	_InitEnemy
2965  084E  F1          	pop	af
2966  084F  33          	inc	sp
2967  0850  2A F3 00    	ld	hl,(_mapstaticscount)
2968  0853  11 04 00    	ld	de,0x0004
2969  0856  19          	add	hl,de
2970  0857  22 F3 00    	ld	(_mapstaticscount),hl
2971  085A  18 B0       	jr	l_MoveMap_00101
2972  085C              l_MoveMap_00107:
2973  085C  2A EC 00    	ld	hl,(_mappositiony)
2974  085F  22 EE 00    	ld	(_oldmappositiony),hl
2975  0862  DD F9       	ld	sp, ix
2976  0864  DD E1       	pop	ix
2977  0866  C9          	ret
2978  0867              	SECTION code_compiler
2979  0867              ;	---------------------------------
2980  0867              ; Function InitScroller
2981  0867              ; ---------------------------------
2982  0867              _InitScroller:
2983  0867  21 F9 00    	ld	hl,_numscrolls
2984  086A  36 00       	ld	(hl),0x00
2985  086C  21 FB 00    	ld	hl,_scrollactspeedx
2986  086F  36 00       	ld	(hl),0x00
2987  0871  21 FA 00    	ld	hl,_scrollactspeedy
2988  0874  36 00       	ld	(hl),0x00
2989  0876  21 FC 00    	ld	hl,_scrollact
2990  0879  36 00       	ld	(hl),0x00
2991  087B  21 FF 00    	ld	hl,_disablescroll
2992  087E  36 00       	ld	(hl),0x00
2993  0880  21 00 00    	ld	hl,0x0000
2994  0883  22 FD 00    	ld	(_scrolltimes),hl
2995  0886  C9          	ret
2996  0887              	SECTION code_compiler
2997  0887              ;	---------------------------------
2998  0887              ; Function AddScrollers
2999  0887              ; ---------------------------------
3000  0887              _AddScrollers:
3001  0887  DD E5       	push	ix
3002  0889  DD 21 00 00 	ld	ix,0
3003  088D  DD 39       	add	ix,sp
3004  088F  DD 6E 04    	ld	l,(ix+4)
3005  0892  DD 66 05    	ld	h,(ix+5)
3006  0895  22 00 01    	ld	(_scrolls),hl
3007  0898  DD 7E 06    	ld	a,(ix+6)
3008  089B  32 F9 00    	ld	(_numscrolls),a
3009  089E  DD E1       	pop	ix
3010  08A0  C9          	ret
3011  08A1              	SECTION code_compiler
3012  08A1              ;	---------------------------------
3013  08A1              ; Function UpdateScroller
3014  08A1              ; ---------------------------------
3015  08A1              _UpdateScroller:
3016  08A1  DD E5       	push	ix
3017  08A3  DD 21 00 00 	ld	ix,0
3018  08A7  DD 39       	add	ix,sp
3019  08A9  F5          	push	af
3020  08AA  3A FF 00    	ld	a,(_disablescroll)
3021  08AD  B7          	or	a, a
3022  08AE  C2 C6 09    	jp	NZ,l_UpdateScroller_00111
3023  08B1  3E 0F       	ld	a,0x0f
3024  08B3  F5          	push	af
3025  08B4  33          	inc	sp
3026  08B5  CD 27 00    	call	_changeBank
3027  08B8  33          	inc	sp
3028  08B9  2A FC 00    	ld	hl,(_scrollact)
3029  08BC  26 00       	ld	h,0x00
3030  08BE  4D          	ld	c,l
3031  08BF  44          	ld	b,h
3032  08C0  29          	add	hl, hl
3033  08C1  29          	add	hl, hl
3034  08C2  09          	add	hl, bc
3035  08C3  29          	add	hl, hl
3036  08C4  ED 4B 00 01 	ld	bc,(_scrolls)
3037  08C8  09          	add	hl,bc
3038  08C9  D1          	pop	de
3039  08CA  3A 05 00    	ld	a,(_stageframe4mod)
3040  08CD  E5          	push	hl
3041  08CE  B7          	or	a, a
3042  08CF  20 70       	jr	NZ,l_UpdateScroller_00102
3043  08D1  E1          	pop	hl
3044  08D2  E5          	push	hl
3045  08D3  11 06 00    	ld	de,0x0006
3046  08D6  19          	add	hl, de
3047  08D7  4E          	ld	c,(hl)
3048  08D8  23          	inc	hl
3049  08D9  46          	ld	b,(hl)
3050  08DA  3A FB 00    	ld	a,(_scrollactspeedx)
3051  08DD  5F          	ld	e,a
3052  08DE  17          	rla
3053  08DF  9F          	sbc	a, a
3054  08E0  57          	ld	d,a
3055  08E1  7B          	ld	a,e
3056  08E2  91          	sub	a, c
3057  08E3  7A          	ld	a,d
3058  08E4  98          	sbc	a, b
3059  08E5  E2 EA 08    	jp	PO, l_UpdateScroller_00157
3060  08E8  EE 80       	xor	a,0x80
3061  08EA              l_UpdateScroller_00157:
3062  08EA  F2 F1 08    	jp	P,l_UpdateScroller_00113
3063  08ED  0E 01       	ld	c,0x01
3064  08EF  18 12       	jr	l_UpdateScroller_00114
3065  08F1              l_UpdateScroller_00113:
3066  08F1  79          	ld	a,c
3067  08F2  93          	sub	a, e
3068  08F3  78          	ld	a,b
3069  08F4  9A          	sbc	a, d
3070  08F5  E2 FA 08    	jp	PO, l_UpdateScroller_00158
3071  08F8  EE 80       	xor	a,0x80
3072  08FA              l_UpdateScroller_00158:
3073  08FA  F2 01 09    	jp	P,l_UpdateScroller_00115
3074  08FD  0E FF       	ld	c,0xff
3075  08FF  18 02       	jr	l_UpdateScroller_00116
3076  0901              l_UpdateScroller_00115:
3077  0901  0E 00       	ld	c,0x00
3078  0903              l_UpdateScroller_00116:
3079  0903              l_UpdateScroller_00114:
3080  0903  21 FB 00    	ld	hl,_scrollactspeedx
3081  0906  7E          	ld	a,(hl)
3082  0907  81          	add	a, c
3083  0908  77          	ld	(hl),a
3084  0909  E1          	pop	hl
3085  090A  E5          	push	hl
3086  090B  11 08 00    	ld	de,0x0008
3087  090E  19          	add	hl, de
3088  090F  4E          	ld	c,(hl)
3089  0910  23          	inc	hl
3090  0911  46          	ld	b,(hl)
3091  0912  3A FA 00    	ld	a,(_scrollactspeedy)
3092  0915  5F          	ld	e,a
3093  0916  17          	rla
3094  0917  9F          	sbc	a, a
3095  0918  57          	ld	d,a
3096  0919  7B          	ld	a,e
3097  091A  91          	sub	a, c
3098  091B  7A          	ld	a,d
3099  091C  98          	sbc	a, b
3100  091D  E2 22 09    	jp	PO, l_UpdateScroller_00159
3101  0920  EE 80       	xor	a,0x80
3102  0922              l_UpdateScroller_00159:
3103  0922  F2 29 09    	jp	P,l_UpdateScroller_00117
3104  0925  0E 01       	ld	c,0x01
3105  0927  18 12       	jr	l_UpdateScroller_00118
3106  0929              l_UpdateScroller_00117:
3107  0929  79          	ld	a,c
3108  092A  93          	sub	a, e
3109  092B  78          	ld	a,b
3110  092C  9A          	sbc	a, d
3111  092D  E2 32 09    	jp	PO, l_UpdateScroller_00160
3112  0930  EE 80       	xor	a,0x80
3113  0932              l_UpdateScroller_00160:
3114  0932  F2 39 09    	jp	P,l_UpdateScroller_00119
3115  0935  0E FF       	ld	c,0xff
3116  0937  18 02       	jr	l_UpdateScroller_00120
3117  0939              l_UpdateScroller_00119:
3118  0939  0E 00       	ld	c,0x00
3119  093B              l_UpdateScroller_00120:
3120  093B              l_UpdateScroller_00118:
3121  093B  21 FA 00    	ld	hl,_scrollactspeedy
3122  093E  7E          	ld	a,(hl)
3123  093F  81          	add	a, c
3124  0940  77          	ld	(hl),a
3125  0941              l_UpdateScroller_00102:
3126  0941  3A FA 00    	ld	a,(_scrollactspeedy)
3127  0944  4F          	ld	c,a
3128  0945  17          	rla
3129  0946  9F          	sbc	a, a
3130  0947  47          	ld	b,a
3131  0948  21 EC 00    	ld	hl,_mappositiony
3132  094B  7E          	ld	a,(hl)
3133  094C  91          	sub	a, c
3134  094D  5F          	ld	e,a
3135  094E  23          	inc	hl
3136  094F  7E          	ld	a,(hl)
3137  0950  98          	sbc	a, b
3138  0951  E1          	pop	hl
3139  0952  57          	ld	d,a
3140  0953  7E          	ld	a,(hl)
3141  0954  E5          	push	hl
3142  0955  23          	inc	hl
3143  0956  66          	ld	h,(hl)
3144  0957  6F          	ld	l,a
3145  0958  7B          	ld	a,e
3146  0959  95          	sub	a, l
3147  095A  7A          	ld	a,d
3148  095B  9C          	sbc	a, h
3149  095C  E2 61 09    	jp	PO, l_UpdateScroller_00161
3150  095F  EE 80       	xor	a,0x80
3151  0961              l_UpdateScroller_00161:
3152  0961  F2 B1 09    	jp	P,l_UpdateScroller_00108
3153  0964  DD 6E FE    	ld	l,(ix-2)
3154  0967  DD 66 FF    	ld	h,(ix-1)
3155  096A  11 04 00    	ld	de,0x0004
3156  096D  19          	add	hl,de
3157  096E  5E          	ld	e,(hl)
3158  096F  23          	inc	hl
3159  0970  56          	ld	d,(hl)
3160  0971  2A EC 00    	ld	hl,(_mappositiony)
3161  0974  19          	add	hl,de
3162  0975  22 EC 00    	ld	(_mappositiony),hl
3163  0978  2A EE 00    	ld	hl,(_oldmappositiony)
3164  097B  19          	add	hl,de
3165  097C  22 EE 00    	ld	(_oldmappositiony),hl
3166  097F  21 FD 00    	ld	hl,_scrolltimes
3167  0982  34          	inc	(hl)
3168  0983  20 02       	jr	NZ,l_UpdateScroller_00162
3169  0985  23          	inc	hl
3170  0986  34          	inc	(hl)
3171  0987              l_UpdateScroller_00162:
3172  0987  E1          	pop	hl
3173  0988  E5          	push	hl
3174  0989  23          	inc	hl
3175  098A  23          	inc	hl
3176  098B  5E          	ld	e,(hl)
3177  098C  23          	inc	hl
3178  098D  56          	ld	d,(hl)
3179  098E  21 FD 00    	ld	hl,_scrolltimes
3180  0991  7E          	ld	a,(hl)
3181  0992  93          	sub	a, e
3182  0993  20 1C       	jr	NZ,l_UpdateScroller_00108
3183  0995  23          	inc	hl
3184  0996  7E          	ld	a,(hl)
3185  0997  92          	sub	a, d
3186  0998  20 17       	jr	NZ,l_UpdateScroller_00108
3187  099A  21 00 00    	ld	hl,0x0000
3188  099D  22 FD 00    	ld	(_scrolltimes),hl
3189  09A0  21 FC 00    	ld	hl,_scrollact
3190  09A3  7E          	ld	a,(hl)
3191  09A4  3C          	inc	a
3192  09A5  77          	ld	(hl),a
3193  09A6  21 F9 00    	ld	hl,_numscrolls
3194  09A9  96          	sub	a, (hl)
3195  09AA  38 05       	jr	C,l_UpdateScroller_00108
3196  09AC  21 FF 00    	ld	hl,_disablescroll
3197  09AF  36 01       	ld	(hl),0x01
3198  09B1              l_UpdateScroller_00108:
3199  09B1  AF          	xor	a, a
3200  09B2  91          	sub	a, c
3201  09B3  4F          	ld	c,a
3202  09B4  3E 00       	ld	a,0x00
3203  09B6  98          	sbc	a, b
3204  09B7  47          	ld	b,a
3205  09B8  3A FB 00    	ld	a,(_scrollactspeedx)
3206  09BB  5F          	ld	e,a
3207  09BC  17          	rla
3208  09BD  9F          	sbc	a, a
3209  09BE  57          	ld	d,a
3210  09BF  C5          	push	bc
3211  09C0  D5          	push	de
3212  09C1  CD 2F 07    	call	_MoveMap
3213  09C4  F1          	pop	af
3214  09C5  F1          	pop	af
3215  09C6              l_UpdateScroller_00111:
3216  09C6  DD F9       	ld	sp, ix
3217  09C8  DD E1       	pop	ix
3218  09CA  C9          	ret
3219  09CB              	SECTION code_compiler
3220  09CB              ;	---------------------------------
3221  09CB              ; Function updatescrollact
3222  09CB              ; ---------------------------------
3223  09CB              _updatescrollact:
3224  09CB  21 FC 00    	ld	hl,_scrollact
3225  09CE  34          	inc	(hl)
3226  09CF  21 00 00    	ld	hl,0x0000
3227  09D2  22 FD 00    	ld	(_scrolltimes),hl
3228  09D5  C9          	ret
3229  09D6              	SECTION code_compiler
3230  09D6              ;	---------------------------------
3231  09D6              ; Function UpdateBarrom
3232  09D6              ; ---------------------------------
3233  09D6              _UpdateBarrom:
3234  09D6  DD E5       	push	ix
3235  09D8  DD 21 00 00 	ld	ix,0
3236  09DC  DD 39       	add	ix,sp
3237  09DE  F5          	push	af
3238  09DF  21 41 01    	ld	hl,_barromtime
3239  09E2  7E          	ld	a,(hl)
3240  09E3  D6 18       	sub	a,0x18
3241  09E5  30 59       	jr	NC,l_UpdateBarrom_00103
3242  09E7  01 10 00    	ld	bc,_barromy+0
3243  09EA  5E          	ld	e,(hl)
3244  09EB  CB 3B       	srl	e
3245  09ED  6B          	ld	l,e
3246  09EE  26 00       	ld	h,0x00
3247  09F0  09          	add	hl,bc
3248  09F1  7E          	ld	a,(hl)
3249  09F2  DD 77 FE    	ld	(ix-2),a
3250  09F5  17          	rla
3251  09F6  9F          	sbc	a, a
3252  09F7  DD 77 FF    	ld	(ix-1),a
3253  09FA  ED 4B EC 00 	ld	bc,(_mappositiony)
3254  09FE  CB 28       	sra	b
3255  0A00  CB 19       	rr	c
3256  0A02  CB 28       	sra	b
3257  0A04  CB 19       	rr	c
3258  0A06  E1          	pop	hl
3259  0A07  E5          	push	hl
3260  0A08  09          	add	hl,bc
3261  0A09  D5          	push	de
3262  0A0A  01 E0 00    	ld	bc,0x00e0
3263  0A0D  C5          	push	bc
3264  0A0E  E5          	push	hl
3265  0A0F  CD 00 00    	call	__modsint_callee
3266  0A12  D1          	pop	de
3267  0A13  16 00       	ld	d,0x00
3268  0A15  4D          	ld	c,l
3269  0A16  44          	ld	b,h
3270  0A17  21 04 00    	ld	hl,_barromx
3271  0A1A  19          	add	hl, de
3272  0A1B  7E          	ld	a,(hl)
3273  0A1C  DD 77 FE    	ld	(ix-2),a
3274  0A1F  17          	rla
3275  0A20  9F          	sbc	a, a
3276  0A21  DD 77 FF    	ld	(ix-1),a
3277  0A24  ED 5B EA 00 	ld	de,(_mappositionx)
3278  0A28  CB 3A       	srl	d
3279  0A2A  CB 1B       	rr	e
3280  0A2C  CB 3A       	srl	d
3281  0A2E  CB 1B       	rr	e
3282  0A30  E1          	pop	hl
3283  0A31  E5          	push	hl
3284  0A32  19          	add	hl,de
3285  0A33  26 00       	ld	h,0x00
3286  0A35  C5          	push	bc
3287  0A36  E5          	push	hl
3288  0A37  CD EF 01    	call	_UpdateScroll
3289  0A3A  F1          	pop	af
3290  0A3B  F1          	pop	af
3291  0A3C  21 41 01    	ld	hl,_barromtime
3292  0A3F  34          	inc	(hl)
3293  0A40              l_UpdateBarrom_00103:
3294  0A40  DD F9       	ld	sp, ix
3295  0A42  DD E1       	pop	ix
3296  0A44  C9          	ret
3297  0A45              	SECTION code_compiler
3298  0A45              ;	---------------------------------
3299  0A45              ; Function DoBarrom
3300  0A45              ; ---------------------------------
3301  0A45              _DoBarrom:
3302  0A45  21 41 01    	ld	hl,_barromtime
3303  0A48  36 00       	ld	(hl),0x00
3304  0A4A  C9          	ret
3305  0A4B              	SECTION code_compiler
3306  0A4B              ;	---------------------------------
3307  0A4B              ; Function InitBarrom
3308  0A4B              ; ---------------------------------
3309  0A4B              _InitBarrom:
3310  0A4B  21 41 01    	ld	hl,_barromtime
3311  0A4E  36 18       	ld	(hl),0x18
3312  0A50  C9          	ret
3313  0A51              	SECTION code_compiler
3314  0A51              ;	---------------------------------
3315  0A51              ; Function RemoveExplosion
3316  0A51              ; ---------------------------------
3317  0A51              _RemoveExplosion:
3318  0A51  DD E5       	push	ix
3319  0A53  DD 21 00 00 	ld	ix,0
3320  0A57  DD 39       	add	ix,sp
3321  0A59  F5          	push	af
3322  0A5A  3A 60 00    	ld	a,(_numexplosions)
3323  0A5D  5F          	ld	e,a
3324  0A5E  16 00       	ld	d,0x00
3325  0A60  1B          	dec	de
3326  0A61  DD 4E 04    	ld	c,(ix+4)
3327  0A64  79          	ld	a,c
3328  0A65  17          	rla
3329  0A66  9F          	sbc	a, a
3330  0A67  47          	ld	b,a
3331  0A68  79          	ld	a,c
3332  0A69  93          	sub	a, e
3333  0A6A  78          	ld	a,b
3334  0A6B  9A          	sbc	a, d
3335  0A6C  E2 71 0A    	jp	PO, l_RemoveExplosion_00109
3336  0A6F  EE 80       	xor	a,0x80
3337  0A71              l_RemoveExplosion_00109:
3338  0A71  F2 A9 0A    	jp	P,l_RemoveExplosion_00102
3339  0A74  11 61 00    	ld	de,_explosions+0
3340  0A77  69          	ld	l, c
3341  0A78  60          	ld	h, b
3342  0A79  29          	add	hl, hl
3343  0A7A  29          	add	hl, hl
3344  0A7B  19          	add	hl,de
3345  0A7C  3A 60 00    	ld	a,(_numexplosions)
3346  0A7F  C6 FF       	add	a,0xff
3347  0A81  4D          	ld	c,l
3348  0A82  44          	ld	b,h
3349  0A83  6F          	ld	l,a
3350  0A84  26 00       	ld	h,0x00
3351  0A86  29          	add	hl, hl
3352  0A87  29          	add	hl, hl
3353  0A88  19          	add	hl,de
3354  0A89  D1          	pop	de
3355  0A8A  7E          	ld	a,(hl)
3356  0A8B  E5          	push	hl
3357  0A8C  02          	ld	(bc),a
3358  0A8D  59          	ld	e, c
3359  0A8E  50          	ld	d, b
3360  0A8F  13          	inc	de
3361  0A90  E1          	pop	hl
3362  0A91  E5          	push	hl
3363  0A92  23          	inc	hl
3364  0A93  7E          	ld	a,(hl)
3365  0A94  12          	ld	(de),a
3366  0A95  59          	ld	e, c
3367  0A96  50          	ld	d, b
3368  0A97  13          	inc	de
3369  0A98  13          	inc	de
3370  0A99  E1          	pop	hl
3371  0A9A  E5          	push	hl
3372  0A9B  23          	inc	hl
3373  0A9C  23          	inc	hl
3374  0A9D  7E          	ld	a,(hl)
3375  0A9E  12          	ld	(de),a
3376  0A9F  03          	inc	bc
3377  0AA0  03          	inc	bc
3378  0AA1  03          	inc	bc
3379  0AA2  E1          	pop	hl
3380  0AA3  E5          	push	hl
3381  0AA4  23          	inc	hl
3382  0AA5  23          	inc	hl
3383  0AA6  23          	inc	hl
3384  0AA7  7E          	ld	a,(hl)
3385  0AA8  02          	ld	(bc),a
3386  0AA9              l_RemoveExplosion_00102:
3387  0AA9  21 60 00    	ld	hl,_numexplosions
3388  0AAC  35          	dec	(hl)
3389  0AAD  DD F9       	ld	sp, ix
3390  0AAF  DD E1       	pop	ix
3391  0AB1  C9          	ret
3392  0AB2              	SECTION code_compiler
3393  0AB2              ;	---------------------------------
3394  0AB2              ; Function UpdateExplosion
3395  0AB2              ; ---------------------------------
3396  0AB2              _UpdateExplosion:
3397  0AB2  DD E5       	push	ix
3398  0AB4  DD 21 00 00 	ld	ix,0
3399  0AB8  DD 39       	add	ix,sp
3400  0ABA  F5          	push	af
3401  0ABB  F5          	push	af
3402  0ABC  DD 6E 04    	ld	l,(ix+4)
3403  0ABF  DD 66 05    	ld	h,(ix+5)
3404  0AC2  29          	add	hl,hl
3405  0AC3  29          	add	hl,hl
3406  0AC4  01 61 00    	ld	bc,_explosions
3407  0AC7  09          	add	hl,bc
3408  0AC8  4D          	ld	c,l
3409  0AC9  44          	ld	b,h
3410  0ACA  23          	inc	hl
3411  0ACB  23          	inc	hl
3412  0ACC  23          	inc	hl
3413  0ACD  7E          	ld	a,(hl)
3414  0ACE  DD 77 FF    	ld	(ix-1),a
3415  0AD1  21 02 00    	ld	hl,0x0002
3416  0AD4  09          	add	hl,bc
3417  0AD5  F1          	pop	af
3418  0AD6  5E          	ld	e,(hl)
3419  0AD7  E5          	push	hl
3420  0AD8  DD 56 04    	ld	d,(ix+4)
3421  0ADB  69          	ld	l, c
3422  0ADC  60          	ld	h, b
3423  0ADD  23          	inc	hl
3424  0ADE  7B          	ld	a,e
3425  0ADF  CB 3F       	srl	a
3426  0AE1  DD 77 FE    	ld	(ix-2),a
3427  0AE4  DD 7E FF    	ld	a,(ix-1)
3428  0AE7  B7          	or	a, a
3429  0AE8  20 23       	jr	NZ,l_UpdateExplosion_00108
3430  0AEA  7B          	ld	a,e
3431  0AEB  D6 06       	sub	a,0x06
3432  0AED  38 08       	jr	C,l_UpdateExplosion_00102
3433  0AEF  D5          	push	de
3434  0AF0  33          	inc	sp
3435  0AF1  CD 51 0A    	call	_RemoveExplosion
3436  0AF4  33          	inc	sp
3437  0AF5  18 47       	jr	l_UpdateExplosion_00110
3438  0AF7              l_UpdateExplosion_00102:
3439  0AF7  DD 7E FE    	ld	a,(ix-2)
3440  0AFA  C6 1A       	add	a,0x1a
3441  0AFC  57          	ld	d,a
3442  0AFD  5E          	ld	e,(hl)
3443  0AFE  0A          	ld	a,(bc)
3444  0AFF  47          	ld	b,a
3445  0B00  D5          	push	de
3446  0B01  C5          	push	bc
3447  0B02  33          	inc	sp
3448  0B03  CD 00 00    	call	_SMS_addSprite_callee
3449  0B06  E1          	pop	hl
3450  0B07  4E          	ld	c,(hl)
3451  0B08  0C          	inc	c
3452  0B09  E5          	push	hl
3453  0B0A  71          	ld	(hl),c
3454  0B0B  18 31       	jr	l_UpdateExplosion_00110
3455  0B0D              l_UpdateExplosion_00108:
3456  0B0D  7B          	ld	a,e
3457  0B0E  D6 0C       	sub	a,0x0c
3458  0B10  38 08       	jr	C,l_UpdateExplosion_00105
3459  0B12  D5          	push	de
3460  0B13  33          	inc	sp
3461  0B14  CD 51 0A    	call	_RemoveExplosion
3462  0B17  33          	inc	sp
3463  0B18  18 24       	jr	l_UpdateExplosion_00110
3464  0B1A              l_UpdateExplosion_00105:
3465  0B1A  DD 5E FE    	ld	e,(ix-2)
3466  0B1D  16 00       	ld	d,0x00
3467  0B1F  EB          	ex	de,hl
3468  0B20  29          	add	hl,hl
3469  0B21  29          	add	hl,hl
3470  0B22  EB          	ex	de,hl
3471  0B23  7B          	ld	a,e
3472  0B24  C6 1D       	add	a,0x1d
3473  0B26  5F          	ld	e,a
3474  0B27  7A          	ld	a,d
3475  0B28  CE 01       	adc	a,0x01
3476  0B2A  57          	ld	d,a
3477  0B2B  7E          	ld	a,(hl)
3478  0B2C  F5          	push	af
3479  0B2D  0A          	ld	a,(bc)
3480  0B2E  47          	ld	b,a
3481  0B2F  F1          	pop	af
3482  0B30  D5          	push	de
3483  0B31  48          	ld	c,b
3484  0B32  47          	ld	b,a
3485  0B33  C5          	push	bc
3486  0B34  CD A7 00    	call	_DrawQuadSprite
3487  0B37  F1          	pop	af
3488  0B38  F1          	pop	af
3489  0B39  E1          	pop	hl
3490  0B3A  4E          	ld	c,(hl)
3491  0B3B  0C          	inc	c
3492  0B3C  E5          	push	hl
3493  0B3D  71          	ld	(hl),c
3494  0B3E              l_UpdateExplosion_00110:
3495  0B3E  DD F9       	ld	sp, ix
3496  0B40  DD E1       	pop	ix
3497  0B42  C9          	ret
3498  0B43              	SECTION code_compiler
3499  0B43              ;	---------------------------------
3500  0B43              ; Function InitExplosion
3501  0B43              ; ---------------------------------
3502  0B43              _InitExplosion:
3503  0B43  DD E5       	push	ix
3504  0B45  DD 21 00 00 	ld	ix,0
3505  0B49  DD 39       	add	ix,sp
3506  0B4B  21 60 00    	ld	hl,_numexplosions
3507  0B4E  7E          	ld	a,(hl)
3508  0B4F  D6 0A       	sub	a,0x0a
3509  0B51  30 3A       	jr	NC,l_InitExplosion_00105
3510  0B53  01 61 00    	ld	bc,_explosions+0
3511  0B56  6E          	ld	l,(hl)
3512  0B57  26 00       	ld	h,0x00
3513  0B59  29          	add	hl, hl
3514  0B5A  29          	add	hl, hl
3515  0B5B  09          	add	hl,bc
3516  0B5C  DD 7E 04    	ld	a,(ix+4)
3517  0B5F  77          	ld	(hl),a
3518  0B60  5D          	ld	e,l
3519  0B61  54          	ld	d,h
3520  0B62  4D          	ld	c,l
3521  0B63  44          	ld	b,h
3522  0B64  13          	inc	de
3523  0B65  DD 7E 05    	ld	a,(ix+5)
3524  0B68  12          	ld	(de),a
3525  0B69  59          	ld	e, c
3526  0B6A  50          	ld	d, b
3527  0B6B  13          	inc	de
3528  0B6C  13          	inc	de
3529  0B6D  AF          	xor	a, a
3530  0B6E  12          	ld	(de),a
3531  0B6F  03          	inc	bc
3532  0B70  03          	inc	bc
3533  0B71  03          	inc	bc
3534  0B72  DD 7E 06    	ld	a,(ix+6)
3535  0B75  02          	ld	(bc),a
3536  0B76  21 60 00    	ld	hl,_numexplosions
3537  0B79  34          	inc	(hl)
3538  0B7A  DD 7E 06    	ld	a,(ix+6)
3539  0B7D  B7          	or	a, a
3540  0B7E  28 0D       	jr	Z,l_InitExplosion_00105
3541  0B80  3E 01       	ld	a,0x01
3542  0B82  F5          	push	af
3543  0B83  33          	inc	sp
3544  0B84  21 00 00    	ld	hl,_explosion_psg
3545  0B87  E5          	push	hl
3546  0B88  CD E0 03    	call	_PlaySound
3547  0B8B  F1          	pop	af
3548  0B8C  33          	inc	sp
3549  0B8D              l_InitExplosion_00105:
3550  0B8D  DD E1       	pop	ix
3551  0B8F  C9          	ret
3552  0B90              	SECTION code_compiler
3553  0B90              ;	---------------------------------
3554  0B90              ; Function UpdateExplosions
3555  0B90              ; ---------------------------------
3556  0B90              _UpdateExplosions:
3557  0B90  21 60 00    	ld	hl,_numexplosions
3558  0B93  7E          	ld	a,(hl)
3559  0B94  B7          	or	a, a
3560  0B95  28 15       	jr	Z,l_UpdateExplosions_00103
3561  0B97  4E          	ld	c,(hl)
3562  0B98  0D          	dec	c
3563  0B99              l_UpdateExplosions_00109:
3564  0B99  CB 79       	bit	7, c
3565  0B9B  20 0F       	jr	NZ,l_UpdateExplosions_00103
3566  0B9D  79          	ld	a,c
3567  0B9E  5F          	ld	e,a
3568  0B9F  17          	rla
3569  0BA0  9F          	sbc	a, a
3570  0BA1  57          	ld	d,a
3571  0BA2  C5          	push	bc
3572  0BA3  D5          	push	de
3573  0BA4  CD B2 0A    	call	_UpdateExplosion
3574  0BA7  F1          	pop	af
3575  0BA8  C1          	pop	bc
3576  0BA9  0D          	dec	c
3577  0BAA  18 ED       	jr	l_UpdateExplosions_00109
3578  0BAC              l_UpdateExplosions_00103:
3579  0BAC  3A 33 01    	ld	a,(_spawnedexplosiontime)
3580  0BAF  B7          	or	a, a
3581  0BB0  28 3C       	jr	Z,l_UpdateExplosions_00111
3582  0BB2  E6 03       	and	a,0x03
3583  0BB4  20 34       	jr	NZ,l_UpdateExplosions_00105
3584  0BB6  CD 00 00    	call	_myRand
3585  0BB9  3A 32 01    	ld	a,(_spawnedexplosionheight)
3586  0BBC  4D          	ld	c,l
3587  0BBD  47          	ld	b,a
3588  0BBE  C5          	push	bc
3589  0BBF  CD 00 00    	call	__moduchar_callee
3590  0BC2  3A 30 01    	ld	a,(_spawnedexplosionposy)
3591  0BC5  85          	add	a,l
3592  0BC6  57          	ld	d,a
3593  0BC7  D5          	push	de
3594  0BC8  CD 00 00    	call	_myRand
3595  0BCB  3A 31 01    	ld	a,(_spawnedexplosionwidth)
3596  0BCE  4D          	ld	c,l
3597  0BCF  47          	ld	b,a
3598  0BD0  C5          	push	bc
3599  0BD1  CD 00 00    	call	__moduchar_callee
3600  0BD4  D1          	pop	de
3601  0BD5  3A 2F 01    	ld	a,(_spawnedexplosionposx)
3602  0BD8  85          	add	a,l
3603  0BD9  4D          	ld	c,l
3604  0BDA  47          	ld	b,a
3605  0BDB  3E 01       	ld	a,0x01
3606  0BDD  5A          	ld	e,d
3607  0BDE  57          	ld	d,a
3608  0BDF  D5          	push	de
3609  0BE0  C5          	push	bc
3610  0BE1  33          	inc	sp
3611  0BE2  CD 43 0B    	call	_InitExplosion
3612  0BE5  F1          	pop	af
3613  0BE6  33          	inc	sp
3614  0BE7  CD 45 0A    	call	_DoBarrom
3615  0BEA              l_UpdateExplosions_00105:
3616  0BEA  21 33 01    	ld	hl,_spawnedexplosiontime
3617  0BED  35          	dec	(hl)
3618  0BEE              l_UpdateExplosions_00111:
3619  0BEE  C9          	ret
3620  0BEF              	SECTION code_compiler
3621  0BEF              ;	---------------------------------
3622  0BEF              ; Function InitExplosionSprite
3623  0BEF              ; ---------------------------------
3624  0BEF              _InitExplosionSprite:
3625  0BEF  3E 05       	ld	a,0x05
3626  0BF1  F5          	push	af
3627  0BF2  33          	inc	sp
3628  0BF3  21 1A 01    	ld	hl,0x011a
3629  0BF6  E5          	push	hl
3630  0BF7  21 00 00    	ld	hl,_littleexplosion_psgcompr
3631  0BFA  E5          	push	hl
3632  0BFB  CD FD 00    	call	_LoadSprite
3633  0BFE  F1          	pop	af
3634  0BFF  F1          	pop	af
3635  0C00  33          	inc	sp
3636  0C01  3E 02       	ld	a,0x02
3637  0C03  F5          	push	af
3638  0C04  33          	inc	sp
3639  0C05  21 1D 01    	ld	hl,0x011d
3640  0C08  E5          	push	hl
3641  0C09  21 00 00    	ld	hl,_bigexplosion_psgcompr
3642  0C0C  E5          	push	hl
3643  0C0D  CD FD 00    	call	_LoadSprite
3644  0C10  F1          	pop	af
3645  0C11  F1          	pop	af
3646  0C12  33          	inc	sp
3647  0C13  C9          	ret
3648  0C14              	SECTION code_compiler
3649  0C14              ;	---------------------------------
3650  0C14              ; Function InitExplosions
3651  0C14              ; ---------------------------------
3652  0C14              _InitExplosions:
3653  0C14  CD EF 0B    	call	_InitExplosionSprite
3654  0C17  21 60 00    	ld	hl,_numexplosions
3655  0C1A  36 00       	ld	(hl),0x00
3656  0C1C  21 33 01    	ld	hl,_spawnedexplosiontime
3657  0C1F  36 00       	ld	(hl),0x00
3658  0C21  C9          	ret
3659  0C22              	SECTION code_compiler
3660  0C22              ;	---------------------------------
3661  0C22              ; Function InitSpawnedExplosion
3662  0C22              ; ---------------------------------
3663  0C22              _InitSpawnedExplosion:
3664  0C22  DD E5       	push	ix
3665  0C24  DD 21 00 00 	ld	ix,0
3666  0C28  DD 39       	add	ix,sp
3667  0C2A  DD 7E 04    	ld	a,(ix+4)
3668  0C2D  32 2F 01    	ld	(_spawnedexplosionposx),a
3669  0C30  DD 7E 05    	ld	a,(ix+5)
3670  0C33  32 30 01    	ld	(_spawnedexplosionposy),a
3671  0C36  DD 7E 06    	ld	a,(ix+6)
3672  0C39  C6 F0       	add	a,0xf0
3673  0C3B  32 31 01    	ld	(_spawnedexplosionwidth),a
3674  0C3E  DD 7E 07    	ld	a,(ix+7)
3675  0C41  C6 F0       	add	a,0xf0
3676  0C43  32 32 01    	ld	(_spawnedexplosionheight),a
3677  0C46  DD 4E 06    	ld	c,(ix+6)
3678  0C49  06 00       	ld	b,0x00
3679  0C4B  DD 5E 07    	ld	e,(ix+7)
3680  0C4E  16 00       	ld	d,0x00
3681  0C50  69          	ld	l, c
3682  0C51  60          	ld	h, b
3683  0C52  19          	add	hl,de
3684  0C53  4D          	ld	c, l
3685  0C54  44          	ld	b, h
3686  0C55  CB 28       	sra	b
3687  0C57  CB 19       	rr	c
3688  0C59  21 33 01    	ld	hl,_spawnedexplosiontime
3689  0C5C  71          	ld	(hl),c
3690  0C5D  DD E1       	pop	ix
3691  0C5F  C9          	ret
3692  0C60              	SECTION code_compiler
3693  0C60              ;	---------------------------------
3694  0C60              ; Function InitWarning
3695  0C60              ; ---------------------------------
3696  0C60              _InitWarning:
3697  0C60  DD E5       	push	ix
3698  0C62  DD 21 00 00 	ld	ix,0
3699  0C66  DD 39       	add	ix,sp
3700  0C68  21 09 00    	ld	hl,0x0009
3701  0C6B  E5          	push	hl
3702  0C6C  21 00 00    	ld	hl,_norefuge_psg
3703  0C6F  E5          	push	hl
3704  0C70  CD 16 04    	call	_PlayMusic
3705  0C73  F1          	pop	af
3706  0C74  F1          	pop	af
3707  0C75  DD E1       	pop	ix
3708  0C77  C9          	ret
3709  0C78              	SECTION code_compiler
3710  0C78              ;	---------------------------------
3711  0C78              ; Function UpdateWarning
3712  0C78              ; ---------------------------------
3713  0C78              _UpdateWarning:
3714  0C78  DD E5       	push	ix
3715  0C7A  DD 21 00 00 	ld	ix,0
3716  0C7E  DD 39       	add	ix,sp
3717  0C80  3B          	dec	sp
3718  0C81  DD 6E 04    	ld	l,(ix+4)
3719  0C84  DD 66 05    	ld	h,(ix+5)
3720  0C87  5D          	ld	e,l
3721  0C88  54          	ld	d,h
3722  0C89  23          	inc	hl
3723  0C8A  23          	inc	hl
3724  0C8B  23          	inc	hl
3725  0C8C  7E          	ld	a,(hl)
3726  0C8D  4F          	ld	c,a
3727  0C8E  D6 78       	sub	a,0x78
3728  0C90  20 40       	jr	NZ,l_UpdateWarning_00109
3729  0C92  1A          	ld	a,(de)
3730  0C93  B7          	or	a, a
3731  0C94  20 26       	jr	NZ,l_UpdateWarning_00105
3732  0C96  3A 09 00    	ld	a,(_playstage)
3733  0C99  0F          	rrca
3734  0C9A  38 11       	jr	C,l_UpdateWarning_00102
3735  0C9C  D5          	push	de
3736  0C9D  21 0C 01    	ld	hl,0x010c
3737  0CA0  E5          	push	hl
3738  0CA1  21 00 00    	ld	hl,_boss_psg
3739  0CA4  E5          	push	hl
3740  0CA5  CD 16 04    	call	_PlayMusic
3741  0CA8  F1          	pop	af
3742  0CA9  F1          	pop	af
3743  0CAA  D1          	pop	de
3744  0CAB  18 0F       	jr	l_UpdateWarning_00105
3745  0CAD              l_UpdateWarning_00102:
3746  0CAD  D5          	push	de
3747  0CAE  21 0E 01    	ld	hl,0x010e
3748  0CB1  E5          	push	hl
3749  0CB2  21 00 00    	ld	hl,_boss2_psg
3750  0CB5  E5          	push	hl
3751  0CB6  CD 16 04    	call	_PlayMusic
3752  0CB9  F1          	pop	af
3753  0CBA  F1          	pop	af
3754  0CBB  D1          	pop	de
3755  0CBC              l_UpdateWarning_00105:
3756  0CBC  1A          	ld	a,(de)
3757  0CBD  D6 02       	sub	a,0x02
3758  0CBF  20 0D       	jr	NZ,l_UpdateWarning_00107
3759  0CC1  21 0C 01    	ld	hl,0x010c
3760  0CC4  E5          	push	hl
3761  0CC5  21 00 00    	ld	hl,_flight_psg
3762  0CC8  E5          	push	hl
3763  0CC9  CD 16 04    	call	_PlayMusic
3764  0CCC  F1          	pop	af
3765  0CCD  F1          	pop	af
3766  0CCE              l_UpdateWarning_00107:
3767  0CCE  2E 00       	ld	l,0x00
3768  0CD0  18 4A       	jr	l_UpdateWarning_00122
3769  0CD2              l_UpdateWarning_00109:
3770  0CD2  79          	ld	a,c
3771  0CD3  FE 60       	cp	a,0x60
3772  0CD5  30 43       	jr	NC,l_UpdateWarning_00115
3773  0CD7  07          	rlca
3774  0CD8  07          	rlca
3775  0CD9  07          	rlca
3776  0CDA  07          	rlca
3777  0CDB  E6 0F       	and	a,0x0f
3778  0CDD  0F          	rrca
3779  0CDE  38 3A       	jr	C,l_UpdateWarning_00115
3780  0CE0  01 39 01    	ld	bc,0x0139
3781  0CE3  1E 00       	ld	e,0x00
3782  0CE5              l_UpdateWarning_00120:
3783  0CE5  7B          	ld	a,e
3784  0CE6  FE 10       	cp	a,0x10
3785  0CE8  30 30       	jr	NC,l_UpdateWarning_00115
3786  0CEA  C6 5C       	add	a,0x5c
3787  0CEC  57          	ld	d,a
3788  0CED  DD 36 FF 00 	ld	(ix-1),0x00
3789  0CF1              l_UpdateWarning_00117:
3790  0CF1  DD 7E FF    	ld	a,(ix-1)
3791  0CF4  D6 38       	sub	a,0x38
3792  0CF6  30 1C       	jr	NC,l_UpdateWarning_00134
3793  0CF8  61          	ld	h,c
3794  0CF9  03          	inc	bc
3795  0CFA  DD 7E FF    	ld	a,(ix-1)
3796  0CFD  C6 68       	add	a,0x68
3797  0CFF  C5          	push	bc
3798  0D00  D5          	push	de
3799  0D01  6A          	ld	l,d
3800  0D02  E5          	push	hl
3801  0D03  F5          	push	af
3802  0D04  33          	inc	sp
3803  0D05  CD 00 00    	call	_SMS_addSprite_callee
3804  0D08  D1          	pop	de
3805  0D09  C1          	pop	bc
3806  0D0A  DD 7E FF    	ld	a,(ix-1)
3807  0D0D  C6 08       	add	a,0x08
3808  0D0F  DD 77 FF    	ld	(ix-1),a
3809  0D12  18 DD       	jr	l_UpdateWarning_00117
3810  0D14              l_UpdateWarning_00134:
3811  0D14  7B          	ld	a,e
3812  0D15  C6 08       	add	a,0x08
3813  0D17  5F          	ld	e,a
3814  0D18  18 CB       	jr	l_UpdateWarning_00120
3815  0D1A              l_UpdateWarning_00115:
3816  0D1A  2E 01       	ld	l,0x01
3817  0D1C              l_UpdateWarning_00122:
3818  0D1C  33          	inc	sp
3819  0D1D  DD E1       	pop	ix
3820  0D1F  C9          	ret
3821  0D20              	SECTION code_compiler
3822  0D20              ;	---------------------------------
3823  0D20              ; Function UpdateIntroOvni
3824  0D20              ; ---------------------------------
3825  0D20              _UpdateIntroOvni:
3826  0D20  DD E5       	push	ix
3827  0D22  DD 21 00 00 	ld	ix,0
3828  0D26  DD 39       	add	ix,sp
3829  0D28  DD 6E 04    	ld	l,(ix+4)
3830  0D2B  DD 66 05    	ld	h,(ix+5)
3831  0D2E  4D          	ld	c,l
3832  0D2F  44          	ld	b,h
3833  0D30  23          	inc	hl
3834  0D31  23          	inc	hl
3835  0D32  23          	inc	hl
3836  0D33  7E          	ld	a,(hl)
3837  0D34  0F          	rrca
3838  0D35  0F          	rrca
3839  0D36  E6 03       	and	a,+(0x3f&0x03)
3840  0D38  6F          	ld	l,a
3841  0D39  26 00       	ld	h,0x00
3842  0D3B  29          	add	hl, hl
3843  0D3C  29          	add	hl, hl
3844  0D3D  11 36 01    	ld	de,0x0136
3845  0D40  19          	add	hl,de
3846  0D41  59          	ld	e,c
3847  0D42  50          	ld	d,b
3848  0D43  EB          	ex	de,hl
3849  0D44  23          	inc	hl
3850  0D45  7E          	ld	a,(hl)
3851  0D46  F5          	push	af
3852  0D47  0A          	ld	a,(bc)
3853  0D48  67          	ld	h,a
3854  0D49  F1          	pop	af
3855  0D4A  C5          	push	bc
3856  0D4B  D5          	push	de
3857  0D4C  6C          	ld	l,h
3858  0D4D  67          	ld	h,a
3859  0D4E  E5          	push	hl
3860  0D4F  CD A7 00    	call	_DrawQuadSprite
3861  0D52  F1          	pop	af
3862  0D53  F1          	pop	af
3863  0D54  E1          	pop	hl
3864  0D55  4D          	ld	c,l
3865  0D56  44          	ld	b,h
3866  0D57  23          	inc	hl
3867  0D58  23          	inc	hl
3868  0D59  56          	ld	d,(hl)
3869  0D5A  0A          	ld	a,(bc)
3870  0D5B  5F          	ld	e,a
3871  0D5C  7A          	ld	a,d
3872  0D5D  D6 02       	sub	a,0x02
3873  0D5F  20 0A       	jr	NZ,l_UpdateIntroOvni_00106
3874  0D61  7B          	ld	a,e
3875  0D62  D6 3C       	sub	a,0x3c
3876  0D64  30 0D       	jr	NC,l_UpdateIntroOvni_00107
3877  0D66  1C          	inc	e
3878  0D67  7B          	ld	a,e
3879  0D68  02          	ld	(bc),a
3880  0D69  18 08       	jr	l_UpdateIntroOvni_00107
3881  0D6B              l_UpdateIntroOvni_00106:
3882  0D6B  3E B4       	ld	a,0xb4
3883  0D6D  93          	sub	a, e
3884  0D6E  30 03       	jr	NC,l_UpdateIntroOvni_00107
3885  0D70  1D          	dec	e
3886  0D71  7B          	ld	a,e
3887  0D72  02          	ld	(bc),a
3888  0D73              l_UpdateIntroOvni_00107:
3889  0D73  2E 01       	ld	l,0x01
3890  0D75  DD E1       	pop	ix
3891  0D77  C9          	ret
3892  0D78              	SECTION code_compiler
3893  0D78              ;	---------------------------------
3894  0D78              ; Function InitIntroSidePlayer
3895  0D78              ; ---------------------------------
3896  0D78              _InitIntroSidePlayer:
3897  0D78  DD E5       	push	ix
3898  0D7A  DD 21 00 00 	ld	ix,0
3899  0D7E  DD 39       	add	ix,sp
3900  0D80  DD 5E 04    	ld	e,(ix+4)
3901  0D83  DD 56 05    	ld	d,(ix+5)
3902  0D86  21 04 00    	ld	hl,0x0004
3903  0D89  19          	add	hl,de
3904  0D8A  1A          	ld	a,(de)
3905  0D8B  77          	ld	(hl),a
3906  0D8C  DD E1       	pop	ix
3907  0D8E  C9          	ret
3908  0D8F              	SECTION code_compiler
3909  0D8F              ;	---------------------------------
3910  0D8F              ; Function UpdateIntroSidePlayer
3911  0D8F              ; ---------------------------------
3912  0D8F              _UpdateIntroSidePlayer:
3913  0D8F  DD E5       	push	ix
3914  0D91  DD 21 00 00 	ld	ix,0
3915  0D95  DD 39       	add	ix,sp
3916  0D97  F5          	push	af
3917  0D98  3B          	dec	sp
3918  0D99  DD 4E 04    	ld	c,(ix+4)
3919  0D9C  DD 46 05    	ld	b,(ix+5)
3920  0D9F  21 01 00    	ld	hl,0x0001
3921  0DA2  09          	add	hl,bc
3922  0DA3  DD 75 FE    	ld	(ix-2),l
3923  0DA6  DD 74 FF    	ld	(ix-1),h
3924  0DA9  56          	ld	d,(hl)
3925  0DAA  0A          	ld	a,(bc)
3926  0DAB  5F          	ld	e,a
3927  0DAC  C5          	push	bc
3928  0DAD  21 36 01    	ld	hl,0x0136
3929  0DB0  E5          	push	hl
3930  0DB1  D5          	push	de
3931  0DB2  CD A7 00    	call	_DrawQuadSprite
3932  0DB5  F1          	pop	af
3933  0DB6  F1          	pop	af
3934  0DB7  C1          	pop	bc
3935  0DB8  ED 5B 02 00 	ld	de,(_stageframe)
3936  0DBC  CB 3A       	srl	d
3937  0DBE  CB 1B       	rr	e
3938  0DC0  CB 3A       	srl	d
3939  0DC2  CB 1B       	rr	e
3940  0DC4  7B          	ld	a,e
3941  0DC5  E6 01       	and	a,0x01
3942  0DC7  C6 3A       	add	a,0x3a
3943  0DC9  57          	ld	d,a
3944  0DCA  DD 6E FE    	ld	l,(ix-2)
3945  0DCD  DD 66 FF    	ld	h,(ix-1)
3946  0DD0  7E          	ld	a,(hl)
3947  0DD1  C6 04       	add	a,0x04
3948  0DD3  DD 77 FD    	ld	(ix-3),a
3949  0DD6  0A          	ld	a,(bc)
3950  0DD7  C6 F8       	add	a,0xf8
3951  0DD9  5F          	ld	e,a
3952  0DDA  C5          	push	bc
3953  0DDB  D5          	push	de
3954  0DDC  33          	inc	sp
3955  0DDD  DD 56 FD    	ld	d,(ix-3)
3956  0DE0  D5          	push	de
3957  0DE1  CD 00 00    	call	_SMS_addSprite_callee
3958  0DE4  C1          	pop	bc
3959  0DE5  21 04 00    	ld	hl,0x0004
3960  0DE8  09          	add	hl,bc
3961  0DE9  7E          	ld	a,(hl)
3962  0DEA  B7          	or	a, a
3963  0DEB  20 05       	jr	NZ,l_UpdateIntroSidePlayer_00110
3964  0DED  11 F0 02    	ld	de,0x02f0
3965  0DF0  18 03       	jr	l_UpdateIntroSidePlayer_00111
3966  0DF2              l_UpdateIntroSidePlayer_00110:
3967  0DF2  11 8E 03    	ld	de,0x038e
3968  0DF5              l_UpdateIntroSidePlayer_00111:
3969  0DF5  0A          	ld	a,(bc)
3970  0DF6  DD 77 FD    	ld	(ix-3),a
3971  0DF9  21 02 00    	ld	hl,_stageframe
3972  0DFC  7E          	ld	a,(hl)
3973  0DFD  93          	sub	a, e
3974  0DFE  23          	inc	hl
3975  0DFF  7E          	ld	a,(hl)
3976  0E00  9A          	sbc	a, d
3977  0E01  30 3D       	jr	NC,l_UpdateIntroSidePlayer_00106
3978  0E03  7B          	ld	a,e
3979  0E04  2B          	dec	hl
3980  0E05  96          	sub	a, (hl)
3981  0E06  5F          	ld	e,a
3982  0E07  7A          	ld	a,d
3983  0E08  23          	inc	hl
3984  0E09  9E          	sbc	a, (hl)
3985  0E0A  DD 7E FD    	ld	a,(ix-3)
3986  0E0D  D6 80       	sub	a,0x80
3987  0E0F  30 05       	jr	NC,l_UpdateIntroSidePlayer_00102
3988  0E11  DD 7E FD    	ld	a,(ix-3)
3989  0E14  3C          	inc	a
3990  0E15  02          	ld	(bc),a
3991  0E16              l_UpdateIntroSidePlayer_00102:
3992  0E16  16 00       	ld	d,0x00
3993  0E18  21 00 00    	ld	hl,_sinustable
3994  0E1B  19          	add	hl,de
3995  0E1C  4E          	ld	c,(hl)
3996  0E1D  06 00       	ld	b,0x00
3997  0E1F  21 80 FF    	ld	hl,0xff80
3998  0E22  09          	add	hl,bc
3999  0E23  4D          	ld	c,l
4000  0E24  44          	ld	b,h
4001  0E25  29          	add	hl, hl
4002  0E26  09          	add	hl, bc
4003  0E27  7D          	ld	a,l
4004  0E28  44          	ld	b,h
4005  0E29  CB 28       	sra	b
4006  0E2B  1F          	rra
4007  0E2C  CB 28       	sra	b
4008  0E2E  1F          	rra
4009  0E2F  CB 28       	sra	b
4010  0E31  1F          	rra
4011  0E32  CB 28       	sra	b
4012  0E34  1F          	rra
4013  0E35  C6 48       	add	a,0x48
4014  0E37  DD 6E FE    	ld	l,(ix-2)
4015  0E3A  DD 66 FF    	ld	h,(ix-1)
4016  0E3D  77          	ld	(hl),a
4017  0E3E  18 12       	jr	l_UpdateIntroSidePlayer_00107
4018  0E40              l_UpdateIntroSidePlayer_00106:
4019  0E40  DD 5E FD    	ld	e,(ix-3)
4020  0E43  1C          	inc	e
4021  0E44  1C          	inc	e
4022  0E45  1C          	inc	e
4023  0E46  1C          	inc	e
4024  0E47  7B          	ld	a,e
4025  0E48  02          	ld	(bc),a
4026  0E49  3E F0       	ld	a,0xf0
4027  0E4B  93          	sub	a, e
4028  0E4C  30 04       	jr	NC,l_UpdateIntroSidePlayer_00107
4029  0E4E  2E 00       	ld	l,0x00
4030  0E50  18 02       	jr	l_UpdateIntroSidePlayer_00108
4031  0E52              l_UpdateIntroSidePlayer_00107:
4032  0E52  2E 01       	ld	l,0x01
4033  0E54              l_UpdateIntroSidePlayer_00108:
4034  0E54  DD F9       	ld	sp, ix
4035  0E56  DD E1       	pop	ix
4036  0E58  C9          	ret
4037  0E59              	SECTION code_compiler
4038  0E59              ;	---------------------------------
4039  0E59              ; Function InitIntroStar
4040  0E59              ; ---------------------------------
4041  0E59              _InitIntroStar:
4042  0E59  DD E5       	push	ix
4043  0E5B  DD 21 00 00 	ld	ix,0
4044  0E5F  DD 39       	add	ix,sp
4045  0E61  DD 4E 04    	ld	c,(ix+4)
4046  0E64  DD 46 05    	ld	b,(ix+5)
4047  0E67  03          	inc	bc
4048  0E68  03          	inc	bc
4049  0E69  03          	inc	bc
4050  0E6A  03          	inc	bc
4051  0E6B  C5          	push	bc
4052  0E6C  CD 00 00    	call	_myRand
4053  0E6F  5D          	ld	e, l
4054  0E70  16 03       	ld	d,0x03
4055  0E72  D5          	push	de
4056  0E73  CD 00 00    	call	__moduchar_callee
4057  0E76  C1          	pop	bc
4058  0E77  7D          	ld	a,l
4059  0E78  C6 03       	add	a,0x03
4060  0E7A  02          	ld	(bc),a
4061  0E7B  DD E1       	pop	ix
4062  0E7D  C9          	ret
4063  0E7E              	SECTION code_compiler
4064  0E7E              ;	---------------------------------
4065  0E7E              ; Function UpdateIntroStar
4066  0E7E              ; ---------------------------------
4067  0E7E              _UpdateIntroStar:
4068  0E7E  DD E5       	push	ix
4069  0E80  DD 21 00 00 	ld	ix,0
4070  0E84  DD 39       	add	ix,sp
4071  0E86  DD 6E 04    	ld	l,(ix+4)
4072  0E89  DD 66 05    	ld	h,(ix+5)
4073  0E8C  4D          	ld	c,l
4074  0E8D  44          	ld	b,h
4075  0E8E  23          	inc	hl
4076  0E8F  56          	ld	d,(hl)
4077  0E90  0A          	ld	a,(bc)
4078  0E91  5F          	ld	e,a
4079  0E92  C5          	push	bc
4080  0E93  3E 3A       	ld	a,0x3a
4081  0E95  F5          	push	af
4082  0E96  33          	inc	sp
4083  0E97  D5          	push	de
4084  0E98  CD 00 00    	call	_SMS_addSprite_callee
4085  0E9B  C1          	pop	bc
4086  0E9C  0A          	ld	a,(bc)
4087  0E9D  5F          	ld	e,a
4088  0E9E  69          	ld	l, c
4089  0E9F  60          	ld	h, b
4090  0EA0  23          	inc	hl
4091  0EA1  23          	inc	hl
4092  0EA2  23          	inc	hl
4093  0EA3  23          	inc	hl
4094  0EA4  56          	ld	d,(hl)
4095  0EA5  7B          	ld	a,e
4096  0EA6  92          	sub	a, d
4097  0EA7  02          	ld	(bc),a
4098  0EA8  2E 01       	ld	l,0x01
4099  0EAA  DD E1       	pop	ix
4100  0EAC  C9          	ret
4101  0EAD              	SECTION code_compiler
4102  0EAD              ;	---------------------------------
4103  0EAD              ; Function InitIntro3Object
4104  0EAD              ; ---------------------------------
4105  0EAD              _InitIntro3Object:
4106  0EAD  DD E5       	push	ix
4107  0EAF  DD 21 00 00 	ld	ix,0
4108  0EB3  DD 39       	add	ix,sp
4109  0EB5  21 05 00    	ld	hl,0x0005
4110  0EB8  E5          	push	hl
4111  0EB9  21 00 00    	ld	hl,_intro3_psg
4112  0EBC  E5          	push	hl
4113  0EBD  CD 16 04    	call	_PlayMusic
4114  0EC0  F1          	pop	af
4115  0EC1  F1          	pop	af
4116  0EC2  DD E1       	pop	ix
4117  0EC4  C9          	ret
4118  0EC5              	SECTION code_compiler
4119  0EC5              ;	---------------------------------
4120  0EC5              ; Function DrawIntro3Object
4121  0EC5              ; ---------------------------------
4122  0EC5              _DrawIntro3Object:
4123  0EC5  DD E5       	push	ix
4124  0EC7  DD 21 00 00 	ld	ix,0
4125  0ECB  DD 39       	add	ix,sp
4126  0ECD  3B          	dec	sp
4127  0ECE  3E 02       	ld	a,0x02
4128  0ED0  F5          	push	af
4129  0ED1  33          	inc	sp
4130  0ED2  CD 27 00    	call	_changeBank
4131  0ED5  33          	inc	sp
4132  0ED6  DD 36 FF 00 	ld	(ix-1),0x00
4133  0EDA              l_DrawIntro3Object_00106:
4134  0EDA  DD 6E FF    	ld	l,(ix-1)
4135  0EDD  26 00       	ld	h,0x00
4136  0EDF  23          	inc	hl
4137  0EE0  23          	inc	hl
4138  0EE1  AF          	xor	a,a
4139  0EE2  CB 3C       	srl	h
4140  0EE4  CB 1D       	rr	l
4141  0EE6  1F          	rra
4142  0EE7  CB 3C       	srl	h
4143  0EE9  CB 1D       	rr	l
4144  0EEB  1F          	rra
4145  0EEC  65          	ld	h,l
4146  0EED  6F          	ld	l,a
4147  0EEE  7C          	ld	a,h
4148  0EEF  F6 78       	or	a,0x78
4149  0EF1  4D          	ld	c,l
4150  0EF2  47          	ld	b,a
4151  0EF3  DD 6E 06    	ld	l,(ix+6)
4152  0EF6  26 00       	ld	h,0x00
4153  0EF8  29          	add	hl, hl
4154  0EF9  7D          	ld	a,l
4155  0EFA  B1          	or	a, c
4156  0EFB  6F          	ld	l,a
4157  0EFC  7C          	ld	a,h
4158  0EFD  B0          	or	a, b
4159  0EFE  67          	ld	h,a
4160  0EFF  CF          	rst	 0x08  ; call __RST08_SMS_crt0_RST08
4161  0F00  DD 4E 04    	ld	c,(ix+4)
4162  0F03  DD 46 05    	ld	b,(ix+5)
4163  0F06  1E 00       	ld	e,0x00
4164  0F08              l_DrawIntro3Object_00104:
4165  0F08  7B          	ld	a,e
4166  0F09  DD 96 07    	sub	a,(ix+7)
4167  0F0C  30 0C       	jr	NC,l_DrawIntro3Object_00101
4168  0F0E  69          	ld	l, c
4169  0F0F  60          	ld	h, b
4170  0F10  56          	ld	d,(hl)
4171  0F11  23          	inc	hl
4172  0F12  66          	ld	h,(hl)
4173  0F13  03          	inc	bc
4174  0F14  03          	inc	bc
4175  0F15  6A          	ld	l, d
4176  0F16  DF          	rst	 0x18  ; call __RST18_SMS_crt0_RST18
4177  0F17  1C          	inc	e
4178  0F18  18 EE       	jr	l_DrawIntro3Object_00104
4179  0F1A              l_DrawIntro3Object_00101:
4180  0F1A  DD 5E 07    	ld	e,(ix+7)
4181  0F1D  AF          	xor	a,a
4182  0F1E  57          	ld	d,a
4183  0F1F  21 12 00    	ld	hl,0x0012
4184  0F22  ED 52       	sbc	hl,de
4185  0F24  29          	add	hl, hl
4186  0F25  09          	add	hl,bc
4187  0F26  DD 75 04    	ld	(ix+4),l
4188  0F29  DD 74 05    	ld	(ix+5),h
4189  0F2C  DD 34 FF    	inc	(ix-1)
4190  0F2F  DD 7E FF    	ld	a,(ix-1)
4191  0F32  D6 06       	sub	a,0x06
4192  0F34  38 A4       	jr	C,l_DrawIntro3Object_00106
4193  0F36  3E 0F       	ld	a,0x0f
4194  0F38  F5          	push	af
4195  0F39  33          	inc	sp
4196  0F3A  CD 27 00    	call	_changeBank
4197  0F3D  C1          	pop	bc
4198  0F3E  DD E1       	pop	ix
4199  0F40  C9          	ret
4200  0F41              	SECTION code_compiler
4201  0F41              ;	---------------------------------
4202  0F41              ; Function UpdateIntro3Object1
4203  0F41              ; ---------------------------------
4204  0F41              _UpdateIntro3Object1:
4205  0F41  DD E5       	push	ix
4206  0F43  DD 21 00 00 	ld	ix,0
4207  0F47  DD 39       	add	ix,sp
4208  0F49  DD 4E 04    	ld	c,(ix+4)
4209  0F4C  DD 46 05    	ld	b,(ix+5)
4210  0F4F  59          	ld	e, c
4211  0F50  50          	ld	d, b
4212  0F51  13          	inc	de
4213  0F52  13          	inc	de
4214  0F53  13          	inc	de
4215  0F54  1A          	ld	a,(de)
4216  0F55  D6 10       	sub	a,0x10
4217  0F57  20 1A       	jr	NZ,l_UpdateIntro3Object1_00103
4218  0F59  C5          	push	bc
4219  0F5A  D5          	push	de
4220  0F5B  21 07 06    	ld	hl,0x0607
4221  0F5E  E5          	push	hl
4222  0F5F  21 02 00    	ld	hl,+(_persons_bin + 0x0002)
4223  0F62  E5          	push	hl
4224  0F63  CD C5 0E    	call	_DrawIntro3Object
4225  0F66  F1          	pop	af
4226  0F67  F1          	pop	af
4227  0F68  D1          	pop	de
4228  0F69  C1          	pop	bc
4229  0F6A  03          	inc	bc
4230  0F6B  03          	inc	bc
4231  0F6C  03          	inc	bc
4232  0F6D  03          	inc	bc
4233  0F6E  0A          	ld	a,(bc)
4234  0F6F  3C          	inc	a
4235  0F70  02          	ld	(bc),a
4236  0F71  AF          	xor	a, a
4237  0F72  12          	ld	(de),a
4238  0F73              l_UpdateIntro3Object1_00103:
4239  0F73  DD E1       	pop	ix
4240  0F75  C9          	ret
4241  0F76              	SECTION code_compiler
4242  0F76              ;	---------------------------------
4243  0F76              ; Function UpdateIntro3Object2
4244  0F76              ; ---------------------------------
4245  0F76              _UpdateIntro3Object2:
4246  0F76  DD E5       	push	ix
4247  0F78  DD 21 00 00 	ld	ix,0
4248  0F7C  DD 39       	add	ix,sp
4249  0F7E  DD 4E 04    	ld	c,(ix+4)
4250  0F81  DD 46 05    	ld	b,(ix+5)
4251  0F84  59          	ld	e, c
4252  0F85  50          	ld	d, b
4253  0F86  13          	inc	de
4254  0F87  13          	inc	de
4255  0F88  13          	inc	de
4256  0F89  1A          	ld	a,(de)
4257  0F8A  D6 A0       	sub	a,0xa0
4258  0F8C  20 1A       	jr	NZ,l_UpdateIntro3Object2_00103
4259  0F8E  C5          	push	bc
4260  0F8F  D5          	push	de
4261  0F90  21 13 06    	ld	hl,0x0613
4262  0F93  E5          	push	hl
4263  0F94  21 0E 00    	ld	hl,+(_persons_bin + 0x000e)
4264  0F97  E5          	push	hl
4265  0F98  CD C5 0E    	call	_DrawIntro3Object
4266  0F9B  F1          	pop	af
4267  0F9C  F1          	pop	af
4268  0F9D  D1          	pop	de
4269  0F9E  C1          	pop	bc
4270  0F9F  03          	inc	bc
4271  0FA0  03          	inc	bc
4272  0FA1  03          	inc	bc
4273  0FA2  03          	inc	bc
4274  0FA3  0A          	ld	a,(bc)
4275  0FA4  3C          	inc	a
4276  0FA5  02          	ld	(bc),a
4277  0FA6  AF          	xor	a, a
4278  0FA7  12          	ld	(de),a
4279  0FA8              l_UpdateIntro3Object2_00103:
4280  0FA8  DD E1       	pop	ix
4281  0FAA  C9          	ret
4282  0FAB              	SECTION code_compiler
4283  0FAB              ;	---------------------------------
4284  0FAB              ; Function UpdateIntro3Object3
4285  0FAB              ; ---------------------------------
4286  0FAB              _UpdateIntro3Object3:
4287  0FAB  DD E5       	push	ix
4288  0FAD  DD 21 00 00 	ld	ix,0
4289  0FB1  DD 39       	add	ix,sp
4290  0FB3  DD 4E 04    	ld	c,(ix+4)
4291  0FB6  DD 46 05    	ld	b,(ix+5)
4292  0FB9  59          	ld	e, c
4293  0FBA  50          	ld	d, b
4294  0FBB  13          	inc	de
4295  0FBC  13          	inc	de
4296  0FBD  13          	inc	de
4297  0FBE  1A          	ld	a,(de)
4298  0FBF  D6 A0       	sub	a,0xa0
4299  0FC1  20 1A       	jr	NZ,l_UpdateIntro3Object3_00103
4300  0FC3  C5          	push	bc
4301  0FC4  D5          	push	de
4302  0FC5  21 07 12    	ld	hl,0x1207
4303  0FC8  E5          	push	hl
4304  0FC9  21 D8 00    	ld	hl,+(_persons_bin + 0x00d8)
4305  0FCC  E5          	push	hl
4306  0FCD  CD C5 0E    	call	_DrawIntro3Object
4307  0FD0  F1          	pop	af
4308  0FD1  F1          	pop	af
4309  0FD2  D1          	pop	de
4310  0FD3  C1          	pop	bc
4311  0FD4  03          	inc	bc
4312  0FD5  03          	inc	bc
4313  0FD6  03          	inc	bc
4314  0FD7  03          	inc	bc
4315  0FD8  0A          	ld	a,(bc)
4316  0FD9  3C          	inc	a
4317  0FDA  02          	ld	(bc),a
4318  0FDB  AF          	xor	a, a
4319  0FDC  12          	ld	(de),a
4320  0FDD              l_UpdateIntro3Object3_00103:
4321  0FDD  DD E1       	pop	ix
4322  0FDF  C9          	ret
4323  0FE0              	SECTION code_compiler
4324  0FE0              ;	---------------------------------
4325  0FE0              ; Function UpdateIntro3Object
4326  0FE0              ; ---------------------------------
4327  0FE0              _UpdateIntro3Object:
4328  0FE0  DD E5       	push	ix
4329  0FE2  DD 21 00 00 	ld	ix,0
4330  0FE6  DD 39       	add	ix,sp
4331  0FE8  DD 4E 04    	ld	c,(ix+4)
4332  0FEB  DD 46 05    	ld	b,(ix+5)
4333  0FEE  21 04 00    	ld	hl,0x0004
4334  0FF1  09          	add	hl,bc
4335  0FF2  7E          	ld	a,(hl)
4336  0FF3  5F          	ld	e,a
4337  0FF4  D6 03       	sub	a,0x03
4338  0FF6  30 11       	jr	NC,l_UpdateIntro3Object_00102
4339  0FF8  26 00       	ld	h,0x00
4340  0FFA  6B          	ld	l, e
4341  0FFB  29          	add	hl, hl
4342  0FFC  11 00 00    	ld	de,_updateintro3objectfunctions
4343  0FFF  19          	add	hl,de
4344  1000  5E          	ld	e,(hl)
4345  1001  23          	inc	hl
4346  1002  66          	ld	h,(hl)
4347  1003  C5          	push	bc
4348  1004  6B          	ld	l, e
4349  1005  CD 00 00    	call	___sdcc_call_hl
4350  1008  F1          	pop	af
4351  1009              l_UpdateIntro3Object_00102:
4352  1009  2E 01       	ld	l,0x01
4353  100B  DD E1       	pop	ix
4354  100D  C9          	ret
4355  100E              	SECTION code_compiler
4356  100E              ;	---------------------------------
4357  100E              ; Function InitWaveShip
4358  100E              ; ---------------------------------
4359  100E              _InitWaveShip:
4360  100E  DD E5       	push	ix
4361  1010  DD 21 00 00 	ld	ix,0
4362  1014  DD 39       	add	ix,sp
4363  1016  DD 4E 04    	ld	c,(ix+4)
4364  1019  DD 46 05    	ld	b,(ix+5)
4365  101C  21 04 00    	ld	hl,0x0004
4366  101F  09          	add	hl,bc
4367  1020  0A          	ld	a,(bc)
4368  1021  77          	ld	(hl),a
4369  1022  21 05 00    	ld	hl,0x0005
4370  1025  09          	add	hl,bc
4371  1026  E5          	push	hl
4372  1027  CD 00 00    	call	_myRand
4373  102A  C1          	pop	bc
4374  102B  7D          	ld	a,l
4375  102C  E6 0F       	and	a,0x0f
4376  102E  C6 04       	add	a,0x04
4377  1030  02          	ld	(bc),a
4378  1031  DD E1       	pop	ix
4379  1033  C9          	ret
4380  1034              	SECTION code_compiler
4381  1034              ;	---------------------------------
4382  1034              ; Function UpdateWaveShip
4383  1034              ; ---------------------------------
4384  1034              _UpdateWaveShip:
4385  1034  DD E5       	push	ix
4386  1036  DD 21 00 00 	ld	ix,0
4387  103A  DD 39       	add	ix,sp
4388  103C  F5          	push	af
4389  103D  DD 6E 04    	ld	l,(ix+4)
4390  1040  DD 66 05    	ld	h,(ix+5)
4391  1043  4D          	ld	c,l
4392  1044  44          	ld	b,h
4393  1045  23          	inc	hl
4394  1046  5E          	ld	e,(hl)
4395  1047  3E C0       	ld	a,0xc0
4396  1049  93          	sub	a, e
4397  104A  30 04       	jr	NC,l_UpdateWaveShip_00102
4398  104C  2E 00       	ld	l,0x00
4399  104E  18 69       	jr	l_UpdateWaveShip_00104
4400  1050              l_UpdateWaveShip_00102:
4401  1050  7B          	ld	a,e
4402  1051  C6 02       	add	a,0x02
4403  1053  DD 77 FF    	ld	(ix-1),a
4404  1056  77          	ld	(hl),a
4405  1057  69          	ld	l, c
4406  1058  60          	ld	h, b
4407  1059  23          	inc	hl
4408  105A  23          	inc	hl
4409  105B  23          	inc	hl
4410  105C  6E          	ld	l,(hl)
4411  105D  26 00       	ld	h,0x00
4412  105F  29          	add	hl, hl
4413  1060  29          	add	hl, hl
4414  1061  29          	add	hl, hl
4415  1062  C5          	push	bc
4416  1063  11 00 01    	ld	de,0x0100
4417  1066  D5          	push	de
4418  1067  E5          	push	hl
4419  1068  CD 00 00    	call	__modsint_callee
4420  106B  EB          	ex	de,hl
4421  106C  C1          	pop	bc
4422  106D  21 00 00    	ld	hl,_sinustable
4423  1070  19          	add	hl,de
4424  1071  5E          	ld	e,(hl)
4425  1072  16 00       	ld	d,0x00
4426  1074  21 80 FF    	ld	hl,0xff80
4427  1077  19          	add	hl,de
4428  1078  CB 2C       	sra	h
4429  107A  CB 1D       	rr	l
4430  107C  CB 2C       	sra	h
4431  107E  CB 1D       	rr	l
4432  1080  11 E0 FF    	ld	de,0xffe0
4433  1083  19          	add	hl, de
4434  1084  59          	ld	e,c
4435  1085  50          	ld	d,b
4436  1086  EB          	ex	de,hl
4437  1087  23          	inc	hl
4438  1088  23          	inc	hl
4439  1089  23          	inc	hl
4440  108A  23          	inc	hl
4441  108B  6E          	ld	l,(hl)
4442  108C  26 00       	ld	h,0x00
4443  108E  19          	add	hl,de
4444  108F  DD 75 FE    	ld	(ix-2),l
4445  1092  7D          	ld	a, l
4446  1093  02          	ld	(bc),a
4447  1094  3A 07 00    	ld	a,(_sprite164anim)
4448  1097  5F          	ld	e,a
4449  1098  16 00       	ld	d,0x00
4450  109A  21 75 01    	ld	hl,0x0175
4451  109D  19          	add	hl,de
4452  109E  C5          	push	bc
4453  109F  E5          	push	hl
4454  10A0  DD 66 FF    	ld	h,(ix-1)
4455  10A3  DD 6E FE    	ld	l,(ix-2)
4456  10A6  E5          	push	hl
4457  10A7  CD A7 00    	call	_DrawQuadSprite
4458  10AA  F1          	pop	af
4459  10AB  F1          	pop	af
4460  10AC  C1          	pop	bc
4461  10AD  3E 0A       	ld	a,0x0a
4462  10AF  F5          	push	af
4463  10B0  33          	inc	sp
4464  10B1  C5          	push	bc
4465  10B2  CD C6 5F    	call	_TestEnemyShootOne
4466  10B5  F1          	pop	af
4467  10B6  33          	inc	sp
4468  10B7  2E 01       	ld	l,0x01
4469  10B9              l_UpdateWaveShip_00104:
4470  10B9  DD F9       	ld	sp, ix
4471  10BB  DD E1       	pop	ix
4472  10BD  C9          	ret
4473  10BE              	SECTION code_compiler
4474  10BE              ;	---------------------------------
4475  10BE              ; Function UpdateRectShip
4476  10BE              ; ---------------------------------
4477  10BE              _UpdateRectShip:
4478  10BE  DD E5       	push	ix
4479  10C0  DD 21 00 00 	ld	ix,0
4480  10C4  DD 39       	add	ix,sp
4481  10C6  F5          	push	af
4482  10C7  3B          	dec	sp
4483  10C8  DD 7E 04    	ld	a,(ix+4)
4484  10CB  DD 77 FE    	ld	(ix-2),a
4485  10CE  4F          	ld	c, a
4486  10CF  DD 7E 05    	ld	a,(ix+5)
4487  10D2  DD 77 FF    	ld	(ix-1),a
4488  10D5  47          	ld	b,a
4489  10D6  03          	inc	bc
4490  10D7  0A          	ld	a,(bc)
4491  10D8  57          	ld	d,a
4492  10D9  DD 6E FE    	ld	l,(ix-2)
4493  10DC  DD 66 FF    	ld	h,(ix-1)
4494  10DF  5E          	ld	e,(hl)
4495  10E0  C5          	push	bc
4496  10E1  21 47 01    	ld	hl,0x0147
4497  10E4  E5          	push	hl
4498  10E5  D5          	push	de
4499  10E6  CD A7 00    	call	_DrawQuadSprite
4500  10E9  F1          	pop	af
4501  10EA  F1          	pop	af
4502  10EB  C1          	pop	bc
4503  10EC  3A 06 00    	ld	a,(_sprite82anim)
4504  10EF  C6 4B       	add	a,0x4b
4505  10F1  57          	ld	d,a
4506  10F2  0A          	ld	a,(bc)
4507  10F3  C6 F8       	add	a,0xf8
4508  10F5  5F          	ld	e,a
4509  10F6  DD 6E FE    	ld	l,(ix-2)
4510  10F9  DD 66 FF    	ld	h,(ix-1)
4511  10FC  7E          	ld	a,(hl)
4512  10FD  C6 04       	add	a,0x04
4513  10FF  DD 77 FD    	ld	(ix-3),a
4514  1102  C5          	push	bc
4515  1103  D5          	push	de
4516  1104  DD 7E FD    	ld	a,(ix-3)
4517  1107  F5          	push	af
4518  1108  33          	inc	sp
4519  1109  CD 00 00    	call	_SMS_addSprite_callee
4520  110C  C1          	pop	bc
4521  110D  0A          	ld	a,(bc)
4522  110E  5F          	ld	e,a
4523  110F  3E C0       	ld	a,0xc0
4524  1111  93          	sub	a, e
4525  1112  30 09       	jr	NC,l_UpdateRectShip_00102
4526  1114  7B          	ld	a,e
4527  1115  D6 D2       	sub	a,0xd2
4528  1117  30 04       	jr	NC,l_UpdateRectShip_00102
4529  1119  2E 00       	ld	l,0x00
4530  111B  18 14       	jr	l_UpdateRectShip_00105
4531  111D              l_UpdateRectShip_00102:
4532  111D  7B          	ld	a,e
4533  111E  C6 07       	add	a,0x07
4534  1120  02          	ld	(bc),a
4535  1121  3E 03       	ld	a,0x03
4536  1123  F5          	push	af
4537  1124  33          	inc	sp
4538  1125  C1          	pop	bc
4539  1126  E1          	pop	hl
4540  1127  E5          	push	hl
4541  1128  C5          	push	bc
4542  1129  E5          	push	hl
4543  112A  CD C6 5F    	call	_TestEnemyShootOne
4544  112D  F1          	pop	af
4545  112E  33          	inc	sp
4546  112F  2E 01       	ld	l,0x01
4547  1131              l_UpdateRectShip_00105:
4548  1131  DD F9       	ld	sp, ix
4549  1133  DD E1       	pop	ix
4550  1135  C9          	ret
4551  1136              	SECTION code_compiler
4552  1136              ;	---------------------------------
4553  1136              ; Function InitBombShipLeft
4554  1136              ; ---------------------------------
4555  1136              _InitBombShipLeft:
4556  1136  DD E5       	push	ix
4557  1138  DD 21 00 00 	ld	ix,0
4558  113C  DD 39       	add	ix,sp
4559  113E  DD 4E 04    	ld	c,(ix+4)
4560  1141  DD 46 05    	ld	b,(ix+5)
4561  1144  C5          	push	bc
4562  1145  CD 00 00    	call	_myRand
4563  1148  5D          	ld	e, l
4564  1149  16 5A       	ld	d,0x5a
4565  114B  D5          	push	de
4566  114C  CD 00 00    	call	__moduchar_callee
4567  114F  C1          	pop	bc
4568  1150  7D          	ld	a,l
4569  1151  C6 32       	add	a,0x32
4570  1153  02          	ld	(bc),a
4571  1154  21 04 00    	ld	hl,0x0004
4572  1157  09          	add	hl,bc
4573  1158  36 02       	ld	(hl),0x02
4574  115A  DD E1       	pop	ix
4575  115C  C9          	ret
4576  115D              	SECTION code_compiler
4577  115D              ;	---------------------------------
4578  115D              ; Function InitBombShipRight
4579  115D              ; ---------------------------------
4580  115D              _InitBombShipRight:
4581  115D  DD E5       	push	ix
4582  115F  DD 21 00 00 	ld	ix,0
4583  1163  DD 39       	add	ix,sp
4584  1165  DD 4E 04    	ld	c,(ix+4)
4585  1168  DD 46 05    	ld	b,(ix+5)
4586  116B  C5          	push	bc
4587  116C  CD 00 00    	call	_myRand
4588  116F  5D          	ld	e, l
4589  1170  16 5A       	ld	d,0x5a
4590  1172  D5          	push	de
4591  1173  CD 00 00    	call	__moduchar_callee
4592  1176  C1          	pop	bc
4593  1177  5D          	ld	e,l
4594  1178  3E CE       	ld	a,0xce
4595  117A  93          	sub	a, e
4596  117B  02          	ld	(bc),a
4597  117C  DD E1       	pop	ix
4598  117E  C9          	ret
4599  117F              	SECTION code_compiler
4600  117F              ;	---------------------------------
4601  117F              ; Function UpdateBombShip
4602  117F              ; ---------------------------------
4603  117F              _UpdateBombShip:
4604  117F  DD E5       	push	ix
4605  1181  DD 21 00 00 	ld	ix,0
4606  1185  DD 39       	add	ix,sp
4607  1187  2A 07 00    	ld	hl,(_sprite164anim)
4608  118A  F5          	push	af
4609  118B  F5          	push	af
4610  118C  26 00       	ld	h,0x00
4611  118E  01 4D 01    	ld	bc,0x014d
4612  1191  09          	add	hl,bc
4613  1192  E3          	ex	(sp), hl
4614  1193  DD 4E 04    	ld	c,(ix+4)
4615  1196  DD 46 05    	ld	b,(ix+5)
4616  1199  21 01 00    	ld	hl,0x0001
4617  119C  09          	add	hl,bc
4618  119D  DD 75 FE    	ld	(ix-2),l
4619  11A0  DD 74 FF    	ld	(ix-1),h
4620  11A3  5E          	ld	e,(hl)
4621  11A4  0A          	ld	a,(bc)
4622  11A5  57          	ld	d,a
4623  11A6  C5          	push	bc
4624  11A7  DD 6E FC    	ld	l,(ix-4)
4625  11AA  DD 66 FD    	ld	h,(ix-3)
4626  11AD  E5          	push	hl
4627  11AE  7B          	ld	a,e
4628  11AF  5A          	ld	e,d
4629  11B0  57          	ld	d,a
4630  11B1  D5          	push	de
4631  11B2  CD A7 00    	call	_DrawQuadSprite
4632  11B5  F1          	pop	af
4633  11B6  F1          	pop	af
4634  11B7  C1          	pop	bc
4635  11B8  C5          	push	bc
4636  11B9  3E 0D       	ld	a,0x0d
4637  11BB  F5          	push	af
4638  11BC  33          	inc	sp
4639  11BD  C5          	push	bc
4640  11BE  CD 88 5F    	call	_TestEnemyShoot
4641  11C1  F1          	pop	af
4642  11C2  33          	inc	sp
4643  11C3  C1          	pop	bc
4644  11C4  0A          	ld	a,(bc)
4645  11C5  5F          	ld	e,a
4646  11C6  69          	ld	l, c
4647  11C7  60          	ld	h, b
4648  11C8  23          	inc	hl
4649  11C9  23          	inc	hl
4650  11CA  23          	inc	hl
4651  11CB  23          	inc	hl
4652  11CC  56          	ld	d,(hl)
4653  11CD  7B          	ld	a,e
4654  11CE  82          	add	a, d
4655  11CF  02          	ld	(bc),a
4656  11D0  C6 FF       	add	a,0xff
4657  11D2  02          	ld	(bc),a
4658  11D3  03          	inc	bc
4659  11D4  03          	inc	bc
4660  11D5  03          	inc	bc
4661  11D6  0A          	ld	a,(bc)
4662  11D7  6F          	ld	l,a
4663  11D8  26 00       	ld	h,0x00
4664  11DA  29          	add	hl, hl
4665  11DB  11 00 00    	ld	de,_sinustable
4666  11DE  19          	add	hl,de
4667  11DF  5E          	ld	e,(hl)
4668  11E0  16 00       	ld	d,0x00
4669  11E2  21 80 FF    	ld	hl,0xff80
4670  11E5  19          	add	hl,de
4671  11E6  5D          	ld	e,l
4672  11E7  54          	ld	d,h
4673  11E8  29          	add	hl, hl
4674  11E9  19          	add	hl, de
4675  11EA  CB 2C       	sra	h
4676  11EC  CB 1D       	rr	l
4677  11EE  CB 2C       	sra	h
4678  11F0  CB 1D       	rr	l
4679  11F2  EB          	ex	de,hl
4680  11F3  DD 6E FE    	ld	l,(ix-2)
4681  11F6  DD 66 FF    	ld	h,(ix-1)
4682  11F9  73          	ld	(hl),e
4683  11FA  0A          	ld	a,(bc)
4684  11FB  D6 40       	sub	a,0x40
4685  11FD  3E 00       	ld	a,0x00
4686  11FF  17          	rla
4687  1200  6F          	ld	l,a
4688  1201  DD F9       	ld	sp, ix
4689  1203  DD E1       	pop	ix
4690  1205  C9          	ret
4691  1206              	SECTION code_compiler
4692  1206              ;	---------------------------------
4693  1206              ; Function InitSpreadShip
4694  1206              ; ---------------------------------
4695  1206              _InitSpreadShip:
4696  1206  DD E5       	push	ix
4697  1208  DD 21 00 00 	ld	ix,0
4698  120C  DD 39       	add	ix,sp
4699  120E  DD 4E 04    	ld	c,(ix+4)
4700  1211  DD 46 05    	ld	b,(ix+5)
4701  1214  C5          	push	bc
4702  1215  CD 00 00    	call	_myRand
4703  1218  C1          	pop	bc
4704  1219  7D          	ld	a,l
4705  121A  E6 7F       	and	a,0x7f
4706  121C  C6 38       	add	a,0x38
4707  121E  02          	ld	(bc),a
4708  121F  DD E1       	pop	ix
4709  1221  C9          	ret
4710  1222              	SECTION code_compiler
4711  1222              ;	---------------------------------
4712  1222              ; Function UpdateSpreadShip
4713  1222              ; ---------------------------------
4714  1222              _UpdateSpreadShip:
4715  1222  DD E5       	push	ix
4716  1224  DD 21 00 00 	ld	ix,0
4717  1228  DD 39       	add	ix,sp
4718  122A  F5          	push	af
4719  122B  3B          	dec	sp
4720  122C  DD 7E 04    	ld	a,(ix+4)
4721  122F  DD 77 FD    	ld	(ix-3),a
4722  1232  DD 7E 05    	ld	a,(ix+5)
4723  1235  DD 77 FE    	ld	(ix-2),a
4724  1238  C1          	pop	bc
4725  1239  C5          	push	bc
4726  123A  03          	inc	bc
4727  123B  E1          	pop	hl
4728  123C  0A          	ld	a,(bc)
4729  123D  57          	ld	d,a
4730  123E  5E          	ld	e,(hl)
4731  123F  E5          	push	hl
4732  1240  C5          	push	bc
4733  1241  21 59 01    	ld	hl,0x0159
4734  1244  E5          	push	hl
4735  1245  D5          	push	de
4736  1246  CD A7 00    	call	_DrawQuadSprite
4737  1249  F1          	pop	af
4738  124A  F1          	pop	af
4739  124B  C1          	pop	bc
4740  124C  3A 06 00    	ld	a,(_sprite82anim)
4741  124F  C6 5D       	add	a,0x5d
4742  1251  57          	ld	d,a
4743  1252  0A          	ld	a,(bc)
4744  1253  C6 F8       	add	a,0xf8
4745  1255  E1          	pop	hl
4746  1256  5F          	ld	e,a
4747  1257  7E          	ld	a,(hl)
4748  1258  E5          	push	hl
4749  1259  C6 04       	add	a,0x04
4750  125B  DD 77 FF    	ld	(ix-1),a
4751  125E  C5          	push	bc
4752  125F  D5          	push	de
4753  1260  DD 7E FF    	ld	a,(ix-1)
4754  1263  F5          	push	af
4755  1264  33          	inc	sp
4756  1265  CD 00 00    	call	_SMS_addSprite_callee
4757  1268  C1          	pop	bc
4758  1269  E1          	pop	hl
4759  126A  E5          	push	hl
4760  126B  23          	inc	hl
4761  126C  23          	inc	hl
4762  126D  23          	inc	hl
4763  126E  7E          	ld	a,(hl)
4764  126F  5F          	ld	e,a
4765  1270  FE 1E       	cp	a,0x1e
4766  1272  30 04       	jr	NC,l_UpdateSpreadShip_00110
4767  1274  87          	add	a, a
4768  1275  02          	ld	(bc),a
4769  1276  18 3C       	jr	l_UpdateSpreadShip_00111
4770  1278              l_UpdateSpreadShip_00110:
4771  1278  7B          	ld	a,e
4772  1279  FE 3C       	cp	a,0x3c
4773  127B  30 27       	jr	NC,l_UpdateSpreadShip_00107
4774  127D  D6 2D       	sub	a,0x2d
4775  127F  20 33       	jr	NZ,l_UpdateSpreadShip_00111
4776  1281  0A          	ld	a,(bc)
4777  1282  C6 08       	add	a,0x08
4778  1284  E1          	pop	hl
4779  1285  57          	ld	d,a
4780  1286  46          	ld	b,(hl)
4781  1287  E5          	push	hl
4782  1288  04          	inc	b
4783  1289  04          	inc	b
4784  128A  04          	inc	b
4785  128B  04          	inc	b
4786  128C  3E 03       	ld	a,0x03
4787  128E  F5          	push	af
4788  128F  33          	inc	sp
4789  1290  21 00 00    	ld	hl,_vulcantankshootspeedy
4790  1293  E5          	push	hl
4791  1294  21 00 00    	ld	hl,_vulcantankshootspeedx
4792  1297  E5          	push	hl
4793  1298  58          	ld	e,b
4794  1299  D5          	push	de
4795  129A  CD 40 5C    	call	_SpreadEnemyshootDirection
4796  129D  21 07 00    	ld	hl,7
4797  12A0  39          	add	hl,sp
4798  12A1  F9          	ld	sp,hl
4799  12A2  18 10       	jr	l_UpdateSpreadShip_00111
4800  12A4              l_UpdateSpreadShip_00107:
4801  12A4  7B          	ld	a,e
4802  12A5  D6 5A       	sub	a,0x5a
4803  12A7  30 07       	jr	NC,l_UpdateSpreadShip_00104
4804  12A9  3E 5A       	ld	a,0x5a
4805  12AB  93          	sub	a, e
4806  12AC  87          	add	a, a
4807  12AD  02          	ld	(bc),a
4808  12AE  18 04       	jr	l_UpdateSpreadShip_00111
4809  12B0              l_UpdateSpreadShip_00104:
4810  12B0  2E 00       	ld	l,0x00
4811  12B2  18 02       	jr	l_UpdateSpreadShip_00112
4812  12B4              l_UpdateSpreadShip_00111:
4813  12B4  2E 01       	ld	l,0x01
4814  12B6              l_UpdateSpreadShip_00112:
4815  12B6  DD F9       	ld	sp, ix
4816  12B8  DD E1       	pop	ix
4817  12BA  C9          	ret
4818  12BB              	SECTION code_compiler
4819  12BB              ;	---------------------------------
4820  12BB              ; Function DoCommonBossAppearingFunction
4821  12BB              ; ---------------------------------
4822  12BB              _DoCommonBossAppearingFunction:
4823  12BB  DD E5       	push	ix
4824  12BD  DD 21 00 00 	ld	ix,0
4825  12C1  DD 39       	add	ix,sp
4826  12C3  DD 6E 04    	ld	l,(ix+4)
4827  12C6  DD 66 05    	ld	h,(ix+5)
4828  12C9  4D          	ld	c,l
4829  12CA  44          	ld	b,h
4830  12CB  23          	inc	hl
4831  12CC  5E          	ld	e,(hl)
4832  12CD  1C          	inc	e
4833  12CE  73          	ld	(hl),e
4834  12CF  7B          	ld	a,e
4835  12D0  D6 1E       	sub	a,0x1e
4836  12D2  38 0D       	jr	C,l_DoCommonBossAppearingFunction_00103
4837  12D4  21 04 00    	ld	hl,0x0004
4838  12D7  09          	add	hl,bc
4839  12D8  36 01       	ld	(hl),0x01
4840  12DA  69          	ld	l,c
4841  12DB  60          	ld	h,b
4842  12DC  23          	inc	hl
4843  12DD  23          	inc	hl
4844  12DE  23          	inc	hl
4845  12DF  36 00       	ld	(hl),0x00
4846  12E1              l_DoCommonBossAppearingFunction_00103:
4847  12E1  DD E1       	pop	ix
4848  12E3  C9          	ret
4849  12E4              	SECTION code_compiler
4850  12E4              ;	---------------------------------
4851  12E4              ; Function UpdateStage4MiddleBoss1
4852  12E4              ; ---------------------------------
4853  12E4              _UpdateStage4MiddleBoss1:
4854  12E4  DD E5       	push	ix
4855  12E6  DD 21 00 00 	ld	ix,0
4856  12EA  DD 39       	add	ix,sp
4857  12EC  F5          	push	af
4858  12ED  F5          	push	af
4859  12EE  3B          	dec	sp
4860  12EF  DD 4E 04    	ld	c,(ix+4)
4861  12F2  DD 46 05    	ld	b,(ix+5)
4862  12F5  21 03 00    	ld	hl,0x0003
4863  12F8  09          	add	hl,bc
4864  12F9  F1          	pop	af
4865  12FA  E5          	push	hl
4866  12FB  6E          	ld	l,(hl)
4867  12FC  26 00       	ld	h,0x00
4868  12FE  29          	add	hl, hl
4869  12FF  C5          	push	bc
4870  1300  11 00 01    	ld	de,0x0100
4871  1303  D5          	push	de
4872  1304  E5          	push	hl
4873  1305  CD 00 00    	call	__modsint_callee
4874  1308  EB          	ex	de,hl
4875  1309  C1          	pop	bc
4876  130A  21 00 00    	ld	hl,_sinustable
4877  130D  19          	add	hl,de
4878  130E  5E          	ld	e,(hl)
4879  130F  16 00       	ld	d,0x00
4880  1311  21 80 FF    	ld	hl,0xff80
4881  1314  19          	add	hl,de
4882  1315  EB          	ex	de,hl
4883  1316  DD 71 FE    	ld	(ix-2),c
4884  1319  DD 70 FF    	ld	(ix-1),b
4885  131C  6B          	ld	l, e
4886  131D  62          	ld	h, d
4887  131E  29          	add	hl, hl
4888  131F  19          	add	hl, de
4889  1320  EB          	ex	de,hl
4890  1321  63          	ld	h,e
4891  1322  6A          	ld	l,d
4892  1323  CB 7A       	bit	7, d
4893  1325  28 05       	jr	Z,l_UpdateStage4MiddleBoss1_00109
4894  1327  13          	inc	de
4895  1328  13          	inc	de
4896  1329  13          	inc	de
4897  132A  63          	ld	h,e
4898  132B  6A          	ld	l,d
4899  132C              l_UpdateStage4MiddleBoss1_00109:
4900  132C  7C          	ld	a,h
4901  132D  CB 2D       	sra	l
4902  132F  1F          	rra
4903  1330  CB 2D       	sra	l
4904  1332  1F          	rra
4905  1333  C6 6C       	add	a,0x6c
4906  1335  DD 6E FE    	ld	l,(ix-2)
4907  1338  DD 66 FF    	ld	h,(ix-1)
4908  133B  77          	ld	(hl),a
4909  133C  E1          	pop	hl
4910  133D  5E          	ld	e,(hl)
4911  133E  E5          	push	hl
4912  133F  1C          	inc	e
4913  1340  20 10       	jr	NZ,l_UpdateStage4MiddleBoss1_00102
4914  1342  21 04 00    	ld	hl,0x0004
4915  1345  09          	add	hl,bc
4916  1346  36 02       	ld	(hl),0x02
4917  1348  E1          	pop	hl
4918  1349  E5          	push	hl
4919  134A  36 00       	ld	(hl),0x00
4920  134C  21 05 00    	ld	hl,0x0005
4921  134F  09          	add	hl,bc
4922  1350  36 08       	ld	(hl),0x08
4923  1352              l_UpdateStage4MiddleBoss1_00102:
4924  1352  E1          	pop	hl
4925  1353  7E          	ld	a,(hl)
4926  1354  E5          	push	hl
4927  1355  E6 0F       	and	a,0x0f
4928  1357  DD 77 FE    	ld	(ix-2),a
4929  135A  6F          	ld	l,a
4930  135B  59          	ld	e, c
4931  135C  50          	ld	d, b
4932  135D  13          	inc	de
4933  135E  7D          	ld	a,l
4934  135F  B7          	or	a, a
4935  1360  20 20       	jr	NZ,l_UpdateStage4MiddleBoss1_00104
4936  1362  1A          	ld	a,(de)
4937  1363  C6 20       	add	a,0x20
4938  1365  DD 77 FB    	ld	(ix-5),a
4939  1368  0A          	ld	a,(bc)
4940  1369  C6 20       	add	a,0x20
4941  136B  DD 77 FD    	ld	(ix-3),a
4942  136E  C5          	push	bc
4943  136F  D5          	push	de
4944  1370  3E 01       	ld	a,0x01
4945  1372  F5          	push	af
4946  1373  33          	inc	sp
4947  1374  DD 66 FB    	ld	h,(ix-5)
4948  1377  DD 6E FD    	ld	l,(ix-3)
4949  137A  E5          	push	hl
4950  137B  CD D7 5C    	call	_InitEnemyshoot
4951  137E  F1          	pop	af
4952  137F  33          	inc	sp
4953  1380  D1          	pop	de
4954  1381  C1          	pop	bc
4955  1382              l_UpdateStage4MiddleBoss1_00104:
4956  1382  DD 7E FE    	ld	a,(ix-2)
4957  1385  D6 08       	sub	a,0x08
4958  1387  20 12       	jr	NZ,l_UpdateStage4MiddleBoss1_00107
4959  1389  1A          	ld	a,(de)
4960  138A  C6 20       	add	a,0x20
4961  138C  57          	ld	d,a
4962  138D  0A          	ld	a,(bc)
4963  138E  47          	ld	b,a
4964  138F  3E 01       	ld	a,0x01
4965  1391  5A          	ld	e,d
4966  1392  57          	ld	d,a
4967  1393  D5          	push	de
4968  1394  C5          	push	bc
4969  1395  33          	inc	sp
4970  1396  CD D7 5C    	call	_InitEnemyshoot
4971  1399  F1          	pop	af
4972  139A  33          	inc	sp
4973  139B              l_UpdateStage4MiddleBoss1_00107:
4974  139B  DD F9       	ld	sp, ix
4975  139D  DD E1       	pop	ix
4976  139F  C9          	ret
4977  13A0              	SECTION code_compiler
4978  13A0              ;	---------------------------------
4979  13A0              ; Function UpdateStage4MiddleBoss2
4980  13A0              ; ---------------------------------
4981  13A0              _UpdateStage4MiddleBoss2:
4982  13A0  DD E5       	push	ix
4983  13A2  DD 21 00 00 	ld	ix,0
4984  13A6  DD 39       	add	ix,sp
4985  13A8  DD 6E 04    	ld	l,(ix+4)
4986  13AB  DD 66 05    	ld	h,(ix+5)
4987  13AE  4D          	ld	c,l
4988  13AF  44          	ld	b,h
4989  13B0  23          	inc	hl
4990  13B1  23          	inc	hl
4991  13B2  23          	inc	hl
4992  13B3  7E          	ld	a, (hl)
4993  13B4  D6 14       	sub	a,0x14
4994  13B6  38 07       	jr	C,l_UpdateStage4MiddleBoss2_00103
4995  13B8  03          	inc	bc
4996  13B9  03          	inc	bc
4997  13BA  03          	inc	bc
4998  13BB  03          	inc	bc
4999  13BC  0A          	ld	a,(bc)
5000  13BD  3C          	inc	a
5001  13BE  02          	ld	(bc),a
5002  13BF              l_UpdateStage4MiddleBoss2_00103:
5003  13BF  DD E1       	pop	ix
5004  13C1  C9          	ret
5005  13C2              	SECTION code_compiler
5006  13C2              ;	---------------------------------
5007  13C2              ; Function UpdateStage4MiddleBoss3
5008  13C2              ; ---------------------------------
5009  13C2              _UpdateStage4MiddleBoss3:
5010  13C2  DD E5       	push	ix
5011  13C4  DD 21 00 00 	ld	ix,0
5012  13C8  DD 39       	add	ix,sp
5013  13CA  F5          	push	af
5014  13CB  F5          	push	af
5015  13CC  3B          	dec	sp
5016  13CD  3A 12 00    	ld	a,(_playerx)
5017  13D0  DD 77 FB    	ld	(ix-5),a
5018  13D3  DD 36 FC 00 	ld	(ix-4),0x00
5019  13D7  C6 10       	add	a,0x10
5020  13D9  DD 77 FD    	ld	(ix-3),a
5021  13DC  DD 7E FC    	ld	a,(ix-4)
5022  13DF  CE 00       	adc	a,0x00
5023  13E1  DD 77 FE    	ld	(ix-2),a
5024  13E4  DD 4E 04    	ld	c,(ix+4)
5025  13E7  DD 46 05    	ld	b,(ix+5)
5026  13EA  0A          	ld	a,(bc)
5027  13EB  DD 77 FF    	ld	(ix-1),a
5028  13EE  5F          	ld	e, a
5029  13EF  16 00       	ld	d,0x00
5030  13F1  21 18 00    	ld	hl,0x0018
5031  13F4  19          	add	hl,de
5032  13F5  DD 7E FD    	ld	a,(ix-3)
5033  13F8  95          	sub	a, l
5034  13F9  DD 7E FE    	ld	a,(ix-2)
5035  13FC  9C          	sbc	a, h
5036  13FD  E2 02 14    	jp	PO, l_UpdateStage4MiddleBoss3_00124
5037  1400  EE 80       	xor	a,0x80
5038  1402              l_UpdateStage4MiddleBoss3_00124:
5039  1402  F2 0D 14    	jp	P,l_UpdateStage4MiddleBoss3_00108
5040  1405  DD 7E FF    	ld	a,(ix-1)
5041  1408  C6 FC       	add	a,0xfc
5042  140A  02          	ld	(bc),a
5043  140B  18 4C       	jr	l_UpdateStage4MiddleBoss3_00110
5044  140D              l_UpdateStage4MiddleBoss3_00108:
5045  140D  21 10 00    	ld	hl,0x0010
5046  1410  19          	add	hl,de
5047  1411  7D          	ld	a,l
5048  1412  DD 96 FB    	sub	a,(ix-5)
5049  1415  7C          	ld	a,h
5050  1416  DD 9E FC    	sbc	a,(ix-4)
5051  1419  E2 1E 14    	jp	PO, l_UpdateStage4MiddleBoss3_00125
5052  141C  EE 80       	xor	a,0x80
5053  141E              l_UpdateStage4MiddleBoss3_00125:
5054  141E  F2 29 14    	jp	P,l_UpdateStage4MiddleBoss3_00105
5055  1421  DD 7E FF    	ld	a,(ix-1)
5056  1424  C6 04       	add	a,0x04
5057  1426  02          	ld	(bc),a
5058  1427  18 30       	jr	l_UpdateStage4MiddleBoss3_00110
5059  1429              l_UpdateStage4MiddleBoss3_00105:
5060  1429  69          	ld	l, c
5061  142A  60          	ld	h, b
5062  142B  23          	inc	hl
5063  142C  7E          	ld	a,(hl)
5064  142D  C6 20       	add	a,0x20
5065  142F  57          	ld	d,a
5066  1430  DD 7E FF    	ld	a,(ix-1)
5067  1433  C6 10       	add	a,0x10
5068  1435  C5          	push	bc
5069  1436  5F          	ld	e,a
5070  1437  D5          	push	de
5071  1438  CD 80 5C    	call	_InitEnemyshootLaser
5072  143B  F1          	pop	af
5073  143C  C1          	pop	bc
5074  143D  21 05 00    	ld	hl,0x0005
5075  1440  09          	add	hl,bc
5076  1441  5E          	ld	e,(hl)
5077  1442  1D          	dec	e
5078  1443  73          	ld	(hl),e
5079  1444  21 04 00    	ld	hl,0x0004
5080  1447  09          	add	hl,bc
5081  1448  7B          	ld	a,e
5082  1449  B7          	or	a, a
5083  144A  20 04       	jr	NZ,l_UpdateStage4MiddleBoss3_00102
5084  144C  36 04       	ld	(hl),0x04
5085  144E  18 09       	jr	l_UpdateStage4MiddleBoss3_00110
5086  1450              l_UpdateStage4MiddleBoss3_00102:
5087  1450  36 02       	ld	(hl),0x02
5088  1452  69          	ld	l,c
5089  1453  60          	ld	h,b
5090  1454  23          	inc	hl
5091  1455  23          	inc	hl
5092  1456  23          	inc	hl
5093  1457  36 00       	ld	(hl),0x00
5094  1459              l_UpdateStage4MiddleBoss3_00110:
5095  1459  DD F9       	ld	sp, ix
5096  145B  DD E1       	pop	ix
5097  145D  C9          	ret
5098  145E              	SECTION code_compiler
5099  145E              ;	---------------------------------
5100  145E              ; Function UpdateStage4MiddleBoss4
5101  145E              ; ---------------------------------
5102  145E              _UpdateStage4MiddleBoss4:
5103  145E  DD E5       	push	ix
5104  1460  DD 21 00 00 	ld	ix,0
5105  1464  DD 39       	add	ix,sp
5106  1466  DD 4E 04    	ld	c,(ix+4)
5107  1469  DD 46 05    	ld	b,(ix+5)
5108  146C  0A          	ld	a,(bc)
5109  146D  5F          	ld	e,a
5110  146E  D6 6B       	sub	a,0x6b
5111  1470  30 06       	jr	NC,l_UpdateStage4MiddleBoss4_00105
5112  1472  7B          	ld	a,e
5113  1473  C6 03       	add	a,0x03
5114  1475  02          	ld	(bc),a
5115  1476  18 18       	jr	l_UpdateStage4MiddleBoss4_00107
5116  1478              l_UpdateStage4MiddleBoss4_00105:
5117  1478  3E 6D       	ld	a,0x6d
5118  147A  93          	sub	a, e
5119  147B  30 06       	jr	NC,l_UpdateStage4MiddleBoss4_00102
5120  147D  7B          	ld	a,e
5121  147E  C6 FD       	add	a,0xfd
5122  1480  02          	ld	(bc),a
5123  1481  18 0D       	jr	l_UpdateStage4MiddleBoss4_00107
5124  1483              l_UpdateStage4MiddleBoss4_00102:
5125  1483  21 04 00    	ld	hl,0x0004
5126  1486  09          	add	hl,bc
5127  1487  36 01       	ld	(hl),0x01
5128  1489  69          	ld	l,c
5129  148A  60          	ld	h,b
5130  148B  23          	inc	hl
5131  148C  23          	inc	hl
5132  148D  23          	inc	hl
5133  148E  36 00       	ld	(hl),0x00
5134  1490              l_UpdateStage4MiddleBoss4_00107:
5135  1490  DD E1       	pop	ix
5136  1492  C9          	ret
5137  1493              	SECTION code_compiler
5138  1493              ;	---------------------------------
5139  1493              ; Function FinishStage4MiddleBoss
5140  1493              ; ---------------------------------
5141  1493              _FinishStage4MiddleBoss:
5142  1493  21 00 29    	ld	hl,0x2900
5143  1496  E5          	push	hl
5144  1497  AF          	xor	a, a
5145  1498  F5          	push	af
5146  1499  33          	inc	sp
5147  149A  CD 23 49    	call	_InitEnemy
5148  149D  F1          	pop	af
5149  149E  33          	inc	sp
5150  149F  C9          	ret
5151  14A0              	SECTION code_compiler
5152  14A0              ;	---------------------------------
5153  14A0              ; Function UpdateStage4MiddleBoss
5154  14A0              ; ---------------------------------
5155  14A0              _UpdateStage4MiddleBoss:
5156  14A0  DD E5       	push	ix
5157  14A2  DD 21 00 00 	ld	ix,0
5158  14A6  DD 39       	add	ix,sp
5159  14A8  DD 6E 04    	ld	l,(ix+4)
5160  14AB  DD 66 05    	ld	h,(ix+5)
5161  14AE  5D          	ld	e,l
5162  14AF  54          	ld	d,h
5163  14B0  23          	inc	hl
5164  14B1  46          	ld	b,(hl)
5165  14B2  1A          	ld	a,(de)
5166  14B3  4F          	ld	c,a
5167  14B4  D5          	push	de
5168  14B5  21 28 28    	ld	hl,0x2828
5169  14B8  E5          	push	hl
5170  14B9  C5          	push	bc
5171  14BA  21 81 01    	ld	hl,0x0181
5172  14BD  E5          	push	hl
5173  14BE  CD 46 00    	call	_DrawSpriteArray
5174  14C1  21 06 00    	ld	hl,6
5175  14C4  39          	add	hl,sp
5176  14C5  F9          	ld	sp,hl
5177  14C6  D1          	pop	de
5178  14C7  01 00 00    	ld	bc,_updatestage4middlebossfunctions+0
5179  14CA  6B          	ld	l, e
5180  14CB  62          	ld	h, d
5181  14CC  23          	inc	hl
5182  14CD  23          	inc	hl
5183  14CE  23          	inc	hl
5184  14CF  23          	inc	hl
5185  14D0  6E          	ld	l,(hl)
5186  14D1  26 00       	ld	h,0x00
5187  14D3  29          	add	hl, hl
5188  14D4  09          	add	hl,bc
5189  14D5  4E          	ld	c,(hl)
5190  14D6  23          	inc	hl
5191  14D7  66          	ld	h,(hl)
5192  14D8  D5          	push	de
5193  14D9  69          	ld	l, c
5194  14DA  CD 00 00    	call	___sdcc_call_hl
5195  14DD  F1          	pop	af
5196  14DE  2E 01       	ld	l,0x01
5197  14E0  DD E1       	pop	ix
5198  14E2  C9          	ret
5199  14E3              	SECTION code_compiler
5200  14E3              ;	---------------------------------
5201  14E3              ; Function DoEnemyWait
5202  14E3              ; ---------------------------------
5203  14E3              _DoEnemyWait:
5204  14E3  DD E5       	push	ix
5205  14E5  DD 21 00 00 	ld	ix,0
5206  14E9  DD 39       	add	ix,sp
5207  14EB  DD 4E 04    	ld	c,(ix+4)
5208  14EE  DD 46 05    	ld	b,(ix+5)
5209  14F1  59          	ld	e, c
5210  14F2  50          	ld	d, b
5211  14F3  13          	inc	de
5212  14F4  13          	inc	de
5213  14F5  13          	inc	de
5214  14F6  1A          	ld	a,(de)
5215  14F7  D6 1E       	sub	a,0x1e
5216  14F9  38 0A       	jr	C,l_DoEnemyWait_00103
5217  14FB  03          	inc	bc
5218  14FC  03          	inc	bc
5219  14FD  03          	inc	bc
5220  14FE  03          	inc	bc
5221  14FF  DD 7E 06    	ld	a,(ix+6)
5222  1502  02          	ld	(bc),a
5223  1503  AF          	xor	a, a
5224  1504  12          	ld	(de),a
5225  1505              l_DoEnemyWait_00103:
5226  1505  DD E1       	pop	ix
5227  1507  C9          	ret
5228  1508              	SECTION code_compiler
5229  1508              ;	---------------------------------
5230  1508              ; Function DoStage4EndBossSinusMovementVert
5231  1508              ; ---------------------------------
5232  1508              _DoStage4EndBossSinusMovementVert:
5233  1508  DD E5       	push	ix
5234  150A  DD 21 00 00 	ld	ix,0
5235  150E  DD 39       	add	ix,sp
5236  1510  3B          	dec	sp
5237  1511  DD 5E 04    	ld	e,(ix+4)
5238  1514  DD 56 05    	ld	d,(ix+5)
5239  1517  21 05 00    	ld	hl,0x0005
5240  151A  19          	add	hl,de
5241  151B  7E          	ld	a,(hl)
5242  151C  DD 77 FF    	ld	(ix-1),a
5243  151F  EB          	ex	de,hl
5244  1520  4B          	ld	c,e
5245  1521  42          	ld	b,d
5246  1522  23          	inc	hl
5247  1523  5E          	ld	e,(hl)
5248  1524  DD 7E FF    	ld	a,(ix-1)
5249  1527  B7          	or	a, a
5250  1528  20 0E       	jr	NZ,l_DoStage4EndBossSinusMovementVert_00106
5251  152A  1C          	inc	e
5252  152B  1C          	inc	e
5253  152C  1C          	inc	e
5254  152D  73          	ld	(hl),e
5255  152E  7B          	ld	a,e
5256  152F  D6 80       	sub	a,0x80
5257  1531  38 11       	jr	C,l_DoStage4EndBossSinusMovementVert_00108
5258  1533  3E 01       	ld	a,0x01
5259  1535  02          	ld	(bc),a
5260  1536  18 0C       	jr	l_DoStage4EndBossSinusMovementVert_00108
5261  1538              l_DoStage4EndBossSinusMovementVert_00106:
5262  1538  7B          	ld	a,e
5263  1539  C6 FD       	add	a,0xfd
5264  153B  5F          	ld	e,a
5265  153C  73          	ld	(hl),e
5266  153D  3E 1E       	ld	a,0x1e
5267  153F  93          	sub	a, e
5268  1540  38 02       	jr	C,l_DoStage4EndBossSinusMovementVert_00108
5269  1542  AF          	xor	a, a
5270  1543  02          	ld	(bc),a
5271  1544              l_DoStage4EndBossSinusMovementVert_00108:
5272  1544  33          	inc	sp
5273  1545  DD E1       	pop	ix
5274  1547  C9          	ret
5275  1548              	SECTION code_compiler
5276  1548              ;	---------------------------------
5277  1548              ; Function UpdateStage4EndBoss1
5278  1548              ; ---------------------------------
5279  1548              _UpdateStage4EndBoss1:
5280  1548  DD E5       	push	ix
5281  154A  DD 21 00 00 	ld	ix,0
5282  154E  DD 39       	add	ix,sp
5283  1550  F5          	push	af
5284  1551  F5          	push	af
5285  1552  DD 4E 04    	ld	c,(ix+4)
5286  1555  DD 46 05    	ld	b,(ix+5)
5287  1558  21 02 00    	ld	hl,0x0002
5288  155B  09          	add	hl,bc
5289  155C  DD 75 FE    	ld	(ix-2),l
5290  155F  DD 74 FF    	ld	(ix-1),h
5291  1562  7E          	ld	a,(hl)
5292  1563  D6 0D       	sub	a,0x0d
5293  1565  20 03       	jr	NZ,l_UpdateStage4EndBoss1_00108
5294  1567  57          	ld	d,a
5295  1568  18 02       	jr	l_UpdateStage4EndBoss1_00109
5296  156A              l_UpdateStage4EndBoss1_00108:
5297  156A  16 18       	ld	d,0x18
5298  156C              l_UpdateStage4EndBoss1_00109:
5299  156C  C5          	push	bc
5300  156D  1E 03       	ld	e,0x03
5301  156F  D5          	push	de
5302  1570  C5          	push	bc
5303  1571  CD 29 36    	call	_DoSkullSinusMovement
5304  1574  F1          	pop	af
5305  1575  F1          	pop	af
5306  1576  C1          	pop	bc
5307  1577  21 03 00    	ld	hl,0x0003
5308  157A  09          	add	hl,bc
5309  157B  F1          	pop	af
5310  157C  56          	ld	d,(hl)
5311  157D  E5          	push	hl
5312  157E  C5          	push	bc
5313  157F  3E 26       	ld	a,0x26
5314  1581  5A          	ld	e,d
5315  1582  57          	ld	d,a
5316  1583  D5          	push	de
5317  1584  CD 00 00    	call	__moduchar_callee
5318  1587  C1          	pop	bc
5319  1588  7D          	ld	a,l
5320  1589  B7          	or	a, a
5321  158A  20 25       	jr	NZ,l_UpdateStage4EndBoss1_00102
5322  158C  69          	ld	l, c
5323  158D  60          	ld	h, b
5324  158E  23          	inc	hl
5325  158F  7E          	ld	a,(hl)
5326  1590  C6 28       	add	a,0x28
5327  1592  57          	ld	d,a
5328  1593  0A          	ld	a,(bc)
5329  1594  5F          	ld	e,a
5330  1595  DD 6E FE    	ld	l,(ix-2)
5331  1598  DD 66 FF    	ld	h,(ix-1)
5332  159B  7E          	ld	a,(hl)
5333  159C  D6 0D       	sub	a,0x0d
5334  159E  20 03       	jr	NZ,l_UpdateStage4EndBoss1_00110
5335  15A0  6F          	ld	l,a
5336  15A1  18 02       	jr	l_UpdateStage4EndBoss1_00111
5337  15A3              l_UpdateStage4EndBoss1_00110:
5338  15A3  2E 10       	ld	l,0x10
5339  15A5              l_UpdateStage4EndBoss1_00111:
5340  15A5  7B          	ld	a,e
5341  15A6  85          	add	a, l
5342  15A7  C5          	push	bc
5343  15A8  5F          	ld	e,a
5344  15A9  D5          	push	de
5345  15AA  CD 80 5C    	call	_InitEnemyshootLaser
5346  15AD  F1          	pop	af
5347  15AE  C1          	pop	bc
5348  15AF  18 11       	jr	l_UpdateStage4EndBoss1_00103
5349  15B1              l_UpdateStage4EndBoss1_00102:
5350  15B1  C5          	push	bc
5351  15B2  21 08 30    	ld	hl,0x3008
5352  15B5  E5          	push	hl
5353  15B6  3E 18       	ld	a,0x18
5354  15B8  F5          	push	af
5355  15B9  33          	inc	sp
5356  15BA  C5          	push	bc
5357  15BB  CD F9 5F    	call	_TestEnemyShootComplex
5358  15BE  F1          	pop	af
5359  15BF  F1          	pop	af
5360  15C0  33          	inc	sp
5361  15C1  C1          	pop	bc
5362  15C2              l_UpdateStage4EndBoss1_00103:
5363  15C2  E1          	pop	hl
5364  15C3  7E          	ld	a,(hl)
5365  15C4  E5          	push	hl
5366  15C5  D6 A5       	sub	a,0xa5
5367  15C7  20 0B       	jr	NZ,l_UpdateStage4EndBoss1_00106
5368  15C9  03          	inc	bc
5369  15CA  03          	inc	bc
5370  15CB  03          	inc	bc
5371  15CC  03          	inc	bc
5372  15CD  0A          	ld	a,(bc)
5373  15CE  3C          	inc	a
5374  15CF  E1          	pop	hl
5375  15D0  02          	ld	(bc),a
5376  15D1  E5          	push	hl
5377  15D2  36 00       	ld	(hl),0x00
5378  15D4              l_UpdateStage4EndBoss1_00106:
5379  15D4  DD F9       	ld	sp, ix
5380  15D6  DD E1       	pop	ix
5381  15D8  C9          	ret
5382  15D9              	SECTION code_compiler
5383  15D9              ;	---------------------------------
5384  15D9              ; Function UpdateStage4EndBoss2
5385  15D9              ; ---------------------------------
5386  15D9              _UpdateStage4EndBoss2:
5387  15D9  DD E5       	push	ix
5388  15DB  DD 21 00 00 	ld	ix,0
5389  15DF  DD 39       	add	ix,sp
5390  15E1  3E 03       	ld	a,0x03
5391  15E3  F5          	push	af
5392  15E4  33          	inc	sp
5393  15E5  DD 6E 04    	ld	l,(ix+4)
5394  15E8  DD 66 05    	ld	h,(ix+5)
5395  15EB  E5          	push	hl
5396  15EC  CD E3 14    	call	_DoEnemyWait
5397  15EF  F1          	pop	af
5398  15F0  33          	inc	sp
5399  15F1  DD E1       	pop	ix
5400  15F3  C9          	ret
5401  15F4              	SECTION code_compiler
5402  15F4              ;	---------------------------------
5403  15F4              ; Function UpdateStage4EndBoss3
5404  15F4              ; ---------------------------------
5405  15F4              _UpdateStage4EndBoss3:
5406  15F4  DD E5       	push	ix
5407  15F6  DD 21 00 00 	ld	ix,0
5408  15FA  DD 39       	add	ix,sp
5409  15FC  DD 4E 04    	ld	c,(ix+4)
5410  15FF  DD 46 05    	ld	b,(ix+5)
5411  1602  21 06 00    	ld	hl,0x0006
5412  1605  09          	add	hl,bc
5413  1606  7E          	ld	a, (hl)
5414  1607  D6 0A       	sub	a,0x0a
5415  1609  30 02       	jr	NC,l_UpdateStage4EndBoss3_00102
5416  160B  36 0A       	ld	(hl),0x0a
5417  160D              l_UpdateStage4EndBoss3_00102:
5418  160D  69          	ld	l, c
5419  160E  60          	ld	h, b
5420  160F  23          	inc	hl
5421  1610  23          	inc	hl
5422  1611  56          	ld	d,(hl)
5423  1612  0A          	ld	a,(bc)
5424  1613  5F          	ld	e,a
5425  1614  7A          	ld	a,d
5426  1615  D6 0D       	sub	a,0x0d
5427  1617  20 06       	jr	NZ,l_UpdateStage4EndBoss3_00104
5428  1619  1D          	dec	e
5429  161A  1D          	dec	e
5430  161B  7B          	ld	a,e
5431  161C  02          	ld	(bc),a
5432  161D  18 04       	jr	l_UpdateStage4EndBoss3_00105
5433  161F              l_UpdateStage4EndBoss3_00104:
5434  161F  1C          	inc	e
5435  1620  1C          	inc	e
5436  1621  7B          	ld	a,e
5437  1622  02          	ld	(bc),a
5438  1623              l_UpdateStage4EndBoss3_00105:
5439  1623  59          	ld	e, c
5440  1624  50          	ld	d, b
5441  1625  13          	inc	de
5442  1626  13          	inc	de
5443  1627  13          	inc	de
5444  1628  1A          	ld	a,(de)
5445  1629  D6 2D       	sub	a,0x2d
5446  162B  38 09       	jr	C,l_UpdateStage4EndBoss3_00108
5447  162D  03          	inc	bc
5448  162E  03          	inc	bc
5449  162F  03          	inc	bc
5450  1630  03          	inc	bc
5451  1631  0A          	ld	a,(bc)
5452  1632  3C          	inc	a
5453  1633  02          	ld	(bc),a
5454  1634  AF          	xor	a, a
5455  1635  12          	ld	(de),a
5456  1636              l_UpdateStage4EndBoss3_00108:
5457  1636  DD E1       	pop	ix
5458  1638  C9          	ret
5459  1639              	SECTION code_compiler
5460  1639              ;	---------------------------------
5461  1639              ; Function UpdateStage4EndBoss4
5462  1639              ; ---------------------------------
5463  1639              _UpdateStage4EndBoss4:
5464  1639  DD E5       	push	ix
5465  163B  DD 21 00 00 	ld	ix,0
5466  163F  DD 39       	add	ix,sp
5467  1641  F5          	push	af
5468  1642  3B          	dec	sp
5469  1643  DD 4E 04    	ld	c,(ix+4)
5470  1646  DD 46 05    	ld	b,(ix+5)
5471  1649  21 06 00    	ld	hl,0x0006
5472  164C  09          	add	hl,bc
5473  164D  7E          	ld	a, (hl)
5474  164E  D6 0A       	sub	a,0x0a
5475  1650  30 02       	jr	NC,l_UpdateStage4EndBoss4_00102
5476  1652  36 0A       	ld	(hl),0x0a
5477  1654              l_UpdateStage4EndBoss4_00102:
5478  1654  C5          	push	bc
5479  1655  C5          	push	bc
5480  1656  CD 08 15    	call	_DoStage4EndBossSinusMovementVert
5481  1659  F1          	pop	af
5482  165A  C1          	pop	bc
5483  165B  21 03 00    	ld	hl,0x0003
5484  165E  09          	add	hl,bc
5485  165F  F1          	pop	af
5486  1660  56          	ld	d,(hl)
5487  1661  E5          	push	hl
5488  1662  C5          	push	bc
5489  1663  3E 24       	ld	a,0x24
5490  1665  5A          	ld	e,d
5491  1666  57          	ld	d,a
5492  1667  D5          	push	de
5493  1668  CD 00 00    	call	__moduchar_callee
5494  166B  C1          	pop	bc
5495  166C  7D          	ld	a,l
5496  166D  D6 0C       	sub	a,0x0c
5497  166F  20 3E       	jr	NZ,l_UpdateStage4EndBoss4_00104
5498  1671  69          	ld	l, c
5499  1672  60          	ld	h, b
5500  1673  23          	inc	hl
5501  1674  7E          	ld	a,(hl)
5502  1675  DD 77 FF    	ld	(ix-1),a
5503  1678  C5          	push	bc
5504  1679  CD 00 00    	call	_myRand
5505  167C  5D          	ld	e, l
5506  167D  16 28       	ld	d,0x28
5507  167F  D5          	push	de
5508  1680  CD 00 00    	call	__moduchar_callee
5509  1683  C1          	pop	bc
5510  1684  5D          	ld	e,l
5511  1685  DD 7E FF    	ld	a,(ix-1)
5512  1688  83          	add	a, e
5513  1689  5F          	ld	e,a
5514  168A  0A          	ld	a,(bc)
5515  168B  57          	ld	d,a
5516  168C  69          	ld	l, c
5517  168D  60          	ld	h, b
5518  168E  23          	inc	hl
5519  168F  23          	inc	hl
5520  1690  7E          	ld	a,(hl)
5521  1691  D6 0D       	sub	a,0x0d
5522  1693  20 04       	jr	NZ,l_UpdateStage4EndBoss4_00110
5523  1695  2E 18       	ld	l,0x18
5524  1697  18 02       	jr	l_UpdateStage4EndBoss4_00111
5525  1699              l_UpdateStage4EndBoss4_00110:
5526  1699  2E 00       	ld	l,0x00
5527  169B              l_UpdateStage4EndBoss4_00111:
5528  169B  7A          	ld	a,d
5529  169C  85          	add	a, l
5530  169D  57          	ld	d,a
5531  169E  C5          	push	bc
5532  169F  3E 40       	ld	a,0x40
5533  16A1  F5          	push	af
5534  16A2  33          	inc	sp
5535  16A3  7B          	ld	a,e
5536  16A4  5A          	ld	e,d
5537  16A5  57          	ld	d,a
5538  16A6  D5          	push	de
5539  16A7  CD 23 49    	call	_InitEnemy
5540  16AA  F1          	pop	af
5541  16AB  33          	inc	sp
5542  16AC  C1          	pop	bc
5543  16AD  18 11       	jr	l_UpdateStage4EndBoss4_00105
5544  16AF              l_UpdateStage4EndBoss4_00104:
5545  16AF  C5          	push	bc
5546  16B0  21 0C 10    	ld	hl,0x100c
5547  16B3  E5          	push	hl
5548  16B4  3E 1C       	ld	a,0x1c
5549  16B6  F5          	push	af
5550  16B7  33          	inc	sp
5551  16B8  C5          	push	bc
5552  16B9  CD F9 5F    	call	_TestEnemyShootComplex
5553  16BC  F1          	pop	af
5554  16BD  F1          	pop	af
5555  16BE  33          	inc	sp
5556  16BF  C1          	pop	bc
5557  16C0              l_UpdateStage4EndBoss4_00105:
5558  16C0  E1          	pop	hl
5559  16C1  7E          	ld	a,(hl)
5560  16C2  E5          	push	hl
5561  16C3  D6 87       	sub	a,0x87
5562  16C5  20 0B       	jr	NZ,l_UpdateStage4EndBoss4_00108
5563  16C7  03          	inc	bc
5564  16C8  03          	inc	bc
5565  16C9  03          	inc	bc
5566  16CA  03          	inc	bc
5567  16CB  0A          	ld	a,(bc)
5568  16CC  3C          	inc	a
5569  16CD  E1          	pop	hl
5570  16CE  02          	ld	(bc),a
5571  16CF  E5          	push	hl
5572  16D0  36 00       	ld	(hl),0x00
5573  16D2              l_UpdateStage4EndBoss4_00108:
5574  16D2  DD F9       	ld	sp, ix
5575  16D4  DD E1       	pop	ix
5576  16D6  C9          	ret
5577  16D7              	SECTION code_compiler
5578  16D7              ;	---------------------------------
5579  16D7              ; Function UpdateStage4EndBoss5
5580  16D7              ; ---------------------------------
5581  16D7              _UpdateStage4EndBoss5:
5582  16D7  DD E5       	push	ix
5583  16D9  DD 21 00 00 	ld	ix,0
5584  16DD  DD 39       	add	ix,sp
5585  16DF  DD 4E 04    	ld	c,(ix+4)
5586  16E2  DD 46 05    	ld	b,(ix+5)
5587  16E5  21 06 00    	ld	hl,0x0006
5588  16E8  09          	add	hl,bc
5589  16E9  7E          	ld	a, (hl)
5590  16EA  D6 0A       	sub	a,0x0a
5591  16EC  30 02       	jr	NC,l_UpdateStage4EndBoss5_00102
5592  16EE  36 0A       	ld	(hl),0x0a
5593  16F0              l_UpdateStage4EndBoss5_00102:
5594  16F0  3E 06       	ld	a,0x06
5595  16F2  F5          	push	af
5596  16F3  33          	inc	sp
5597  16F4  C5          	push	bc
5598  16F5  CD E3 14    	call	_DoEnemyWait
5599  16F8  F1          	pop	af
5600  16F9  33          	inc	sp
5601  16FA  DD E1       	pop	ix
5602  16FC  C9          	ret
5603  16FD              	SECTION code_compiler
5604  16FD              ;	---------------------------------
5605  16FD              ; Function UpdateStage4EndBoss6
5606  16FD              ; ---------------------------------
5607  16FD              _UpdateStage4EndBoss6:
5608  16FD  DD E5       	push	ix
5609  16FF  DD 21 00 00 	ld	ix,0
5610  1703  DD 39       	add	ix,sp
5611  1705  DD 4E 04    	ld	c,(ix+4)
5612  1708  DD 46 05    	ld	b,(ix+5)
5613  170B  21 06 00    	ld	hl,0x0006
5614  170E  09          	add	hl,bc
5615  170F  7E          	ld	a, (hl)
5616  1710  D6 0A       	sub	a,0x0a
5617  1712  30 02       	jr	NC,l_UpdateStage4EndBoss6_00102
5618  1714  36 0A       	ld	(hl),0x0a
5619  1716              l_UpdateStage4EndBoss6_00102:
5620  1716  69          	ld	l, c
5621  1717  60          	ld	h, b
5622  1718  23          	inc	hl
5623  1719  23          	inc	hl
5624  171A  56          	ld	d,(hl)
5625  171B  0A          	ld	a,(bc)
5626  171C  5F          	ld	e,a
5627  171D  7A          	ld	a,d
5628  171E  D6 0D       	sub	a,0x0d
5629  1720  20 06       	jr	NZ,l_UpdateStage4EndBoss6_00104
5630  1722  1C          	inc	e
5631  1723  1C          	inc	e
5632  1724  7B          	ld	a,e
5633  1725  02          	ld	(bc),a
5634  1726  18 04       	jr	l_UpdateStage4EndBoss6_00105
5635  1728              l_UpdateStage4EndBoss6_00104:
5636  1728  1D          	dec	e
5637  1729  1D          	dec	e
5638  172A  7B          	ld	a,e
5639  172B  02          	ld	(bc),a
5640  172C              l_UpdateStage4EndBoss6_00105:
5641  172C  59          	ld	e, c
5642  172D  50          	ld	d, b
5643  172E  13          	inc	de
5644  172F  13          	inc	de
5645  1730  13          	inc	de
5646  1731  1A          	ld	a,(de)
5647  1732  D6 2D       	sub	a,0x2d
5648  1734  38 09       	jr	C,l_UpdateStage4EndBoss6_00108
5649  1736  03          	inc	bc
5650  1737  03          	inc	bc
5651  1738  03          	inc	bc
5652  1739  03          	inc	bc
5653  173A  0A          	ld	a,(bc)
5654  173B  3C          	inc	a
5655  173C  02          	ld	(bc),a
5656  173D  AF          	xor	a, a
5657  173E  12          	ld	(de),a
5658  173F              l_UpdateStage4EndBoss6_00108:
5659  173F  DD E1       	pop	ix
5660  1741  C9          	ret
5661  1742              	SECTION code_compiler
5662  1742              ;	---------------------------------
5663  1742              ; Function UpdateStage4EndBoss7
5664  1742              ; ---------------------------------
5665  1742              _UpdateStage4EndBoss7:
5666  1742  DD E5       	push	ix
5667  1744  DD 21 00 00 	ld	ix,0
5668  1748  DD 39       	add	ix,sp
5669  174A  3E 01       	ld	a,0x01
5670  174C  F5          	push	af
5671  174D  33          	inc	sp
5672  174E  DD 6E 04    	ld	l,(ix+4)
5673  1751  DD 66 05    	ld	h,(ix+5)
5674  1754  E5          	push	hl
5675  1755  CD E3 14    	call	_DoEnemyWait
5676  1758  F1          	pop	af
5677  1759  33          	inc	sp
5678  175A  DD E1       	pop	ix
5679  175C  C9          	ret
5680  175D              	SECTION code_compiler
5681  175D              ;	---------------------------------
5682  175D              ; Function UpdateStage4EndBoss
5683  175D              ; ---------------------------------
5684  175D              _UpdateStage4EndBoss:
5685  175D  DD E5       	push	ix
5686  175F  DD 21 00 00 	ld	ix,0
5687  1763  DD 39       	add	ix,sp
5688  1765  F5          	push	af
5689  1766  DD 6E 04    	ld	l,(ix+4)
5690  1769  DD 66 05    	ld	h,(ix+5)
5691  176C  4D          	ld	c,l
5692  176D  44          	ld	b,h
5693  176E  23          	inc	hl
5694  176F  7E          	ld	a,(hl)
5695  1770  DD 77 FE    	ld	(ix-2),a
5696  1773  0A          	ld	a,(bc)
5697  1774  DD 77 FF    	ld	(ix-1),a
5698  1777  69          	ld	l, c
5699  1778  60          	ld	h, b
5700  1779  23          	inc	hl
5701  177A  23          	inc	hl
5702  177B  7E          	ld	a,(hl)
5703  177C  D6 0D       	sub	a,0x0d
5704  177E  20 05       	jr	NZ,l_UpdateStage4EndBoss_00103
5705  1780  11 9A 01    	ld	de,0x019a
5706  1783  18 03       	jr	l_UpdateStage4EndBoss_00104
5707  1785              l_UpdateStage4EndBoss_00103:
5708  1785  11 AC 01    	ld	de,0x01ac
5709  1788              l_UpdateStage4EndBoss_00104:
5710  1788  C5          	push	bc
5711  1789  21 18 30    	ld	hl,0x3018
5712  178C  E5          	push	hl
5713  178D  DD 66 FE    	ld	h,(ix-2)
5714  1790  DD 6E FF    	ld	l,(ix-1)
5715  1793  E5          	push	hl
5716  1794  D5          	push	de
5717  1795  CD 46 00    	call	_DrawSpriteArray
5718  1798  21 06 00    	ld	hl,6
5719  179B  39          	add	hl,sp
5720  179C  F9          	ld	sp,hl
5721  179D  C1          	pop	bc
5722  179E  21 04 00    	ld	hl,0x0004
5723  17A1  09          	add	hl,bc
5724  17A2  6E          	ld	l,(hl)
5725  17A3  26 00       	ld	h,0x00
5726  17A5  29          	add	hl, hl
5727  17A6  11 00 00    	ld	de,_updatestage4endbossfunctions
5728  17A9  19          	add	hl,de
5729  17AA  5E          	ld	e,(hl)
5730  17AB  23          	inc	hl
5731  17AC  66          	ld	h,(hl)
5732  17AD  C5          	push	bc
5733  17AE  6B          	ld	l, e
5734  17AF  CD 00 00    	call	___sdcc_call_hl
5735  17B2  F1          	pop	af
5736  17B3  2E 01       	ld	l,0x01
5737  17B5  DD F9       	ld	sp, ix
5738  17B7  DD E1       	pop	ix
5739  17B9  C9          	ret
5740  17BA              	SECTION code_compiler
5741  17BA              ;	---------------------------------
5742  17BA              ; Function InitStage4EndBossB
5743  17BA              ; ---------------------------------
5744  17BA              _InitStage4EndBossB:
5745  17BA  DD E5       	push	ix
5746  17BC  DD 21 00 00 	ld	ix,0
5747  17C0  DD 39       	add	ix,sp
5748  17C2  DD 4E 04    	ld	c,(ix+4)
5749  17C5  DD 46 05    	ld	b,(ix+5)
5750  17C8  0A          	ld	a,(bc)
5751  17C9  5F          	ld	e,a
5752  17CA  3E 78       	ld	a,0x78
5753  17CC  93          	sub	a, e
5754  17CD  38 06       	jr	C,l_InitStage4EndBossB_00103
5755  17CF  21 04 00    	ld	hl,0x0004
5756  17D2  09          	add	hl,bc
5757  17D3  36 10       	ld	(hl),0x10
5758  17D5              l_InitStage4EndBossB_00103:
5759  17D5  DD E1       	pop	ix
5760  17D7  C9          	ret
5761  17D8              	SECTION code_compiler
5762  17D8              ;	---------------------------------
5763  17D8              ; Function UpdateStage4EndBossB
5764  17D8              ; ---------------------------------
5765  17D8              _UpdateStage4EndBossB:
5766  17D8  DD E5       	push	ix
5767  17DA  DD 21 00 00 	ld	ix,0
5768  17DE  DD 39       	add	ix,sp
5769  17E0  F5          	push	af
5770  17E1  DD 4E 04    	ld	c,(ix+4)
5771  17E4  DD 46 05    	ld	b,(ix+5)
5772  17E7  0A          	ld	a,(bc)
5773  17E8  5F          	ld	e,a
5774  17E9  69          	ld	l, c
5775  17EA  60          	ld	h, b
5776  17EB  23          	inc	hl
5777  17EC  23          	inc	hl
5778  17ED  23          	inc	hl
5779  17EE  23          	inc	hl
5780  17EF  7E          	ld	a,(hl)
5781  17F0  C6 F8       	add	a,0xf8
5782  17F2  83          	add	a,e
5783  17F3  57          	ld	d,a
5784  17F4  02          	ld	(bc),a
5785  17F5  5F          	ld	e,a
5786  17F6  7A          	ld	a,d
5787  17F7  D6 0C       	sub	a,0x0c
5788  17F9  38 05       	jr	C,l_UpdateStage4EndBossB_00101
5789  17FB  3E E6       	ld	a,0xe6
5790  17FD  93          	sub	a, e
5791  17FE  30 04       	jr	NC,l_UpdateStage4EndBossB_00102
5792  1800              l_UpdateStage4EndBossB_00101:
5793  1800  2E 00       	ld	l,0x00
5794  1802  18 24       	jr	l_UpdateStage4EndBossB_00104
5795  1804              l_UpdateStage4EndBossB_00102:
5796  1804  21 01 00    	ld	hl,0x0001
5797  1807  09          	add	hl,bc
5798  1808  F1          	pop	af
5799  1809  56          	ld	d,(hl)
5800  180A  E5          	push	hl
5801  180B  C5          	push	bc
5802  180C  3E BE       	ld	a,0xbe
5803  180E  F5          	push	af
5804  180F  33          	inc	sp
5805  1810  D5          	push	de
5806  1811  CD 00 00    	call	_SMS_addSprite_callee
5807  1814  C1          	pop	bc
5808  1815  E1          	pop	hl
5809  1816  56          	ld	d,(hl)
5810  1817  0A          	ld	a,(bc)
5811  1818  E5          	push	hl
5812  1819  C6 08       	add	a,0x08
5813  181B  47          	ld	b,a
5814  181C  3E BF       	ld	a,0xbf
5815  181E  5A          	ld	e,d
5816  181F  57          	ld	d,a
5817  1820  D5          	push	de
5818  1821  C5          	push	bc
5819  1822  33          	inc	sp
5820  1823  CD 00 00    	call	_SMS_addSprite_callee
5821  1826  2E 01       	ld	l,0x01
5822  1828              l_UpdateStage4EndBossB_00104:
5823  1828  DD F9       	ld	sp, ix
5824  182A  DD E1       	pop	ix
5825  182C  C9          	ret
5826  182D              	SECTION code_compiler
5827  182D              ;	---------------------------------
5828  182D              ; Function UpdateStage4Object
5829  182D              ; ---------------------------------
5830  182D              _UpdateStage4Object:
5831  182D  DD E5       	push	ix
5832  182F  DD 21 00 00 	ld	ix,0
5833  1833  DD 39       	add	ix,sp
5834  1835  DD 6E 04    	ld	l,(ix+4)
5835  1838  DD 66 05    	ld	h,(ix+5)
5836  183B  23          	inc	hl
5837  183C  23          	inc	hl
5838  183D  23          	inc	hl
5839  183E  4E          	ld	c,(hl)
5840  183F  3E 80       	ld	a,0x80
5841  1841  91          	sub	a, c
5842  1842  30 19       	jr	NC,l_UpdateStage4Object_00102
5843  1844  CD CB 09    	call	_updatescrollact
5844  1847  21 34 01    	ld	hl,_stage4playrays
5845  184A  36 00       	ld	(hl),0x00
5846  184C  21 00 00    	ld	hl,0x0000
5847  184F  E5          	push	hl
5848  1850  21 00 00    	ld	hl,_stage4scriptb
5849  1853  E5          	push	hl
5850  1854  CD F4 49    	call	_InitScript
5851  1857  F1          	pop	af
5852  1858  F1          	pop	af
5853  1859  2E 00       	ld	l,0x00
5854  185B  18 02       	jr	l_UpdateStage4Object_00104
5855  185D              l_UpdateStage4Object_00102:
5856  185D  2E 01       	ld	l,0x01
5857  185F              l_UpdateStage4Object_00104:
5858  185F  DD E1       	pop	ix
5859  1861  C9          	ret
5860  1862              	SECTION code_compiler
5861  1862              ;	---------------------------------
5862  1862              ; Function UpdateStage2Object
5863  1862              ; ---------------------------------
5864  1862              _UpdateStage2Object:
5865  1862  DD E5       	push	ix
5866  1864  DD 21 00 00 	ld	ix,0
5867  1868  DD 39       	add	ix,sp
5868  186A  DD 6E 04    	ld	l,(ix+4)
5869  186D  DD 66 05    	ld	h,(ix+5)
5870  1870  23          	inc	hl
5871  1871  23          	inc	hl
5872  1872  23          	inc	hl
5873  1873  4E          	ld	c,(hl)
5874  1874  3E 50       	ld	a,0x50
5875  1876  91          	sub	a, c
5876  1877  30 08       	jr	NC,l_UpdateStage2Object_00102
5877  1879  21 FF 00    	ld	hl,_disablescroll
5878  187C  2E 00       	ld	l,0x00
5879  187E  75          	ld	(hl),l
5880  187F  18 02       	jr	l_UpdateStage2Object_00104
5881  1881              l_UpdateStage2Object_00102:
5882  1881  2E 01       	ld	l,0x01
5883  1883              l_UpdateStage2Object_00104:
5884  1883  DD E1       	pop	ix
5885  1885  C9          	ret
5886  1886              	SECTION code_compiler
5887  1886              ;	---------------------------------
5888  1886              ; Function InitWW2Plane
5889  1886              ; ---------------------------------
5890  1886              _InitWW2Plane:
5891  1886  DD E5       	push	ix
5892  1888  DD 21 00 00 	ld	ix,0
5893  188C  DD 39       	add	ix,sp
5894  188E  F5          	push	af
5895  188F  3B          	dec	sp
5896  1890  DD 4E 04    	ld	c,(ix+4)
5897  1893  DD 46 05    	ld	b,(ix+5)
5898  1896  21 04 00    	ld	hl,0x0004
5899  1899  09          	add	hl,bc
5900  189A  59          	ld	e,c
5901  189B  50          	ld	d,b
5902  189C  EB          	ex	de,hl
5903  189D  23          	inc	hl
5904  189E  23          	inc	hl
5905  189F  7E          	ld	a,(hl)
5906  18A0  C6 F0       	add	a,0xf0
5907  18A2  DD 77 FD    	ld	(ix-3),a
5908  18A5  12          	ld	(de),a
5909  18A6  11 00 00    	ld	de,_ww2plane_patterns+0
5910  18A9  DD 6E FD    	ld	l,(ix-3)
5911  18AC  26 00       	ld	h,0x00
5912  18AE  29          	add	hl, hl
5913  18AF  19          	add	hl,de
5914  18B0  5E          	ld	e,(hl)
5915  18B1  23          	inc	hl
5916  18B2  56          	ld	d,(hl)
5917  18B3  1A          	ld	a,(de)
5918  18B4  02          	ld	(bc),a
5919  18B5  21 01 00    	ld	hl,0x0001
5920  18B8  09          	add	hl,bc
5921  18B9  DD 75 FE    	ld	(ix-2),l
5922  18BC  DD 74 FF    	ld	(ix-1),h
5923  18BF  EB          	ex	de,hl
5924  18C0  23          	inc	hl
5925  18C1  5E          	ld	e,(hl)
5926  18C2  DD 6E FE    	ld	l,(ix-2)
5927  18C5  DD 66 FF    	ld	h,(ix-1)
5928  18C8  73          	ld	(hl),e
5929  18C9  21 05 00    	ld	hl,0x0005
5930  18CC  09          	add	hl,bc
5931  18CD  36 02       	ld	(hl),0x02
5932  18CF  DD F9       	ld	sp, ix
5933  18D1  DD E1       	pop	ix
5934  18D3  C9          	ret
5935  18D4              	SECTION code_compiler
5936  18D4              ;	---------------------------------
5937  18D4              ; Function UpdateWW2Plane
5938  18D4              ; ---------------------------------
5939  18D4              _UpdateWW2Plane:
5940  18D4  DD E5       	push	ix
5941  18D6  DD 21 00 00 	ld	ix,0
5942  18DA  DD 39       	add	ix,sp
5943  18DC  21 FA FF    	ld	hl,-6
5944  18DF  39          	add	hl,sp
5945  18E0  F9          	ld	sp,hl
5946  18E1  01 00 00    	ld	bc,_ww2plane_patterns+0
5947  18E4  DD 7E 04    	ld	a,(ix+4)
5948  18E7  DD 77 FC    	ld	(ix-4),a
5949  18EA  DD 7E 05    	ld	a,(ix+5)
5950  18ED  DD 77 FD    	ld	(ix-3),a
5951  18F0  D1          	pop	de
5952  18F1  E1          	pop	hl
5953  18F2  E5          	push	hl
5954  18F3  D5          	push	de
5955  18F4  11 04 00    	ld	de,0x0004
5956  18F7  19          	add	hl, de
5957  18F8  6E          	ld	l,(hl)
5958  18F9  26 00       	ld	h,0x00
5959  18FB  29          	add	hl, hl
5960  18FC  09          	add	hl,bc
5961  18FD  4E          	ld	c,(hl)
5962  18FE  23          	inc	hl
5963  18FF  46          	ld	b,(hl)
5964  1900  DD 7E FC    	ld	a,(ix-4)
5965  1903  DD 77 FA    	ld	(ix-6),a
5966  1906  DD 7E FD    	ld	a,(ix-3)
5967  1909  DD 77 FB    	ld	(ix-5),a
5968  190C              l_UpdateWW2Plane_00101:
5969  190C  E1          	pop	hl
5970  190D  E5          	push	hl
5971  190E  23          	inc	hl
5972  190F  23          	inc	hl
5973  1910  23          	inc	hl
5974  1911  56          	ld	d,(hl)
5975  1912  DD 7E FC    	ld	a,(ix-4)
5976  1915  C6 05       	add	a,0x05
5977  1917  DD 77 FE    	ld	(ix-2),a
5978  191A  6F          	ld	l,a
5979  191B  DD 7E FD    	ld	a,(ix-3)
5980  191E  CE 00       	adc	a,0x00
5981  1920  DD 77 FF    	ld	(ix-1),a
5982  1923  67          	ld	h,a
5983  1924  5E          	ld	e,(hl)
5984  1925  6B          	ld	l,e
5985  1926  26 00       	ld	h,0x00
5986  1928  09          	add	hl,bc
5987  1929  6E          	ld	l,(hl)
5988  192A  7A          	ld	a,d
5989  192B  95          	sub	a, l
5990  192C  38 0B       	jr	C,l_UpdateWW2Plane_00103
5991  192E  1C          	inc	e
5992  192F  1C          	inc	e
5993  1930  DD 6E FE    	ld	l,(ix-2)
5994  1933  DD 66 FF    	ld	h,(ix-1)
5995  1936  73          	ld	(hl),e
5996  1937  18 D3       	jr	l_UpdateWW2Plane_00101
5997  1939              l_UpdateWW2Plane_00103:
5998  1939  16 00       	ld	d,0x00
5999  193B  EB          	ex	de,hl
6000  193C  23          	inc	hl
6001  193D  09          	add	hl,bc
6002  193E  7E          	ld	a,(hl)
6003  193F  4F          	ld	c,a
6004  1940  D6 08       	sub	a,0x08
6005  1942  20 03       	jr	NZ,l_UpdateWW2Plane_00105
6006  1944  6F          	ld	l,a
6007  1945  18 5A       	jr	l_UpdateWW2Plane_00106
6008  1947              l_UpdateWW2Plane_00105:
6009  1947  DD 6E FC    	ld	l,(ix-4)
6010  194A  DD 66 FD    	ld	h,(ix-3)
6011  194D  5E          	ld	e,(hl)
6012  194E  06 00       	ld	b,0x00
6013  1950  21 00 00    	ld	hl,_ww2planemovementx
6014  1953  09          	add	hl, bc
6015  1954  46          	ld	b,(hl)
6016  1955  7B          	ld	a,e
6017  1956  80          	add	a, b
6018  1957  DD 6E FC    	ld	l,(ix-4)
6019  195A  DD 66 FD    	ld	h,(ix-3)
6020  195D  77          	ld	(hl),a
6021  195E  DD 5E FC    	ld	e,(ix-4)
6022  1961  DD 56 FD    	ld	d,(ix-3)
6023  1964  13          	inc	de
6024  1965  1A          	ld	a,(de)
6025  1966  47          	ld	b,a
6026  1967  3E 00       	ld	a,+((_ww2planemovementy) & 0xFF)
6027  1969  81          	add	a, c
6028  196A  6F          	ld	l,a
6029  196B  3E 00       	ld	a,+((_ww2planemovementy) / 256)
6030  196D  CE 00       	adc	a,0x00
6031  196F  67          	ld	h,a
6032  1970  6E          	ld	l,(hl)
6033  1971  78          	ld	a,b
6034  1972  85          	add	a, l
6035  1973  12          	ld	(de),a
6036  1974  69          	ld	l,c
6037  1975  26 00       	ld	h,0x00
6038  1977  29          	add	hl, hl
6039  1978  29          	add	hl, hl
6040  1979  01 47 01    	ld	bc,0x0147
6041  197C  09          	add	hl,bc
6042  197D  1A          	ld	a,(de)
6043  197E  4D          	ld	c,l
6044  197F  DD 6E FC    	ld	l,(ix-4)
6045  1982  44          	ld	b,h
6046  1983  DD 66 FD    	ld	h,(ix-3)
6047  1986  56          	ld	d,(hl)
6048  1987  C5          	push	bc
6049  1988  5A          	ld	e,d
6050  1989  57          	ld	d,a
6051  198A  D5          	push	de
6052  198B  CD A7 00    	call	_DrawQuadSprite
6053  198E  F1          	pop	af
6054  198F  26 1F       	ld	h,0x1f
6055  1991  E3          	ex	(sp),hl
6056  1992  33          	inc	sp
6057  1993  DD 6E FC    	ld	l,(ix-4)
6058  1996  DD 66 FD    	ld	h,(ix-3)
6059  1999  E5          	push	hl
6060  199A  CD 88 5F    	call	_TestEnemyShoot
6061  199D  F1          	pop	af
6062  199E  33          	inc	sp
6063  199F  2E 01       	ld	l,0x01
6064  19A1              l_UpdateWW2Plane_00106:
6065  19A1  DD F9       	ld	sp, ix
6066  19A3  DD E1       	pop	ix
6067  19A5  C9          	ret
6068  19A6              	SECTION code_compiler
6069  19A6              ;	---------------------------------
6070  19A6              ; Function UpdateWW2PlaneB
6071  19A6              ; ---------------------------------
6072  19A6              _UpdateWW2PlaneB:
6073  19A6  DD E5       	push	ix
6074  19A8  DD 21 00 00 	ld	ix,0
6075  19AC  DD 39       	add	ix,sp
6076  19AE  3B          	dec	sp
6077  19AF  DD 5E 04    	ld	e,(ix+4)
6078  19B2  DD 56 05    	ld	d,(ix+5)
6079  19B5  4B          	ld	c, e
6080  19B6  42          	ld	b, d
6081  19B7  03          	inc	bc
6082  19B8  0A          	ld	a,(bc)
6083  19B9  DD 77 FF    	ld	(ix-1),a
6084  19BC  1A          	ld	a,(de)
6085  19BD  57          	ld	d,a
6086  19BE  C5          	push	bc
6087  19BF  21 53 01    	ld	hl,0x0153
6088  19C2  E5          	push	hl
6089  19C3  DD 7E FF    	ld	a,(ix-1)
6090  19C6  5A          	ld	e,d
6091  19C7  57          	ld	d,a
6092  19C8  D5          	push	de
6093  19C9  CD A7 00    	call	_DrawQuadSprite
6094  19CC  F1          	pop	af
6095  19CD  F1          	pop	af
6096  19CE  C1          	pop	bc
6097  19CF  0A          	ld	a,(bc)
6098  19D0  5F          	ld	e,a
6099  19D1  3E C0       	ld	a,0xc0
6100  19D3  93          	sub	a, e
6101  19D4  30 09       	jr	NC,l_UpdateWW2PlaneB_00102
6102  19D6  7B          	ld	a,e
6103  19D7  D6 D2       	sub	a,0xd2
6104  19D9  30 04       	jr	NC,l_UpdateWW2PlaneB_00102
6105  19DB  2E 00       	ld	l,0x00
6106  19DD  18 06       	jr	l_UpdateWW2PlaneB_00105
6107  19DF              l_UpdateWW2PlaneB_00102:
6108  19DF  7B          	ld	a,e
6109  19E0  C6 05       	add	a,0x05
6110  19E2  02          	ld	(bc),a
6111  19E3  2E 01       	ld	l,0x01
6112  19E5              l_UpdateWW2PlaneB_00105:
6113  19E5  33          	inc	sp
6114  19E6  DD E1       	pop	ix
6115  19E8  C9          	ret
6116  19E9              	SECTION code_compiler
6117  19E9              ;	---------------------------------
6118  19E9              ; Function InitWW2Zeppelin
6119  19E9              ; ---------------------------------
6120  19E9              _InitWW2Zeppelin:
6121  19E9  DD E5       	push	ix
6122  19EB  DD 21 00 00 	ld	ix,0
6123  19EF  DD 39       	add	ix,sp
6124  19F1  DD 4E 04    	ld	c,(ix+4)
6125  19F4  DD 46 05    	ld	b,(ix+5)
6126  19F7  0A          	ld	a,(bc)
6127  19F8  5F          	ld	e,a
6128  19F9  C5          	push	bc
6129  19FA  D5          	push	de
6130  19FB  CD 00 00    	call	_myRand
6131  19FE  D1          	pop	de
6132  19FF  C1          	pop	bc
6133  1A00  7D          	ld	a,l
6134  1A01  E6 1F       	and	a,0x1f
6135  1A03  C6 F0       	add	a,0xf0
6136  1A05  83          	add	a,e
6137  1A06  02          	ld	(bc),a
6138  1A07  DD E1       	pop	ix
6139  1A09  C9          	ret
6140  1A0A              	SECTION code_compiler
6141  1A0A              ;	---------------------------------
6142  1A0A              ; Function UpdateWW2Zeppelin
6143  1A0A              ; ---------------------------------
6144  1A0A              _UpdateWW2Zeppelin:
6145  1A0A  DD E5       	push	ix
6146  1A0C  DD 21 00 00 	ld	ix,0
6147  1A10  DD 39       	add	ix,sp
6148  1A12  F5          	push	af
6149  1A13  3B          	dec	sp
6150  1A14  DD 7E 04    	ld	a,(ix+4)
6151  1A17  DD 77 FE    	ld	(ix-2),a
6152  1A1A  4F          	ld	c, a
6153  1A1B  DD 7E 05    	ld	a,(ix+5)
6154  1A1E  DD 77 FF    	ld	(ix-1),a
6155  1A21  47          	ld	b,a
6156  1A22  03          	inc	bc
6157  1A23  0A          	ld	a,(bc)
6158  1A24  5F          	ld	e,a
6159  1A25  3E C0       	ld	a,0xc0
6160  1A27  93          	sub	a, e
6161  1A28  30 04       	jr	NC,l_UpdateWW2Zeppelin_00104
6162  1A2A  2E 00       	ld	l,0x00
6163  1A2C  18 57       	jr	l_UpdateWW2Zeppelin_00106
6164  1A2E              l_UpdateWW2Zeppelin_00104:
6165  1A2E  DD 6E FE    	ld	l,(ix-2)
6166  1A31  DD 66 FF    	ld	h,(ix-1)
6167  1A34  56          	ld	d,(hl)
6168  1A35  C5          	push	bc
6169  1A36  21 10 18    	ld	hl,0x1810
6170  1A39  E5          	push	hl
6171  1A3A  7B          	ld	a,e
6172  1A3B  5A          	ld	e,d
6173  1A3C  57          	ld	d,a
6174  1A3D  D5          	push	de
6175  1A3E  21 7F 01    	ld	hl,0x017f
6176  1A41  E5          	push	hl
6177  1A42  CD 46 00    	call	_DrawSpriteArray
6178  1A45  21 06 00    	ld	hl,6
6179  1A48  39          	add	hl,sp
6180  1A49  F9          	ld	sp,hl
6181  1A4A  C1          	pop	bc
6182  1A4B  3A 06 00    	ld	a,(_sprite82anim)
6183  1A4E  C6 85       	add	a,0x85
6184  1A50  57          	ld	d,a
6185  1A51  0A          	ld	a,(bc)
6186  1A52  C6 F8       	add	a,0xf8
6187  1A54  5F          	ld	e,a
6188  1A55  DD 6E FE    	ld	l,(ix-2)
6189  1A58  DD 66 FF    	ld	h,(ix-1)
6190  1A5B  7E          	ld	a,(hl)
6191  1A5C  C6 04       	add	a,0x04
6192  1A5E  DD 77 FD    	ld	(ix-3),a
6193  1A61  C5          	push	bc
6194  1A62  D5          	push	de
6195  1A63  DD 7E FD    	ld	a,(ix-3)
6196  1A66  F5          	push	af
6197  1A67  33          	inc	sp
6198  1A68  CD 00 00    	call	_SMS_addSprite_callee
6199  1A6B  C1          	pop	bc
6200  1A6C  3A 05 00    	ld	a,(_stageframe4mod)
6201  1A6F  3D          	dec	a
6202  1A70  20 03       	jr	NZ,l_UpdateWW2Zeppelin_00102
6203  1A72  0A          	ld	a,(bc)
6204  1A73  3C          	inc	a
6205  1A74  02          	ld	(bc),a
6206  1A75              l_UpdateWW2Zeppelin_00102:
6207  1A75  3E 15       	ld	a,0x15
6208  1A77  F5          	push	af
6209  1A78  33          	inc	sp
6210  1A79  C1          	pop	bc
6211  1A7A  E1          	pop	hl
6212  1A7B  E5          	push	hl
6213  1A7C  C5          	push	bc
6214  1A7D  E5          	push	hl
6215  1A7E  CD 88 5F    	call	_TestEnemyShoot
6216  1A81  F1          	pop	af
6217  1A82  33          	inc	sp
6218  1A83  2E 01       	ld	l,0x01
6219  1A85              l_UpdateWW2Zeppelin_00106:
6220  1A85  DD F9       	ld	sp, ix
6221  1A87  DD E1       	pop	ix
6222  1A89  C9          	ret
6223  1A8A              	SECTION code_compiler
6224  1A8A              ;	---------------------------------
6225  1A8A              ; Function UpdateWW2Ship
6226  1A8A              ; ---------------------------------
6227  1A8A              _UpdateWW2Ship:
6228  1A8A  DD E5       	push	ix
6229  1A8C  DD 21 00 00 	ld	ix,0
6230  1A90  DD 39       	add	ix,sp
6231  1A92  3B          	dec	sp
6232  1A93  DD 4E 04    	ld	c,(ix+4)
6233  1A96  DD 46 05    	ld	b,(ix+5)
6234  1A99  59          	ld	e, c
6235  1A9A  50          	ld	d, b
6236  1A9B  13          	inc	de
6237  1A9C  1A          	ld	a,(de)
6238  1A9D  DD 77 FF    	ld	(ix-1),a
6239  1AA0  0A          	ld	a,(bc)
6240  1AA1  47          	ld	b,a
6241  1AA2  D5          	push	de
6242  1AA3  21 87 01    	ld	hl,0x0187
6243  1AA6  E5          	push	hl
6244  1AA7  DD 7E FF    	ld	a,(ix-1)
6245  1AAA  48          	ld	c,b
6246  1AAB  47          	ld	b,a
6247  1AAC  C5          	push	bc
6248  1AAD  CD A7 00    	call	_DrawQuadSprite
6249  1AB0  F1          	pop	af
6250  1AB1  F1          	pop	af
6251  1AB2  D1          	pop	de
6252  1AB3  1A          	ld	a,(de)
6253  1AB4  3C          	inc	a
6254  1AB5  4F          	ld	c,a
6255  1AB6  12          	ld	(de),a
6256  1AB7  3E C0       	ld	a,0xc0
6257  1AB9  91          	sub	a, c
6258  1ABA  30 04       	jr	NC,l_UpdateWW2Ship_00102
6259  1ABC  2E 00       	ld	l,0x00
6260  1ABE  18 02       	jr	l_UpdateWW2Ship_00103
6261  1AC0              l_UpdateWW2Ship_00102:
6262  1AC0  2E 01       	ld	l,0x01
6263  1AC2              l_UpdateWW2Ship_00103:
6264  1AC2  33          	inc	sp
6265  1AC3  DD E1       	pop	ix
6266  1AC5  C9          	ret
6267  1AC6              	SECTION code_compiler
6268  1AC6              ;	---------------------------------
6269  1AC6              ; Function UpdateStage5Missile
6270  1AC6              ; ---------------------------------
6271  1AC6              _UpdateStage5Missile:
6272  1AC6  DD E5       	push	ix
6273  1AC8  DD 21 00 00 	ld	ix,0
6274  1ACC  DD 39       	add	ix,sp
6275  1ACE  F5          	push	af
6276  1ACF  F5          	push	af
6277  1AD0  DD 6E 04    	ld	l,(ix+4)
6278  1AD3  DD 66 05    	ld	h,(ix+5)
6279  1AD6  4D          	ld	c,l
6280  1AD7  44          	ld	b,h
6281  1AD8  23          	inc	hl
6282  1AD9  23          	inc	hl
6283  1ADA  23          	inc	hl
6284  1ADB  7E          	ld	a,(hl)
6285  1ADC  E6 01       	and	a,0x01
6286  1ADE  5F          	ld	e,a
6287  1ADF  21 04 00    	ld	hl,0x0004
6288  1AE2  09          	add	hl,bc
6289  1AE3  E3          	ex	(sp), hl
6290  1AE4  7B          	ld	a,e
6291  1AE5  B7          	or	a, a
6292  1AE6  20 05       	jr	NZ,l_UpdateStage5Missile_00102
6293  1AE8  E1          	pop	hl
6294  1AE9  5E          	ld	e,(hl)
6295  1AEA  1C          	inc	e
6296  1AEB  E5          	push	hl
6297  1AEC  73          	ld	(hl),e
6298  1AED              l_UpdateStage5Missile_00102:
6299  1AED  21 01 00    	ld	hl,0x0001
6300  1AF0  09          	add	hl,bc
6301  1AF1  DD 75 FE    	ld	(ix-2),l
6302  1AF4  DD 74 FF    	ld	(ix-1),h
6303  1AF7  56          	ld	d,(hl)
6304  1AF8  E1          	pop	hl
6305  1AF9  7E          	ld	a,(hl)
6306  1AFA  E5          	push	hl
6307  1AFB  2E 00       	ld	l,0x00
6308  1AFD  C6 FC       	add	a,0xfc
6309  1AFF  5F          	ld	e,a
6310  1B00  7D          	ld	a,l
6311  1B01  CE FF       	adc	a,0xff
6312  1B03  6F          	ld	l,a
6313  1B04  26 00       	ld	h,0x00
6314  1B06  7A          	ld	a,d
6315  1B07  93          	sub	a, e
6316  1B08  7C          	ld	a,h
6317  1B09  9D          	sbc	a, l
6318  1B0A  E2 0F 1B    	jp	PO, l_UpdateStage5Missile_00115
6319  1B0D  EE 80       	xor	a,0x80
6320  1B0F              l_UpdateStage5Missile_00115:
6321  1B0F  F2 16 1B    	jp	P,l_UpdateStage5Missile_00104
6322  1B12  2E 00       	ld	l,0x00
6323  1B14  18 48       	jr	l_UpdateStage5Missile_00105
6324  1B16              l_UpdateStage5Missile_00104:
6325  1B16  0A          	ld	a,(bc)
6326  1B17  5F          	ld	e,a
6327  1B18  69          	ld	l, c
6328  1B19  60          	ld	h, b
6329  1B1A  23          	inc	hl
6330  1B1B  23          	inc	hl
6331  1B1C  23          	inc	hl
6332  1B1D  23          	inc	hl
6333  1B1E  23          	inc	hl
6334  1B1F  56          	ld	d,(hl)
6335  1B20  15          	dec	d
6336  1B21  15          	dec	d
6337  1B22  7B          	ld	a,e
6338  1B23  82          	add	a, d
6339  1B24  5F          	ld	e,a
6340  1B25  02          	ld	(bc),a
6341  1B26  DD 6E FE    	ld	l,(ix-2)
6342  1B29  DD 66 FF    	ld	h,(ix-1)
6343  1B2C  56          	ld	d,(hl)
6344  1B2D  E1          	pop	hl
6345  1B2E  E5          	push	hl
6346  1B2F  6E          	ld	l,(hl)
6347  1B30  3E 04       	ld	a,0x04
6348  1B32  95          	sub	a, l
6349  1B33  82          	add	a,d
6350  1B34  57          	ld	d,a
6351  1B35  DD 6E FE    	ld	l,(ix-2)
6352  1B38  DD 66 FF    	ld	h,(ix-1)
6353  1B3B  72          	ld	(hl),d
6354  1B3C  C5          	push	bc
6355  1B3D  3E AE       	ld	a,0xae
6356  1B3F  F5          	push	af
6357  1B40  33          	inc	sp
6358  1B41  D5          	push	de
6359  1B42  CD 00 00    	call	_SMS_addSprite_callee
6360  1B45  C1          	pop	bc
6361  1B46  DD 6E FE    	ld	l,(ix-2)
6362  1B49  DD 66 FF    	ld	h,(ix-1)
6363  1B4C  7E          	ld	a,(hl)
6364  1B4D  C6 08       	add	a,0x08
6365  1B4F  57          	ld	d,a
6366  1B50  0A          	ld	a,(bc)
6367  1B51  47          	ld	b,a
6368  1B52  3E AF       	ld	a,0xaf
6369  1B54  5A          	ld	e,d
6370  1B55  57          	ld	d,a
6371  1B56  D5          	push	de
6372  1B57  C5          	push	bc
6373  1B58  33          	inc	sp
6374  1B59  CD 00 00    	call	_SMS_addSprite_callee
6375  1B5C  2E 01       	ld	l,0x01
6376  1B5E              l_UpdateStage5Missile_00105:
6377  1B5E  DD F9       	ld	sp, ix
6378  1B60  DD E1       	pop	ix
6379  1B62  C9          	ret
6380  1B63              	SECTION code_compiler
6381  1B63              ;	---------------------------------
6382  1B63              ; Function UpdateStage5EndBoss0
6383  1B63              ; ---------------------------------
6384  1B63              _UpdateStage5EndBoss0:
6385  1B63  DD E5       	push	ix
6386  1B65  DD 21 00 00 	ld	ix,0
6387  1B69  DD 39       	add	ix,sp
6388  1B6B  DD 6E 04    	ld	l,(ix+4)
6389  1B6E  DD 66 05    	ld	h,(ix+5)
6390  1B71  4D          	ld	c,l
6391  1B72  44          	ld	b,h
6392  1B73  23          	inc	hl
6393  1B74  5E          	ld	e,(hl)
6394  1B75  1D          	dec	e
6395  1B76  73          	ld	(hl),e
6396  1B77  3E 80       	ld	a,0x80
6397  1B79  93          	sub	a, e
6398  1B7A  38 13       	jr	C,l_UpdateStage5EndBoss0_00103
6399  1B7C  21 04 00    	ld	hl,0x0004
6400  1B7F  09          	add	hl,bc
6401  1B80  36 01       	ld	(hl),0x01
6402  1B82  21 05 00    	ld	hl,0x0005
6403  1B85  09          	add	hl,bc
6404  1B86  36 00       	ld	(hl),0x00
6405  1B88  69          	ld	l,c
6406  1B89  60          	ld	h,b
6407  1B8A  23          	inc	hl
6408  1B8B  23          	inc	hl
6409  1B8C  23          	inc	hl
6410  1B8D  36 00       	ld	(hl),0x00
6411  1B8F              l_UpdateStage5EndBoss0_00103:
6412  1B8F  DD E1       	pop	ix
6413  1B91  C9          	ret
6414  1B92              	SECTION code_compiler
6415  1B92              ;	---------------------------------
6416  1B92              ; Function UpdateStage5EndBoss1
6417  1B92              ; ---------------------------------
6418  1B92              _UpdateStage5EndBoss1:
6419  1B92  DD E5       	push	ix
6420  1B94  DD 21 00 00 	ld	ix,0
6421  1B98  DD 39       	add	ix,sp
6422  1B9A  F5          	push	af
6423  1B9B  F5          	push	af
6424  1B9C  DD 4E 04    	ld	c,(ix+4)
6425  1B9F  DD 46 05    	ld	b,(ix+5)
6426  1BA2  59          	ld	e, c
6427  1BA3  50          	ld	d, b
6428  1BA4  13          	inc	de
6429  1BA5  13          	inc	de
6430  1BA6  13          	inc	de
6431  1BA7  1A          	ld	a,(de)
6432  1BA8  D6 FA       	sub	a,0xfa
6433  1BAA  20 08       	jr	NZ,l_UpdateStage5EndBoss1_00102
6434  1BAC  21 04 00    	ld	hl,0x0004
6435  1BAF  09          	add	hl,bc
6436  1BB0  36 02       	ld	(hl),0x02
6437  1BB2  18 76       	jr	l_UpdateStage5EndBoss1_00108
6438  1BB4              l_UpdateStage5EndBoss1_00102:
6439  1BB4  C5          	push	bc
6440  1BB5  D5          	push	de
6441  1BB6  21 02 00    	ld	hl,0x0002
6442  1BB9  E5          	push	hl
6443  1BBA  C5          	push	bc
6444  1BBB  CD 29 36    	call	_DoSkullSinusMovement
6445  1BBE  F1          	pop	af
6446  1BBF  F1          	pop	af
6447  1BC0  D1          	pop	de
6448  1BC1  C1          	pop	bc
6449  1BC2  DD 71 FE    	ld	(ix-2),c
6450  1BC5  DD 70 FF    	ld	(ix-1),b
6451  1BC8  1A          	ld	a,(de)
6452  1BC9  57          	ld	d,a
6453  1BCA  C5          	push	bc
6454  1BCB  3E 50       	ld	a,0x50
6455  1BCD  5A          	ld	e,d
6456  1BCE  57          	ld	d,a
6457  1BCF  D5          	push	de
6458  1BD0  CD 00 00    	call	__moduchar_callee
6459  1BD3  C1          	pop	bc
6460  1BD4  7D          	ld	a,l
6461  1BD5  D6 40       	sub	a,0x40
6462  1BD7  20 51       	jr	NZ,l_UpdateStage5EndBoss1_00108
6463  1BD9  D1          	pop	de
6464  1BDA  C5          	push	bc
6465  1BDB  0E 00       	ld	c,0x00
6466  1BDD              l_UpdateStage5EndBoss1_00106:
6467  1BDD  E1          	pop	hl
6468  1BDE  E5          	push	hl
6469  1BDF  23          	inc	hl
6470  1BE0  7E          	ld	a,(hl)
6471  1BE1  C6 30       	add	a,0x30
6472  1BE3  47          	ld	b,a
6473  1BE4  DD 6E FE    	ld	l,(ix-2)
6474  1BE7  DD 66 FF    	ld	h,(ix-1)
6475  1BEA  5E          	ld	e,(hl)
6476  1BEB  79          	ld	a,c
6477  1BEC  07          	rlca
6478  1BED  07          	rlca
6479  1BEE  07          	rlca
6480  1BEF  E6 F8       	and	a,0xf8
6481  1BF1  83          	add	a,e
6482  1BF2  57          	ld	d,a
6483  1BF3  C5          	push	bc
6484  1BF4  3E 3E       	ld	a,0x3e
6485  1BF6  F5          	push	af
6486  1BF7  33          	inc	sp
6487  1BF8  4A          	ld	c, d
6488  1BF9  C5          	push	bc
6489  1BFA  CD 23 49    	call	_InitEnemy
6490  1BFD  F1          	pop	af
6491  1BFE  33          	inc	sp
6492  1BFF  C1          	pop	bc
6493  1C00  21 89 00    	ld	hl,_numenemies
6494  1C03  46          	ld	b,(hl)
6495  1C04  05          	dec	b
6496  1C05  58          	ld	e,b
6497  1C06  16 00       	ld	d,0x00
6498  1C08  6B          	ld	l, e
6499  1C09  62          	ld	h, d
6500  1C0A  29          	add	hl, hl
6501  1C0B  29          	add	hl, hl
6502  1C0C  29          	add	hl, hl
6503  1C0D  19          	add	hl, de
6504  1C0E  11 8A 00    	ld	de,_enemies
6505  1C11  19          	add	hl,de
6506  1C12  11 05 00    	ld	de,0x0005
6507  1C15  19          	add	hl,de
6508  1C16  71          	ld	(hl),c
6509  1C17  0C          	inc	c
6510  1C18  79          	ld	a,c
6511  1C19  D6 05       	sub	a,0x05
6512  1C1B  38 C0       	jr	C,l_UpdateStage5EndBoss1_00106
6513  1C1D  3E 01       	ld	a,0x01
6514  1C1F  F5          	push	af
6515  1C20  33          	inc	sp
6516  1C21  21 00 00    	ld	hl,_enemybomb_psg
6517  1C24  E5          	push	hl
6518  1C25  CD E0 03    	call	_PlaySound
6519  1C28  F1          	pop	af
6520  1C29  33          	inc	sp
6521  1C2A              l_UpdateStage5EndBoss1_00108:
6522  1C2A  DD F9       	ld	sp, ix
6523  1C2C  DD E1       	pop	ix
6524  1C2E  C9          	ret
6525  1C2F              	SECTION code_compiler
6526  1C2F              ;	---------------------------------
6527  1C2F              ; Function UpdateStage5EndBoss2
6528  1C2F              ; ---------------------------------
6529  1C2F              _UpdateStage5EndBoss2:
6530  1C2F  DD E5       	push	ix
6531  1C31  DD 21 00 00 	ld	ix,0
6532  1C35  DD 39       	add	ix,sp
6533  1C37  DD 6E 04    	ld	l,(ix+4)
6534  1C3A  DD 66 05    	ld	h,(ix+5)
6535  1C3D  4D          	ld	c,l
6536  1C3E  44          	ld	b,h
6537  1C3F  23          	inc	hl
6538  1C40  5E          	ld	e,(hl)
6539  1C41  1D          	dec	e
6540  1C42  73          	ld	(hl),e
6541  1C43  3E 18       	ld	a,0x18
6542  1C45  93          	sub	a, e
6543  1C46  38 13       	jr	C,l_UpdateStage5EndBoss2_00103
6544  1C48  21 04 00    	ld	hl,0x0004
6545  1C4B  09          	add	hl,bc
6546  1C4C  36 03       	ld	(hl),0x03
6547  1C4E  21 05 00    	ld	hl,0x0005
6548  1C51  09          	add	hl,bc
6549  1C52  36 00       	ld	(hl),0x00
6550  1C54  69          	ld	l,c
6551  1C55  60          	ld	h,b
6552  1C56  23          	inc	hl
6553  1C57  23          	inc	hl
6554  1C58  23          	inc	hl
6555  1C59  36 00       	ld	(hl),0x00
6556  1C5B              l_UpdateStage5EndBoss2_00103:
6557  1C5B  DD E1       	pop	ix
6558  1C5D  C9          	ret
6559  1C5E              	SECTION code_compiler
6560  1C5E              ;	---------------------------------
6561  1C5E              ; Function UpdateStage5EndBoss3
6562  1C5E              ; ---------------------------------
6563  1C5E              _UpdateStage5EndBoss3:
6564  1C5E  DD E5       	push	ix
6565  1C60  DD 21 00 00 	ld	ix,0
6566  1C64  DD 39       	add	ix,sp
6567  1C66  F5          	push	af
6568  1C67  F5          	push	af
6569  1C68  DD 4E 04    	ld	c,(ix+4)
6570  1C6B  DD 46 05    	ld	b,(ix+5)
6571  1C6E  21 03 00    	ld	hl,0x0003
6572  1C71  09          	add	hl,bc
6573  1C72  F1          	pop	af
6574  1C73  7E          	ld	a,(hl)
6575  1C74  E5          	push	hl
6576  1C75  D6 FA       	sub	a,0xfa
6577  1C77  20 08       	jr	NZ,l_UpdateStage5EndBoss3_00102
6578  1C79  21 04 00    	ld	hl,0x0004
6579  1C7C  09          	add	hl,bc
6580  1C7D  36 04       	ld	(hl),0x04
6581  1C7F  18 73       	jr	l_UpdateStage5EndBoss3_00107
6582  1C81              l_UpdateStage5EndBoss3_00102:
6583  1C81  C5          	push	bc
6584  1C82  21 02 00    	ld	hl,0x0002
6585  1C85  E5          	push	hl
6586  1C86  C5          	push	bc
6587  1C87  CD 29 36    	call	_DoSkullSinusMovement
6588  1C8A  F1          	pop	af
6589  1C8B  F1          	pop	af
6590  1C8C  C1          	pop	bc
6591  1C8D  E1          	pop	hl
6592  1C8E  7E          	ld	a,(hl)
6593  1C8F  E5          	push	hl
6594  1C90  E6 0F       	and	a,0x0f
6595  1C92  5F          	ld	e,a
6596  1C93  21 01 00    	ld	hl,0x0001
6597  1C96  09          	add	hl,bc
6598  1C97  DD 75 FE    	ld	(ix-2),l
6599  1C9A  DD 74 FF    	ld	(ix-1),h
6600  1C9D  7B          	ld	a,e
6601  1C9E  D6 04       	sub	a,0x04
6602  1CA0  20 38       	jr	NZ,l_UpdateStage5EndBoss3_00104
6603  1CA2  DD 6E FE    	ld	l,(ix-2)
6604  1CA5  DD 66 FF    	ld	h,(ix-1)
6605  1CA8  7E          	ld	a,(hl)
6606  1CA9  C6 14       	add	a,0x14
6607  1CAB  5F          	ld	e,a
6608  1CAC  0A          	ld	a,(bc)
6609  1CAD  57          	ld	d,a
6610  1CAE  C5          	push	bc
6611  1CAF  3E 01       	ld	a,0x01
6612  1CB1  F5          	push	af
6613  1CB2  33          	inc	sp
6614  1CB3  7B          	ld	a,e
6615  1CB4  5A          	ld	e,d
6616  1CB5  57          	ld	d,a
6617  1CB6  D5          	push	de
6618  1CB7  CD D7 5C    	call	_InitEnemyshoot
6619  1CBA  F1          	pop	af
6620  1CBB  33          	inc	sp
6621  1CBC  C1          	pop	bc
6622  1CBD  DD 6E FE    	ld	l,(ix-2)
6623  1CC0  DD 66 FF    	ld	h,(ix-1)
6624  1CC3  7E          	ld	a,(hl)
6625  1CC4  C6 14       	add	a,0x14
6626  1CC6  5F          	ld	e,a
6627  1CC7  0A          	ld	a,(bc)
6628  1CC8  C6 20       	add	a,0x20
6629  1CCA  57          	ld	d,a
6630  1CCB  C5          	push	bc
6631  1CCC  3E 01       	ld	a,0x01
6632  1CCE  F5          	push	af
6633  1CCF  33          	inc	sp
6634  1CD0  7B          	ld	a,e
6635  1CD1  5A          	ld	e,d
6636  1CD2  57          	ld	d,a
6637  1CD3  D5          	push	de
6638  1CD4  CD D7 5C    	call	_InitEnemyshoot
6639  1CD7  F1          	pop	af
6640  1CD8  33          	inc	sp
6641  1CD9  C1          	pop	bc
6642  1CDA              l_UpdateStage5EndBoss3_00104:
6643  1CDA  E1          	pop	hl
6644  1CDB  7E          	ld	a,(hl)
6645  1CDC  E5          	push	hl
6646  1CDD  E6 1F       	and	a,0x1f
6647  1CDF  20 13       	jr	NZ,l_UpdateStage5EndBoss3_00107
6648  1CE1  DD 6E FE    	ld	l,(ix-2)
6649  1CE4  DD 66 FF    	ld	h,(ix-1)
6650  1CE7  7E          	ld	a,(hl)
6651  1CE8  C6 38       	add	a,0x38
6652  1CEA  57          	ld	d,a
6653  1CEB  0A          	ld	a,(bc)
6654  1CEC  C6 10       	add	a,0x10
6655  1CEE  5F          	ld	e, a
6656  1CEF  D5          	push	de
6657  1CF0  CD 80 5C    	call	_InitEnemyshootLaser
6658  1CF3  F1          	pop	af
6659  1CF4              l_UpdateStage5EndBoss3_00107:
6660  1CF4  DD F9       	ld	sp, ix
6661  1CF6  DD E1       	pop	ix
6662  1CF8  C9          	ret
6663  1CF9              	SECTION code_compiler
6664  1CF9              ;	---------------------------------
6665  1CF9              ; Function UpdateStage5EndBoss4
6666  1CF9              ; ---------------------------------
6667  1CF9              _UpdateStage5EndBoss4:
6668  1CF9  DD E5       	push	ix
6669  1CFB  DD 21 00 00 	ld	ix,0
6670  1CFF  DD 39       	add	ix,sp
6671  1D01  DD 6E 04    	ld	l,(ix+4)
6672  1D04  DD 66 05    	ld	h,(ix+5)
6673  1D07  4D          	ld	c,l
6674  1D08  44          	ld	b,h
6675  1D09  23          	inc	hl
6676  1D0A  5E          	ld	e,(hl)
6677  1D0B  1C          	inc	e
6678  1D0C  73          	ld	(hl),e
6679  1D0D  7B          	ld	a,e
6680  1D0E  D6 80       	sub	a,0x80
6681  1D10  38 13       	jr	C,l_UpdateStage5EndBoss4_00103
6682  1D12  21 04 00    	ld	hl,0x0004
6683  1D15  09          	add	hl,bc
6684  1D16  36 01       	ld	(hl),0x01
6685  1D18  21 05 00    	ld	hl,0x0005
6686  1D1B  09          	add	hl,bc
6687  1D1C  36 00       	ld	(hl),0x00
6688  1D1E  69          	ld	l,c
6689  1D1F  60          	ld	h,b
6690  1D20  23          	inc	hl
6691  1D21  23          	inc	hl
6692  1D22  23          	inc	hl
6693  1D23  36 00       	ld	(hl),0x00
6694  1D25              l_UpdateStage5EndBoss4_00103:
6695  1D25  DD E1       	pop	ix
6696  1D27  C9          	ret
6697  1D28              	SECTION code_compiler
6698  1D28              ;	---------------------------------
6699  1D28              ; Function UpdateStage5EndBoss
6700  1D28              ; ---------------------------------
6701  1D28              _UpdateStage5EndBoss:
6702  1D28  DD E5       	push	ix
6703  1D2A  DD 21 00 00 	ld	ix,0
6704  1D2E  DD 39       	add	ix,sp
6705  1D30  DD 6E 04    	ld	l,(ix+4)
6706  1D33  DD 66 05    	ld	h,(ix+5)
6707  1D36  5D          	ld	e,l
6708  1D37  54          	ld	d,h
6709  1D38  23          	inc	hl
6710  1D39  46          	ld	b,(hl)
6711  1D3A  1A          	ld	a,(de)
6712  1D3B  4F          	ld	c,a
6713  1D3C  D5          	push	de
6714  1D3D  21 28 38    	ld	hl,0x3828
6715  1D40  E5          	push	hl
6716  1D41  C5          	push	bc
6717  1D42  21 8B 01    	ld	hl,0x018b
6718  1D45  E5          	push	hl
6719  1D46  CD 46 00    	call	_DrawSpriteArray
6720  1D49  21 06 00    	ld	hl,6
6721  1D4C  39          	add	hl,sp
6722  1D4D  F9          	ld	sp,hl
6723  1D4E  D1          	pop	de
6724  1D4F  01 00 00    	ld	bc,_updatestage5endbossfunctions+0
6725  1D52  6B          	ld	l, e
6726  1D53  62          	ld	h, d
6727  1D54  23          	inc	hl
6728  1D55  23          	inc	hl
6729  1D56  23          	inc	hl
6730  1D57  23          	inc	hl
6731  1D58  6E          	ld	l,(hl)
6732  1D59  26 00       	ld	h,0x00
6733  1D5B  29          	add	hl, hl
6734  1D5C  09          	add	hl,bc
6735  1D5D  4E          	ld	c,(hl)
6736  1D5E  23          	inc	hl
6737  1D5F  66          	ld	h,(hl)
6738  1D60  D5          	push	de
6739  1D61  69          	ld	l, c
6740  1D62  CD 00 00    	call	___sdcc_call_hl
6741  1D65  F1          	pop	af
6742  1D66  2E 01       	ld	l,0x01
6743  1D68  DD E1       	pop	ix
6744  1D6A  C9          	ret
6745  1D6B              	SECTION code_compiler
6746  1D6B              ;	---------------------------------
6747  1D6B              ; Function InitFortressPhantom
6748  1D6B              ; ---------------------------------
6749  1D6B              _InitFortressPhantom:
6750  1D6B  DD E5       	push	ix
6751  1D6D  DD 21 00 00 	ld	ix,0
6752  1D71  DD 39       	add	ix,sp
6753  1D73  DD 6E 04    	ld	l,(ix+4)
6754  1D76  DD 66 05    	ld	h,(ix+5)
6755  1D79  E5          	push	hl
6756  1D7A  CD 68 46    	call	_GetEnemyDirection
6757  1D7D  F1          	pop	af
6758  1D7E  DD E1       	pop	ix
6759  1D80  C9          	ret
6760  1D81              	SECTION code_compiler
6761  1D81              ;	---------------------------------
6762  1D81              ; Function UpdateFortressPhantom
6763  1D81              ; ---------------------------------
6764  1D81              _UpdateFortressPhantom:
6765  1D81  DD E5       	push	ix
6766  1D83  DD 21 00 00 	ld	ix,0
6767  1D87  DD 39       	add	ix,sp
6768  1D89  F5          	push	af
6769  1D8A  F5          	push	af
6770  1D8B  DD 6E 04    	ld	l,(ix+4)
6771  1D8E  DD 66 05    	ld	h,(ix+5)
6772  1D91  4D          	ld	c,l
6773  1D92  44          	ld	b,h
6774  1D93  23          	inc	hl
6775  1D94  23          	inc	hl
6776  1D95  23          	inc	hl
6777  1D96  6E          	ld	l,(hl)
6778  1D97  59          	ld	e, c
6779  1D98  50          	ld	d, b
6780  1D99  13          	inc	de
6781  1D9A  7D          	ld	a,l
6782  1D9B  D6 10       	sub	a,0x10
6783  1D9D  38 42       	jr	C,l_UpdateFortressPhantom_00105
6784  1D9F  C5          	push	bc
6785  1DA0  D5          	push	de
6786  1DA1  C5          	push	bc
6787  1DA2  CD F9 3E    	call	_TestSkullOut
6788  1DA5  F1          	pop	af
6789  1DA6  D1          	pop	de
6790  1DA7  C1          	pop	bc
6791  1DA8  7D          	ld	a,l
6792  1DA9  B7          	or	a, a
6793  1DAA  28 04       	jr	Z,l_UpdateFortressPhantom_00102
6794  1DAC  2E 00       	ld	l,0x00
6795  1DAE  18 55       	jr	l_UpdateFortressPhantom_00107
6796  1DB0              l_UpdateFortressPhantom_00102:
6797  1DB0  0A          	ld	a,(bc)
6798  1DB1  DD 77 FE    	ld	(ix-2),a
6799  1DB4  69          	ld	l, c
6800  1DB5  60          	ld	h, b
6801  1DB6  23          	inc	hl
6802  1DB7  23          	inc	hl
6803  1DB8  23          	inc	hl
6804  1DB9  23          	inc	hl
6805  1DBA  6E          	ld	l,(hl)
6806  1DBB  DD 7E FE    	ld	a,(ix-2)
6807  1DBE  85          	add	a, l
6808  1DBF  DD 77 FE    	ld	(ix-2),a
6809  1DC2  02          	ld	(bc),a
6810  1DC3  1A          	ld	a,(de)
6811  1DC4  DD 77 FF    	ld	(ix-1),a
6812  1DC7  21 05 00    	ld	hl,0x0005
6813  1DCA  09          	add	hl,bc
6814  1DCB  4E          	ld	c,(hl)
6815  1DCC  DD 7E FF    	ld	a,(ix-1)
6816  1DCF  81          	add	a, c
6817  1DD0  47          	ld	b,a
6818  1DD1  12          	ld	(de),a
6819  1DD2  21 73 01    	ld	hl,0x0173
6820  1DD5  E5          	push	hl
6821  1DD6  DD 4E FE    	ld	c,(ix-2)
6822  1DD9  C5          	push	bc
6823  1DDA  CD A7 00    	call	_DrawQuadSprite
6824  1DDD  F1          	pop	af
6825  1DDE  F1          	pop	af
6826  1DDF  18 22       	jr	l_UpdateFortressPhantom_00106
6827  1DE1              l_UpdateFortressPhantom_00105:
6828  1DE1  CB 3D       	srl	l
6829  1DE3  CB 3D       	srl	l
6830  1DE5  26 00       	ld	h,0x00
6831  1DE7  29          	add	hl, hl
6832  1DE8  29          	add	hl, hl
6833  1DE9  7D          	ld	a,l
6834  1DEA  C6 67       	add	a,0x67
6835  1DEC  DD 77 FC    	ld	(ix-4),a
6836  1DEF  7C          	ld	a,h
6837  1DF0  CE 01       	adc	a,0x01
6838  1DF2  DD 77 FD    	ld	(ix-3),a
6839  1DF5  E1          	pop	hl
6840  1DF6  1A          	ld	a,(de)
6841  1DF7  57          	ld	d,a
6842  1DF8  0A          	ld	a,(bc)
6843  1DF9  47          	ld	b,a
6844  1DFA  E5          	push	hl
6845  1DFB  E5          	push	hl
6846  1DFC  58          	ld	e,b
6847  1DFD  D5          	push	de
6848  1DFE  CD A7 00    	call	_DrawQuadSprite
6849  1E01  F1          	pop	af
6850  1E02  F1          	pop	af
6851  1E03              l_UpdateFortressPhantom_00106:
6852  1E03  2E 01       	ld	l,0x01
6853  1E05              l_UpdateFortressPhantom_00107:
6854  1E05  DD F9       	ld	sp, ix
6855  1E07  DD E1       	pop	ix
6856  1E09  C9          	ret
6857  1E0A              	SECTION code_compiler
6858  1E0A              ;	---------------------------------
6859  1E0A              ; Function UpdateFortressSearcher
6860  1E0A              ; ---------------------------------
6861  1E0A              _UpdateFortressSearcher:
6862  1E0A  DD E5       	push	ix
6863  1E0C  DD 21 00 00 	ld	ix,0
6864  1E10  DD 39       	add	ix,sp
6865  1E12  21 F8 FF    	ld	hl,-8
6866  1E15  39          	add	hl,sp
6867  1E16  F9          	ld	sp,hl
6868  1E17  0E 00       	ld	c,0x00
6869  1E19  DD 5E 04    	ld	e,(ix+4)
6870  1E1C  DD 56 05    	ld	d,(ix+5)
6871  1E1F  21 01 00    	ld	hl,0x0001
6872  1E22  19          	add	hl,de
6873  1E23  DD 75 FC    	ld	(ix-4),l
6874  1E26  DD 74 FD    	ld	(ix-3),h
6875  1E29  46          	ld	b,(hl)
6876  1E2A  04          	inc	b
6877  1E2B  04          	inc	b
6878  1E2C  04          	inc	b
6879  1E2D  04          	inc	b
6880  1E2E  DD 6E FC    	ld	l,(ix-4)
6881  1E31  DD 66 FD    	ld	h,(ix-3)
6882  1E34  70          	ld	(hl),b
6883  1E35  78          	ld	a,b
6884  1E36  6F          	ld	l,a
6885  1E37  D6 D2       	sub	a,0xd2
6886  1E39  3E 00       	ld	a,0x00
6887  1E3B  17          	rla
6888  1E3C  67          	ld	h,a
6889  1E3D  3E C0       	ld	a,0xc0
6890  1E3F  90          	sub	a, b
6891  1E40  30 09       	jr	NC,l_UpdateFortressSearcher_00102
6892  1E42  7C          	ld	a,h
6893  1E43  B7          	or	a, a
6894  1E44  28 05       	jr	Z,l_UpdateFortressSearcher_00102
6895  1E46  2E 00       	ld	l,0x00
6896  1E48  C3 DE 1E    	jp	l_UpdateFortressSearcher_00112
6897  1E4B              l_UpdateFortressSearcher_00102:
6898  1E4B  3E 50       	ld	a,0x50
6899  1E4D  95          	sub	a, l
6900  1E4E  30 5F       	jr	NC,l_UpdateFortressSearcher_00110
6901  1E50  7C          	ld	a,h
6902  1E51  B7          	or	a, a
6903  1E52  28 5B       	jr	Z,l_UpdateFortressSearcher_00110
6904  1E54  1A          	ld	a,(de)
6905  1E55  DD 77 FE    	ld	(ix-2),a
6906  1E58  47          	ld	b,a
6907  1E59  DD 36 FF 00 	ld	(ix-1),0x00
6908  1E5D  C6 F8       	add	a,0xf8
6909  1E5F  DD 77 FA    	ld	(ix-6),a
6910  1E62  DD 7E FF    	ld	a,(ix-1)
6911  1E65  CE FF       	adc	a,0xff
6912  1E67  DD 77 FB    	ld	(ix-5),a
6913  1E6A  3A 12 00    	ld	a,(_playerx)
6914  1E6D  DD 77 F8    	ld	(ix-8),a
6915  1E70  DD 36 F9 00 	ld	(ix-7),0x00
6916  1E74  DD 96 FA    	sub	a,(ix-6)
6917  1E77  DD 7E F9    	ld	a,(ix-7)
6918  1E7A  DD 9E FB    	sbc	a,(ix-5)
6919  1E7D  E2 82 1E    	jp	PO, l_UpdateFortressSearcher_00138
6920  1E80  EE 80       	xor	a,0x80
6921  1E82              l_UpdateFortressSearcher_00138:
6922  1E82  F2 8D 1E    	jp	P,l_UpdateFortressSearcher_00107
6923  1E85  05          	dec	b
6924  1E86  05          	dec	b
6925  1E87  78          	ld	a,b
6926  1E88  12          	ld	(de),a
6927  1E89  0E 10       	ld	c,0x10
6928  1E8B  18 22       	jr	l_UpdateFortressSearcher_00110
6929  1E8D              l_UpdateFortressSearcher_00107:
6930  1E8D  DD 7E FE    	ld	a,(ix-2)
6931  1E90  C6 08       	add	a,0x08
6932  1E92  6F          	ld	l,a
6933  1E93  DD 7E FF    	ld	a,(ix-1)
6934  1E96  CE 00       	adc	a,0x00
6935  1E98  67          	ld	h,a
6936  1E99  7D          	ld	a,l
6937  1E9A  DD 96 F8    	sub	a,(ix-8)
6938  1E9D  7C          	ld	a,h
6939  1E9E  DD 9E F9    	sbc	a,(ix-7)
6940  1EA1  E2 A6 1E    	jp	PO, l_UpdateFortressSearcher_00139
6941  1EA4  EE 80       	xor	a,0x80
6942  1EA6              l_UpdateFortressSearcher_00139:
6943  1EA6  F2 AF 1E    	jp	P,l_UpdateFortressSearcher_00110
6944  1EA9  04          	inc	b
6945  1EAA  04          	inc	b
6946  1EAB  78          	ld	a,b
6947  1EAC  12          	ld	(de),a
6948  1EAD  0E 08       	ld	c,0x08
6949  1EAF              l_UpdateFortressSearcher_00110:
6950  1EAF  06 00       	ld	b,0x00
6951  1EB1  21 47 01    	ld	hl,0x0147
6952  1EB4  09          	add	hl,bc
6953  1EB5  3A 06 00    	ld	a,(_sprite82anim)
6954  1EB8  DD 77 F8    	ld	(ix-8),a
6955  1EBB  DD 36 F9 00 	ld	(ix-7),0x00
6956  1EBF  4D          	ld	c,l
6957  1EC0  44          	ld	b,h
6958  1EC1  E1          	pop	hl
6959  1EC2  E5          	push	hl
6960  1EC3  29          	add	hl, hl
6961  1EC4  29          	add	hl, hl
6962  1EC5  09          	add	hl,bc
6963  1EC6  4D          	ld	c,l
6964  1EC7  DD 6E FC    	ld	l,(ix-4)
6965  1ECA  44          	ld	b,h
6966  1ECB  DD 66 FD    	ld	h,(ix-3)
6967  1ECE  7E          	ld	a,(hl)
6968  1ECF  F5          	push	af
6969  1ED0  1A          	ld	a,(de)
6970  1ED1  57          	ld	d,a
6971  1ED2  F1          	pop	af
6972  1ED3  C5          	push	bc
6973  1ED4  5A          	ld	e,d
6974  1ED5  57          	ld	d,a
6975  1ED6  D5          	push	de
6976  1ED7  CD A7 00    	call	_DrawQuadSprite
6977  1EDA  F1          	pop	af
6978  1EDB  F1          	pop	af
6979  1EDC  2E 01       	ld	l,0x01
6980  1EDE              l_UpdateFortressSearcher_00112:
6981  1EDE  DD F9       	ld	sp, ix
6982  1EE0  DD E1       	pop	ix
6983  1EE2  C9          	ret
6984  1EE3              	SECTION code_compiler
6985  1EE3              ;	---------------------------------
6986  1EE3              ; Function UpdateFortressWave
6987  1EE3              ; ---------------------------------
6988  1EE3              _UpdateFortressWave:
6989  1EE3  DD E5       	push	ix
6990  1EE5  DD 21 00 00 	ld	ix,0
6991  1EE9  DD 39       	add	ix,sp
6992  1EEB  F5          	push	af
6993  1EEC  3B          	dec	sp
6994  1EED  DD 4E 04    	ld	c,(ix+4)
6995  1EF0  DD 46 05    	ld	b,(ix+5)
6996  1EF3  21 01 00    	ld	hl,0x0001
6997  1EF6  09          	add	hl,bc
6998  1EF7  DD 75 FE    	ld	(ix-2),l
6999  1EFA  DD 74 FF    	ld	(ix-1),h
7000  1EFD  5E          	ld	e,(hl)
7001  1EFE  1C          	inc	e
7002  1EFF  73          	ld	(hl),e
7003  1F00  3E C0       	ld	a,0xc0
7004  1F02  93          	sub	a, e
7005  1F03  30 04       	jr	NC,l_UpdateFortressWave_00109
7006  1F05  2E 00       	ld	l,0x00
7007  1F07  18 46       	jr	l_UpdateFortressWave_00111
7008  1F09              l_UpdateFortressWave_00109:
7009  1F09  21 04 00    	ld	hl,0x0004
7010  1F0C  09          	add	hl,bc
7011  1F0D  7E          	ld	a,(hl)
7012  1F0E  EB          	ex	de,hl
7013  1F0F  F5          	push	af
7014  1F10  0A          	ld	a,(bc)
7015  1F11  6F          	ld	l,a
7016  1F12  F1          	pop	af
7017  1F13  B7          	or	a, a
7018  1F14  20 13       	jr	NZ,l_UpdateFortressWave_00106
7019  1F16  7D          	ld	a,l
7020  1F17  C6 02       	add	a,0x02
7021  1F19  DD 77 FD    	ld	(ix-3),a
7022  1F1C  02          	ld	(bc),a
7023  1F1D  DD 7E FD    	ld	a,(ix-3)
7024  1F20  D6 D0       	sub	a,0xd0
7025  1F22  38 15       	jr	C,l_UpdateFortressWave_00107
7026  1F24  3E 01       	ld	a,0x01
7027  1F26  12          	ld	(de),a
7028  1F27  18 10       	jr	l_UpdateFortressWave_00107
7029  1F29              l_UpdateFortressWave_00106:
7030  1F29  7D          	ld	a,l
7031  1F2A  C6 FE       	add	a,0xfe
7032  1F2C  DD 77 FD    	ld	(ix-3),a
7033  1F2F  02          	ld	(bc),a
7034  1F30  3E 20       	ld	a,0x20
7035  1F32  DD 96 FD    	sub	a,(ix-3)
7036  1F35  38 02       	jr	C,l_UpdateFortressWave_00107
7037  1F37  AF          	xor	a, a
7038  1F38  12          	ld	(de),a
7039  1F39              l_UpdateFortressWave_00107:
7040  1F39  DD 6E FE    	ld	l,(ix-2)
7041  1F3C  DD 66 FF    	ld	h,(ix-1)
7042  1F3F  56          	ld	d,(hl)
7043  1F40  0A          	ld	a,(bc)
7044  1F41  47          	ld	b,a
7045  1F42  21 63 01    	ld	hl,0x0163
7046  1F45  E5          	push	hl
7047  1F46  58          	ld	e,b
7048  1F47  D5          	push	de
7049  1F48  CD A7 00    	call	_DrawQuadSprite
7050  1F4B  F1          	pop	af
7051  1F4C  F1          	pop	af
7052  1F4D  2E 01       	ld	l,0x01
7053  1F4F              l_UpdateFortressWave_00111:
7054  1F4F  DD F9       	ld	sp, ix
7055  1F51  DD E1       	pop	ix
7056  1F53  C9          	ret
7057  1F54              	SECTION code_compiler
7058  1F54              ;	---------------------------------
7059  1F54              ; Function DoSideShoot
7060  1F54              ; ---------------------------------
7061  1F54              _DoSideShoot:
7062  1F54  DD E5       	push	ix
7063  1F56  DD 21 00 00 	ld	ix,0
7064  1F5A  DD 39       	add	ix,sp
7065  1F5C  3B          	dec	sp
7066  1F5D  DD 6E 04    	ld	l,(ix+4)
7067  1F60  DD 66 05    	ld	h,(ix+5)
7068  1F63  4D          	ld	c,l
7069  1F64  44          	ld	b,h
7070  1F65  23          	inc	hl
7071  1F66  23          	inc	hl
7072  1F67  23          	inc	hl
7073  1F68  56          	ld	d,(hl)
7074  1F69  C5          	push	bc
7075  1F6A  DD 7E 06    	ld	a,(ix+6)
7076  1F6D  5A          	ld	e,d
7077  1F6E  57          	ld	d,a
7078  1F6F  D5          	push	de
7079  1F70  CD 00 00    	call	__moduchar_callee
7080  1F73  C1          	pop	bc
7081  1F74  7D          	ld	a,l
7082  1F75  B7          	or	a, a
7083  1F76  20 41       	jr	NZ,l_DoSideShoot_00110
7084  1F78  21 04 00    	ld	hl,0x0004
7085  1F7B  09          	add	hl,bc
7086  1F7C  7E          	ld	a,(hl)
7087  1F7D  DD 77 FF    	ld	(ix-1),a
7088  1F80  0A          	ld	a,(bc)
7089  1F81  5F          	ld	e,a
7090  1F82  03          	inc	bc
7091  1F83  53          	ld	d,e
7092  1F84  14          	inc	d
7093  1F85  14          	inc	d
7094  1F86  14          	inc	d
7095  1F87  14          	inc	d
7096  1F88  DD 7E FF    	ld	a,(ix-1)
7097  1F8B  B7          	or	a, a
7098  1F8C  20 16       	jr	NZ,l_DoSideShoot_00106
7099  1F8E  3A 12 00    	ld	a,(_playerx)
7100  1F91  93          	sub	a, e
7101  1F92  30 25       	jr	NC,l_DoSideShoot_00110
7102  1F94  0A          	ld	a,(bc)
7103  1F95  C6 04       	add	a,0x02+0x02
7104  1F97  47          	ld	b,a
7105  1F98  AF          	xor	a, a
7106  1F99  F5          	push	af
7107  1F9A  33          	inc	sp
7108  1F9B  4A          	ld	c, d
7109  1F9C  C5          	push	bc
7110  1F9D  CD D7 5C    	call	_InitEnemyshoot
7111  1FA0  F1          	pop	af
7112  1FA1  33          	inc	sp
7113  1FA2  18 15       	jr	l_DoSideShoot_00110
7114  1FA4              l_DoSideShoot_00106:
7115  1FA4  7B          	ld	a,e
7116  1FA5  21 12 00    	ld	hl,_playerx
7117  1FA8  96          	sub	a, (hl)
7118  1FA9  30 0E       	jr	NC,l_DoSideShoot_00110
7119  1FAB  0A          	ld	a,(bc)
7120  1FAC  C6 04       	add	a,0x02+0x02
7121  1FAE  47          	ld	b,a
7122  1FAF  AF          	xor	a, a
7123  1FB0  F5          	push	af
7124  1FB1  33          	inc	sp
7125  1FB2  4A          	ld	c, d
7126  1FB3  C5          	push	bc
7127  1FB4  CD D7 5C    	call	_InitEnemyshoot
7128  1FB7  F1          	pop	af
7129  1FB8  33          	inc	sp
7130  1FB9              l_DoSideShoot_00110:
7131  1FB9  33          	inc	sp
7132  1FBA  DD E1       	pop	ix
7133  1FBC  C9          	ret
7134  1FBD              	SECTION code_compiler
7135  1FBD              ;	---------------------------------
7136  1FBD              ; Function InitFortressCannonRight
7137  1FBD              ; ---------------------------------
7138  1FBD              _InitFortressCannonRight:
7139  1FBD  DD E5       	push	ix
7140  1FBF  DD 21 00 00 	ld	ix,0
7141  1FC3  DD 39       	add	ix,sp
7142  1FC5  DD 4E 04    	ld	c,(ix+4)
7143  1FC8  DD 46 05    	ld	b,(ix+5)
7144  1FCB  21 04 00    	ld	hl,0x0004
7145  1FCE  09          	add	hl,bc
7146  1FCF  36 08       	ld	(hl),0x08
7147  1FD1  DD E1       	pop	ix
7148  1FD3  C9          	ret
7149  1FD4              	SECTION code_compiler
7150  1FD4              ;	---------------------------------
7151  1FD4              ; Function UpdateFortressCannon
7152  1FD4              ; ---------------------------------
7153  1FD4              _UpdateFortressCannon:
7154  1FD4  DD E5       	push	ix
7155  1FD6  DD 21 00 00 	ld	ix,0
7156  1FDA  DD 39       	add	ix,sp
7157  1FDC  F5          	push	af
7158  1FDD  DD 6E 04    	ld	l,(ix+4)
7159  1FE0  DD 66 05    	ld	h,(ix+5)
7160  1FE3  4D          	ld	c,l
7161  1FE4  44          	ld	b,h
7162  1FE5  23          	inc	hl
7163  1FE6  5E          	ld	e,(hl)
7164  1FE7  1C          	inc	e
7165  1FE8  73          	ld	(hl),e
7166  1FE9  DD 73 FF    	ld	(ix-1),e
7167  1FEC  3E C0       	ld	a,0xc0
7168  1FEE  93          	sub	a, e
7169  1FEF  30 04       	jr	NC,l_UpdateFortressCannon_00102
7170  1FF1  2E 00       	ld	l,0x00
7171  1FF3  18 3D       	jr	l_UpdateFortressCannon_00104
7172  1FF5              l_UpdateFortressCannon_00102:
7173  1FF5  21 04 00    	ld	hl,0x0004
7174  1FF8  09          	add	hl,bc
7175  1FF9  5E          	ld	e,(hl)
7176  1FFA  16 00       	ld	d,0x00
7177  1FFC  21 77 01    	ld	hl,0x0177
7178  1FFF  19          	add	hl,de
7179  2000  3A 13 00    	ld	a,(_playery)
7180  2003  EB          	ex	de,hl
7181  2004  DD 96 FF    	sub	a,(ix-1)
7182  2007  30 04       	jr	NC,l_UpdateFortressCannon_00106
7183  2009  2E 04       	ld	l,0x04
7184  200B  18 02       	jr	l_UpdateFortressCannon_00107
7185  200D              l_UpdateFortressCannon_00106:
7186  200D  2E 00       	ld	l,0x00
7187  200F              l_UpdateFortressCannon_00107:
7188  200F  26 00       	ld	h,0x00
7189  2011  19          	add	hl,de
7190  2012  0A          	ld	a,(bc)
7191  2013  EB          	ex	de,hl
7192  2014  DD 77 FE    	ld	(ix-2),a
7193  2017  C5          	push	bc
7194  2018  D5          	push	de
7195  2019  DD 66 FF    	ld	h,(ix-1)
7196  201C  DD 6E FE    	ld	l,(ix-2)
7197  201F  E5          	push	hl
7198  2020  CD A7 00    	call	_DrawQuadSprite
7199  2023  F1          	pop	af
7200  2024  F1          	pop	af
7201  2025  C1          	pop	bc
7202  2026  3E 0D       	ld	a,0x0d
7203  2028  F5          	push	af
7204  2029  33          	inc	sp
7205  202A  C5          	push	bc
7206  202B  CD 54 1F    	call	_DoSideShoot
7207  202E  F1          	pop	af
7208  202F  33          	inc	sp
7209  2030  2E 01       	ld	l,0x01
7210  2032              l_UpdateFortressCannon_00104:
7211  2032  DD F9       	ld	sp, ix
7212  2034  DD E1       	pop	ix
7213  2036  C9          	ret
7214  2037              	SECTION code_compiler
7215  2037              ;	---------------------------------
7216  2037              ; Function UpdateFortressDoor
7217  2037              ; ---------------------------------
7218  2037              _UpdateFortressDoor:
7219  2037  DD E5       	push	ix
7220  2039  DD 21 00 00 	ld	ix,0
7221  203D  DD 39       	add	ix,sp
7222  203F  F5          	push	af
7223  2040  DD 4E 04    	ld	c,(ix+4)
7224  2043  DD 46 05    	ld	b,(ix+5)
7225  2046  59          	ld	e, c
7226  2047  50          	ld	d, b
7227  2048  13          	inc	de
7228  2049  1A          	ld	a,(de)
7229  204A  3C          	inc	a
7230  204B  DD 77 FE    	ld	(ix-2),a
7231  204E  12          	ld	(de),a
7232  204F  DD 77 FF    	ld	(ix-1),a
7233  2052  3E C0       	ld	a,0xc0
7234  2054  DD 96 FE    	sub	a,(ix-2)
7235  2057  30 04       	jr	NC,l_UpdateFortressDoor_00102
7236  2059  2E 00       	ld	l,0x00
7237  205B  18 3D       	jr	l_UpdateFortressDoor_00104
7238  205D              l_UpdateFortressDoor_00102:
7239  205D  0A          	ld	a,(bc)
7240  205E  C6 F8       	add	a,0xf8
7241  2060  DD 77 FE    	ld	(ix-2),a
7242  2063  C5          	push	bc
7243  2064  D5          	push	de
7244  2065  21 20 08    	ld	hl,0x0820
7245  2068  E5          	push	hl
7246  2069  DD 66 FF    	ld	h,(ix-1)
7247  206C  DD 6E FE    	ld	l,(ix-2)
7248  206F  E5          	push	hl
7249  2070  21 5F 01    	ld	hl,0x015f
7250  2073  E5          	push	hl
7251  2074  CD 46 00    	call	_DrawSpriteArray
7252  2077  21 06 00    	ld	hl,6
7253  207A  39          	add	hl,sp
7254  207B  F9          	ld	sp,hl
7255  207C  D1          	pop	de
7256  207D  C1          	pop	bc
7257  207E  1A          	ld	a,(de)
7258  207F  C6 08       	add	a,0x08
7259  2081  57          	ld	d,a
7260  2082  0A          	ld	a,(bc)
7261  2083  C6 F8       	add	a,0xf8
7262  2085  47          	ld	b,a
7263  2086  21 20 08    	ld	hl,0x0820
7264  2089  E5          	push	hl
7265  208A  58          	ld	e,b
7266  208B  D5          	push	de
7267  208C  21 5F 01    	ld	hl,0x015f
7268  208F  E5          	push	hl
7269  2090  CD 46 00    	call	_DrawSpriteArray
7270  2093  21 06 00    	ld	hl,6
7271  2096  39          	add	hl,sp
7272  2097  F9          	ld	sp,hl
7273  2098  2E 01       	ld	l,0x01
7274  209A              l_UpdateFortressDoor_00104:
7275  209A  DD F9       	ld	sp, ix
7276  209C  DD E1       	pop	ix
7277  209E  C9          	ret
7278  209F              	SECTION code_compiler
7279  209F              ;	---------------------------------
7280  209F              ; Function InitStage1MiddleBossC
7281  209F              ; ---------------------------------
7282  209F              _InitStage1MiddleBossC:
7283  209F  DD E5       	push	ix
7284  20A1  DD 21 00 00 	ld	ix,0
7285  20A5  DD 39       	add	ix,sp
7286  20A7  DD 4E 04    	ld	c,(ix+4)
7287  20AA  DD 46 05    	ld	b,(ix+5)
7288  20AD  21 05 00    	ld	hl,0x0005
7289  20B0  09          	add	hl,bc
7290  20B1  E5          	push	hl
7291  20B2  CD 00 00    	call	_myRand
7292  20B5  C1          	pop	bc
7293  20B6  7D          	ld	a,l
7294  20B7  E6 01       	and	a,0x01
7295  20B9  07          	rlca
7296  20BA  07          	rlca
7297  20BB  07          	rlca
7298  20BC  07          	rlca
7299  20BD  E6 F0       	and	a,0xf0
7300  20BF  02          	ld	(bc),a
7301  20C0  DD E1       	pop	ix
7302  20C2  C9          	ret
7303  20C3              	SECTION code_compiler
7304  20C3              ;	---------------------------------
7305  20C3              ; Function UpdateStage1MiddleBossC
7306  20C3              ; ---------------------------------
7307  20C3              _UpdateStage1MiddleBossC:
7308  20C3  DD E5       	push	ix
7309  20C5  DD 21 00 00 	ld	ix,0
7310  20C9  DD 39       	add	ix,sp
7311  20CB  DD 4E 04    	ld	c,(ix+4)
7312  20CE  DD 46 05    	ld	b,(ix+5)
7313  20D1  21 04 00    	ld	hl,0x0004
7314  20D4  09          	add	hl,bc
7315  20D5  5E          	ld	e,(hl)
7316  20D6  1C          	inc	e
7317  20D7  73          	ld	(hl),e
7318  20D8  69          	ld	l, c
7319  20D9  60          	ld	h, b
7320  20DA  23          	inc	hl
7321  20DB  23          	inc	hl
7322  20DC  23          	inc	hl
7323  20DD  7E          	ld	a,(hl)
7324  20DE  0F          	rrca
7325  20DF  38 07       	jr	C,l_UpdateStage1MiddleBossC_00102
7326  20E1  C5          	push	bc
7327  20E2  C5          	push	bc
7328  20E3  CD CC 3D    	call	_SkullAccelX
7329  20E6  F1          	pop	af
7330  20E7  C1          	pop	bc
7331  20E8              l_UpdateStage1MiddleBossC_00102:
7332  20E8  C5          	push	bc
7333  20E9  C5          	push	bc
7334  20EA  CD 49 3E    	call	_SkullBoneCMove
7335  20ED  F1          	pop	af
7336  20EE  E1          	pop	hl
7337  20EF  4D          	ld	c,l
7338  20F0  44          	ld	b,h
7339  20F1  23          	inc	hl
7340  20F2  56          	ld	d,(hl)
7341  20F3  3E C0       	ld	a,0xc0
7342  20F5  92          	sub	a, d
7343  20F6  30 04       	jr	NC,l_UpdateStage1MiddleBossC_00104
7344  20F8  2E 00       	ld	l,0x00
7345  20FA  18 0F       	jr	l_UpdateStage1MiddleBossC_00105
7346  20FC              l_UpdateStage1MiddleBossC_00104:
7347  20FC  0A          	ld	a,(bc)
7348  20FD  47          	ld	b,a
7349  20FE  21 9B 01    	ld	hl,0x019b
7350  2101  E5          	push	hl
7351  2102  58          	ld	e,b
7352  2103  D5          	push	de
7353  2104  CD A7 00    	call	_DrawQuadSprite
7354  2107  F1          	pop	af
7355  2108  F1          	pop	af
7356  2109  2E 01       	ld	l,0x01
7357  210B              l_UpdateStage1MiddleBossC_00105:
7358  210B  DD E1       	pop	ix
7359  210D  C9          	ret
7360  210E              	SECTION code_compiler
7361  210E              ;	---------------------------------
7362  210E              ; Function InitStage1MiddleBossB
7363  210E              ; ---------------------------------
7364  210E              _InitStage1MiddleBossB:
7365  210E  DD E5       	push	ix
7366  2110  DD 21 00 00 	ld	ix,0
7367  2114  DD 39       	add	ix,sp
7368  2116  F5          	push	af
7369  2117  CD 00 00    	call	_myRand
7370  211A  7D          	ld	a,l
7371  211B  E6 07       	and	a,0x07
7372  211D  5F          	ld	e,a
7373  211E  DD 4E 04    	ld	c,(ix+4)
7374  2121  DD 46 05    	ld	b,(ix+5)
7375  2124  21 04 00    	ld	hl,0x0004
7376  2127  09          	add	hl,bc
7377  2128  E3          	ex	(sp), hl
7378  2129  16 00       	ld	d,0x00
7379  212B  21 00 00    	ld	hl,_Stage1MiddleBossBPatternX
7380  212E  19          	add	hl, de
7381  212F  56          	ld	d,(hl)
7382  2130  E1          	pop	hl
7383  2131  E5          	push	hl
7384  2132  72          	ld	(hl),d
7385  2133  21 05 00    	ld	hl,0x0005
7386  2136  09          	add	hl,bc
7387  2137  16 00       	ld	d,0x00
7388  2139  4D          	ld	c,l
7389  213A  44          	ld	b,h
7390  213B  21 00 00    	ld	hl,_Stage1MiddleBossBPatternY
7391  213E  19          	add	hl, de
7392  213F  7E          	ld	a,(hl)
7393  2140  02          	ld	(bc),a
7394  2141  DD F9       	ld	sp, ix
7395  2143  DD E1       	pop	ix
7396  2145  C9          	ret
7397  2146              	SECTION code_compiler
7398  2146              ;	---------------------------------
7399  2146              ; Function UpdateStage1MiddleBossB
7400  2146              ; ---------------------------------
7401  2146              _UpdateStage1MiddleBossB:
7402  2146  DD E5       	push	ix
7403  2148  DD 21 00 00 	ld	ix,0
7404  214C  DD 39       	add	ix,sp
7405  214E  F5          	push	af
7406  214F  3B          	dec	sp
7407  2150  DD 4E 04    	ld	c,(ix+4)
7408  2153  DD 46 05    	ld	b,(ix+5)
7409  2156  21 01 00    	ld	hl,0x0001
7410  2159  09          	add	hl,bc
7411  215A  DD 75 FE    	ld	(ix-2),l
7412  215D  DD 74 FF    	ld	(ix-1),h
7413  2160  5E          	ld	e,(hl)
7414  2161  69          	ld	l, c
7415  2162  60          	ld	h, b
7416  2163  23          	inc	hl
7417  2164  23          	inc	hl
7418  2165  23          	inc	hl
7419  2166  23          	inc	hl
7420  2167  23          	inc	hl
7421  2168  56          	ld	d,(hl)
7422  2169  7B          	ld	a,e
7423  216A  82          	add	a, d
7424  216B  5F          	ld	e,a
7425  216C  DD 6E FE    	ld	l,(ix-2)
7426  216F  DD 66 FF    	ld	h,(ix-1)
7427  2172  73          	ld	(hl),e
7428  2173  3E C0       	ld	a,0xc0
7429  2175  93          	sub	a, e
7430  2176  30 04       	jr	NC,l_UpdateStage1MiddleBossB_00102
7431  2178  2E 00       	ld	l,0x00
7432  217A  18 3E       	jr	l_UpdateStage1MiddleBossB_00106
7433  217C              l_UpdateStage1MiddleBossB_00102:
7434  217C  0A          	ld	a,(bc)
7435  217D  DD 77 FD    	ld	(ix-3),a
7436  2180  21 04 00    	ld	hl,0x0004
7437  2183  09          	add	hl,bc
7438  2184  7E          	ld	a,(hl)
7439  2185  EB          	ex	de,hl
7440  2186  C6 F8       	add	a,0xf8
7441  2188  6F          	ld	l,a
7442  2189  DD 7E FD    	ld	a,(ix-3)
7443  218C  85          	add	a, l
7444  218D  DD 77 FD    	ld	(ix-3),a
7445  2190  02          	ld	(bc),a
7446  2191  6F          	ld	l,a
7447  2192  DD 7E FD    	ld	a,(ix-3)
7448  2195  D6 20       	sub	a,0x20
7449  2197  38 05       	jr	C,l_UpdateStage1MiddleBossB_00103
7450  2199  3E D0       	ld	a,0xd0
7451  219B  95          	sub	a, l
7452  219C  30 06       	jr	NC,l_UpdateStage1MiddleBossB_00104
7453  219E              l_UpdateStage1MiddleBossB_00103:
7454  219E  1A          	ld	a,(de)
7455  219F  6F          	ld	l,a
7456  21A0  3E 10       	ld	a,0x10
7457  21A2  95          	sub	a, l
7458  21A3  12          	ld	(de),a
7459  21A4              l_UpdateStage1MiddleBossB_00104:
7460  21A4  DD 6E FE    	ld	l,(ix-2)
7461  21A7  DD 66 FF    	ld	h,(ix-1)
7462  21AA  56          	ld	d,(hl)
7463  21AB  0A          	ld	a,(bc)
7464  21AC  47          	ld	b,a
7465  21AD  21 9B 01    	ld	hl,0x019b
7466  21B0  E5          	push	hl
7467  21B1  58          	ld	e,b
7468  21B2  D5          	push	de
7469  21B3  CD A7 00    	call	_DrawQuadSprite
7470  21B6  F1          	pop	af
7471  21B7  F1          	pop	af
7472  21B8  2E 01       	ld	l,0x01
7473  21BA              l_UpdateStage1MiddleBossB_00106:
7474  21BA  DD F9       	ld	sp, ix
7475  21BC  DD E1       	pop	ix
7476  21BE  C9          	ret
7477  21BF              	SECTION code_compiler
7478  21BF              ;	---------------------------------
7479  21BF              ; Function UpdateStage1MiddleBoss1
7480  21BF              ; ---------------------------------
7481  21BF              _UpdateStage1MiddleBoss1:
7482  21BF  DD E5       	push	ix
7483  21C1  DD 21 00 00 	ld	ix,0
7484  21C5  DD 39       	add	ix,sp
7485  21C7  21 02 00    	ld	hl,0x0002
7486  21CA  E5          	push	hl
7487  21CB  DD 6E 04    	ld	l,(ix+4)
7488  21CE  DD 66 05    	ld	h,(ix+5)
7489  21D1  E5          	push	hl
7490  21D2  CD 29 36    	call	_DoSkullSinusMovement
7491  21D5  F1          	pop	af
7492  21D6  F1          	pop	af
7493  21D7  DD 6E 04    	ld	l,(ix+4)
7494  21DA  DD 66 05    	ld	h,(ix+5)
7495  21DD  E5          	push	hl
7496  21DE  CD 57 22    	call	_DoStage1BossDirectionShoots
7497  21E1  F1          	pop	af
7498  21E2  DD 6E 04    	ld	l,(ix+4)
7499  21E5  DD 66 05    	ld	h,(ix+5)
7500  21E8  4D          	ld	c,l
7501  21E9  44          	ld	b,h
7502  21EA  23          	inc	hl
7503  21EB  23          	inc	hl
7504  21EC  23          	inc	hl
7505  21ED  56          	ld	d,(hl)
7506  21EE  C5          	push	bc
7507  21EF  3E 14       	ld	a,0x14
7508  21F1  5A          	ld	e,d
7509  21F2  57          	ld	d,a
7510  21F3  D5          	push	de
7511  21F4  CD 00 00    	call	__moduchar_callee
7512  21F7  C1          	pop	bc
7513  21F8  7D          	ld	a,l
7514  21F9  D6 10       	sub	a,0x10
7515  21FB  20 17       	jr	NZ,l_UpdateStage1MiddleBoss1_00103
7516  21FD  69          	ld	l, c
7517  21FE  60          	ld	h, b
7518  21FF  23          	inc	hl
7519  2200  7E          	ld	a,(hl)
7520  2201  C6 18       	add	a,0x18
7521  2203  57          	ld	d,a
7522  2204  0A          	ld	a,(bc)
7523  2205  C6 0C       	add	a,0x0c
7524  2207  47          	ld	b,a
7525  2208  3E 4B       	ld	a,0x4b
7526  220A  5A          	ld	e,d
7527  220B  57          	ld	d,a
7528  220C  D5          	push	de
7529  220D  C5          	push	bc
7530  220E  33          	inc	sp
7531  220F  CD 23 49    	call	_InitEnemy
7532  2212  F1          	pop	af
7533  2213  33          	inc	sp
7534  2214              l_UpdateStage1MiddleBoss1_00103:
7535  2214  DD E1       	pop	ix
7536  2216  C9          	ret
7537  2217              	SECTION code_compiler
7538  2217              ;	---------------------------------
7539  2217              ; Function FinishStage1MiddleBoss
7540  2217              ; ---------------------------------
7541  2217              	defc _FinishStage1MiddleBoss	=	_updatescrollact
7542  2217              	SECTION code_compiler
7543  2217              ;	---------------------------------
7544  2217              ; Function UpdateStage1MiddleBoss
7545  2217              ; ---------------------------------
7546  2217              _UpdateStage1MiddleBoss:
7547  2217  DD E5       	push	ix
7548  2219  DD 21 00 00 	ld	ix,0
7549  221D  DD 39       	add	ix,sp
7550  221F  DD 6E 04    	ld	l,(ix+4)
7551  2222  DD 66 05    	ld	h,(ix+5)
7552  2225  4D          	ld	c,l
7553  2226  44          	ld	b,h
7554  2227  23          	inc	hl
7555  2228  56          	ld	d,(hl)
7556  2229  0A          	ld	a,(bc)
7557  222A  5F          	ld	e,a
7558  222B  C5          	push	bc
7559  222C  21 28 20    	ld	hl,0x2028
7560  222F  E5          	push	hl
7561  2230  D5          	push	de
7562  2231  21 87 01    	ld	hl,0x0187
7563  2234  E5          	push	hl
7564  2235  CD 46 00    	call	_DrawSpriteArray
7565  2238  21 06 00    	ld	hl,6
7566  223B  39          	add	hl,sp
7567  223C  F9          	ld	sp,hl
7568  223D  C1          	pop	bc
7569  223E  21 04 00    	ld	hl,0x0004
7570  2241  09          	add	hl,bc
7571  2242  7E          	ld	a,(hl)
7572  2243  B7          	or	a, a
7573  2244  20 07       	jr	NZ,l_UpdateStage1MiddleBoss_00102
7574  2246  C5          	push	bc
7575  2247  CD BB 12    	call	_DoCommonBossAppearingFunction
7576  224A  F1          	pop	af
7577  224B  18 05       	jr	l_UpdateStage1MiddleBoss_00103
7578  224D              l_UpdateStage1MiddleBoss_00102:
7579  224D  C5          	push	bc
7580  224E  CD BF 21    	call	_UpdateStage1MiddleBoss1
7581  2251  F1          	pop	af
7582  2252              l_UpdateStage1MiddleBoss_00103:
7583  2252  2E 01       	ld	l,0x01
7584  2254  DD E1       	pop	ix
7585  2256  C9          	ret
7586  2257              	SECTION code_compiler
7587  2257              ;	---------------------------------
7588  2257              ; Function DoStage1BossDirectionShoots
7589  2257              ; ---------------------------------
7590  2257              _DoStage1BossDirectionShoots:
7591  2257  DD E5       	push	ix
7592  2259  DD 21 00 00 	ld	ix,0
7593  225D  DD 39       	add	ix,sp
7594  225F  DD 6E 04    	ld	l,(ix+4)
7595  2262  DD 66 05    	ld	h,(ix+5)
7596  2265  4D          	ld	c,l
7597  2266  44          	ld	b,h
7598  2267  23          	inc	hl
7599  2268  23          	inc	hl
7600  2269  23          	inc	hl
7601  226A  56          	ld	d,(hl)
7602  226B  C5          	push	bc
7603  226C  3E 60       	ld	a,0x60
7604  226E  5A          	ld	e,d
7605  226F  57          	ld	d,a
7606  2270  D5          	push	de
7607  2271  CD 00 00    	call	__moduchar_callee
7608  2274  C1          	pop	bc
7609  2275  7D          	ld	a,l
7610  2276  D6 30       	sub	a,0x30
7611  2278  20 21       	jr	NZ,l_DoStage1BossDirectionShoots_00103
7612  227A  69          	ld	l, c
7613  227B  60          	ld	h, b
7614  227C  23          	inc	hl
7615  227D  7E          	ld	a,(hl)
7616  227E  C6 18       	add	a,0x18
7617  2280  57          	ld	d,a
7618  2281  0A          	ld	a,(bc)
7619  2282  C6 14       	add	a,0x14
7620  2284  47          	ld	b,a
7621  2285  3E 06       	ld	a,0x06
7622  2287  F5          	push	af
7623  2288  33          	inc	sp
7624  2289  21 00 00    	ld	hl,_stage2endbossshootpatterny
7625  228C  E5          	push	hl
7626  228D  21 00 00    	ld	hl,_stage2endbossshootpatternx
7627  2290  E5          	push	hl
7628  2291  58          	ld	e,b
7629  2292  D5          	push	de
7630  2293  CD 40 5C    	call	_SpreadEnemyshootDirection
7631  2296  21 07 00    	ld	hl,7
7632  2299  39          	add	hl,sp
7633  229A  F9          	ld	sp,hl
7634  229B              l_DoStage1BossDirectionShoots_00103:
7635  229B  DD E1       	pop	ix
7636  229D  C9          	ret
7637  229E              	SECTION code_compiler
7638  229E              ;	---------------------------------
7639  229E              ; Function UpdateStage1EndBoss1
7640  229E              ; ---------------------------------
7641  229E              _UpdateStage1EndBoss1:
7642  229E  DD E5       	push	ix
7643  22A0  DD 21 00 00 	ld	ix,0
7644  22A4  DD 39       	add	ix,sp
7645  22A6  F5          	push	af
7646  22A7  F5          	push	af
7647  22A8  21 02 00    	ld	hl,0x0002
7648  22AB  E5          	push	hl
7649  22AC  DD 6E 04    	ld	l,(ix+4)
7650  22AF  DD 66 05    	ld	h,(ix+5)
7651  22B2  E5          	push	hl
7652  22B3  CD 29 36    	call	_DoSkullSinusMovement
7653  22B6  F1          	pop	af
7654  22B7  F1          	pop	af
7655  22B8  DD 4E 04    	ld	c,(ix+4)
7656  22BB  DD 46 05    	ld	b,(ix+5)
7657  22BE  21 03 00    	ld	hl,0x0003
7658  22C1  09          	add	hl,bc
7659  22C2  F1          	pop	af
7660  22C3  56          	ld	d,(hl)
7661  22C4  E5          	push	hl
7662  22C5  C5          	push	bc
7663  22C6  3E 60       	ld	a,0x60
7664  22C8  5A          	ld	e,d
7665  22C9  57          	ld	d,a
7666  22CA  D5          	push	de
7667  22CB  CD 00 00    	call	__moduchar_callee
7668  22CE  C1          	pop	bc
7669  22CF  5D          	ld	e,l
7670  22D0  21 01 00    	ld	hl,0x0001
7671  22D3  09          	add	hl,bc
7672  22D4  DD 75 FE    	ld	(ix-2),l
7673  22D7  DD 74 FF    	ld	(ix-1),h
7674  22DA  7B          	ld	a,e
7675  22DB  D6 18       	sub	a,0x18
7676  22DD  30 13       	jr	NC,l_UpdateStage1EndBoss1_00104
7677  22DF  C5          	push	bc
7678  22E0  21 10 28    	ld	hl,0x2810
7679  22E3  E5          	push	hl
7680  22E4  3E 08       	ld	a,0x08
7681  22E6  F5          	push	af
7682  22E7  33          	inc	sp
7683  22E8  C5          	push	bc
7684  22E9  CD F9 5F    	call	_TestEnemyShootComplex
7685  22EC  F1          	pop	af
7686  22ED  F1          	pop	af
7687  22EE  33          	inc	sp
7688  22EF  C1          	pop	bc
7689  22F0  18 41       	jr	l_UpdateStage1EndBoss1_00105
7690  22F2              l_UpdateStage1EndBoss1_00104:
7691  22F2  C5          	push	bc
7692  22F3  C5          	push	bc
7693  22F4  CD 57 22    	call	_DoStage1BossDirectionShoots
7694  22F7  F1          	pop	af
7695  22F8  C1          	pop	bc
7696  22F9  E1          	pop	hl
7697  22FA  56          	ld	d,(hl)
7698  22FB  E5          	push	hl
7699  22FC  C5          	push	bc
7700  22FD  3E 60       	ld	a,0x60
7701  22FF  5A          	ld	e,d
7702  2300  57          	ld	d,a
7703  2301  D5          	push	de
7704  2302  CD 00 00    	call	__moduchar_callee
7705  2305  C1          	pop	bc
7706  2306  7D          	ld	a,l
7707  2307  D6 48       	sub	a,0x48
7708  2309  20 28       	jr	NZ,l_UpdateStage1EndBoss1_00105
7709  230B  DD 6E FE    	ld	l,(ix-2)
7710  230E  DD 66 FF    	ld	h,(ix-1)
7711  2311  7E          	ld	a,(hl)
7712  2312  C6 24       	add	a,0x24
7713  2314  57          	ld	d,a
7714  2315  0A          	ld	a,(bc)
7715  2316  C5          	push	bc
7716  2317  5F          	ld	e,a
7717  2318  D5          	push	de
7718  2319  CD 80 5C    	call	_InitEnemyshootLaser
7719  231C  F1          	pop	af
7720  231D  C1          	pop	bc
7721  231E  DD 6E FE    	ld	l,(ix-2)
7722  2321  DD 66 FF    	ld	h,(ix-1)
7723  2324  7E          	ld	a,(hl)
7724  2325  C6 24       	add	a,0x24
7725  2327  57          	ld	d,a
7726  2328  0A          	ld	a,(bc)
7727  2329  C6 20       	add	a,0x20
7728  232B  C5          	push	bc
7729  232C  5F          	ld	e,a
7730  232D  D5          	push	de
7731  232E  CD 80 5C    	call	_InitEnemyshootLaser
7732  2331  F1          	pop	af
7733  2332  C1          	pop	bc
7734  2333              l_UpdateStage1EndBoss1_00105:
7735  2333  E1          	pop	hl
7736  2334  56          	ld	d,(hl)
7737  2335  E5          	push	hl
7738  2336  C5          	push	bc
7739  2337  3E 18       	ld	a,0x18
7740  2339  5A          	ld	e,d
7741  233A  57          	ld	d,a
7742  233B  D5          	push	de
7743  233C  CD 00 00    	call	__moduchar_callee
7744  233F  C1          	pop	bc
7745  2340  7D          	ld	a,l
7746  2341  D6 10       	sub	a,0x10
7747  2343  20 1A       	jr	NZ,l_UpdateStage1EndBoss1_00108
7748  2345  DD 6E FE    	ld	l,(ix-2)
7749  2348  DD 66 FF    	ld	h,(ix-1)
7750  234B  7E          	ld	a,(hl)
7751  234C  C6 10       	add	a,0x10
7752  234E  57          	ld	d,a
7753  234F  0A          	ld	a,(bc)
7754  2350  C6 0C       	add	a,0x0c
7755  2352  47          	ld	b,a
7756  2353  3E 4C       	ld	a,0x4c
7757  2355  5A          	ld	e,d
7758  2356  57          	ld	d,a
7759  2357  D5          	push	de
7760  2358  C5          	push	bc
7761  2359  33          	inc	sp
7762  235A  CD 23 49    	call	_InitEnemy
7763  235D  F1          	pop	af
7764  235E  33          	inc	sp
7765  235F              l_UpdateStage1EndBoss1_00108:
7766  235F  DD F9       	ld	sp, ix
7767  2361  DD E1       	pop	ix
7768  2363  C9          	ret
7769  2364              	SECTION code_compiler
7770  2364              ;	---------------------------------
7771  2364              ; Function UpdateStage1EndBoss
7772  2364              ; ---------------------------------
7773  2364              _UpdateStage1EndBoss:
7774  2364  DD E5       	push	ix
7775  2366  DD 21 00 00 	ld	ix,0
7776  236A  DD 39       	add	ix,sp
7777  236C  DD 6E 04    	ld	l,(ix+4)
7778  236F  DD 66 05    	ld	h,(ix+5)
7779  2372  4D          	ld	c,l
7780  2373  44          	ld	b,h
7781  2374  23          	inc	hl
7782  2375  56          	ld	d,(hl)
7783  2376  0A          	ld	a,(bc)
7784  2377  5F          	ld	e,a
7785  2378  C5          	push	bc
7786  2379  21 28 30    	ld	hl,0x3028
7787  237C  E5          	push	hl
7788  237D  D5          	push	de
7789  237E  21 A0 01    	ld	hl,0x01a0
7790  2381  E5          	push	hl
7791  2382  CD 46 00    	call	_DrawSpriteArray
7792  2385  21 06 00    	ld	hl,6
7793  2388  39          	add	hl,sp
7794  2389  F9          	ld	sp,hl
7795  238A  C1          	pop	bc
7796  238B  21 04 00    	ld	hl,0x0004
7797  238E  09          	add	hl,bc
7798  238F  7E          	ld	a,(hl)
7799  2390  B7          	or	a, a
7800  2391  20 07       	jr	NZ,l_UpdateStage1EndBoss_00102
7801  2393  C5          	push	bc
7802  2394  CD BB 12    	call	_DoCommonBossAppearingFunction
7803  2397  F1          	pop	af
7804  2398  18 05       	jr	l_UpdateStage1EndBoss_00103
7805  239A              l_UpdateStage1EndBoss_00102:
7806  239A  C5          	push	bc
7807  239B  CD 9E 22    	call	_UpdateStage1EndBoss1
7808  239E  F1          	pop	af
7809  239F              l_UpdateStage1EndBoss_00103:
7810  239F  2E 01       	ld	l,0x01
7811  23A1  DD E1       	pop	ix
7812  23A3  C9          	ret
7813  23A4              	SECTION code_compiler
7814  23A4              ;	---------------------------------
7815  23A4              ; Function UpdateMonsterBlob
7816  23A4              ; ---------------------------------
7817  23A4              _UpdateMonsterBlob:
7818  23A4  DD E5       	push	ix
7819  23A6  DD 21 00 00 	ld	ix,0
7820  23AA  DD 39       	add	ix,sp
7821  23AC  F5          	push	af
7822  23AD  DD 6E 04    	ld	l,(ix+4)
7823  23B0  DD 66 05    	ld	h,(ix+5)
7824  23B3  4D          	ld	c,l
7825  23B4  44          	ld	b,h
7826  23B5  23          	inc	hl
7827  23B6  23          	inc	hl
7828  23B7  23          	inc	hl
7829  23B8  5E          	ld	e,(hl)
7830  23B9  79          	ld	a,c
7831  23BA  C6 01       	add	a,0x01
7832  23BC  DD 77 FE    	ld	(ix-2),a
7833  23BF  78          	ld	a,b
7834  23C0  CE 00       	adc	a,0x00
7835  23C2  DD 77 FF    	ld	(ix-1),a
7836  23C5  7B          	ld	a,e
7837  23C6  D6 1E       	sub	a,0x1e
7838  23C8  38 04       	jr	C,l_UpdateMonsterBlob_00107
7839  23CA  36 00       	ld	(hl),0x00
7840  23CC  18 2F       	jr	l_UpdateMonsterBlob_00108
7841  23CE              l_UpdateMonsterBlob_00107:
7842  23CE  3E 05       	ld	a,0x05
7843  23D0  93          	sub	a, e
7844  23D1  30 1E       	jr	NC,l_UpdateMonsterBlob_00104
7845  23D3  0A          	ld	a,(bc)
7846  23D4  5F          	ld	e,a
7847  23D5  69          	ld	l, c
7848  23D6  60          	ld	h, b
7849  23D7  23          	inc	hl
7850  23D8  23          	inc	hl
7851  23D9  23          	inc	hl
7852  23DA  23          	inc	hl
7853  23DB  56          	ld	d,(hl)
7854  23DC  7B          	ld	a,e
7855  23DD  82          	add	a, d
7856  23DE  E1          	pop	hl
7857  23DF  02          	ld	(bc),a
7858  23E0  5E          	ld	e,(hl)
7859  23E1  E5          	push	hl
7860  23E2  69          	ld	l, c
7861  23E3  60          	ld	h, b
7862  23E4  23          	inc	hl
7863  23E5  23          	inc	hl
7864  23E6  23          	inc	hl
7865  23E7  23          	inc	hl
7866  23E8  23          	inc	hl
7867  23E9  56          	ld	d,(hl)
7868  23EA  7B          	ld	a,e
7869  23EB  82          	add	a, d
7870  23EC  E1          	pop	hl
7871  23ED  E5          	push	hl
7872  23EE  77          	ld	(hl),a
7873  23EF  18 0C       	jr	l_UpdateMonsterBlob_00108
7874  23F1              l_UpdateMonsterBlob_00104:
7875  23F1  7B          	ld	a,e
7876  23F2  D6 05       	sub	a,0x05
7877  23F4  20 07       	jr	NZ,l_UpdateMonsterBlob_00108
7878  23F6  C5          	push	bc
7879  23F7  C5          	push	bc
7880  23F8  CD 68 46    	call	_GetEnemyDirection
7881  23FB  F1          	pop	af
7882  23FC  C1          	pop	bc
7883  23FD              l_UpdateMonsterBlob_00108:
7884  23FD  3A 07 00    	ld	a,(_sprite164anim)
7885  2400  5F          	ld	e,a
7886  2401  16 00       	ld	d,0x00
7887  2403  21 47 01    	ld	hl,0x0147
7888  2406  19          	add	hl,de
7889  2407  EB          	ex	de,hl
7890  2408  E1          	pop	hl
7891  2409  7E          	ld	a,(hl)
7892  240A  E5          	push	hl
7893  240B  DD 77 FE    	ld	(ix-2),a
7894  240E  0A          	ld	a,(bc)
7895  240F  47          	ld	b,a
7896  2410  D5          	push	de
7897  2411  DD 7E FE    	ld	a,(ix-2)
7898  2414  48          	ld	c,b
7899  2415  47          	ld	b,a
7900  2416  C5          	push	bc
7901  2417  CD A7 00    	call	_DrawQuadSprite
7902  241A  F1          	pop	af
7903  241B  F1          	pop	af
7904  241C  2E 01       	ld	l,0x01
7905  241E  DD F9       	ld	sp, ix
7906  2420  DD E1       	pop	ix
7907  2422  C9          	ret
7908  2423              	SECTION code_compiler
7909  2423              ;	---------------------------------
7910  2423              ; Function InitMonsterMissilLeft
7911  2423              ; ---------------------------------
7912  2423              _InitMonsterMissilLeft:
7913  2423  DD E5       	push	ix
7914  2425  DD 21 00 00 	ld	ix,0
7915  2429  DD 39       	add	ix,sp
7916  242B  DD 4E 04    	ld	c,(ix+4)
7917  242E  DD 46 05    	ld	b,(ix+5)
7918  2431  21 04 00    	ld	hl,0x0004
7919  2434  09          	add	hl,bc
7920  2435  36 08       	ld	(hl),0x08
7921  2437  DD E1       	pop	ix
7922  2439  C9          	ret
7923  243A              	SECTION code_compiler
7924  243A              ;	---------------------------------
7925  243A              ; Function UpdateMonsterMissil
7926  243A              ; ---------------------------------
7927  243A              _UpdateMonsterMissil:
7928  243A  DD E5       	push	ix
7929  243C  DD 21 00 00 	ld	ix,0
7930  2440  DD 39       	add	ix,sp
7931  2442  F5          	push	af
7932  2443  DD 6E 04    	ld	l,(ix+4)
7933  2446  DD 66 05    	ld	h,(ix+5)
7934  2449  4D          	ld	c,l
7935  244A  44          	ld	b,h
7936  244B  23          	inc	hl
7937  244C  5E          	ld	e,(hl)
7938  244D  1C          	inc	e
7939  244E  73          	ld	(hl),e
7940  244F  DD 73 FE    	ld	(ix-2),e
7941  2452  3E C0       	ld	a,0xc0
7942  2454  93          	sub	a, e
7943  2455  30 04       	jr	NC,l_UpdateMonsterMissil_00102
7944  2457  2E 00       	ld	l,0x00
7945  2459  18 3D       	jr	l_UpdateMonsterMissil_00104
7946  245B              l_UpdateMonsterMissil_00102:
7947  245B  21 04 00    	ld	hl,0x0004
7948  245E  09          	add	hl,bc
7949  245F  5E          	ld	e,(hl)
7950  2460  16 00       	ld	d,0x00
7951  2462  21 6E 01    	ld	hl,0x016e
7952  2465  19          	add	hl,de
7953  2466  3A 13 00    	ld	a,(_playery)
7954  2469  EB          	ex	de,hl
7955  246A  DD 96 FE    	sub	a,(ix-2)
7956  246D  30 04       	jr	NC,l_UpdateMonsterMissil_00106
7957  246F  2E 04       	ld	l,0x04
7958  2471  18 02       	jr	l_UpdateMonsterMissil_00107
7959  2473              l_UpdateMonsterMissil_00106:
7960  2473  2E 00       	ld	l,0x00
7961  2475              l_UpdateMonsterMissil_00107:
7962  2475  26 00       	ld	h,0x00
7963  2477  19          	add	hl,de
7964  2478  0A          	ld	a,(bc)
7965  2479  EB          	ex	de,hl
7966  247A  DD 77 FF    	ld	(ix-1),a
7967  247D  C5          	push	bc
7968  247E  D5          	push	de
7969  247F  DD 66 FE    	ld	h,(ix-2)
7970  2482  DD 6E FF    	ld	l,(ix-1)
7971  2485  E5          	push	hl
7972  2486  CD A7 00    	call	_DrawQuadSprite
7973  2489  F1          	pop	af
7974  248A  F1          	pop	af
7975  248B  C1          	pop	bc
7976  248C  3E 0F       	ld	a,0x0f
7977  248E  F5          	push	af
7978  248F  33          	inc	sp
7979  2490  C5          	push	bc
7980  2491  CD 54 1F    	call	_DoSideShoot
7981  2494  F1          	pop	af
7982  2495  33          	inc	sp
7983  2496  2E 01       	ld	l,0x01
7984  2498              l_UpdateMonsterMissil_00104:
7985  2498  DD F9       	ld	sp, ix
7986  249A  DD E1       	pop	ix
7987  249C  C9          	ret
7988  249D              	SECTION code_compiler
7989  249D              ;	---------------------------------
7990  249D              ; Function UpdateMonsterHead
7991  249D              ; ---------------------------------
7992  249D              _UpdateMonsterHead:
7993  249D  DD E5       	push	ix
7994  249F  DD 21 00 00 	ld	ix,0
7995  24A3  DD 39       	add	ix,sp
7996  24A5  F5          	push	af
7997  24A6  F5          	push	af
7998  24A7  3B          	dec	sp
7999  24A8  DD 7E 04    	ld	a,(ix+4)
8000  24AB  DD 77 FC    	ld	(ix-4),a
8001  24AE  4F          	ld	c, a
8002  24AF  DD 7E 05    	ld	a,(ix+5)
8003  24B2  DD 77 FD    	ld	(ix-3),a
8004  24B5  47          	ld	b,a
8005  24B6  03          	inc	bc
8006  24B7  0A          	ld	a,(bc)
8007  24B8  3C          	inc	a
8008  24B9  5F          	ld	e,a
8009  24BA  02          	ld	(bc),a
8010  24BB  DD 77 FF    	ld	(ix-1),a
8011  24BE  3E C0       	ld	a,0xc0
8012  24C0  93          	sub	a, e
8013  24C1  30 05       	jr	NC,l_UpdateMonsterHead_00102
8014  24C3  2E 00       	ld	l,0x00
8015  24C5  C3 83 25    	jp	l_UpdateMonsterHead_00105
8016  24C8              l_UpdateMonsterHead_00102:
8017  24C8  DD 6E FC    	ld	l,(ix-4)
8018  24CB  DD 66 FD    	ld	h,(ix-3)
8019  24CE  7E          	ld	a,(hl)
8020  24CF  DD 77 FB    	ld	(ix-5),a
8021  24D2  21 07 00    	ld	hl,_sprite164anim
8022  24D5  5E          	ld	e,(hl)
8023  24D6  CB 3B       	srl	e
8024  24D8  CB 3B       	srl	e
8025  24DA  16 00       	ld	d,0x00
8026  24DC  6B          	ld	l, e
8027  24DD  62          	ld	h, d
8028  24DE  29          	add	hl, hl
8029  24DF  29          	add	hl, hl
8030  24E0  29          	add	hl, hl
8031  24E1  19          	add	hl, de
8032  24E2  11 53 01    	ld	de,0x0153
8033  24E5  19          	add	hl,de
8034  24E6  EB          	ex	de,hl
8035  24E7  C5          	push	bc
8036  24E8  21 18 18    	ld	hl,0x1818
8037  24EB  E5          	push	hl
8038  24EC  DD 66 FF    	ld	h,(ix-1)
8039  24EF  DD 6E FB    	ld	l,(ix-5)
8040  24F2  E5          	push	hl
8041  24F3  D5          	push	de
8042  24F4  CD 46 00    	call	_DrawSpriteArray
8043  24F7  21 06 00    	ld	hl,6
8044  24FA  39          	add	hl,sp
8045  24FB  F9          	ld	sp,hl
8046  24FC  C1          	pop	bc
8047  24FD  DD 6E FC    	ld	l,(ix-4)
8048  2500  DD 66 FD    	ld	h,(ix-3)
8049  2503  23          	inc	hl
8050  2504  23          	inc	hl
8051  2505  23          	inc	hl
8052  2506  56          	ld	d,(hl)
8053  2507  C5          	push	bc
8054  2508  3E 05       	ld	a,0x05
8055  250A  5A          	ld	e,d
8056  250B  57          	ld	d,a
8057  250C  D5          	push	de
8058  250D  CD 00 00    	call	__moduchar_callee
8059  2510  C1          	pop	bc
8060  2511  7D          	ld	a,l
8061  2512  B7          	or	a, a
8062  2513  20 6C       	jr	NZ,l_UpdateMonsterHead_00104
8063  2515  C5          	push	bc
8064  2516  3E 0F       	ld	a,0x0f
8065  2518  F5          	push	af
8066  2519  33          	inc	sp
8067  251A  CD 27 00    	call	_changeBank
8068  251D  33          	inc	sp
8069  251E  C1          	pop	bc
8070  251F  0A          	ld	a,(bc)
8071  2520  DD 77 FB    	ld	(ix-5),a
8072  2523  DD 7E FC    	ld	a,(ix-4)
8073  2526  C6 04       	add	a,0x04
8074  2528  4F          	ld	c,a
8075  2529  DD 7E FD    	ld	a,(ix-3)
8076  252C  CE 00       	adc	a,0x00
8077  252E  47          	ld	b,a
8078  252F  0A          	ld	a,(bc)
8079  2530  5F          	ld	e,a
8080  2531  3E 60       	ld	a,0x60
8081  2533  DD 96 FB    	sub	a,(ix-5)
8082  2536  30 0E       	jr	NC,l_UpdateMonsterHead_00107
8083  2538  16 00       	ld	d,0x00
8084  253A  21 00 00    	ld	hl,_monsterheadshootdirecionsy
8085  253D  19          	add	hl, de
8086  253E  56          	ld	d,(hl)
8087  253F  AF          	xor	a, a
8088  2540  92          	sub	a, d
8089  2541  DD 77 FF    	ld	(ix-1),a
8090  2544  18 0A       	jr	l_UpdateMonsterHead_00108
8091  2546              l_UpdateMonsterHead_00107:
8092  2546  16 00       	ld	d,0x00
8093  2548  21 00 00    	ld	hl,_monsterheadshootdirecionsy
8094  254B  19          	add	hl, de
8095  254C  7E          	ld	a,(hl)
8096  254D  DD 77 FF    	ld	(ix-1),a
8097  2550              l_UpdateMonsterHead_00108:
8098  2550  16 00       	ld	d,0x00
8099  2552  21 00 00    	ld	hl,_monsterheadshootdirecionsx
8100  2555  19          	add	hl, de
8101  2556  7E          	ld	a,(hl)
8102  2557  DD 77 FE    	ld	(ix-2),a
8103  255A  DD 7E FB    	ld	a,(ix-5)
8104  255D  C6 08       	add	a,0x08
8105  255F  5F          	ld	e,a
8106  2560  DD 6E FC    	ld	l,(ix-4)
8107  2563  DD 66 FD    	ld	h,(ix-3)
8108  2566  7E          	ld	a,(hl)
8109  2567  C6 08       	add	a,0x08
8110  2569  57          	ld	d,a
8111  256A  C5          	push	bc
8112  256B  DD 66 FF    	ld	h,(ix-1)
8113  256E  DD 6E FE    	ld	l,(ix-2)
8114  2571  E5          	push	hl
8115  2572  7B          	ld	a,e
8116  2573  5A          	ld	e,d
8117  2574  57          	ld	d,a
8118  2575  D5          	push	de
8119  2576  CD F7 5B    	call	_InitEnemyshootDirection
8120  2579  F1          	pop	af
8121  257A  F1          	pop	af
8122  257B  C1          	pop	bc
8123  257C  0A          	ld	a,(bc)
8124  257D  3C          	inc	a
8125  257E  E6 0F       	and	a,0x0f
8126  2580  02          	ld	(bc),a
8127  2581              l_UpdateMonsterHead_00104:
8128  2581  2E 01       	ld	l,0x01
8129  2583              l_UpdateMonsterHead_00105:
8130  2583  DD F9       	ld	sp, ix
8131  2585  DD E1       	pop	ix
8132  2587  C9          	ret
8133  2588              	SECTION code_compiler
8134  2588              ;	---------------------------------
8135  2588              ; Function DoAracPatternMovement
8136  2588              ; ---------------------------------
8137  2588              _DoAracPatternMovement:
8138  2588  DD E5       	push	ix
8139  258A  DD 21 00 00 	ld	ix,0
8140  258E  DD 39       	add	ix,sp
8141  2590  21 FA FF    	ld	hl,-6
8142  2593  39          	add	hl,sp
8143  2594  F9          	ld	sp,hl
8144  2595  DD 4E 04    	ld	c,(ix+4)
8145  2598  DD 46 05    	ld	b,(ix+5)
8146  259B  0A          	ld	a,(bc)
8147  259C  DD 77 FB    	ld	(ix-5),a
8148  259F  21 05 00    	ld	hl,0x0005
8149  25A2  09          	add	hl,bc
8150  25A3  DD 75 FE    	ld	(ix-2),l
8151  25A6  DD 74 FF    	ld	(ix-1),h
8152  25A9  5E          	ld	e,(hl)
8153  25AA  DD 7E 06    	ld	a,(ix+6)
8154  25AD  83          	add	a, e
8155  25AE  5F          	ld	e,a
8156  25AF  DD 7E 07    	ld	a,(ix+7)
8157  25B2  CE 00       	adc	a,0x00
8158  25B4  57          	ld	d,a
8159  25B5  1A          	ld	a,(de)
8160  25B6  C6 FC       	add	a,0xfc
8161  25B8  5F          	ld	e,a
8162  25B9  DD 7E FB    	ld	a,(ix-5)
8163  25BC  83          	add	a, e
8164  25BD  02          	ld	(bc),a
8165  25BE  59          	ld	e, c
8166  25BF  50          	ld	d, b
8167  25C0  13          	inc	de
8168  25C1  1A          	ld	a,(de)
8169  25C2  DD 77 FB    	ld	(ix-5),a
8170  25C5  DD 6E FE    	ld	l,(ix-2)
8171  25C8  DD 66 FF    	ld	h,(ix-1)
8172  25CB  7E          	ld	a,(hl)
8173  25CC  DD 77 FA    	ld	(ix-6),a
8174  25CF  DD 7E 08    	ld	a,(ix+8)
8175  25D2  DD 86 FA    	add	a,(ix-6)
8176  25D5  DD 77 FC    	ld	(ix-4),a
8177  25D8  6F          	ld	l,a
8178  25D9  DD 7E 09    	ld	a,(ix+9)
8179  25DC  CE 00       	adc	a,0x00
8180  25DE  DD 77 FD    	ld	(ix-3),a
8181  25E1  67          	ld	h,a
8182  25E2  7E          	ld	a,(hl)
8183  25E3  C6 FC       	add	a,0xfc
8184  25E5  6F          	ld	l,a
8185  25E6  DD 7E FB    	ld	a,(ix-5)
8186  25E9  85          	add	a, l
8187  25EA  12          	ld	(de),a
8188  25EB  21 03 00    	ld	hl,0x0003
8189  25EE  09          	add	hl,bc
8190  25EF  DD 75 FC    	ld	(ix-4),l
8191  25F2  DD 74 FD    	ld	(ix-3),h
8192  25F5  7E          	ld	a,(hl)
8193  25F6  DD 77 FA    	ld	(ix-6),a
8194  25F9  DD 6E FE    	ld	l,(ix-2)
8195  25FC  DD 66 FF    	ld	h,(ix-1)
8196  25FF  6E          	ld	l,(hl)
8197  2600  26 00       	ld	h,0x00
8198  2602  29          	add	hl, hl
8199  2603  5D          	ld	e, l
8200  2604  54          	ld	d, h
8201  2605  DD 7E 0A    	ld	a,(ix+10)
8202  2608  83          	add	a, e
8203  2609  5F          	ld	e,a
8204  260A  DD 7E 0B    	ld	a,(ix+11)
8205  260D  8A          	adc	a, d
8206  260E  57          	ld	d,a
8207  260F  EB          	ex	de,hl
8208  2610  5E          	ld	e,(hl)
8209  2611  23          	inc	hl
8210  2612  56          	ld	d,(hl)
8211  2613  DD 6E FA    	ld	l,(ix-6)
8212  2616  AF          	xor	a,a
8213  2617  67          	ld	h,a
8214  2618  ED 52       	sbc	hl,de
8215  261A  38 21       	jr	C,l_DoAracPatternMovement_00103
8216  261C  03          	inc	bc
8217  261D  03          	inc	bc
8218  261E  03          	inc	bc
8219  261F  03          	inc	bc
8220  2620  0A          	ld	a,(bc)
8221  2621  3C          	inc	a
8222  2622  02          	ld	(bc),a
8223  2623  DD 6E FC    	ld	l,(ix-4)
8224  2626  DD 66 FD    	ld	h,(ix-3)
8225  2629  36 00       	ld	(hl),0x00
8226  262B  DD 6E FE    	ld	l,(ix-2)
8227  262E  DD 66 FF    	ld	h,(ix-1)
8228  2631  7E          	ld	a,(hl)
8229  2632  3C          	inc	a
8230  2633  77          	ld	(hl),a
8231  2634  E6 07       	and	a,0x07
8232  2636  DD 6E FE    	ld	l,(ix-2)
8233  2639  DD 66 FF    	ld	h,(ix-1)
8234  263C  77          	ld	(hl),a
8235  263D              l_DoAracPatternMovement_00103:
8236  263D  DD F9       	ld	sp, ix
8237  263F  DD E1       	pop	ix
8238  2641  C9          	ret
8239  2642              	SECTION code_compiler
8240  2642              ;	---------------------------------
8241  2642              ; Function DrawAracMoving
8242  2642              ; ---------------------------------
8243  2642              _DrawAracMoving:
8244  2642  DD E5       	push	ix
8245  2644  DD 21 00 00 	ld	ix,0
8246  2648  DD 39       	add	ix,sp
8247  264A  DD 6E 04    	ld	l,(ix+4)
8248  264D  DD 66 05    	ld	h,(ix+5)
8249  2650  4D          	ld	c,l
8250  2651  44          	ld	b,h
8251  2652  23          	inc	hl
8252  2653  56          	ld	d,(hl)
8253  2654  0A          	ld	a,(bc)
8254  2655  5F          	ld	e,a
8255  2656  69          	ld	l, c
8256  2657  60          	ld	h, b
8257  2658  23          	inc	hl
8258  2659  23          	inc	hl
8259  265A  23          	inc	hl
8260  265B  7E          	ld	a,(hl)
8261  265C  CB 3F       	srl	a
8262  265E  E6 01       	and	a,0x01
8263  2660  4F          	ld	c,a
8264  2661  06 00       	ld	b,0x00
8265  2663  69          	ld	l, c
8266  2664  60          	ld	h, b
8267  2665  29          	add	hl, hl
8268  2666  09          	add	hl, bc
8269  2667  29          	add	hl, hl
8270  2668  29          	add	hl, hl
8271  2669  29          	add	hl, hl
8272  266A  01 8B 01    	ld	bc,0x018b
8273  266D  09          	add	hl,bc
8274  266E  01 30 20    	ld	bc,0x2030
8275  2671  C5          	push	bc
8276  2672  D5          	push	de
8277  2673  E5          	push	hl
8278  2674  CD 46 00    	call	_DrawSpriteArray
8279  2677  21 06 00    	ld	hl,6
8280  267A  39          	add	hl,sp
8281  267B  F9          	ld	sp,hl
8282  267C  DD E1       	pop	ix
8283  267E  C9          	ret
8284  267F              	SECTION code_compiler
8285  267F              ;	---------------------------------
8286  267F              ; Function UpdateStage7MiddleBoss0
8287  267F              ; ---------------------------------
8288  267F              _UpdateStage7MiddleBoss0:
8289  267F  DD E5       	push	ix
8290  2681  DD 21 00 00 	ld	ix,0
8291  2685  DD 39       	add	ix,sp
8292  2687  DD 6E 04    	ld	l,(ix+4)
8293  268A  DD 66 05    	ld	h,(ix+5)
8294  268D  4D          	ld	c,l
8295  268E  44          	ld	b,h
8296  268F  23          	inc	hl
8297  2690  5E          	ld	e,(hl)
8298  2691  1C          	inc	e
8299  2692  73          	ld	(hl),e
8300  2693  7B          	ld	a,e
8301  2694  D6 1E       	sub	a,0x1e
8302  2696  38 13       	jr	C,l_UpdateStage7MiddleBoss0_00102
8303  2698  21 04 00    	ld	hl,0x0004
8304  269B  09          	add	hl,bc
8305  269C  36 02       	ld	(hl),0x02
8306  269E  21 05 00    	ld	hl,0x0005
8307  26A1  09          	add	hl,bc
8308  26A2  36 00       	ld	(hl),0x00
8309  26A4  59          	ld	e, c
8310  26A5  50          	ld	d, b
8311  26A6  13          	inc	de
8312  26A7  13          	inc	de
8313  26A8  13          	inc	de
8314  26A9  AF          	xor	a, a
8315  26AA  12          	ld	(de),a
8316  26AB              l_UpdateStage7MiddleBoss0_00102:
8317  26AB  C5          	push	bc
8318  26AC  CD 42 26    	call	_DrawAracMoving
8319  26AF  F1          	pop	af
8320  26B0  DD E1       	pop	ix
8321  26B2  C9          	ret
8322  26B3              	SECTION code_compiler
8323  26B3              ;	---------------------------------
8324  26B3              ; Function UpdateStage7MiddleBoss1
8325  26B3              ; ---------------------------------
8326  26B3              _UpdateStage7MiddleBoss1:
8327  26B3  DD E5       	push	ix
8328  26B5  DD 21 00 00 	ld	ix,0
8329  26B9  DD 39       	add	ix,sp
8330  26BB  21 00 00    	ld	hl,_aracmovingt
8331  26BE  E5          	push	hl
8332  26BF  21 00 00    	ld	hl,_aracmovingy
8333  26C2  E5          	push	hl
8334  26C3  21 00 00    	ld	hl,_aracmovingx
8335  26C6  E5          	push	hl
8336  26C7  DD 6E 04    	ld	l,(ix+4)
8337  26CA  DD 66 05    	ld	h,(ix+5)
8338  26CD  E5          	push	hl
8339  26CE  CD 88 25    	call	_DoAracPatternMovement
8340  26D1  21 08 00    	ld	hl,8
8341  26D4  39          	add	hl,sp
8342  26D5  F9          	ld	sp,hl
8343  26D6  DD 6E 04    	ld	l,(ix+4)
8344  26D9  DD 66 05    	ld	h,(ix+5)
8345  26DC  E5          	push	hl
8346  26DD  CD 42 26    	call	_DrawAracMoving
8347  26E0  F1          	pop	af
8348  26E1  DD E1       	pop	ix
8349  26E3  C9          	ret
8350  26E4              	SECTION code_compiler
8351  26E4              ;	---------------------------------
8352  26E4              ; Function UpdateStage7MiddleBoss2
8353  26E4              ; ---------------------------------
8354  26E4              _UpdateStage7MiddleBoss2:
8355  26E4  DD E5       	push	ix
8356  26E6  DD 21 00 00 	ld	ix,0
8357  26EA  DD 39       	add	ix,sp
8358  26EC  DD 4E 04    	ld	c,(ix+4)
8359  26EF  DD 46 05    	ld	b,(ix+5)
8360  26F2  59          	ld	e, c
8361  26F3  50          	ld	d, b
8362  26F4  13          	inc	de
8363  26F5  13          	inc	de
8364  26F6  13          	inc	de
8365  26F7  1A          	ld	a,(de)
8366  26F8  D6 29       	sub	a,0x29
8367  26FA  30 13       	jr	NC,l_UpdateStage7MiddleBoss2_00102
8368  26FC  C5          	push	bc
8369  26FD  D5          	push	de
8370  26FE  21 14 18    	ld	hl,0x1814
8371  2701  E5          	push	hl
8372  2702  3E 08       	ld	a,0x08
8373  2704  F5          	push	af
8374  2705  33          	inc	sp
8375  2706  C5          	push	bc
8376  2707  CD F9 5F    	call	_TestEnemyShootComplex
8377  270A  F1          	pop	af
8378  270B  F1          	pop	af
8379  270C  33          	inc	sp
8380  270D  D1          	pop	de
8381  270E  C1          	pop	bc
8382  270F              l_UpdateStage7MiddleBoss2_00102:
8383  270F  1A          	ld	a,(de)
8384  2710  D6 50       	sub	a,0x50
8385  2712  38 08       	jr	C,l_UpdateStage7MiddleBoss2_00104
8386  2714  21 04 00    	ld	hl,0x0004
8387  2717  09          	add	hl,bc
8388  2718  36 01       	ld	(hl),0x01
8389  271A  AF          	xor	a, a
8390  271B  12          	ld	(de),a
8391  271C              l_UpdateStage7MiddleBoss2_00104:
8392  271C  69          	ld	l, c
8393  271D  60          	ld	h, b
8394  271E  23          	inc	hl
8395  271F  56          	ld	d,(hl)
8396  2720  0A          	ld	a,(bc)
8397  2721  47          	ld	b,a
8398  2722  21 30 20    	ld	hl,0x2030
8399  2725  E5          	push	hl
8400  2726  58          	ld	e,b
8401  2727  D5          	push	de
8402  2728  21 8B 01    	ld	hl,0x018b
8403  272B  E5          	push	hl
8404  272C  CD 46 00    	call	_DrawSpriteArray
8405  272F  21 06 00    	ld	hl,6
8406  2732  39          	add	hl,sp
8407  2733  F9          	ld	sp,hl
8408  2734  DD E1       	pop	ix
8409  2736  C9          	ret
8410  2737              	SECTION code_compiler
8411  2737              ;	---------------------------------
8412  2737              ; Function FinishStage7MiddleBoss
8413  2737              ; ---------------------------------
8414  2737              _FinishStage7MiddleBoss:
8415  2737  3E 01       	ld	a,0x01
8416  2739  F5          	push	af
8417  273A  33          	inc	sp
8418  273B  CD 5C 48    	call	_KillEnemies
8419  273E  33          	inc	sp
8420  273F  21 00 20    	ld	hl,0x2000
8421  2742  E5          	push	hl
8422  2743  AF          	xor	a, a
8423  2744  F5          	push	af
8424  2745  33          	inc	sp
8425  2746  CD 23 49    	call	_InitEnemy
8426  2749  F1          	pop	af
8427  274A  33          	inc	sp
8428  274B  C9          	ret
8429  274C              	SECTION code_compiler
8430  274C              ;	---------------------------------
8431  274C              ; Function InitStage7MiddleBoss
8432  274C              ; ---------------------------------
8433  274C              _InitStage7MiddleBoss:
8434  274C  DD E5       	push	ix
8435  274E  DD 21 00 00 	ld	ix,0
8436  2752  DD 39       	add	ix,sp
8437  2754  21 FF 00    	ld	hl,_disablescroll
8438  2757  36 01       	ld	(hl),0x01
8439  2759  DD E1       	pop	ix
8440  275B  C9          	ret
8441  275C              	SECTION code_compiler
8442  275C              ;	---------------------------------
8443  275C              ; Function UpdateStage7MiddleBoss
8444  275C              ; ---------------------------------
8445  275C              _UpdateStage7MiddleBoss:
8446  275C  DD E5       	push	ix
8447  275E  DD 21 00 00 	ld	ix,0
8448  2762  DD 39       	add	ix,sp
8449  2764  21 AF 00    	ld	hl,0x00af
8450  2767  E5          	push	hl
8451  2768  2A 02 00    	ld	hl,(_stageframe)
8452  276B  E5          	push	hl
8453  276C  CD 00 00    	call	__moduint_callee
8454  276F  7D          	ld	a,l
8455  2770  D6 21       	sub	a,0x21
8456  2772  20 1C       	jr	NZ,l_UpdateStage7MiddleBoss_00102
8457  2774  B4          	or	a,h
8458  2775  20 19       	jr	NZ,l_UpdateStage7MiddleBoss_00102
8459  2777  CD 00 00    	call	_myRand
8460  277A  06 D0       	ld	b,0xd0
8461  277C  4D          	ld	c, l
8462  277D  C5          	push	bc
8463  277E  CD 00 00    	call	__moduchar_callee
8464  2781  7D          	ld	a,l
8465  2782  C6 20       	add	a,0x20
8466  2784  47          	ld	b,a
8467  2785  21 00 1A    	ld	hl,0x1a00
8468  2788  E5          	push	hl
8469  2789  C5          	push	bc
8470  278A  33          	inc	sp
8471  278B  CD 23 49    	call	_InitEnemy
8472  278E  F1          	pop	af
8473  278F  33          	inc	sp
8474  2790              l_UpdateStage7MiddleBoss_00102:
8475  2790  21 AF 00    	ld	hl,0x00af
8476  2793  E5          	push	hl
8477  2794  2A 02 00    	ld	hl,(_stageframe)
8478  2797  E5          	push	hl
8479  2798  CD 00 00    	call	__moduint_callee
8480  279B  7D          	ld	a,l
8481  279C  D6 A1       	sub	a,0xa1
8482  279E  20 1C       	jr	NZ,l_UpdateStage7MiddleBoss_00104
8483  27A0  B4          	or	a,h
8484  27A1  20 19       	jr	NZ,l_UpdateStage7MiddleBoss_00104
8485  27A3  CD 00 00    	call	_myRand
8486  27A6  06 D0       	ld	b,0xd0
8487  27A8  4D          	ld	c, l
8488  27A9  C5          	push	bc
8489  27AA  CD 00 00    	call	__moduchar_callee
8490  27AD  7D          	ld	a,l
8491  27AE  C6 20       	add	a,0x20
8492  27B0  47          	ld	b,a
8493  27B1  21 B0 1A    	ld	hl,0x1ab0
8494  27B4  E5          	push	hl
8495  27B5  C5          	push	bc
8496  27B6  33          	inc	sp
8497  27B7  CD 23 49    	call	_InitEnemy
8498  27BA  F1          	pop	af
8499  27BB  33          	inc	sp
8500  27BC              l_UpdateStage7MiddleBoss_00104:
8501  27BC  01 00 00    	ld	bc,_updatestage7middlebossfunctions+0
8502  27BF  DD 6E 04    	ld	l,(ix+4)
8503  27C2  DD 66 05    	ld	h,(ix+5)
8504  27C5  5D          	ld	e,l
8505  27C6  54          	ld	d,h
8506  27C7  23          	inc	hl
8507  27C8  23          	inc	hl
8508  27C9  23          	inc	hl
8509  27CA  23          	inc	hl
8510  27CB  6E          	ld	l,(hl)
8511  27CC  26 00       	ld	h,0x00
8512  27CE  29          	add	hl, hl
8513  27CF  09          	add	hl,bc
8514  27D0  4E          	ld	c,(hl)
8515  27D1  23          	inc	hl
8516  27D2  66          	ld	h,(hl)
8517  27D3  D5          	push	de
8518  27D4  69          	ld	l, c
8519  27D5  CD 00 00    	call	___sdcc_call_hl
8520  27D8  F1          	pop	af
8521  27D9  2E 01       	ld	l,0x01
8522  27DB  DD E1       	pop	ix
8523  27DD  C9          	ret
8524  27DE              	SECTION code_compiler
8525  27DE              ;	---------------------------------
8526  27DE              ; Function InitStage7EndBossB
8527  27DE              ; ---------------------------------
8528  27DE              _InitStage7EndBossB:
8529  27DE  DD E5       	push	ix
8530  27E0  DD 21 00 00 	ld	ix,0
8531  27E4  DD 39       	add	ix,sp
8532  27E6  DD 4E 04    	ld	c,(ix+4)
8533  27E9  DD 46 05    	ld	b,(ix+5)
8534  27EC  21 04 00    	ld	hl,0x0004
8535  27EF  09          	add	hl,bc
8536  27F0  36 04       	ld	(hl),0x04
8537  27F2  21 05 00    	ld	hl,0x0005
8538  27F5  09          	add	hl,bc
8539  27F6  36 04       	ld	(hl),0x04
8540  27F8  DD E1       	pop	ix
8541  27FA  C9          	ret
8542  27FB              	SECTION code_compiler
8543  27FB              ;	---------------------------------
8544  27FB              ; Function InitStage7EndBoss
8545  27FB              ; ---------------------------------
8546  27FB              _InitStage7EndBoss:
8547  27FB  DD E5       	push	ix
8548  27FD  DD 21 00 00 	ld	ix,0
8549  2801  DD 39       	add	ix,sp
8550  2803  F5          	push	af
8551  2804  3B          	dec	sp
8552  2805  DD 6E 04    	ld	l,(ix+4)
8553  2808  DD 66 05    	ld	h,(ix+5)
8554  280B  E5          	push	hl
8555  280C  CD DE 27    	call	_InitStage7EndBossB
8556  280F  F1          	pop	af
8557  2810  DD 4E 04    	ld	c,(ix+4)
8558  2813  DD 46 05    	ld	b,(ix+5)
8559  2816  DD 71 FE    	ld	(ix-2),c
8560  2819  DD 70 FF    	ld	(ix-1),b
8561  281C  DD 36 FD 06 	ld	(ix-3),0x06
8562  2820              l_InitStage7EndBoss_00102:
8563  2820  DD 6E FE    	ld	l,(ix-2)
8564  2823  DD 66 FF    	ld	h,(ix-1)
8565  2826  23          	inc	hl
8566  2827  56          	ld	d,(hl)
8567  2828  DD 7E FD    	ld	a,(ix-3)
8568  282B  5F          	ld	e,a
8569  282C  87          	add	a, a
8570  282D  83          	add	a, e
8571  282E  87          	add	a, a
8572  282F  87          	add	a, a
8573  2830  5F          	ld	e,a
8574  2831  7A          	ld	a,d
8575  2832  93          	sub	a, e
8576  2833  57          	ld	d,a
8577  2834  0A          	ld	a,(bc)
8578  2835  93          	sub	a, e
8579  2836  5F          	ld	e,a
8580  2837  C5          	push	bc
8581  2838  3E 3F       	ld	a,0x3f
8582  283A  F5          	push	af
8583  283B  33          	inc	sp
8584  283C  D5          	push	de
8585  283D  CD 23 49    	call	_InitEnemy
8586  2840  F1          	pop	af
8587  2841  33          	inc	sp
8588  2842  C1          	pop	bc
8589  2843  DD 35 FD    	dec	(ix-3)
8590  2846  DD 7E FD    	ld	a,(ix-3)
8591  2849  D6 01       	sub	a,0x01
8592  284B  30 D3       	jr	NC,l_InitStage7EndBoss_00102
8593  284D  DD F9       	ld	sp, ix
8594  284F  DD E1       	pop	ix
8595  2851  C9          	ret
8596  2852              	SECTION code_compiler
8597  2852              ;	---------------------------------
8598  2852              ; Function DoWormMovement
8599  2852              ; ---------------------------------
8600  2852              _DoWormMovement:
8601  2852  DD E5       	push	ix
8602  2854  DD 21 00 00 	ld	ix,0
8603  2858  DD 39       	add	ix,sp
8604  285A  F5          	push	af
8605  285B  F5          	push	af
8606  285C  3B          	dec	sp
8607  285D  DD 5E 04    	ld	e,(ix+4)
8608  2860  DD 56 05    	ld	d,(ix+5)
8609  2863  1A          	ld	a,(de)
8610  2864  4F          	ld	c,a
8611  2865  21 04 00    	ld	hl,0x0004
8612  2868  19          	add	hl,de
8613  2869  E3          	ex	(sp), hl
8614  286A  3E E8       	ld	a,0xe8
8615  286C  91          	sub	a, c
8616  286D  30 04       	jr	NC,l_DoWormMovement_00102
8617  286F  E1          	pop	hl
8618  2870  E5          	push	hl
8619  2871  36 00       	ld	(hl),0x00
8620  2873              l_DoWormMovement_00102:
8621  2873  1A          	ld	a,(de)
8622  2874  D6 08       	sub	a,0x08
8623  2876  30 04       	jr	NC,l_DoWormMovement_00104
8624  2878  E1          	pop	hl
8625  2879  E5          	push	hl
8626  287A  36 04       	ld	(hl),0x04
8627  287C              l_DoWormMovement_00104:
8628  287C  4B          	ld	c, e
8629  287D  42          	ld	b, d
8630  287E  03          	inc	bc
8631  287F  0A          	ld	a,(bc)
8632  2880  6F          	ld	l,a
8633  2881  7B          	ld	a,e
8634  2882  C6 05       	add	a,0x05
8635  2884  DD 77 FE    	ld	(ix-2),a
8636  2887  7A          	ld	a,d
8637  2888  CE 00       	adc	a,0x00
8638  288A  DD 77 FF    	ld	(ix-1),a
8639  288D  3E B0       	ld	a,0xb0
8640  288F  95          	sub	a, l
8641  2890  30 0D       	jr	NC,l_DoWormMovement_00106
8642  2892  7D          	ld	a,l
8643  2893  D6 C0       	sub	a,0xc0
8644  2895  30 08       	jr	NC,l_DoWormMovement_00106
8645  2897  DD 6E FE    	ld	l,(ix-2)
8646  289A  DD 66 FF    	ld	h,(ix-1)
8647  289D  36 00       	ld	(hl),0x00
8648  289F              l_DoWormMovement_00106:
8649  289F  0A          	ld	a,(bc)
8650  28A0  D6 08       	sub	a,0x08
8651  28A2  30 08       	jr	NC,l_DoWormMovement_00109
8652  28A4  DD 6E FE    	ld	l,(ix-2)
8653  28A7  DD 66 FF    	ld	h,(ix-1)
8654  28AA  36 04       	ld	(hl),0x04
8655  28AC              l_DoWormMovement_00109:
8656  28AC  1A          	ld	a,(de)
8657  28AD  DD 77 FD    	ld	(ix-3),a
8658  28B0  E1          	pop	hl
8659  28B1  E5          	push	hl
8660  28B2  6E          	ld	l,(hl)
8661  28B3  2D          	dec	l
8662  28B4  2D          	dec	l
8663  28B5  DD 7E FD    	ld	a,(ix-3)
8664  28B8  85          	add	a, l
8665  28B9  12          	ld	(de),a
8666  28BA  0A          	ld	a,(bc)
8667  28BB  5F          	ld	e,a
8668  28BC  DD 6E FE    	ld	l,(ix-2)
8669  28BF  DD 66 FF    	ld	h,(ix-1)
8670  28C2  56          	ld	d,(hl)
8671  28C3  15          	dec	d
8672  28C4  15          	dec	d
8673  28C5  7B          	ld	a,e
8674  28C6  82          	add	a, d
8675  28C7  02          	ld	(bc),a
8676  28C8  DD F9       	ld	sp, ix
8677  28CA  DD E1       	pop	ix
8678  28CC  C9          	ret
8679  28CD              	SECTION code_compiler
8680  28CD              ;	---------------------------------
8681  28CD              ; Function UpdateStage7EndBoss
8682  28CD              ; ---------------------------------
8683  28CD              _UpdateStage7EndBoss:
8684  28CD  DD E5       	push	ix
8685  28CF  DD 21 00 00 	ld	ix,0
8686  28D3  DD 39       	add	ix,sp
8687  28D5  DD 6E 04    	ld	l,(ix+4)
8688  28D8  DD 66 05    	ld	h,(ix+5)
8689  28DB  E5          	push	hl
8690  28DC  CD 52 28    	call	_DoWormMovement
8691  28DF  F1          	pop	af
8692  28E0  ED 4B 02 00 	ld	bc,(_stageframe)
8693  28E4  79          	ld	a,c
8694  28E5  CB 38       	srl	b
8695  28E7  1F          	rra
8696  28E8  CB 38       	srl	b
8697  28EA  1F          	rra
8698  28EB  CB 38       	srl	b
8699  28ED  1F          	rra
8700  28EE  E6 01       	and	a,0x01
8701  28F0  6F          	ld	l,a
8702  28F1  26 00       	ld	h,0x00
8703  28F3  29          	add	hl, hl
8704  28F4  29          	add	hl, hl
8705  28F5  01 7E 01    	ld	bc,0x017e
8706  28F8  09          	add	hl,bc
8707  28F9  EB          	ex	de,hl
8708  28FA  DD 6E 04    	ld	l,(ix+4)
8709  28FD  DD 66 05    	ld	h,(ix+5)
8710  2900  4D          	ld	c,l
8711  2901  44          	ld	b,h
8712  2902  23          	inc	hl
8713  2903  7E          	ld	a,(hl)
8714  2904  F5          	push	af
8715  2905  0A          	ld	a,(bc)
8716  2906  67          	ld	h,a
8717  2907  F1          	pop	af
8718  2908  C5          	push	bc
8719  2909  D5          	push	de
8720  290A  6C          	ld	l,h
8721  290B  67          	ld	h,a
8722  290C  E5          	push	hl
8723  290D  CD A7 00    	call	_DrawQuadSprite
8724  2910  F1          	pop	af
8725  2911  F1          	pop	af
8726  2912  C1          	pop	bc
8727  2913  21 04 04    	ld	hl,0x0404
8728  2916  E5          	push	hl
8729  2917  3E 10       	ld	a,0x10
8730  2919  F5          	push	af
8731  291A  33          	inc	sp
8732  291B  C5          	push	bc
8733  291C  CD F9 5F    	call	_TestEnemyShootComplex
8734  291F  F1          	pop	af
8735  2920  F1          	pop	af
8736  2921  33          	inc	sp
8737  2922  2E 01       	ld	l,0x01
8738  2924  DD E1       	pop	ix
8739  2926  C9          	ret
8740  2927              	SECTION code_compiler
8741  2927              ;	---------------------------------
8742  2927              ; Function UpdateStage7EndBossB
8743  2927              ; ---------------------------------
8744  2927              _UpdateStage7EndBossB:
8745  2927  DD E5       	push	ix
8746  2929  DD 21 00 00 	ld	ix,0
8747  292D  DD 39       	add	ix,sp
8748  292F  DD 4E 04    	ld	c,(ix+4)
8749  2932  DD 46 05    	ld	b,(ix+5)
8750  2935  21 06 00    	ld	hl,0x0006
8751  2938  09          	add	hl,bc
8752  2939  7E          	ld	a, (hl)
8753  293A  D6 0A       	sub	a,0x0a
8754  293C  30 02       	jr	NC,l_UpdateStage7EndBossB_00102
8755  293E  36 0A       	ld	(hl),0x0a
8756  2940              l_UpdateStage7EndBossB_00102:
8757  2940  C5          	push	bc
8758  2941  C5          	push	bc
8759  2942  CD 52 28    	call	_DoWormMovement
8760  2945  F1          	pop	af
8761  2946  E1          	pop	hl
8762  2947  4D          	ld	c,l
8763  2948  44          	ld	b,h
8764  2949  23          	inc	hl
8765  294A  56          	ld	d,(hl)
8766  294B  0A          	ld	a,(bc)
8767  294C  47          	ld	b,a
8768  294D  21 86 01    	ld	hl,0x0186
8769  2950  E5          	push	hl
8770  2951  58          	ld	e,b
8771  2952  D5          	push	de
8772  2953  CD A7 00    	call	_DrawQuadSprite
8773  2956  F1          	pop	af
8774  2957  F1          	pop	af
8775  2958  2E 01       	ld	l,0x01
8776  295A  DD E1       	pop	ix
8777  295C  C9          	ret
8778  295D              	SECTION code_compiler
8779  295D              ;	---------------------------------
8780  295D              ; Function UpdateStage7Object
8781  295D              ; ---------------------------------
8782  295D              _UpdateStage7Object:
8783  295D  DD E5       	push	ix
8784  295F  DD 21 00 00 	ld	ix,0
8785  2963  DD 39       	add	ix,sp
8786  2965  DD 6E 04    	ld	l,(ix+4)
8787  2968  DD 66 05    	ld	h,(ix+5)
8788  296B  23          	inc	hl
8789  296C  23          	inc	hl
8790  296D  23          	inc	hl
8791  296E  4E          	ld	c,(hl)
8792  296F  3E 50       	ld	a,0x50
8793  2971  91          	sub	a, c
8794  2972  30 08       	jr	NC,l_UpdateStage7Object_00102
8795  2974  21 FF 00    	ld	hl,_disablescroll
8796  2977  2E 00       	ld	l,0x00
8797  2979  75          	ld	(hl),l
8798  297A  18 02       	jr	l_UpdateStage7Object_00104
8799  297C              l_UpdateStage7Object_00102:
8800  297C  2E 01       	ld	l,0x01
8801  297E              l_UpdateStage7Object_00104:
8802  297E  DD E1       	pop	ix
8803  2980  C9          	ret
8804  2981              	SECTION code_compiler
8805  2981              ;	---------------------------------
8806  2981              ; Function FinishVulcanStation
8807  2981              ; ---------------------------------
8808  2981              _FinishVulcanStation:
8809  2981  21 00 33    	ld	hl,0x3300
8810  2984  E5          	push	hl
8811  2985  AF          	xor	a, a
8812  2986  F5          	push	af
8813  2987  33          	inc	sp
8814  2988  CD 23 49    	call	_InitEnemy
8815  298B  F1          	pop	af
8816  298C  33          	inc	sp
8817  298D  C9          	ret
8818  298E              	SECTION code_compiler
8819  298E              ;	---------------------------------
8820  298E              ; Function UpdateVulcanStation
8821  298E              ; ---------------------------------
8822  298E              _UpdateVulcanStation:
8823  298E  DD E5       	push	ix
8824  2990  DD 21 00 00 	ld	ix,0
8825  2994  DD 39       	add	ix,sp
8826  2996  F5          	push	af
8827  2997  F5          	push	af
8828  2998  DD 4E 04    	ld	c,(ix+4)
8829  299B  DD 46 05    	ld	b,(ix+5)
8830  299E  21 01 00    	ld	hl,0x0001
8831  29A1  09          	add	hl,bc
8832  29A2  DD 75 FE    	ld	(ix-2),l
8833  29A5  DD 74 FF    	ld	(ix-1),h
8834  29A8  59          	ld	e, c
8835  29A9  50          	ld	d, b
8836  29AA  13          	inc	de
8837  29AB  13          	inc	de
8838  29AC  13          	inc	de
8839  29AD  DD 6E FE    	ld	l,(ix-2)
8840  29B0  DD 66 FF    	ld	h,(ix-1)
8841  29B3  7E          	ld	a,(hl)
8842  29B4  DD 77 FD    	ld	(ix-3),a
8843  29B7  3A FF 00    	ld	a,(_disablescroll)
8844  29BA  3D          	dec	a
8845  29BB  20 6C       	jr	NZ,l_UpdateVulcanStation_00112
8846  29BD  1A          	ld	a,(de)
8847  29BE  5F          	ld	e,a
8848  29BF  CB BB       	res	7, e
8849  29C1  7B          	ld	a,e
8850  29C2  FE 29       	cp	a,0x29
8851  29C4  30 2B       	jr	NC,l_UpdateVulcanStation_00104
8852  29C6  E6 03       	and	a,0x03
8853  29C8  20 27       	jr	NZ,l_UpdateVulcanStation_00104
8854  29CA  DD 7E FD    	ld	a,(ix-3)
8855  29CD  C6 18       	add	a,0x18
8856  29CF  57          	ld	d,a
8857  29D0  0A          	ld	a,(bc)
8858  29D1  6F          	ld	l,a
8859  29D2  7B          	ld	a,e
8860  29D3  E6 07       	and	a,0x07
8861  29D5  07          	rlca
8862  29D6  07          	rlca
8863  29D7  07          	rlca
8864  29D8  E6 F8       	and	a,0xf8
8865  29DA  85          	add	a,l
8866  29DB  DD 77 FC    	ld	(ix-4),a
8867  29DE  C5          	push	bc
8868  29DF  D5          	push	de
8869  29E0  3E 01       	ld	a,0x01
8870  29E2  5A          	ld	e,d
8871  29E3  57          	ld	d,a
8872  29E4  D5          	push	de
8873  29E5  DD 7E FC    	ld	a,(ix-4)
8874  29E8  F5          	push	af
8875  29E9  33          	inc	sp
8876  29EA  CD D7 5C    	call	_InitEnemyshoot
8877  29ED  F1          	pop	af
8878  29EE  33          	inc	sp
8879  29EF  D1          	pop	de
8880  29F0  C1          	pop	bc
8881  29F1              l_UpdateVulcanStation_00104:
8882  29F1  7B          	ld	a,e
8883  29F2  D6 40       	sub	a,0x40
8884  29F4  38 4A       	jr	C,l_UpdateVulcanStation_00113
8885  29F6  C5          	push	bc
8886  29F7  16 0C       	ld	d,0x0c
8887  29F9  D5          	push	de
8888  29FA  CD 00 00    	call	__moduchar_callee
8889  29FD  C1          	pop	bc
8890  29FE  7D          	ld	a,l
8891  29FF  B7          	or	a, a
8892  2A00  20 3E       	jr	NZ,l_UpdateVulcanStation_00113
8893  2A02  DD 6E FE    	ld	l,(ix-2)
8894  2A05  DD 66 FF    	ld	h,(ix-1)
8895  2A08  7E          	ld	a,(hl)
8896  2A09  C6 18       	add	a,0x18
8897  2A0B  57          	ld	d,a
8898  2A0C  0A          	ld	a,(bc)
8899  2A0D  C6 10       	add	a,0x10
8900  2A0F  5F          	ld	e,a
8901  2A10  C5          	push	bc
8902  2A11  3E 03       	ld	a,0x03
8903  2A13  F5          	push	af
8904  2A14  33          	inc	sp
8905  2A15  21 00 00    	ld	hl,_vulcanstationshootspeedy
8906  2A18  E5          	push	hl
8907  2A19  21 00 00    	ld	hl,_vulcanstationshootspeedx
8908  2A1C  E5          	push	hl
8909  2A1D  D5          	push	de
8910  2A1E  CD 40 5C    	call	_SpreadEnemyshootDirection
8911  2A21  21 07 00    	ld	hl,7
8912  2A24  39          	add	hl,sp
8913  2A25  F9          	ld	sp,hl
8914  2A26  C1          	pop	bc
8915  2A27  18 17       	jr	l_UpdateVulcanStation_00113
8916  2A29              l_UpdateVulcanStation_00112:
8917  2A29  DD 7E FD    	ld	a,(ix-3)
8918  2A2C  3C          	inc	a
8919  2A2D  DD 6E FE    	ld	l,(ix-2)
8920  2A30  DD 66 FF    	ld	h,(ix-1)
8921  2A33  77          	ld	(hl),a
8922  2A34  1A          	ld	a,(de)
8923  2A35  D6 30       	sub	a,0x30
8924  2A37  20 07       	jr	NZ,l_UpdateVulcanStation_00113
8925  2A39  21 FF 00    	ld	hl,_disablescroll
8926  2A3C  36 01       	ld	(hl),0x01
8927  2A3E  AF          	xor	a, a
8928  2A3F  12          	ld	(de),a
8929  2A40              l_UpdateVulcanStation_00113:
8930  2A40  DD 6E FE    	ld	l,(ix-2)
8931  2A43  DD 66 FF    	ld	h,(ix-1)
8932  2A46  56          	ld	d,(hl)
8933  2A47  0A          	ld	a,(bc)
8934  2A48  47          	ld	b,a
8935  2A49  21 28 20    	ld	hl,0x2028
8936  2A4C  E5          	push	hl
8937  2A4D  58          	ld	e,b
8938  2A4E  D5          	push	de
8939  2A4F  21 83 01    	ld	hl,0x0183
8940  2A52  E5          	push	hl
8941  2A53  CD 46 00    	call	_DrawSpriteArray
8942  2A56  21 06 00    	ld	hl,6
8943  2A59  39          	add	hl,sp
8944  2A5A  F9          	ld	sp,hl
8945  2A5B  2E 01       	ld	l,0x01
8946  2A5D  DD F9       	ld	sp, ix
8947  2A5F  DD E1       	pop	ix
8948  2A61  C9          	ret
8949  2A62              	SECTION code_compiler
8950  2A62              ;	---------------------------------
8951  2A62              ; Function UpdateVulcanTankCommon
8952  2A62              ; ---------------------------------
8953  2A62              _UpdateVulcanTankCommon:
8954  2A62  DD E5       	push	ix
8955  2A64  DD 21 00 00 	ld	ix,0
8956  2A68  DD 39       	add	ix,sp
8957  2A6A  3A FF 00    	ld	a,(_disablescroll)
8958  2A6D  B7          	or	a, a
8959  2A6E  20 14       	jr	NZ,l_UpdateVulcanTankCommon_00104
8960  2A70  DD 4E 04    	ld	c,(ix+4)
8961  2A73  DD 46 05    	ld	b,(ix+5)
8962  2A76  03          	inc	bc
8963  2A77  0A          	ld	a,(bc)
8964  2A78  3C          	inc	a
8965  2A79  5F          	ld	e,a
8966  2A7A  02          	ld	(bc),a
8967  2A7B  3E C0       	ld	a,0xc0
8968  2A7D  93          	sub	a, e
8969  2A7E  30 04       	jr	NC,l_UpdateVulcanTankCommon_00104
8970  2A80  2E 00       	ld	l,0x00
8971  2A82  18 02       	jr	l_UpdateVulcanTankCommon_00105
8972  2A84              l_UpdateVulcanTankCommon_00104:
8973  2A84  2E 01       	ld	l,0x01
8974  2A86              l_UpdateVulcanTankCommon_00105:
8975  2A86  DD E1       	pop	ix
8976  2A88  C9          	ret
8977  2A89              	SECTION code_compiler
8978  2A89              ;	---------------------------------
8979  2A89              ; Function UpdateVulcanTankLeft
8980  2A89              ; ---------------------------------
8981  2A89              _UpdateVulcanTankLeft:
8982  2A89  DD E5       	push	ix
8983  2A8B  DD 21 00 00 	ld	ix,0
8984  2A8F  DD 39       	add	ix,sp
8985  2A91  F5          	push	af
8986  2A92  DD 6E 04    	ld	l,(ix+4)
8987  2A95  DD 66 05    	ld	h,(ix+5)
8988  2A98  E5          	push	hl
8989  2A99  CD 62 2A    	call	_UpdateVulcanTankCommon
8990  2A9C  F1          	pop	af
8991  2A9D  7D          	ld	a,l
8992  2A9E  B7          	or	a,a
8993  2A9F  20 03       	jr	NZ,l_UpdateVulcanTankLeft_00102
8994  2AA1  6F          	ld	l,a
8995  2AA2  18 6E       	jr	l_UpdateVulcanTankLeft_00107
8996  2AA4              l_UpdateVulcanTankLeft_00102:
8997  2AA4  DD 4E 04    	ld	c,(ix+4)
8998  2AA7  DD 46 05    	ld	b,(ix+5)
8999  2AAA  0A          	ld	a,(bc)
9000  2AAB  5F          	ld	e,a
9001  2AAC  D6 50       	sub	a,0x50
9002  2AAE  30 03       	jr	NC,l_UpdateVulcanTankLeft_00104
9003  2AB0  1C          	inc	e
9004  2AB1  7B          	ld	a,e
9005  2AB2  02          	ld	(bc),a
9006  2AB3              l_UpdateVulcanTankLeft_00104:
9007  2AB3  0A          	ld	a,(bc)
9008  2AB4  5F          	ld	e,a
9009  2AB5  16 00       	ld	d,0x00
9010  2AB7  21 10 00    	ld	hl,0x0010
9011  2ABA  19          	add	hl,de
9012  2ABB  E3          	ex	(sp), hl
9013  2ABC  3A 12 00    	ld	a,(_playerx)
9014  2ABF  5F          	ld	e,a
9015  2AC0  16 00       	ld	d,0x00
9016  2AC2  DD 7E FE    	ld	a,(ix-2)
9017  2AC5  93          	sub	a, e
9018  2AC6  DD 7E FF    	ld	a,(ix-1)
9019  2AC9  9A          	sbc	a, d
9020  2ACA  E2 CF 2A    	jp	PO, l_UpdateVulcanTankLeft_00127
9021  2ACD  EE 80       	xor	a,0x80
9022  2ACF              l_UpdateVulcanTankLeft_00127:
9023  2ACF  F2 DE 2A    	jp	P,l_UpdateVulcanTankLeft_00106
9024  2AD2  C5          	push	bc
9025  2AD3  3E 13       	ld	a,0x13
9026  2AD5  F5          	push	af
9027  2AD6  33          	inc	sp
9028  2AD7  C5          	push	bc
9029  2AD8  CD 88 5F    	call	_TestEnemyShoot
9030  2ADB  F1          	pop	af
9031  2ADC  33          	inc	sp
9032  2ADD  C1          	pop	bc
9033  2ADE              l_UpdateVulcanTankLeft_00106:
9034  2ADE  0A          	ld	a,(bc)
9035  2ADF  57          	ld	d,a
9036  2AE0  D6 50       	sub	a,0x50
9037  2AE2  30 0F       	jr	NC,l_UpdateVulcanTankLeft_00109
9038  2AE4  69          	ld	l, c
9039  2AE5  60          	ld	h, b
9040  2AE6  23          	inc	hl
9041  2AE7  23          	inc	hl
9042  2AE8  23          	inc	hl
9043  2AE9  7E          	ld	a,(hl)
9044  2AEA  E6 01       	and	a,0x01
9045  2AEC  6F          	ld	l,a
9046  2AED  26 00       	ld	h,0x00
9047  2AEF  29          	add	hl, hl
9048  2AF0  29          	add	hl, hl
9049  2AF1  18 03       	jr	l_UpdateVulcanTankLeft_00110
9050  2AF3              l_UpdateVulcanTankLeft_00109:
9051  2AF3  21 00 00    	ld	hl,0x0000
9052  2AF6              l_UpdateVulcanTankLeft_00110:
9053  2AF6  7D          	ld	a,l
9054  2AF7  C6 6F       	add	a,0x6f
9055  2AF9  DD 77 FE    	ld	(ix-2),a
9056  2AFC  7C          	ld	a,h
9057  2AFD  CE 01       	adc	a,0x01
9058  2AFF  DD 77 FF    	ld	(ix-1),a
9059  2B02  69          	ld	l, c
9060  2B03  60          	ld	h, b
9061  2B04  23          	inc	hl
9062  2B05  46          	ld	b,(hl)
9063  2B06  E1          	pop	hl
9064  2B07  E5          	push	hl
9065  2B08  E5          	push	hl
9066  2B09  4A          	ld	c, d
9067  2B0A  C5          	push	bc
9068  2B0B  CD A7 00    	call	_DrawQuadSprite
9069  2B0E  F1          	pop	af
9070  2B0F  F1          	pop	af
9071  2B10  2E 01       	ld	l,0x01
9072  2B12              l_UpdateVulcanTankLeft_00107:
9073  2B12  DD F9       	ld	sp, ix
9074  2B14  DD E1       	pop	ix
9075  2B16  C9          	ret
9076  2B17              	SECTION code_compiler
9077  2B17              ;	---------------------------------
9078  2B17              ; Function UpdateVulcanTankRight
9079  2B17              ; ---------------------------------
9080  2B17              _UpdateVulcanTankRight:
9081  2B17  DD E5       	push	ix
9082  2B19  DD 21 00 00 	ld	ix,0
9083  2B1D  DD 39       	add	ix,sp
9084  2B1F  F5          	push	af
9085  2B20  DD 6E 04    	ld	l,(ix+4)
9086  2B23  DD 66 05    	ld	h,(ix+5)
9087  2B26  E5          	push	hl
9088  2B27  CD 62 2A    	call	_UpdateVulcanTankCommon
9089  2B2A  F1          	pop	af
9090  2B2B  7D          	ld	a,l
9091  2B2C  B7          	or	a,a
9092  2B2D  20 03       	jr	NZ,l_UpdateVulcanTankRight_00102
9093  2B2F  6F          	ld	l,a
9094  2B30  18 6C       	jr	l_UpdateVulcanTankRight_00107
9095  2B32              l_UpdateVulcanTankRight_00102:
9096  2B32  DD 4E 04    	ld	c,(ix+4)
9097  2B35  DD 46 05    	ld	b,(ix+5)
9098  2B38  0A          	ld	a,(bc)
9099  2B39  5F          	ld	e,a
9100  2B3A  3E A0       	ld	a,0xa0
9101  2B3C  93          	sub	a, e
9102  2B3D  30 03       	jr	NC,l_UpdateVulcanTankRight_00104
9103  2B3F  1D          	dec	e
9104  2B40  7B          	ld	a,e
9105  2B41  02          	ld	(bc),a
9106  2B42              l_UpdateVulcanTankRight_00104:
9107  2B42  3A 12 00    	ld	a,(_playerx)
9108  2B45  5F          	ld	e,a
9109  2B46  16 00       	ld	d,0x00
9110  2B48  21 10 00    	ld	hl,0x0010
9111  2B4B  19          	add	hl,de
9112  2B4C  0A          	ld	a,(bc)
9113  2B4D  5F          	ld	e,a
9114  2B4E  16 00       	ld	d,0x00
9115  2B50  EB          	ex	de,hl
9116  2B51  7B          	ld	a,e
9117  2B52  95          	sub	a, l
9118  2B53  7A          	ld	a,d
9119  2B54  9C          	sbc	a, h
9120  2B55  E2 5A 2B    	jp	PO, l_UpdateVulcanTankRight_00127
9121  2B58  EE 80       	xor	a,0x80
9122  2B5A              l_UpdateVulcanTankRight_00127:
9123  2B5A  F2 69 2B    	jp	P,l_UpdateVulcanTankRight_00106
9124  2B5D  C5          	push	bc
9125  2B5E  3E 13       	ld	a,0x13
9126  2B60  F5          	push	af
9127  2B61  33          	inc	sp
9128  2B62  C5          	push	bc
9129  2B63  CD 88 5F    	call	_TestEnemyShoot
9130  2B66  F1          	pop	af
9131  2B67  33          	inc	sp
9132  2B68  C1          	pop	bc
9133  2B69              l_UpdateVulcanTankRight_00106:
9134  2B69  0A          	ld	a,(bc)
9135  2B6A  57          	ld	d,a
9136  2B6B  3E A0       	ld	a,0xa0
9137  2B6D  92          	sub	a, d
9138  2B6E  30 0F       	jr	NC,l_UpdateVulcanTankRight_00109
9139  2B70  69          	ld	l, c
9140  2B71  60          	ld	h, b
9141  2B72  23          	inc	hl
9142  2B73  23          	inc	hl
9143  2B74  23          	inc	hl
9144  2B75  7E          	ld	a,(hl)
9145  2B76  E6 01       	and	a,0x01
9146  2B78  6F          	ld	l,a
9147  2B79  26 00       	ld	h,0x00
9148  2B7B  29          	add	hl, hl
9149  2B7C  29          	add	hl, hl
9150  2B7D  18 03       	jr	l_UpdateVulcanTankRight_00110
9151  2B7F              l_UpdateVulcanTankRight_00109:
9152  2B7F  21 00 00    	ld	hl,0x0000
9153  2B82              l_UpdateVulcanTankRight_00110:
9154  2B82  7D          	ld	a,l
9155  2B83  C6 77       	add	a,0x77
9156  2B85  DD 77 FE    	ld	(ix-2),a
9157  2B88  7C          	ld	a,h
9158  2B89  CE 01       	adc	a,0x01
9159  2B8B  DD 77 FF    	ld	(ix-1),a
9160  2B8E  69          	ld	l, c
9161  2B8F  60          	ld	h, b
9162  2B90  23          	inc	hl
9163  2B91  46          	ld	b,(hl)
9164  2B92  E1          	pop	hl
9165  2B93  E5          	push	hl
9166  2B94  E5          	push	hl
9167  2B95  4A          	ld	c, d
9168  2B96  C5          	push	bc
9169  2B97  CD A7 00    	call	_DrawQuadSprite
9170  2B9A  F1          	pop	af
9171  2B9B  F1          	pop	af
9172  2B9C  2E 01       	ld	l,0x01
9173  2B9E              l_UpdateVulcanTankRight_00107:
9174  2B9E  DD F9       	ld	sp, ix
9175  2BA0  DD E1       	pop	ix
9176  2BA2  C9          	ret
9177  2BA3              	SECTION code_compiler
9178  2BA3              ;	---------------------------------
9179  2BA3              ; Function UpdateVulcanTankStop
9180  2BA3              ; ---------------------------------
9181  2BA3              _UpdateVulcanTankStop:
9182  2BA3  DD E5       	push	ix
9183  2BA5  DD 21 00 00 	ld	ix,0
9184  2BA9  DD 39       	add	ix,sp
9185  2BAB  F5          	push	af
9186  2BAC  DD 6E 04    	ld	l,(ix+4)
9187  2BAF  DD 66 05    	ld	h,(ix+5)
9188  2BB2  E5          	push	hl
9189  2BB3  CD 62 2A    	call	_UpdateVulcanTankCommon
9190  2BB6  F1          	pop	af
9191  2BB7  7D          	ld	a,l
9192  2BB8  B7          	or	a,a
9193  2BB9  20 03       	jr	NZ,l_UpdateVulcanTankStop_00102
9194  2BBB  6F          	ld	l,a
9195  2BBC  18 5C       	jr	l_UpdateVulcanTankStop_00106
9196  2BBE              l_UpdateVulcanTankStop_00102:
9197  2BBE  DD 6E 04    	ld	l,(ix+4)
9198  2BC1  DD 66 05    	ld	h,(ix+5)
9199  2BC4  4D          	ld	c,l
9200  2BC5  44          	ld	b,h
9201  2BC6  23          	inc	hl
9202  2BC7  23          	inc	hl
9203  2BC8  23          	inc	hl
9204  2BC9  56          	ld	d,(hl)
9205  2BCA  C5          	push	bc
9206  2BCB  3E 64       	ld	a,0x64
9207  2BCD  5A          	ld	e,d
9208  2BCE  57          	ld	d,a
9209  2BCF  D5          	push	de
9210  2BD0  CD 00 00    	call	__moduchar_callee
9211  2BD3  C1          	pop	bc
9212  2BD4  55          	ld	d,l
9213  2BD5  5A          	ld	e,d
9214  2BD6  21 01 00    	ld	hl,0x0001
9215  2BD9  09          	add	hl,bc
9216  2BDA  E3          	ex	(sp), hl
9217  2BDB  7A          	ld	a,d
9218  2BDC  B7          	or	a, a
9219  2BDD  28 05       	jr	Z,l_UpdateVulcanTankStop_00103
9220  2BDF  7B          	ld	a,e
9221  2BE0  D6 1E       	sub	a,0x1e
9222  2BE2  20 24       	jr	NZ,l_UpdateVulcanTankStop_00104
9223  2BE4              l_UpdateVulcanTankStop_00103:
9224  2BE4  E1          	pop	hl
9225  2BE5  7E          	ld	a,(hl)
9226  2BE6  E5          	push	hl
9227  2BE7  C6 08       	add	a,0x08
9228  2BE9  5F          	ld	e,a
9229  2BEA  0A          	ld	a,(bc)
9230  2BEB  C6 04       	add	a,0x02+0x02
9231  2BED  57          	ld	d,a
9232  2BEE  C5          	push	bc
9233  2BEF  3E 03       	ld	a,0x03
9234  2BF1  F5          	push	af
9235  2BF2  33          	inc	sp
9236  2BF3  21 00 00    	ld	hl,_vulcantankshootspeedy
9237  2BF6  E5          	push	hl
9238  2BF7  21 00 00    	ld	hl,_vulcantankshootspeedx
9239  2BFA  E5          	push	hl
9240  2BFB  7B          	ld	a,e
9241  2BFC  5A          	ld	e,d
9242  2BFD  57          	ld	d,a
9243  2BFE  D5          	push	de
9244  2BFF  CD 40 5C    	call	_SpreadEnemyshootDirection
9245  2C02  21 07 00    	ld	hl,7
9246  2C05  39          	add	hl,sp
9247  2C06  F9          	ld	sp,hl
9248  2C07  C1          	pop	bc
9249  2C08              l_UpdateVulcanTankStop_00104:
9250  2C08  E1          	pop	hl
9251  2C09  56          	ld	d,(hl)
9252  2C0A  0A          	ld	a,(bc)
9253  2C0B  E5          	push	hl
9254  2C0C  47          	ld	b,a
9255  2C0D  21 7F 01    	ld	hl,0x017f
9256  2C10  E5          	push	hl
9257  2C11  58          	ld	e,b
9258  2C12  D5          	push	de
9259  2C13  CD A7 00    	call	_DrawQuadSprite
9260  2C16  F1          	pop	af
9261  2C17  F1          	pop	af
9262  2C18  2E 01       	ld	l,0x01
9263  2C1A              l_UpdateVulcanTankStop_00106:
9264  2C1A  DD F9       	ld	sp, ix
9265  2C1C  DD E1       	pop	ix
9266  2C1E  C9          	ret
9267  2C1F              	SECTION code_compiler
9268  2C1F              ;	---------------------------------
9269  2C1F              ; Function UpdateVulcanVulcan
9270  2C1F              ; ---------------------------------
9271  2C1F              _UpdateVulcanVulcan:
9272  2C1F  DD E5       	push	ix
9273  2C21  DD 21 00 00 	ld	ix,0
9274  2C25  DD 39       	add	ix,sp
9275  2C27  F5          	push	af
9276  2C28  3B          	dec	sp
9277  2C29  DD 7E 04    	ld	a,(ix+4)
9278  2C2C  DD 77 FD    	ld	(ix-3),a
9279  2C2F  DD 7E 05    	ld	a,(ix+5)
9280  2C32  DD 77 FE    	ld	(ix-2),a
9281  2C35  C1          	pop	bc
9282  2C36  C5          	push	bc
9283  2C37  03          	inc	bc
9284  2C38  0A          	ld	a,(bc)
9285  2C39  3C          	inc	a
9286  2C3A  5F          	ld	e,a
9287  2C3B  02          	ld	(bc),a
9288  2C3C  DD 77 FF    	ld	(ix-1),a
9289  2C3F  3E C0       	ld	a,0xc0
9290  2C41  93          	sub	a, e
9291  2C42  30 04       	jr	NC,l_UpdateVulcanVulcan_00102
9292  2C44  2E 00       	ld	l,0x00
9293  2C46  18 43       	jr	l_UpdateVulcanVulcan_00107
9294  2C48              l_UpdateVulcanVulcan_00102:
9295  2C48  ED 5B 02 00 	ld	de,(_stageframe)
9296  2C4C  CB 3A       	srl	d
9297  2C4E  CB 1B       	rr	e
9298  2C50  CB 3A       	srl	d
9299  2C52  CB 1B       	rr	e
9300  2C54  7B          	ld	a,e
9301  2C55  E6 03       	and	a,0x03
9302  2C57  C6 47       	add	a,0x47
9303  2C59  57          	ld	d,a
9304  2C5A  DD 7E FF    	ld	a,(ix-1)
9305  2C5D  C6 F8       	add	a,0xf8
9306  2C5F  E1          	pop	hl
9307  2C60  5E          	ld	e,(hl)
9308  2C61  E5          	push	hl
9309  2C62  C5          	push	bc
9310  2C63  D5          	push	de
9311  2C64  33          	inc	sp
9312  2C65  57          	ld	d,a
9313  2C66  D5          	push	de
9314  2C67  CD 00 00    	call	_SMS_addSprite_callee
9315  2C6A  C1          	pop	bc
9316  2C6B  0A          	ld	a,(bc)
9317  2C6C  47          	ld	b,a
9318  2C6D  D6 90       	sub	a,0x90
9319  2C6F  30 18       	jr	NC,l_UpdateVulcanVulcan_00106
9320  2C71  E1          	pop	hl
9321  2C72  E5          	push	hl
9322  2C73  23          	inc	hl
9323  2C74  23          	inc	hl
9324  2C75  23          	inc	hl
9325  2C76  7E          	ld	a,(hl)
9326  2C77  E6 07       	and	a,0x07
9327  2C79  20 0E       	jr	NZ,l_UpdateVulcanVulcan_00106
9328  2C7B  E1          	pop	hl
9329  2C7C  56          	ld	d,(hl)
9330  2C7D  E5          	push	hl
9331  2C7E  3E 2E       	ld	a,0x2e
9332  2C80  F5          	push	af
9333  2C81  33          	inc	sp
9334  2C82  4A          	ld	c, d
9335  2C83  C5          	push	bc
9336  2C84  CD 23 49    	call	_InitEnemy
9337  2C87  F1          	pop	af
9338  2C88  33          	inc	sp
9339  2C89              l_UpdateVulcanVulcan_00106:
9340  2C89  2E 01       	ld	l,0x01
9341  2C8B              l_UpdateVulcanVulcan_00107:
9342  2C8B  DD F9       	ld	sp, ix
9343  2C8D  DD E1       	pop	ix
9344  2C8F  C9          	ret
9345  2C90              	SECTION code_compiler
9346  2C90              ;	---------------------------------
9347  2C90              ; Function InitVulcanLava
9348  2C90              ; ---------------------------------
9349  2C90              _InitVulcanLava:
9350  2C90  DD E5       	push	ix
9351  2C92  DD 21 00 00 	ld	ix,0
9352  2C96  DD 39       	add	ix,sp
9353  2C98  DD 4E 04    	ld	c,(ix+4)
9354  2C9B  DD 46 05    	ld	b,(ix+5)
9355  2C9E  03          	inc	bc
9356  2C9F  03          	inc	bc
9357  2CA0  03          	inc	bc
9358  2CA1  03          	inc	bc
9359  2CA2  C5          	push	bc
9360  2CA3  CD 00 00    	call	_myRand
9361  2CA6  5D          	ld	e, l
9362  2CA7  16 07       	ld	d,0x07
9363  2CA9  D5          	push	de
9364  2CAA  CD 00 00    	call	__moduchar_callee
9365  2CAD  C1          	pop	bc
9366  2CAE  7D          	ld	a,l
9367  2CAF  02          	ld	(bc),a
9368  2CB0  DD E1       	pop	ix
9369  2CB2  C9          	ret
9370  2CB3              	SECTION code_compiler
9371  2CB3              ;	---------------------------------
9372  2CB3              ; Function UpdateVulcanLava
9373  2CB3              ; ---------------------------------
9374  2CB3              _UpdateVulcanLava:
9375  2CB3  DD E5       	push	ix
9376  2CB5  DD 21 00 00 	ld	ix,0
9377  2CB9  DD 39       	add	ix,sp
9378  2CBB  F5          	push	af
9379  2CBC  DD 4E 04    	ld	c,(ix+4)
9380  2CBF  DD 46 05    	ld	b,(ix+5)
9381  2CC2  59          	ld	e, c
9382  2CC3  50          	ld	d, b
9383  2CC4  13          	inc	de
9384  2CC5  1A          	ld	a,(de)
9385  2CC6  DD 77 FE    	ld	(ix-2),a
9386  2CC9  69          	ld	l, c
9387  2CCA  60          	ld	h, b
9388  2CCB  23          	inc	hl
9389  2CCC  23          	inc	hl
9390  2CCD  23          	inc	hl
9391  2CCE  6E          	ld	l,(hl)
9392  2CCF  CB 3D       	srl	l
9393  2CD1  CB 3D       	srl	l
9394  2CD3  DD 7E FE    	ld	a,(ix-2)
9395  2CD6  85          	add	a, l
9396  2CD7  12          	ld	(de),a
9397  2CD8  C6 FF       	add	a,0xff
9398  2CDA  DD 77 FE    	ld	(ix-2),a
9399  2CDD  12          	ld	(de),a
9400  2CDE  0A          	ld	a,(bc)
9401  2CDF  DD 77 FF    	ld	(ix-1),a
9402  2CE2  69          	ld	l, c
9403  2CE3  60          	ld	h, b
9404  2CE4  23          	inc	hl
9405  2CE5  23          	inc	hl
9406  2CE6  23          	inc	hl
9407  2CE7  23          	inc	hl
9408  2CE8  6E          	ld	l,(hl)
9409  2CE9  DD 7E FF    	ld	a,(ix-1)
9410  2CEC  85          	add	a, l
9411  2CED  02          	ld	(bc),a
9412  2CEE  C6 FD       	add	a,0xfd
9413  2CF0  02          	ld	(bc),a
9414  2CF1  1A          	ld	a,(de)
9415  2CF2  57          	ld	d,a
9416  2CF3  3E C0       	ld	a,0xc0
9417  2CF5  DD 96 FE    	sub	a,(ix-2)
9418  2CF8  38 0B       	jr	C,l_UpdateVulcanLava_00101
9419  2CFA  0A          	ld	a,(bc)
9420  2CFB  47          	ld	b,a
9421  2CFC  D6 04       	sub	a,0x04
9422  2CFE  38 05       	jr	C,l_UpdateVulcanLava_00101
9423  2D00  3E F4       	ld	a,0xf4
9424  2D02  90          	sub	a, b
9425  2D03  30 04       	jr	NC,l_UpdateVulcanLava_00102
9426  2D05              l_UpdateVulcanLava_00101:
9427  2D05  2E 00       	ld	l,0x00
9428  2D07  18 1D       	jr	l_UpdateVulcanLava_00105
9429  2D09              l_UpdateVulcanLava_00102:
9430  2D09  2A 02 00    	ld	hl,(_stageframe)
9431  2D0C  4D          	ld	c,l
9432  2D0D  5C          	ld	e,h
9433  2D0E  CB 3B       	srl	e
9434  2D10  CB 19       	rr	c
9435  2D12  CB 3B       	srl	e
9436  2D14  CB 19       	rr	c
9437  2D16  79          	ld	a,c
9438  2D17  E6 03       	and	a,0x03
9439  2D19  4F          	ld	c,a
9440  2D1A  C6 4B       	add	a,0x4b
9441  2D1C  5A          	ld	e,d
9442  2D1D  57          	ld	d,a
9443  2D1E  D5          	push	de
9444  2D1F  C5          	push	bc
9445  2D20  33          	inc	sp
9446  2D21  CD 00 00    	call	_SMS_addSprite_callee
9447  2D24  2E 01       	ld	l,0x01
9448  2D26              l_UpdateVulcanLava_00105:
9449  2D26  DD F9       	ld	sp, ix
9450  2D28  DD E1       	pop	ix
9451  2D2A  C9          	ret
9452  2D2B              	SECTION code_compiler
9453  2D2B              ;	---------------------------------
9454  2D2B              ; Function InitVulcanBird
9455  2D2B              ; ---------------------------------
9456  2D2B              _InitVulcanBird:
9457  2D2B  DD E5       	push	ix
9458  2D2D  DD 21 00 00 	ld	ix,0
9459  2D31  DD 39       	add	ix,sp
9460  2D33  DD 4E 04    	ld	c,(ix+4)
9461  2D36  DD 46 05    	ld	b,(ix+5)
9462  2D39  21 04 00    	ld	hl,0x0004
9463  2D3C  09          	add	hl,bc
9464  2D3D  36 08       	ld	(hl),0x08
9465  2D3F  21 05 00    	ld	hl,0x0005
9466  2D42  09          	add	hl,bc
9467  2D43  36 08       	ld	(hl),0x08
9468  2D45  DD E1       	pop	ix
9469  2D47  C9          	ret
9470  2D48              	SECTION code_compiler
9471  2D48              ;	---------------------------------
9472  2D48              ; Function UpdateVulcanBird
9473  2D48              ; ---------------------------------
9474  2D48              _UpdateVulcanBird:
9475  2D48  DD E5       	push	ix
9476  2D4A  DD 21 00 00 	ld	ix,0
9477  2D4E  DD 39       	add	ix,sp
9478  2D50  F5          	push	af
9479  2D51  3B          	dec	sp
9480  2D52  DD 4E 04    	ld	c,(ix+4)
9481  2D55  DD 46 05    	ld	b,(ix+5)
9482  2D58  21 03 00    	ld	hl,0x0003
9483  2D5B  09          	add	hl,bc
9484  2D5C  F1          	pop	af
9485  2D5D  E5          	push	hl
9486  2D5E  6E          	ld	l,(hl)
9487  2D5F  59          	ld	e, c
9488  2D60  50          	ld	d, b
9489  2D61  13          	inc	de
9490  2D62  7D          	ld	a,l
9491  2D63  D6 0C       	sub	a,0x0c
9492  2D65  30 26       	jr	NC,l_UpdateVulcanBird_00104
9493  2D67  1A          	ld	a,(de)
9494  2D68  3C          	inc	a
9495  2D69  DD 77 FF    	ld	(ix-1),a
9496  2D6C  E1          	pop	hl
9497  2D6D  12          	ld	(de),a
9498  2D6E  E5          	push	hl
9499  2D6F  6E          	ld	l,(hl)
9500  2D70  CB 3D       	srl	l
9501  2D72  CB 3D       	srl	l
9502  2D74  26 00       	ld	h,0x00
9503  2D76  29          	add	hl, hl
9504  2D77  29          	add	hl, hl
9505  2D78  11 5B 01    	ld	de,0x015b
9506  2D7B  19          	add	hl,de
9507  2D7C  0A          	ld	a,(bc)
9508  2D7D  EB          	ex	de,hl
9509  2D7E  47          	ld	b,a
9510  2D7F  D5          	push	de
9511  2D80  DD 7E FF    	ld	a,(ix-1)
9512  2D83  48          	ld	c,b
9513  2D84  47          	ld	b,a
9514  2D85  C5          	push	bc
9515  2D86  CD A7 00    	call	_DrawQuadSprite
9516  2D89  F1          	pop	af
9517  2D8A  F1          	pop	af
9518  2D8B  18 4E       	jr	l_UpdateVulcanBird_00105
9519  2D8D              l_UpdateVulcanBird_00104:
9520  2D8D  C5          	push	bc
9521  2D8E  D5          	push	de
9522  2D8F  C5          	push	bc
9523  2D90  CD CC 3D    	call	_SkullAccelX
9524  2D93  F1          	pop	af
9525  2D94  D1          	pop	de
9526  2D95  C1          	pop	bc
9527  2D96  21 04 00    	ld	hl,0x0004
9528  2D99  09          	add	hl,bc
9529  2D9A  34          	inc	(hl)
9530  2D9B  C5          	push	bc
9531  2D9C  D5          	push	de
9532  2D9D  C5          	push	bc
9533  2D9E  CD 49 3E    	call	_SkullBoneCMove
9534  2DA1  F1          	pop	af
9535  2DA2  D1          	pop	de
9536  2DA3  C1          	pop	bc
9537  2DA4  1A          	ld	a,(de)
9538  2DA5  DD 77 FF    	ld	(ix-1),a
9539  2DA8  3E B0       	ld	a,0xb0
9540  2DAA  DD 96 FF    	sub	a,(ix-1)
9541  2DAD  30 04       	jr	NC,l_UpdateVulcanBird_00102
9542  2DAF  2E 00       	ld	l,0x00
9543  2DB1  18 2A       	jr	l_UpdateVulcanBird_00106
9544  2DB3              l_UpdateVulcanBird_00102:
9545  2DB3  3A 07 00    	ld	a,(_sprite164anim)
9546  2DB6  5F          	ld	e,a
9547  2DB7  16 00       	ld	d,0x00
9548  2DB9  21 4F 01    	ld	hl,0x014f
9549  2DBC  19          	add	hl,de
9550  2DBD  0A          	ld	a,(bc)
9551  2DBE  EB          	ex	de,hl
9552  2DBF  DD 77 FD    	ld	(ix-3),a
9553  2DC2  C5          	push	bc
9554  2DC3  D5          	push	de
9555  2DC4  DD 66 FF    	ld	h,(ix-1)
9556  2DC7  DD 6E FD    	ld	l,(ix-3)
9557  2DCA  E5          	push	hl
9558  2DCB  CD A7 00    	call	_DrawQuadSprite
9559  2DCE  F1          	pop	af
9560  2DCF  F1          	pop	af
9561  2DD0  C1          	pop	bc
9562  2DD1  3E 12       	ld	a,0x12
9563  2DD3  F5          	push	af
9564  2DD4  33          	inc	sp
9565  2DD5  C5          	push	bc
9566  2DD6  CD C6 5F    	call	_TestEnemyShootOne
9567  2DD9  F1          	pop	af
9568  2DDA  33          	inc	sp
9569  2DDB              l_UpdateVulcanBird_00105:
9570  2DDB  2E 01       	ld	l,0x01
9571  2DDD              l_UpdateVulcanBird_00106:
9572  2DDD  DD F9       	ld	sp, ix
9573  2DDF  DD E1       	pop	ix
9574  2DE1  C9          	ret
9575  2DE2              	SECTION code_compiler
9576  2DE2              ;	---------------------------------
9577  2DE2              ; Function InitVulcanLaser
9578  2DE2              ; ---------------------------------
9579  2DE2              _InitVulcanLaser:
9580  2DE2  DD E5       	push	ix
9581  2DE4  DD 21 00 00 	ld	ix,0
9582  2DE8  DD 39       	add	ix,sp
9583  2DEA  3E 01       	ld	a,0x01
9584  2DEC  F5          	push	af
9585  2DED  33          	inc	sp
9586  2DEE  21 00 00    	ld	hl,_enemylaser_psg
9587  2DF1  E5          	push	hl
9588  2DF2  CD E0 03    	call	_PlaySound
9589  2DF5  F1          	pop	af
9590  2DF6  33          	inc	sp
9591  2DF7  DD E1       	pop	ix
9592  2DF9  C9          	ret
9593  2DFA              	SECTION code_compiler
9594  2DFA              ;	---------------------------------
9595  2DFA              ; Function UpdateVulcanLaser
9596  2DFA              ; ---------------------------------
9597  2DFA              _UpdateVulcanLaser:
9598  2DFA  DD E5       	push	ix
9599  2DFC  DD 21 00 00 	ld	ix,0
9600  2E00  DD 39       	add	ix,sp
9601  2E02  3B          	dec	sp
9602  2E03  DD 4E 04    	ld	c,(ix+4)
9603  2E06  DD 46 05    	ld	b,(ix+5)
9604  2E09  59          	ld	e, c
9605  2E0A  50          	ld	d, b
9606  2E0B  13          	inc	de
9607  2E0C  1A          	ld	a,(de)
9608  2E0D  DD 77 FF    	ld	(ix-1),a
9609  2E10  3A 0F 00    	ld	a,(_gamelevel)
9610  2E13  87          	add	a, a
9611  2E14  C6 08       	add	a,0x08
9612  2E16  6F          	ld	l,a
9613  2E17  DD 7E FF    	ld	a,(ix-1)
9614  2E1A  85          	add	a, l
9615  2E1B  DD 77 FF    	ld	(ix-1),a
9616  2E1E  12          	ld	(de),a
9617  2E1F  57          	ld	d,a
9618  2E20  DD 7E FF    	ld	a,(ix-1)
9619  2E23  D6 D0       	sub	a,0xd0
9620  2E25  38 09       	jr	C,l_UpdateVulcanLaser_00102
9621  2E27  7A          	ld	a,d
9622  2E28  D6 E0       	sub	a,0xe0
9623  2E2A  30 04       	jr	NC,l_UpdateVulcanLaser_00102
9624  2E2C  2E 00       	ld	l,0x00
9625  2E2E  18 16       	jr	l_UpdateVulcanLaser_00104
9626  2E30              l_UpdateVulcanLaser_00102:
9627  2E30  0A          	ld	a,(bc)
9628  2E31  47          	ld	b,a
9629  2E32  21 08 30    	ld	hl,0x3008
9630  2E35  E5          	push	hl
9631  2E36  58          	ld	e,b
9632  2E37  D5          	push	de
9633  2E38  21 67 01    	ld	hl,0x0167
9634  2E3B  E5          	push	hl
9635  2E3C  CD 46 00    	call	_DrawSpriteArray
9636  2E3F  21 06 00    	ld	hl,6
9637  2E42  39          	add	hl,sp
9638  2E43  F9          	ld	sp,hl
9639  2E44  2E 01       	ld	l,0x01
9640  2E46              l_UpdateVulcanLaser_00104:
9641  2E46  33          	inc	sp
9642  2E47  DD E1       	pop	ix
9643  2E49  C9          	ret
9644  2E4A              	SECTION code_compiler
9645  2E4A              ;	---------------------------------
9646  2E4A              ; Function UpdateStage2EndBoss2
9647  2E4A              ; ---------------------------------
9648  2E4A              _UpdateStage2EndBoss2:
9649  2E4A  DD E5       	push	ix
9650  2E4C  DD 21 00 00 	ld	ix,0
9651  2E50  DD 39       	add	ix,sp
9652  2E52  21 F7 FF    	ld	hl,-9
9653  2E55  39          	add	hl,sp
9654  2E56  F9          	ld	sp,hl
9655  2E57  DD 4E 04    	ld	c,(ix+4)
9656  2E5A  DD 46 05    	ld	b,(ix+5)
9657  2E5D  21 03 00    	ld	hl,0x0003
9658  2E60  09          	add	hl,bc
9659  2E61  DD 75 FB    	ld	(ix-5),l
9660  2E64  DD 74 FC    	ld	(ix-4),h
9661  2E67  7E          	ld	a,(hl)
9662  2E68  E6 1F       	and	a,0x1f
9663  2E6A  5F          	ld	e,a
9664  2E6B  21 01 00    	ld	hl,0x0001
9665  2E6E  09          	add	hl,bc
9666  2E6F  DD 75 FD    	ld	(ix-3),l
9667  2E72  DD 74 FE    	ld	(ix-2),h
9668  2E75  7B          	ld	a,e
9669  2E76  D6 08       	sub	a,0x08
9670  2E78  20 25       	jr	NZ,l_UpdateStage2EndBoss2_00102
9671  2E7A  DD 6E FD    	ld	l,(ix-3)
9672  2E7D  DD 66 FE    	ld	h,(ix-2)
9673  2E80  7E          	ld	a,(hl)
9674  2E81  C6 20       	add	a,0x20
9675  2E83  57          	ld	d,a
9676  2E84  0A          	ld	a,(bc)
9677  2E85  C6 14       	add	a,0x14
9678  2E87  5F          	ld	e,a
9679  2E88  C5          	push	bc
9680  2E89  3E 06       	ld	a,0x06
9681  2E8B  F5          	push	af
9682  2E8C  33          	inc	sp
9683  2E8D  21 00 00    	ld	hl,_stage2endbossshootpatterny
9684  2E90  E5          	push	hl
9685  2E91  21 00 00    	ld	hl,_stage2endbossshootpatternx
9686  2E94  E5          	push	hl
9687  2E95  D5          	push	de
9688  2E96  CD 40 5C    	call	_SpreadEnemyshootDirection
9689  2E99  21 07 00    	ld	hl,7
9690  2E9C  39          	add	hl,sp
9691  2E9D  F9          	ld	sp,hl
9692  2E9E  C1          	pop	bc
9693  2E9F              l_UpdateStage2EndBoss2_00102:
9694  2E9F  3A 12 00    	ld	a,(_playerx)
9695  2EA2  5F          	ld	e,a
9696  2EA3  16 00       	ld	d,0x00
9697  2EA5  21 10 00    	ld	hl,0x0010
9698  2EA8  19          	add	hl,de
9699  2EA9  DD 75 F9    	ld	(ix-7),l
9700  2EAC  DD 74 FA    	ld	(ix-6),h
9701  2EAF  0A          	ld	a,(bc)
9702  2EB0  DD 77 FF    	ld	(ix-1),a
9703  2EB3  6F          	ld	l, a
9704  2EB4  26 00       	ld	h,0x00
9705  2EB6  7D          	ld	a,l
9706  2EB7  C6 17       	add	a,0x17
9707  2EB9  DD 77 F7    	ld	(ix-9),a
9708  2EBC  7C          	ld	a,h
9709  2EBD  CE 00       	adc	a,0x00
9710  2EBF  DD 77 F8    	ld	(ix-8),a
9711  2EC2  DD 7E F9    	ld	a,(ix-7)
9712  2EC5  DD 96 F7    	sub	a,(ix-9)
9713  2EC8  DD 7E FA    	ld	a,(ix-6)
9714  2ECB  DD 9E F8    	sbc	a,(ix-8)
9715  2ECE  E2 D3 2E    	jp	PO, l_UpdateStage2EndBoss2_00125
9716  2ED1  EE 80       	xor	a,0x80
9717  2ED3              l_UpdateStage2EndBoss2_00125:
9718  2ED3  F2 DE 2E    	jp	P,l_UpdateStage2EndBoss2_00107
9719  2ED6  DD 7E FF    	ld	a,(ix-1)
9720  2ED9  C6 FD       	add	a,0xfd
9721  2EDB  02          	ld	(bc),a
9722  2EDC  18 49       	jr	l_UpdateStage2EndBoss2_00109
9723  2EDE              l_UpdateStage2EndBoss2_00107:
9724  2EDE  3E 19       	ld	a,+((0x0019) & 0xFF)
9725  2EE0  85          	add	a,l
9726  2EE1  6F          	ld	l,a
9727  2EE2  3E 00       	ld	a,+((0x0019) / 256)
9728  2EE4  8C          	adc	a,h
9729  2EE5  67          	ld	h,a
9730  2EE6  7D          	ld	a,l
9731  2EE7  93          	sub	a, e
9732  2EE8  7C          	ld	a,h
9733  2EE9  9A          	sbc	a, d
9734  2EEA  E2 EF 2E    	jp	PO, l_UpdateStage2EndBoss2_00126
9735  2EED  EE 80       	xor	a,0x80
9736  2EEF              l_UpdateStage2EndBoss2_00126:
9737  2EEF  F2 FA 2E    	jp	P,l_UpdateStage2EndBoss2_00104
9738  2EF2  DD 7E FF    	ld	a,(ix-1)
9739  2EF5  C6 03       	add	a,0x03
9740  2EF7  02          	ld	(bc),a
9741  2EF8  18 2D       	jr	l_UpdateStage2EndBoss2_00109
9742  2EFA              l_UpdateStage2EndBoss2_00104:
9743  2EFA  DD 6E FD    	ld	l,(ix-3)
9744  2EFD  DD 66 FE    	ld	h,(ix-2)
9745  2F00  7E          	ld	a,(hl)
9746  2F01  C6 20       	add	a,0x20
9747  2F03  5F          	ld	e,a
9748  2F04  DD 7E FF    	ld	a,(ix-1)
9749  2F07  C6 14       	add	a,0x14
9750  2F09  57          	ld	d,a
9751  2F0A  C5          	push	bc
9752  2F0B  3E 2D       	ld	a,0x2d
9753  2F0D  F5          	push	af
9754  2F0E  33          	inc	sp
9755  2F0F  7B          	ld	a,e
9756  2F10  5A          	ld	e,d
9757  2F11  57          	ld	d,a
9758  2F12  D5          	push	de
9759  2F13  CD 23 49    	call	_InitEnemy
9760  2F16  F1          	pop	af
9761  2F17  33          	inc	sp
9762  2F18  C1          	pop	bc
9763  2F19  21 04 00    	ld	hl,0x0004
9764  2F1C  09          	add	hl,bc
9765  2F1D  36 03       	ld	(hl),0x03
9766  2F1F  DD 6E FB    	ld	l,(ix-5)
9767  2F22  DD 66 FC    	ld	h,(ix-4)
9768  2F25  36 00       	ld	(hl),0x00
9769  2F27              l_UpdateStage2EndBoss2_00109:
9770  2F27  DD F9       	ld	sp, ix
9771  2F29  DD E1       	pop	ix
9772  2F2B  C9          	ret
9773  2F2C              	SECTION code_compiler
9774  2F2C              ;	---------------------------------
9775  2F2C              ; Function UpdateStage2EndBoss1
9776  2F2C              ; ---------------------------------
9777  2F2C              _UpdateStage2EndBoss1:
9778  2F2C  DD E5       	push	ix
9779  2F2E  DD 21 00 00 	ld	ix,0
9780  2F32  DD 39       	add	ix,sp
9781  2F34  3E 02       	ld	a,0x02
9782  2F36  F5          	push	af
9783  2F37  33          	inc	sp
9784  2F38  DD 6E 04    	ld	l,(ix+4)
9785  2F3B  DD 66 05    	ld	h,(ix+5)
9786  2F3E  E5          	push	hl
9787  2F3F  CD E3 14    	call	_DoEnemyWait
9788  2F42  F1          	pop	af
9789  2F43  33          	inc	sp
9790  2F44  DD E1       	pop	ix
9791  2F46  C9          	ret
9792  2F47              	SECTION code_compiler
9793  2F47              ;	---------------------------------
9794  2F47              ; Function UpdateStage2EndBoss3
9795  2F47              ; ---------------------------------
9796  2F47              _UpdateStage2EndBoss3:
9797  2F47  DD E5       	push	ix
9798  2F49  DD 21 00 00 	ld	ix,0
9799  2F4D  DD 39       	add	ix,sp
9800  2F4F  3E 01       	ld	a,0x01
9801  2F51  F5          	push	af
9802  2F52  33          	inc	sp
9803  2F53  DD 6E 04    	ld	l,(ix+4)
9804  2F56  DD 66 05    	ld	h,(ix+5)
9805  2F59  E5          	push	hl
9806  2F5A  CD E3 14    	call	_DoEnemyWait
9807  2F5D  F1          	pop	af
9808  2F5E  33          	inc	sp
9809  2F5F  DD E1       	pop	ix
9810  2F61  C9          	ret
9811  2F62              	SECTION code_compiler
9812  2F62              ;	---------------------------------
9813  2F62              ; Function UpdateStage2EndBoss
9814  2F62              ; ---------------------------------
9815  2F62              _UpdateStage2EndBoss:
9816  2F62  DD E5       	push	ix
9817  2F64  DD 21 00 00 	ld	ix,0
9818  2F68  DD 39       	add	ix,sp
9819  2F6A  DD 6E 04    	ld	l,(ix+4)
9820  2F6D  DD 66 05    	ld	h,(ix+5)
9821  2F70  5D          	ld	e,l
9822  2F71  54          	ld	d,h
9823  2F72  23          	inc	hl
9824  2F73  46          	ld	b,(hl)
9825  2F74  1A          	ld	a,(de)
9826  2F75  4F          	ld	c,a
9827  2F76  D5          	push	de
9828  2F77  21 30 30    	ld	hl,0x3030
9829  2F7A  E5          	push	hl
9830  2F7B  C5          	push	bc
9831  2F7C  21 97 01    	ld	hl,0x0197
9832  2F7F  E5          	push	hl
9833  2F80  CD 46 00    	call	_DrawSpriteArray
9834  2F83  21 06 00    	ld	hl,6
9835  2F86  39          	add	hl,sp
9836  2F87  F9          	ld	sp,hl
9837  2F88  D1          	pop	de
9838  2F89  01 00 00    	ld	bc,_updatestage2endbossfunctions+0
9839  2F8C  6B          	ld	l, e
9840  2F8D  62          	ld	h, d
9841  2F8E  23          	inc	hl
9842  2F8F  23          	inc	hl
9843  2F90  23          	inc	hl
9844  2F91  23          	inc	hl
9845  2F92  6E          	ld	l,(hl)
9846  2F93  26 00       	ld	h,0x00
9847  2F95  29          	add	hl, hl
9848  2F96  09          	add	hl,bc
9849  2F97  4E          	ld	c,(hl)
9850  2F98  23          	inc	hl
9851  2F99  66          	ld	h,(hl)
9852  2F9A  D5          	push	de
9853  2F9B  69          	ld	l, c
9854  2F9C  CD 00 00    	call	___sdcc_call_hl
9855  2F9F  F1          	pop	af
9856  2FA0  2E 01       	ld	l,0x01
9857  2FA2  DD E1       	pop	ix
9858  2FA4  C9          	ret
9859  2FA5              	SECTION code_compiler
9860  2FA5              ;	---------------------------------
9861  2FA5              ; Function UpdateSpaceStation1
9862  2FA5              ; ---------------------------------
9863  2FA5              _UpdateSpaceStation1:
9864  2FA5  DD E5       	push	ix
9865  2FA7  DD 21 00 00 	ld	ix,0
9866  2FAB  DD 39       	add	ix,sp
9867  2FAD  DD 6E 04    	ld	l,(ix+4)
9868  2FB0  DD 66 05    	ld	h,(ix+5)
9869  2FB3  4D          	ld	c,l
9870  2FB4  44          	ld	b,h
9871  2FB5  23          	inc	hl
9872  2FB6  23          	inc	hl
9873  2FB7  23          	inc	hl
9874  2FB8  7E          	ld	a, (hl)
9875  2FB9  D6 19       	sub	a,0x19
9876  2FBB  38 07       	jr	C,l_UpdateSpaceStation1_00103
9877  2FBD  03          	inc	bc
9878  2FBE  03          	inc	bc
9879  2FBF  03          	inc	bc
9880  2FC0  03          	inc	bc
9881  2FC1  0A          	ld	a,(bc)
9882  2FC2  3C          	inc	a
9883  2FC3  02          	ld	(bc),a
9884  2FC4              l_UpdateSpaceStation1_00103:
9885  2FC4  DD E1       	pop	ix
9886  2FC6  C9          	ret
9887  2FC7              	SECTION code_compiler
9888  2FC7              ;	---------------------------------
9889  2FC7              ; Function UpdateSpaceStation2
9890  2FC7              ; ---------------------------------
9891  2FC7              _UpdateSpaceStation2:
9892  2FC7  DD E5       	push	ix
9893  2FC9  DD 21 00 00 	ld	ix,0
9894  2FCD  DD 39       	add	ix,sp
9895  2FCF  F5          	push	af
9896  2FD0  3B          	dec	sp
9897  2FD1  3A 12 00    	ld	a,(_playerx)
9898  2FD4  4F          	ld	c,a
9899  2FD5  06 00       	ld	b,0x00
9900  2FD7  21 10 00    	ld	hl,0x0010
9901  2FDA  09          	add	hl,bc
9902  2FDB  DD 75 FE    	ld	(ix-2),l
9903  2FDE  DD 74 FF    	ld	(ix-1),h
9904  2FE1  DD 5E 04    	ld	e,(ix+4)
9905  2FE4  DD 56 05    	ld	d,(ix+5)
9906  2FE7  1A          	ld	a,(de)
9907  2FE8  DD 77 FD    	ld	(ix-3),a
9908  2FEB  6F          	ld	l, a
9909  2FEC  26 00       	ld	h,0x00
9910  2FEE  DD 7E FE    	ld	a,(ix-2)
9911  2FF1  95          	sub	a, l
9912  2FF2  DD 7E FF    	ld	a,(ix-1)
9913  2FF5  9C          	sbc	a, h
9914  2FF6  E2 FB 2F    	jp	PO, l_UpdateSpaceStation2_00117
9915  2FF9  EE 80       	xor	a,0x80
9916  2FFB              l_UpdateSpaceStation2_00117:
9917  2FFB  F2 06 30    	jp	P,l_UpdateSpaceStation2_00105
9918  2FFE  DD 7E FD    	ld	a,(ix-3)
9919  3001  C6 FD       	add	a,0xfd
9920  3003  12          	ld	(de),a
9921  3004  18 4C       	jr	l_UpdateSpaceStation2_00107
9922  3006              l_UpdateSpaceStation2_00105:
9923  3006  3E 18       	ld	a,+((0x0018) & 0xFF)
9924  3008  85          	add	a,l
9925  3009  6F          	ld	l,a
9926  300A  3E 00       	ld	a,+((0x0018) / 256)
9927  300C  8C          	adc	a,h
9928  300D  67          	ld	h,a
9929  300E  7D          	ld	a,l
9930  300F  91          	sub	a, c
9931  3010  7C          	ld	a,h
9932  3011  98          	sbc	a, b
9933  3012  E2 17 30    	jp	PO, l_UpdateSpaceStation2_00118
9934  3015  EE 80       	xor	a,0x80
9935  3017              l_UpdateSpaceStation2_00118:
9936  3017  F2 22 30    	jp	P,l_UpdateSpaceStation2_00102
9937  301A  DD 7E FD    	ld	a,(ix-3)
9938  301D  C6 03       	add	a,0x03
9939  301F  12          	ld	(de),a
9940  3020  18 30       	jr	l_UpdateSpaceStation2_00107
9941  3022              l_UpdateSpaceStation2_00102:
9942  3022  4B          	ld	c, e
9943  3023  42          	ld	b, d
9944  3024  03          	inc	bc
9945  3025  0A          	ld	a,(bc)
9946  3026  C6 10       	add	a,0x10
9947  3028  67          	ld	h,a
9948  3029  C5          	push	bc
9949  302A  D5          	push	de
9950  302B  DD 6E FD    	ld	l,(ix-3)
9951  302E  E5          	push	hl
9952  302F  CD 80 5C    	call	_InitEnemyshootLaser
9953  3032  F1          	pop	af
9954  3033  D1          	pop	de
9955  3034  C1          	pop	bc
9956  3035  0A          	ld	a,(bc)
9957  3036  C6 10       	add	a,0x10
9958  3038  47          	ld	b,a
9959  3039  1A          	ld	a,(de)
9960  303A  C6 10       	add	a,0x10
9961  303C  D5          	push	de
9962  303D  4F          	ld	c,a
9963  303E  C5          	push	bc
9964  303F  CD 80 5C    	call	_InitEnemyshootLaser
9965  3042  F1          	pop	af
9966  3043  D1          	pop	de
9967  3044  4B          	ld	c, e
9968  3045  42          	ld	b, d
9969  3046  03          	inc	bc
9970  3047  03          	inc	bc
9971  3048  03          	inc	bc
9972  3049  AF          	xor	a, a
9973  304A  02          	ld	(bc),a
9974  304B  21 04 00    	ld	hl,0x0004
9975  304E  19          	add	hl,de
9976  304F  4E          	ld	c,(hl)
9977  3050  0D          	dec	c
9978  3051  71          	ld	(hl),c
9979  3052              l_UpdateSpaceStation2_00107:
9980  3052  DD F9       	ld	sp, ix
9981  3054  DD E1       	pop	ix
9982  3056  C9          	ret
9983  3057              	SECTION code_compiler
9984  3057              ;	---------------------------------
9985  3057              ; Function FinishSpaceStation
9986  3057              ; ---------------------------------
9987  3057              _FinishSpaceStation:
9988  3057  21 00 00    	ld	hl,0x0000
9989  305A  E5          	push	hl
9990  305B  21 00 00    	ld	hl,_stage3scriptb
9991  305E  E5          	push	hl
9992  305F  CD F4 49    	call	_InitScript
9993  3062  F1          	pop	af
9994  3063  F1          	pop	af
9995  3064  C9          	ret
9996  3065              	SECTION code_compiler
9997  3065              ;	---------------------------------
9998  3065              ; Function UpdateSpaceStation
9999  3065              ; ---------------------------------
10000 3065              _UpdateSpaceStation:
10001 3065  DD E5       	push	ix
10002 3067  DD 21 00 00 	ld	ix,0
10003 306B  DD 39       	add	ix,sp
10004 306D  DD 6E 04    	ld	l,(ix+4)
10005 3070  DD 66 05    	ld	h,(ix+5)
10006 3073  4D          	ld	c,l
10007 3074  44          	ld	b,h
10008 3075  23          	inc	hl
10009 3076  56          	ld	d,(hl)
10010 3077  0A          	ld	a,(bc)
10011 3078  5F          	ld	e,a
10012 3079  C5          	push	bc
10013 307A  21 18 18    	ld	hl,0x1818
10014 307D  E5          	push	hl
10015 307E  D5          	push	de
10016 307F  21 8F 01    	ld	hl,0x018f
10017 3082  E5          	push	hl
10018 3083  CD 46 00    	call	_DrawSpriteArray
10019 3086  21 06 00    	ld	hl,6
10020 3089  39          	add	hl,sp
10021 308A  F9          	ld	sp,hl
10022 308B  21 50 00    	ld	hl,0x0050
10023 308E  E5          	push	hl
10024 308F  2A 02 00    	ld	hl,(_stageframe)
10025 3092  E5          	push	hl
10026 3093  CD 00 00    	call	__moduint_callee
10027 3096  C1          	pop	bc
10028 3097  7D          	ld	a,l
10029 3098  3D          	dec	a
10030 3099  28 03       	jr	Z,l_UpdateSpaceStation_00137
10031 309B  5D          	ld	e,l
10032 309C  18 11       	jr	l_UpdateSpaceStation_00104
10033 309E              l_UpdateSpaceStation_00137:
10034 309E  C5          	push	bc
10035 309F  21 00 07    	ld	hl,0x0700
10036 30A2  E5          	push	hl
10037 30A3  3E 08       	ld	a,0x08
10038 30A5  F5          	push	af
10039 30A6  33          	inc	sp
10040 30A7  CD 23 49    	call	_InitEnemy
10041 30AA  F1          	pop	af
10042 30AB  33          	inc	sp
10043 30AC  C1          	pop	bc
10044 30AD  18 14       	jr	l_UpdateSpaceStation_00105
10045 30AF              l_UpdateSpaceStation_00104:
10046 30AF  7B          	ld	a,e
10047 30B0  D6 29       	sub	a,0x29
10048 30B2  20 0F       	jr	NZ,l_UpdateSpaceStation_00105
10049 30B4  C5          	push	bc
10050 30B5  21 00 07    	ld	hl,0x0700
10051 30B8  E5          	push	hl
10052 30B9  3E E8       	ld	a,0xe8
10053 30BB  F5          	push	af
10054 30BC  33          	inc	sp
10055 30BD  CD 23 49    	call	_InitEnemy
10056 30C0  F1          	pop	af
10057 30C1  33          	inc	sp
10058 30C2  C1          	pop	bc
10059 30C3              l_UpdateSpaceStation_00105:
10060 30C3  C5          	push	bc
10061 30C4  21 73 00    	ld	hl,0x0073
10062 30C7  E5          	push	hl
10063 30C8  2A 02 00    	ld	hl,(_stageframe)
10064 30CB  E5          	push	hl
10065 30CC  CD 00 00    	call	__moduint_callee
10066 30CF  C1          	pop	bc
10067 30D0  7D          	ld	a,l
10068 30D1  5D          	ld	e,l
10069 30D2  B7          	or	a, a
10070 30D3  20 10       	jr	NZ,l_UpdateSpaceStation_00112
10071 30D5  C5          	push	bc
10072 30D6  21 00 34    	ld	hl,0x3400
10073 30D9  E5          	push	hl
10074 30DA  AF          	xor	a, a
10075 30DB  F5          	push	af
10076 30DC  33          	inc	sp
10077 30DD  CD 23 49    	call	_InitEnemy
10078 30E0  F1          	pop	af
10079 30E1  33          	inc	sp
10080 30E2  C1          	pop	bc
10081 30E3  18 28       	jr	l_UpdateSpaceStation_00113
10082 30E5              l_UpdateSpaceStation_00112:
10083 30E5  7B          	ld	a,e
10084 30E6  D6 2F       	sub	a,0x2f
10085 30E8  20 10       	jr	NZ,l_UpdateSpaceStation_00109
10086 30EA  C5          	push	bc
10087 30EB  21 00 35    	ld	hl,0x3500
10088 30EE  E5          	push	hl
10089 30EF  AF          	xor	a, a
10090 30F0  F5          	push	af
10091 30F1  33          	inc	sp
10092 30F2  CD 23 49    	call	_InitEnemy
10093 30F5  F1          	pop	af
10094 30F6  33          	inc	sp
10095 30F7  C1          	pop	bc
10096 30F8  18 13       	jr	l_UpdateSpaceStation_00113
10097 30FA              l_UpdateSpaceStation_00109:
10098 30FA  7B          	ld	a,e
10099 30FB  D6 5F       	sub	a,0x5f
10100 30FD  20 0E       	jr	NZ,l_UpdateSpaceStation_00113
10101 30FF  C5          	push	bc
10102 3100  21 00 36    	ld	hl,0x3600
10103 3103  E5          	push	hl
10104 3104  AF          	xor	a, a
10105 3105  F5          	push	af
10106 3106  33          	inc	sp
10107 3107  CD 23 49    	call	_InitEnemy
10108 310A  F1          	pop	af
10109 310B  33          	inc	sp
10110 310C  C1          	pop	bc
10111 310D              l_UpdateSpaceStation_00113:
10112 310D  21 04 00    	ld	hl,0x0004
10113 3110  09          	add	hl,bc
10114 3111  6E          	ld	l,(hl)
10115 3112  26 00       	ld	h,0x00
10116 3114  29          	add	hl, hl
10117 3115  11 00 00    	ld	de,_updatespacestationfunctions
10118 3118  19          	add	hl,de
10119 3119  5E          	ld	e,(hl)
10120 311A  23          	inc	hl
10121 311B  66          	ld	h,(hl)
10122 311C  C5          	push	bc
10123 311D  6B          	ld	l, e
10124 311E  CD 00 00    	call	___sdcc_call_hl
10125 3121  F1          	pop	af
10126 3122  2E 01       	ld	l,0x01
10127 3124  DD E1       	pop	ix
10128 3126  C9          	ret
10129 3127              	SECTION code_compiler
10130 3127              ;	---------------------------------
10131 3127              ; Function InitSpaceAsteroid
10132 3127              ; ---------------------------------
10133 3127              _InitSpaceAsteroid:
10134 3127  DD E5       	push	ix
10135 3129  DD 21 00 00 	ld	ix,0
10136 312D  DD 39       	add	ix,sp
10137 312F  F5          	push	af
10138 3130  3B          	dec	sp
10139 3131  DD 4E 04    	ld	c,(ix+4)
10140 3134  DD 46 05    	ld	b,(ix+5)
10141 3137  21 04 00    	ld	hl,0x0004
10142 313A  09          	add	hl,bc
10143 313B  59          	ld	e,c
10144 313C  50          	ld	d,b
10145 313D  EB          	ex	de,hl
10146 313E  23          	inc	hl
10147 313F  23          	inc	hl
10148 3140  7E          	ld	a,(hl)
10149 3141  C6 D0       	add	a,0xd0
10150 3143  DD 77 FD    	ld	(ix-3),a
10151 3146  C5          	push	bc
10152 3147  D5          	push	de
10153 3148  CD 00 00    	call	_myRand
10154 314B  D1          	pop	de
10155 314C  C1          	pop	bc
10156 314D  7D          	ld	a,l
10157 314E  E6 01       	and	a,0x01
10158 3150  6F          	ld	l,a
10159 3151  DD 7E FD    	ld	a,(ix-3)
10160 3154  85          	add	a, l
10161 3155  12          	ld	(de),a
10162 3156  21 05 00    	ld	hl,0x0005
10163 3159  09          	add	hl,bc
10164 315A  DD 75 FE    	ld	(ix-2),l
10165 315D  DD 74 FF    	ld	(ix-1),h
10166 3160  C5          	push	bc
10167 3161  CD 00 00    	call	_myRand
10168 3164  5D          	ld	e, l
10169 3165  16 03       	ld	d,0x03
10170 3167  D5          	push	de
10171 3168  CD 00 00    	call	__moduchar_callee
10172 316B  C1          	pop	bc
10173 316C  5D          	ld	e,l
10174 316D  DD 6E FE    	ld	l,(ix-2)
10175 3170  DD 66 FF    	ld	h,(ix-1)
10176 3173  73          	ld	(hl),e
10177 3174  C5          	push	bc
10178 3175  CD 00 00    	call	_myRand
10179 3178  5D          	ld	e, l
10180 3179  16 78       	ld	d,0x78
10181 317B  D5          	push	de
10182 317C  CD 00 00    	call	__moduchar_callee
10183 317F  C1          	pop	bc
10184 3180  7D          	ld	a,l
10185 3181  C6 38       	add	a,0x38
10186 3183  02          	ld	(bc),a
10187 3184  DD F9       	ld	sp, ix
10188 3186  DD E1       	pop	ix
10189 3188  C9          	ret
10190 3189              	SECTION code_compiler
10191 3189              ;	---------------------------------
10192 3189              ; Function UpdateSpaceAsteroid
10193 3189              ; ---------------------------------
10194 3189              _UpdateSpaceAsteroid:
10195 3189  DD E5       	push	ix
10196 318B  DD 21 00 00 	ld	ix,0
10197 318F  DD 39       	add	ix,sp
10198 3191  F5          	push	af
10199 3192  F5          	push	af
10200 3193  DD 4E 04    	ld	c,(ix+4)
10201 3196  DD 46 05    	ld	b,(ix+5)
10202 3199  21 01 00    	ld	hl,0x0001
10203 319C  09          	add	hl,bc
10204 319D  F1          	pop	af
10205 319E  5E          	ld	e,(hl)
10206 319F  E5          	push	hl
10207 31A0  69          	ld	l, c
10208 31A1  60          	ld	h, b
10209 31A2  23          	inc	hl
10210 31A3  23          	inc	hl
10211 31A4  23          	inc	hl
10212 31A5  23          	inc	hl
10213 31A6  56          	ld	d,(hl)
10214 31A7  7B          	ld	a,e
10215 31A8  82          	add	a, d
10216 31A9  E1          	pop	hl
10217 31AA  5F          	ld	e,a
10218 31AB  E5          	push	hl
10219 31AC  73          	ld	(hl),e
10220 31AD  3E C0       	ld	a,0xc0
10221 31AF  93          	sub	a, e
10222 31B0  30 05       	jr	NC,l_UpdateSpaceAsteroid_00112
10223 31B2  2E 00       	ld	l,0x00
10224 31B4  C3 33 32    	jp	l_UpdateSpaceAsteroid_00114
10225 31B7              l_UpdateSpaceAsteroid_00112:
10226 31B7  0A          	ld	a,(bc)
10227 31B8  5F          	ld	e,a
10228 31B9  69          	ld	l, c
10229 31BA  60          	ld	h, b
10230 31BB  23          	inc	hl
10231 31BC  23          	inc	hl
10232 31BD  23          	inc	hl
10233 31BE  23          	inc	hl
10234 31BF  23          	inc	hl
10235 31C0  56          	ld	d,(hl)
10236 31C1  7B          	ld	a,e
10237 31C2  82          	add	a, d
10238 31C3  02          	ld	(bc),a
10239 31C4  3D          	dec	a
10240 31C5  5F          	ld	e,a
10241 31C6  02          	ld	(bc),a
10242 31C7  57          	ld	d,a
10243 31C8  7B          	ld	a,e
10244 31C9  D6 04       	sub	a,0x04
10245 31CB  38 24       	jr	C,l_UpdateSpaceAsteroid_00107
10246 31CD  21 07 00    	ld	hl,0x0007
10247 31D0  09          	add	hl,bc
10248 31D1  5E          	ld	e,(hl)
10249 31D2  AF          	xor	a,a
10250 31D3  6F          	ld	l,a
10251 31D4  93          	sub	a, e
10252 31D5  DD 77 FE    	ld	(ix-2),a
10253 31D8  3E 01       	ld	a,0x01
10254 31DA  9D          	sbc	a, l
10255 31DB  DD 77 FF    	ld	(ix-1),a
10256 31DE  5A          	ld	e,d
10257 31DF  2E 00       	ld	l,0x00
10258 31E1  DD 7E FE    	ld	a,(ix-2)
10259 31E4  93          	sub	a, e
10260 31E5  DD 7E FF    	ld	a,(ix-1)
10261 31E8  9D          	sbc	a, l
10262 31E9  E2 EE 31    	jp	PO, l_UpdateSpaceAsteroid_00132
10263 31EC  EE 80       	xor	a,0x80
10264 31EE              l_UpdateSpaceAsteroid_00132:
10265 31EE  F2 F5 31    	jp	P,l_UpdateSpaceAsteroid_00108
10266 31F1              l_UpdateSpaceAsteroid_00107:
10267 31F1  2E 00       	ld	l,0x00
10268 31F3  18 3E       	jr	l_UpdateSpaceAsteroid_00114
10269 31F5              l_UpdateSpaceAsteroid_00108:
10270 31F5  69          	ld	l, c
10271 31F6  60          	ld	h, b
10272 31F7  23          	inc	hl
10273 31F8  23          	inc	hl
10274 31F9  4E          	ld	c,(hl)
10275 31FA  E1          	pop	hl
10276 31FB  46          	ld	b,(hl)
10277 31FC  E5          	push	hl
10278 31FD  79          	ld	a,c
10279 31FE  D6 34       	sub	a,0x34
10280 3200  20 14       	jr	NZ,l_UpdateSpaceAsteroid_00105
10281 3202  21 18 18    	ld	hl,0x1818
10282 3205  E5          	push	hl
10283 3206  4A          	ld	c, d
10284 3207  C5          	push	bc
10285 3208  21 81 01    	ld	hl,0x0181
10286 320B  E5          	push	hl
10287 320C  CD 46 00    	call	_DrawSpriteArray
10288 320F  21 06 00    	ld	hl,6
10289 3212  39          	add	hl,sp
10290 3213  F9          	ld	sp,hl
10291 3214  18 1B       	jr	l_UpdateSpaceAsteroid_00113
10292 3216              l_UpdateSpaceAsteroid_00105:
10293 3216  79          	ld	a,c
10294 3217  D6 35       	sub	a,0x35
10295 3219  20 0D       	jr	NZ,l_UpdateSpaceAsteroid_00102
10296 321B  21 8A 01    	ld	hl,0x018a
10297 321E  E5          	push	hl
10298 321F  4A          	ld	c, d
10299 3220  C5          	push	bc
10300 3221  CD A7 00    	call	_DrawQuadSprite
10301 3224  F1          	pop	af
10302 3225  F1          	pop	af
10303 3226  18 09       	jr	l_UpdateSpaceAsteroid_00113
10304 3228              l_UpdateSpaceAsteroid_00102:
10305 3228  3E 8E       	ld	a,0x8e
10306 322A  F5          	push	af
10307 322B  33          	inc	sp
10308 322C  4A          	ld	c, d
10309 322D  C5          	push	bc
10310 322E  CD 00 00    	call	_SMS_addSprite_callee
10311 3231              l_UpdateSpaceAsteroid_00113:
10312 3231  2E 01       	ld	l,0x01
10313 3233              l_UpdateSpaceAsteroid_00114:
10314 3233  DD F9       	ld	sp, ix
10315 3235  DD E1       	pop	ix
10316 3237  C9          	ret
10317 3238              	SECTION code_compiler
10318 3238              ;	---------------------------------
10319 3238              ; Function UpdateSpaceShooter
10320 3238              ; ---------------------------------
10321 3238              _UpdateSpaceShooter:
10322 3238  DD E5       	push	ix
10323 323A  DD 21 00 00 	ld	ix,0
10324 323E  DD 39       	add	ix,sp
10325 3240  21 F8 FF    	ld	hl,-8
10326 3243  39          	add	hl,sp
10327 3244  F9          	ld	sp,hl
10328 3245  DD 7E 04    	ld	a,(ix+4)
10329 3248  DD 77 FA    	ld	(ix-6),a
10330 324B  4F          	ld	c, a
10331 324C  DD 7E 05    	ld	a,(ix+5)
10332 324F  DD 77 FB    	ld	(ix-5),a
10333 3252  47          	ld	b,a
10334 3253  03          	inc	bc
10335 3254  0A          	ld	a,(bc)
10336 3255  3C          	inc	a
10337 3256  5F          	ld	e,a
10338 3257  02          	ld	(bc),a
10339 3258  57          	ld	d,a
10340 3259  3E C0       	ld	a,0xc0
10341 325B  93          	sub	a, e
10342 325C  30 0A       	jr	NC,l_UpdateSpaceShooter_00102
10343 325E  7A          	ld	a,d
10344 325F  D6 C8       	sub	a,0xc8
10345 3261  30 05       	jr	NC,l_UpdateSpaceShooter_00102
10346 3263  2E 00       	ld	l,0x00
10347 3265  C3 03 33    	jp	l_UpdateSpaceShooter_00112
10348 3268              l_UpdateSpaceShooter_00102:
10349 3268  DD 6E FA    	ld	l,(ix-6)
10350 326B  DD 66 FB    	ld	h,(ix-5)
10351 326E  5E          	ld	e,(hl)
10352 326F  DD 73 FE    	ld	(ix-2),e
10353 3272  DD 36 FF 00 	ld	(ix-1),0x00
10354 3276  7B          	ld	a,e
10355 3277  C6 F0       	add	a,0xf0
10356 3279  DD 77 FC    	ld	(ix-4),a
10357 327C  DD 7E FF    	ld	a,(ix-1)
10358 327F  CE FF       	adc	a,0xff
10359 3281  DD 77 FD    	ld	(ix-3),a
10360 3284  3A 12 00    	ld	a,(_playerx)
10361 3287  DD 77 F8    	ld	(ix-8),a
10362 328A  DD 36 F9 00 	ld	(ix-7),0x00
10363 328E  7A          	ld	a,d
10364 328F  C6 FC       	add	a,0xfc
10365 3291  57          	ld	d,a
10366 3292  DD 7E F8    	ld	a,(ix-8)
10367 3295  DD 96 FC    	sub	a,(ix-4)
10368 3298  DD 7E F9    	ld	a,(ix-7)
10369 329B  DD 9E FD    	sbc	a,(ix-3)
10370 329E  E2 A3 32    	jp	PO, l_UpdateSpaceShooter_00134
10371 32A1  EE 80       	xor	a,0x80
10372 32A3              l_UpdateSpaceShooter_00134:
10373 32A3  F2 B4 32    	jp	P,l_UpdateSpaceShooter_00108
10374 32A6  C5          	push	bc
10375 32A7  21 9E 01    	ld	hl,0x019e
10376 32AA  E5          	push	hl
10377 32AB  D5          	push	de
10378 32AC  CD A7 00    	call	_DrawQuadSprite
10379 32AF  F1          	pop	af
10380 32B0  F1          	pop	af
10381 32B1  C1          	pop	bc
10382 32B2  18 36       	jr	l_UpdateSpaceShooter_00109
10383 32B4              l_UpdateSpaceShooter_00108:
10384 32B4  DD 7E FE    	ld	a,(ix-2)
10385 32B7  C6 10       	add	a,0x10
10386 32B9  6F          	ld	l,a
10387 32BA  DD 7E FF    	ld	a,(ix-1)
10388 32BD  CE 00       	adc	a,0x00
10389 32BF  67          	ld	h,a
10390 32C0  7D          	ld	a,l
10391 32C1  DD 96 F8    	sub	a,(ix-8)
10392 32C4  7C          	ld	a,h
10393 32C5  DD 9E F9    	sbc	a,(ix-7)
10394 32C8  E2 CD 32    	jp	PO, l_UpdateSpaceShooter_00135
10395 32CB  EE 80       	xor	a,0x80
10396 32CD              l_UpdateSpaceShooter_00135:
10397 32CD  F2 DE 32    	jp	P,l_UpdateSpaceShooter_00105
10398 32D0  C5          	push	bc
10399 32D1  21 A2 01    	ld	hl,0x01a2
10400 32D4  E5          	push	hl
10401 32D5  D5          	push	de
10402 32D6  CD A7 00    	call	_DrawQuadSprite
10403 32D9  F1          	pop	af
10404 32DA  F1          	pop	af
10405 32DB  C1          	pop	bc
10406 32DC  18 0C       	jr	l_UpdateSpaceShooter_00109
10407 32DE              l_UpdateSpaceShooter_00105:
10408 32DE  C5          	push	bc
10409 32DF  21 9A 01    	ld	hl,0x019a
10410 32E2  E5          	push	hl
10411 32E3  D5          	push	de
10412 32E4  CD A7 00    	call	_DrawQuadSprite
10413 32E7  F1          	pop	af
10414 32E8  F1          	pop	af
10415 32E9  C1          	pop	bc
10416 32EA              l_UpdateSpaceShooter_00109:
10417 32EA  0A          	ld	a,(bc)
10418 32EB  21 13 00    	ld	hl,_playery
10419 32EE  96          	sub	a, (hl)
10420 32EF  30 10       	jr	NC,l_UpdateSpaceShooter_00111
10421 32F1  3E 0B       	ld	a,0x0b
10422 32F3  F5          	push	af
10423 32F4  33          	inc	sp
10424 32F5  DD 6E FA    	ld	l,(ix-6)
10425 32F8  DD 66 FB    	ld	h,(ix-5)
10426 32FB  E5          	push	hl
10427 32FC  CD 88 5F    	call	_TestEnemyShoot
10428 32FF  F1          	pop	af
10429 3300  33          	inc	sp
10430 3301              l_UpdateSpaceShooter_00111:
10431 3301  2E 01       	ld	l,0x01
10432 3303              l_UpdateSpaceShooter_00112:
10433 3303  DD F9       	ld	sp, ix
10434 3305  DD E1       	pop	ix
10435 3307  C9          	ret
10436 3308              	SECTION code_compiler
10437 3308              ;	---------------------------------
10438 3308              ; Function InitStage3Laser
10439 3308              ; ---------------------------------
10440 3308              _InitStage3Laser:
10441 3308  DD E5       	push	ix
10442 330A  DD 21 00 00 	ld	ix,0
10443 330E  DD 39       	add	ix,sp
10444 3310  F5          	push	af
10445 3311  DD 4E 04    	ld	c,(ix+4)
10446 3314  DD 46 05    	ld	b,(ix+5)
10447 3317  21 04 00    	ld	hl,0x0004
10448 331A  09          	add	hl,bc
10449 331B  E3          	ex	(sp), hl
10450 331C  59          	ld	e, c
10451 331D  50          	ld	d, b
10452 331E  13          	inc	de
10453 331F  13          	inc	de
10454 3320  1A          	ld	a,(de)
10455 3321  6F          	ld	l,a
10456 3322  26 00       	ld	h,0x00
10457 3324  7D          	ld	a,l
10458 3325  C6 BD       	add	a,0xbd
10459 3327  6F          	ld	l,a
10460 3328  7C          	ld	a,h
10461 3329  CE FF       	adc	a,0xff
10462 332B  67          	ld	h,a
10463 332C  3E 00       	ld	a,+((_stage3laservelx) & 0xFF)
10464 332E  85          	add	a, l
10465 332F  6F          	ld	l,a
10466 3330  3E 00       	ld	a,+((_stage3laservelx) / 256)
10467 3332  8C          	adc	a, h
10468 3333  67          	ld	h,a
10469 3334  7E          	ld	a,(hl)
10470 3335  E1          	pop	hl
10471 3336  E5          	push	hl
10472 3337  77          	ld	(hl),a
10473 3338  21 05 00    	ld	hl,0x0005
10474 333B  09          	add	hl,bc
10475 333C  1A          	ld	a,(de)
10476 333D  5F          	ld	e,a
10477 333E  16 00       	ld	d,0x00
10478 3340  4D          	ld	c,l
10479 3341  44          	ld	b,h
10480 3342  21 BD FF    	ld	hl,0xffbd+_stage3laservely
10481 3345  19          	add	hl, de
10482 3346  7E          	ld	a,(hl)
10483 3347  02          	ld	(bc),a
10484 3348  DD F9       	ld	sp, ix
10485 334A  DD E1       	pop	ix
10486 334C  C9          	ret
10487 334D              	SECTION code_compiler
10488 334D              ;	---------------------------------
10489 334D              ; Function UpdateStage3Laser
10490 334D              ; ---------------------------------
10491 334D              _UpdateStage3Laser:
10492 334D  DD E5       	push	ix
10493 334F  DD 21 00 00 	ld	ix,0
10494 3353  DD 39       	add	ix,sp
10495 3355  3B          	dec	sp
10496 3356  DD 4E 04    	ld	c,(ix+4)
10497 3359  DD 46 05    	ld	b,(ix+5)
10498 335C  0A          	ld	a,(bc)
10499 335D  5F          	ld	e,a
10500 335E  69          	ld	l, c
10501 335F  60          	ld	h, b
10502 3360  23          	inc	hl
10503 3361  23          	inc	hl
10504 3362  23          	inc	hl
10505 3363  23          	inc	hl
10506 3364  7E          	ld	a,(hl)
10507 3365  C6 F8       	add	a,0xf8
10508 3367  83          	add	a,e
10509 3368  57          	ld	d,a
10510 3369  02          	ld	(bc),a
10511 336A  5F          	ld	e,a
10512 336B  7A          	ld	a,d
10513 336C  D6 08       	sub	a,0x08
10514 336E  38 05       	jr	C,l_UpdateStage3Laser_00101
10515 3370  3E F0       	ld	a,0xf0
10516 3372  93          	sub	a, e
10517 3373  30 04       	jr	NC,l_UpdateStage3Laser_00102
10518 3375              l_UpdateStage3Laser_00101:
10519 3375  2E 00       	ld	l,0x00
10520 3377  18 3B       	jr	l_UpdateStage3Laser_00107
10521 3379              l_UpdateStage3Laser_00102:
10522 3379  59          	ld	e, c
10523 337A  50          	ld	d, b
10524 337B  13          	inc	de
10525 337C  1A          	ld	a,(de)
10526 337D  DD 77 FF    	ld	(ix-1),a
10527 3380  69          	ld	l, c
10528 3381  60          	ld	h, b
10529 3382  23          	inc	hl
10530 3383  23          	inc	hl
10531 3384  23          	inc	hl
10532 3385  23          	inc	hl
10533 3386  23          	inc	hl
10534 3387  7E          	ld	a,(hl)
10535 3388  C6 F8       	add	a,0xf8
10536 338A  6F          	ld	l,a
10537 338B  DD 7E FF    	ld	a,(ix-1)
10538 338E  85          	add	a, l
10539 338F  DD 77 FF    	ld	(ix-1),a
10540 3392  12          	ld	(de),a
10541 3393  5F          	ld	e,a
10542 3394  DD 7E FF    	ld	a,(ix-1)
10543 3397  D6 08       	sub	a,0x08
10544 3399  38 05       	jr	C,l_UpdateStage3Laser_00104
10545 339B  3E BC       	ld	a,0xbc
10546 339D  93          	sub	a, e
10547 339E  30 04       	jr	NC,l_UpdateStage3Laser_00105
10548 33A0              l_UpdateStage3Laser_00104:
10549 33A0  2E 00       	ld	l,0x00
10550 33A2  18 10       	jr	l_UpdateStage3Laser_00107
10551 33A4              l_UpdateStage3Laser_00105:
10552 33A4  3A 06 00    	ld	a,(_sprite82anim)
10553 33A7  C6 B6       	add	a,0xb6
10554 33A9  57          	ld	d,a
10555 33AA  0A          	ld	a,(bc)
10556 33AB  47          	ld	b,a
10557 33AC  D5          	push	de
10558 33AD  C5          	push	bc
10559 33AE  33          	inc	sp
10560 33AF  CD 00 00    	call	_SMS_addSprite_callee
10561 33B2  2E 01       	ld	l,0x01
10562 33B4              l_UpdateStage3Laser_00107:
10563 33B4  33          	inc	sp
10564 33B5  DD E1       	pop	ix
10565 33B7  C9          	ret
10566 33B8              	SECTION code_compiler
10567 33B8              ;	---------------------------------
10568 33B8              ; Function DoStage3EndBossCrossShooting
10569 33B8              ; ---------------------------------
10570 33B8              _DoStage3EndBossCrossShooting:
10571 33B8  DD E5       	push	ix
10572 33BA  DD 21 00 00 	ld	ix,0
10573 33BE  DD 39       	add	ix,sp
10574 33C0  F5          	push	af
10575 33C1  F5          	push	af
10576 33C2  3B          	dec	sp
10577 33C3  CD 00 00    	call	_myRand
10578 33C6  7D          	ld	a,l
10579 33C7  E6 01       	and	a,0x01
10580 33C9  4F          	ld	c,a
10581 33CA  DD 7E 04    	ld	a,(ix+4)
10582 33CD  DD 77 FE    	ld	(ix-2),a
10583 33D0  DD 7E 05    	ld	a,(ix+5)
10584 33D3  DD 77 FF    	ld	(ix-1),a
10585 33D6  DD 7E FE    	ld	a,(ix-2)
10586 33D9  DD 77 FC    	ld	(ix-4),a
10587 33DC  DD 7E FF    	ld	a,(ix-1)
10588 33DF  DD 77 FD    	ld	(ix-3),a
10589 33E2  DD 36 FB 00 	ld	(ix-5),0x00
10590 33E6              l_DoStage3EndBossCrossShooting_00102:
10591 33E6  79          	ld	a,c
10592 33E7  C6 43       	add	a,0x43
10593 33E9  57          	ld	d,a
10594 33EA  DD 6E FC    	ld	l,(ix-4)
10595 33ED  DD 66 FD    	ld	h,(ix-3)
10596 33F0  23          	inc	hl
10597 33F1  5E          	ld	e,(hl)
10598 33F2  06 00       	ld	b,0x00
10599 33F4  21 00 00    	ld	hl,_stage3enemylaserposy
10600 33F7  09          	add	hl, bc
10601 33F8  46          	ld	b,(hl)
10602 33F9  7B          	ld	a,e
10603 33FA  80          	add	a, b
10604 33FB  C6 F8       	add	a,0xf8
10605 33FD  47          	ld	b,a
10606 33FE  DD 6E FE    	ld	l,(ix-2)
10607 3401  DD 66 FF    	ld	h,(ix-1)
10608 3404  5E          	ld	e,(hl)
10609 3405  3E 00       	ld	a,+((_stage3enemylaserposx) & 0xFF)
10610 3407  81          	add	a, c
10611 3408  6F          	ld	l,a
10612 3409  3E 00       	ld	a,+((_stage3enemylaserposx) / 256)
10613 340B  CE 00       	adc	a,0x00
10614 340D  67          	ld	h,a
10615 340E  6E          	ld	l,(hl)
10616 340F  7B          	ld	a,e
10617 3410  85          	add	a, l
10618 3411  C6 F8       	add	a,0xf8
10619 3413  C5          	push	bc
10620 3414  58          	ld	e,b
10621 3415  D5          	push	de
10622 3416  F5          	push	af
10623 3417  33          	inc	sp
10624 3418  CD 23 49    	call	_InitEnemy
10625 341B  F1          	pop	af
10626 341C  33          	inc	sp
10627 341D  C1          	pop	bc
10628 341E  0C          	inc	c
10629 341F  0C          	inc	c
10630 3420  DD 34 FB    	inc	(ix-5)
10631 3423  DD 7E FB    	ld	a,(ix-5)
10632 3426  D6 04       	sub	a,0x04
10633 3428  38 BC       	jr	C,l_DoStage3EndBossCrossShooting_00102
10634 342A  DD F9       	ld	sp, ix
10635 342C  DD E1       	pop	ix
10636 342E  C9          	ret
10637 342F              	SECTION code_compiler
10638 342F              ;	---------------------------------
10639 342F              ; Function UpdateStage3EndBoss2
10640 342F              ; ---------------------------------
10641 342F              _UpdateStage3EndBoss2:
10642 342F  DD E5       	push	ix
10643 3431  DD 21 00 00 	ld	ix,0
10644 3435  DD 39       	add	ix,sp
10645 3437  DD 6E 04    	ld	l,(ix+4)
10646 343A  DD 66 05    	ld	h,(ix+5)
10647 343D  11 04 00    	ld	de,0x0004
10648 3440  4D          	ld	c,l
10649 3441  44          	ld	b,h
10650 3442  19          	add	hl, de
10651 3443  7E          	ld	a,(hl)
10652 3444  E6 03       	and	a,0x03
10653 3446  57          	ld	d,a
10654 3447  14          	inc	d
10655 3448  C5          	push	bc
10656 3449  D5          	push	de
10657 344A  33          	inc	sp
10658 344B  C5          	push	bc
10659 344C  CD E3 14    	call	_DoEnemyWait
10660 344F  F1          	pop	af
10661 3450  33          	inc	sp
10662 3451  E1          	pop	hl
10663 3452  4D          	ld	c,l
10664 3453  44          	ld	b,h
10665 3454  23          	inc	hl
10666 3455  23          	inc	hl
10667 3456  23          	inc	hl
10668 3457  7E          	ld	a,(hl)
10669 3458  D6 14       	sub	a,0x14
10670 345A  20 05       	jr	NZ,l_UpdateStage3EndBoss2_00103
10671 345C  C5          	push	bc
10672 345D  CD B8 33    	call	_DoStage3EndBossCrossShooting
10673 3460  F1          	pop	af
10674 3461              l_UpdateStage3EndBoss2_00103:
10675 3461  DD E1       	pop	ix
10676 3463  C9          	ret
10677 3464              	SECTION code_compiler
10678 3464              ;	---------------------------------
10679 3464              ; Function UpdateStage3EndBoss1
10680 3464              ; ---------------------------------
10681 3464              _UpdateStage3EndBoss1:
10682 3464  DD E5       	push	ix
10683 3466  DD 21 00 00 	ld	ix,0
10684 346A  DD 39       	add	ix,sp
10685 346C  DD 6E 04    	ld	l,(ix+4)
10686 346F  DD 66 05    	ld	h,(ix+5)
10687 3472  4D          	ld	c,l
10688 3473  44          	ld	b,h
10689 3474  23          	inc	hl
10690 3475  23          	inc	hl
10691 3476  7E          	ld	a,(hl)
10692 3477  D6 39       	sub	a,0x39
10693 3479  20 19       	jr	NZ,l_UpdateStage3EndBoss1_00102
10694 347B  C5          	push	bc
10695 347C  21 00 00    	ld	hl,_crossamovingt
10696 347F  E5          	push	hl
10697 3480  21 00 00    	ld	hl,_crossamovingy
10698 3483  E5          	push	hl
10699 3484  21 00 00    	ld	hl,_crossamovingx
10700 3487  E5          	push	hl
10701 3488  C5          	push	bc
10702 3489  CD 88 25    	call	_DoAracPatternMovement
10703 348C  21 08 00    	ld	hl,8
10704 348F  39          	add	hl,sp
10705 3490  F9          	ld	sp,hl
10706 3491  C1          	pop	bc
10707 3492  18 17       	jr	l_UpdateStage3EndBoss1_00103
10708 3494              l_UpdateStage3EndBoss1_00102:
10709 3494  C5          	push	bc
10710 3495  21 00 00    	ld	hl,_crossbmovingt
10711 3498  E5          	push	hl
10712 3499  21 00 00    	ld	hl,_crossbmovingy
10713 349C  E5          	push	hl
10714 349D  21 00 00    	ld	hl,_crossbmovingx
10715 34A0  E5          	push	hl
10716 34A1  C5          	push	bc
10717 34A2  CD 88 25    	call	_DoAracPatternMovement
10718 34A5  21 08 00    	ld	hl,8
10719 34A8  39          	add	hl,sp
10720 34A9  F9          	ld	sp,hl
10721 34AA  C1          	pop	bc
10722 34AB              l_UpdateStage3EndBoss1_00103:
10723 34AB  21 0C 0C    	ld	hl,0x0c0c
10724 34AE  E5          	push	hl
10725 34AF  3E 30       	ld	a,0x30
10726 34B1  F5          	push	af
10727 34B2  33          	inc	sp
10728 34B3  C5          	push	bc
10729 34B4  CD F9 5F    	call	_TestEnemyShootComplex
10730 34B7  F1          	pop	af
10731 34B8  F1          	pop	af
10732 34B9  33          	inc	sp
10733 34BA  DD E1       	pop	ix
10734 34BC  C9          	ret
10735 34BD              	SECTION code_compiler
10736 34BD              ;	---------------------------------
10737 34BD              ; Function UpdateStage3EndBoss
10738 34BD              ; ---------------------------------
10739 34BD              _UpdateStage3EndBoss:
10740 34BD  DD E5       	push	ix
10741 34BF  DD 21 00 00 	ld	ix,0
10742 34C3  DD 39       	add	ix,sp
10743 34C5  F5          	push	af
10744 34C6  DD 6E 04    	ld	l,(ix+4)
10745 34C9  DD 66 05    	ld	h,(ix+5)
10746 34CC  5D          	ld	e,l
10747 34CD  54          	ld	d,h
10748 34CE  23          	inc	hl
10749 34CF  46          	ld	b,(hl)
10750 34D0  1A          	ld	a,(de)
10751 34D1  4F          	ld	c,a
10752 34D2  D5          	push	de
10753 34D3  21 20 20    	ld	hl,0x2020
10754 34D6  E5          	push	hl
10755 34D7  C5          	push	bc
10756 34D8  21 A6 01    	ld	hl,0x01a6
10757 34DB  E5          	push	hl
10758 34DC  CD 46 00    	call	_DrawSpriteArray
10759 34DF  21 06 00    	ld	hl,6
10760 34E2  39          	add	hl,sp
10761 34E3  F9          	ld	sp,hl
10762 34E4  D1          	pop	de
10763 34E5  21 04 00    	ld	hl,0x0004
10764 34E8  19          	add	hl,de
10765 34E9  F1          	pop	af
10766 34EA  46          	ld	b,(hl)
10767 34EB  E5          	push	hl
10768 34EC  D5          	push	de
10769 34ED  3E 05       	ld	a,0x05
10770 34EF  48          	ld	c,b
10771 34F0  47          	ld	b,a
10772 34F1  C5          	push	bc
10773 34F2  CD 00 00    	call	__moduchar_callee
10774 34F5  D1          	pop	de
10775 34F6  4D          	ld	c,l
10776 34F7  E1          	pop	hl
10777 34F8  E5          	push	hl
10778 34F9  71          	ld	(hl),c
10779 34FA  26 00       	ld	h,0x00
10780 34FC  69          	ld	l, c
10781 34FD  29          	add	hl, hl
10782 34FE  01 00 00    	ld	bc,_updatestage3endbossfunctions
10783 3501  09          	add	hl,bc
10784 3502  4E          	ld	c,(hl)
10785 3503  23          	inc	hl
10786 3504  66          	ld	h,(hl)
10787 3505  D5          	push	de
10788 3506  69          	ld	l, c
10789 3507  CD 00 00    	call	___sdcc_call_hl
10790 350A  F1          	pop	af
10791 350B  2E 01       	ld	l,0x01
10792 350D  DD F9       	ld	sp, ix
10793 350F  DD E1       	pop	ix
10794 3511  C9          	ret
10795 3512              	SECTION code_compiler
10796 3512              ;	---------------------------------
10797 3512              ; Function InitStage3Star
10798 3512              ; ---------------------------------
10799 3512              _InitStage3Star:
10800 3512  DD E5       	push	ix
10801 3514  DD 21 00 00 	ld	ix,0
10802 3518  DD 39       	add	ix,sp
10803 351A  3B          	dec	sp
10804 351B  DD 4E 04    	ld	c,(ix+4)
10805 351E  DD 46 05    	ld	b,(ix+5)
10806 3521  C5          	push	bc
10807 3522  CD 00 00    	call	_myRand
10808 3525  5D          	ld	e, l
10809 3526  16 8F       	ld	d,0x8f
10810 3528  D5          	push	de
10811 3529  CD 00 00    	call	__moduchar_callee
10812 352C  C1          	pop	bc
10813 352D  7D          	ld	a,l
10814 352E  C6 30       	add	a,0x30
10815 3530  02          	ld	(bc),a
10816 3531  59          	ld	e, c
10817 3532  50          	ld	d, b
10818 3533  13          	inc	de
10819 3534  C5          	push	bc
10820 3535  D5          	push	de
10821 3536  CD 00 00    	call	_myRand
10822 3539  DD 75 FF    	ld	(ix-1),l
10823 353C  26 C0       	ld	h,0xc0
10824 353E  DD 6E FF    	ld	l,(ix-1)
10825 3541  E5          	push	hl
10826 3542  CD 00 00    	call	__moduchar_callee
10827 3545  D1          	pop	de
10828 3546  C1          	pop	bc
10829 3547  7D          	ld	a,l
10830 3548  12          	ld	(de),a
10831 3549  03          	inc	bc
10832 354A  03          	inc	bc
10833 354B  DD 7E 06    	ld	a,(ix+6)
10834 354E  02          	ld	(bc),a
10835 354F  33          	inc	sp
10836 3550  DD E1       	pop	ix
10837 3552  C9          	ret
10838 3553              	SECTION code_compiler
10839 3553              ;	---------------------------------
10840 3553              ; Function UpdateStarMovement
10841 3553              ; ---------------------------------
10842 3553              _UpdateStarMovement:
10843 3553  DD E5       	push	ix
10844 3555  DD 21 00 00 	ld	ix,0
10845 3559  DD 39       	add	ix,sp
10846 355B  3B          	dec	sp
10847 355C  DD 4E 04    	ld	c,(ix+4)
10848 355F  DD 46 05    	ld	b,(ix+5)
10849 3562  59          	ld	e, c
10850 3563  50          	ld	d, b
10851 3564  13          	inc	de
10852 3565  1A          	ld	a,(de)
10853 3566  DD 77 FF    	ld	(ix-1),a
10854 3569  69          	ld	l, c
10855 356A  60          	ld	h, b
10856 356B  23          	inc	hl
10857 356C  23          	inc	hl
10858 356D  6E          	ld	l,(hl)
10859 356E  DD 7E FF    	ld	a,(ix-1)
10860 3571  85          	add	a, l
10861 3572  12          	ld	(de),a
10862 3573  D6 BF       	sub	a,0xbf
10863 3575  20 10       	jr	NZ,l_UpdateStarMovement_00103
10864 3577  C5          	push	bc
10865 3578  CD 00 00    	call	_myRand
10866 357B  5D          	ld	e, l
10867 357C  16 8F       	ld	d,0x8f
10868 357E  D5          	push	de
10869 357F  CD 00 00    	call	__moduchar_callee
10870 3582  C1          	pop	bc
10871 3583  7D          	ld	a,l
10872 3584  C6 30       	add	a,0x30
10873 3586  02          	ld	(bc),a
10874 3587              l_UpdateStarMovement_00103:
10875 3587  33          	inc	sp
10876 3588  DD E1       	pop	ix
10877 358A  C9          	ret
10878 358B              	SECTION code_compiler
10879 358B              ;	---------------------------------
10880 358B              ; Function UpdateStage3Star
10881 358B              ; ---------------------------------
10882 358B              _UpdateStage3Star:
10883 358B  DD E5       	push	ix
10884 358D  DD 21 00 00 	ld	ix,0
10885 3591  DD 39       	add	ix,sp
10886 3593  DD 6E 04    	ld	l,(ix+4)
10887 3596  DD 66 05    	ld	h,(ix+5)
10888 3599  4D          	ld	c,l
10889 359A  44          	ld	b,h
10890 359B  23          	inc	hl
10891 359C  56          	ld	d,(hl)
10892 359D  0A          	ld	a,(bc)
10893 359E  5F          	ld	e,a
10894 359F  C5          	push	bc
10895 35A0  3E 98       	ld	a,0x98
10896 35A2  F5          	push	af
10897 35A3  33          	inc	sp
10898 35A4  D5          	push	de
10899 35A5  CD 00 00    	call	_SMS_addSprite_callee
10900 35A8  CD 53 35    	call	_UpdateStarMovement
10901 35AB  F1          	pop	af
10902 35AC  DD E1       	pop	ix
10903 35AE  C9          	ret
10904 35AF              	SECTION code_compiler
10905 35AF              ;	---------------------------------
10906 35AF              ; Function UpdateStage5Cloud
10907 35AF              ; ---------------------------------
10908 35AF              _UpdateStage5Cloud:
10909 35AF  DD E5       	push	ix
10910 35B1  DD 21 00 00 	ld	ix,0
10911 35B5  DD 39       	add	ix,sp
10912 35B7  DD 6E 04    	ld	l,(ix+4)
10913 35BA  DD 66 05    	ld	h,(ix+5)
10914 35BD  4D          	ld	c,l
10915 35BE  44          	ld	b,h
10916 35BF  23          	inc	hl
10917 35C0  56          	ld	d,(hl)
10918 35C1  0A          	ld	a,(bc)
10919 35C2  C6 F0       	add	a,0xf0
10920 35C4  5F          	ld	e,a
10921 35C5  C5          	push	bc
10922 35C6  21 20 08    	ld	hl,0x0820
10923 35C9  E5          	push	hl
10924 35CA  D5          	push	de
10925 35CB  21 B3 01    	ld	hl,0x01b3
10926 35CE  E5          	push	hl
10927 35CF  CD 46 00    	call	_DrawSpriteArray
10928 35D2  21 06 00    	ld	hl,6
10929 35D5  39          	add	hl,sp
10930 35D6  F9          	ld	sp,hl
10931 35D7  CD 53 35    	call	_UpdateStarMovement
10932 35DA  F1          	pop	af
10933 35DB  DD E1       	pop	ix
10934 35DD  C9          	ret
10935 35DE              	SECTION code_compiler
10936 35DE              ;	---------------------------------
10937 35DE              ; Function FinishStage6EndBoss
10938 35DE              ; ---------------------------------
10939 35DE              _FinishStage6EndBoss:
10940 35DE  CD 00 00    	call	_PSGStop
10941 35E1  3E 01       	ld	a,0x01
10942 35E3  F5          	push	af
10943 35E4  33          	inc	sp
10944 35E5  CD 5C 48    	call	_KillEnemies
10945 35E8  33          	inc	sp
10946 35E9  21 00 4E    	ld	hl,0x4e00
10947 35EC  E5          	push	hl
10948 35ED  AF          	xor	a, a
10949 35EE  F5          	push	af
10950 35EF  33          	inc	sp
10951 35F0  CD 23 49    	call	_InitEnemy
10952 35F3  F1          	pop	af
10953 35F4  33          	inc	sp
10954 35F5  C9          	ret
10955 35F6              	SECTION code_compiler
10956 35F6              ;	---------------------------------
10957 35F6              ; Function ResetSkullState
10958 35F6              ; ---------------------------------
10959 35F6              _ResetSkullState:
10960 35F6  DD E5       	push	ix
10961 35F8  DD 21 00 00 	ld	ix,0
10962 35FC  DD 39       	add	ix,sp
10963 35FE  DD 4E 04    	ld	c,(ix+4)
10964 3601  DD 46 05    	ld	b,(ix+5)
10965 3604  DD 7E 08    	ld	a,(ix+8)
10966 3607  3D          	dec	a
10967 3608  20 06       	jr	NZ,l_ResetSkullState_00102
10968 360A  21 06 00    	ld	hl,0x0006
10969 360D  09          	add	hl,bc
10970 360E  36 46       	ld	(hl),0x46
10971 3610              l_ResetSkullState_00102:
10972 3610  21 04 00    	ld	hl,0x0004
10973 3613  09          	add	hl,bc
10974 3614  36 06       	ld	(hl),0x06
10975 3616  21 05 00    	ld	hl,0x0005
10976 3619  09          	add	hl,bc
10977 361A  EB          	ex	de,hl
10978 361B  DD 7E 06    	ld	a,(ix+6)
10979 361E  12          	ld	(de),a
10980 361F  69          	ld	l,c
10981 3620  60          	ld	h,b
10982 3621  23          	inc	hl
10983 3622  23          	inc	hl
10984 3623  23          	inc	hl
10985 3624  36 00       	ld	(hl),0x00
10986 3626  DD E1       	pop	ix
10987 3628  C9          	ret
10988 3629              	SECTION code_compiler
10989 3629              ;	---------------------------------
10990 3629              ; Function DoSkullSinusMovement
10991 3629              ; ---------------------------------
10992 3629              _DoSkullSinusMovement:
10993 3629  DD E5       	push	ix
10994 362B  DD 21 00 00 	ld	ix,0
10995 362F  DD 39       	add	ix,sp
10996 3631  F5          	push	af
10997 3632  F5          	push	af
10998 3633  DD 4E 04    	ld	c,(ix+4)
10999 3636  DD 46 05    	ld	b,(ix+5)
11000 3639  21 05 00    	ld	hl,0x0005
11001 363C  09          	add	hl,bc
11002 363D  DD 75 FE    	ld	(ix-2),l
11003 3640  DD 74 FF    	ld	(ix-1),h
11004 3643  5E          	ld	e,(hl)
11005 3644  0A          	ld	a,(bc)
11006 3645  57          	ld	d,a
11007 3646  DD 7E 07    	ld	a,(ix+7)
11008 3649  DD 77 FC    	ld	(ix-4),a
11009 364C  DD 36 FD 00 	ld	(ix-3),0x00
11010 3650  7B          	ld	a,e
11011 3651  B7          	or	a, a
11012 3652  20 2A       	jr	NZ,l_DoSkullSinusMovement_00106
11013 3654  7A          	ld	a,d
11014 3655  DD 96 06    	sub	a,(ix+6)
11015 3658  5F          	ld	e,a
11016 3659  02          	ld	(bc),a
11017 365A  DD 7E FC    	ld	a,(ix-4)
11018 365D  C6 18       	add	a,0x18
11019 365F  4F          	ld	c,a
11020 3660  DD 7E FD    	ld	a,(ix-3)
11021 3663  CE 00       	adc	a,0x00
11022 3665  47          	ld	b,a
11023 3666  16 00       	ld	d,0x00
11024 3668  7B          	ld	a,e
11025 3669  91          	sub	a, c
11026 366A  7A          	ld	a,d
11027 366B  98          	sbc	a, b
11028 366C  E2 71 36    	jp	PO, l_DoSkullSinusMovement_00122
11029 366F  EE 80       	xor	a,0x80
11030 3671              l_DoSkullSinusMovement_00122:
11031 3671  F2 AC 36    	jp	P,l_DoSkullSinusMovement_00108
11032 3674  DD 6E FE    	ld	l,(ix-2)
11033 3677  DD 66 FF    	ld	h,(ix-1)
11034 367A  36 01       	ld	(hl),0x01
11035 367C  18 2E       	jr	l_DoSkullSinusMovement_00108
11036 367E              l_DoSkullSinusMovement_00106:
11037 367E  7A          	ld	a,d
11038 367F  DD 86 06    	add	a,(ix+6)
11039 3682  5F          	ld	e,a
11040 3683  02          	ld	(bc),a
11041 3684  21 07 00    	ld	hl,0x0007
11042 3687  09          	add	hl,bc
11043 3688  4E          	ld	c,(hl)
11044 3689  06 00       	ld	b,0x00
11045 368B  3E D0       	ld	a,0xd0
11046 368D  91          	sub	a, c
11047 368E  4F          	ld	c,a
11048 368F  3E 00       	ld	a,0x00
11049 3691  98          	sbc	a, b
11050 3692  E1          	pop	hl
11051 3693  47          	ld	b,a
11052 3694  E5          	push	hl
11053 3695  09          	add	hl,bc
11054 3696  0E 00       	ld	c,0x00
11055 3698  7D          	ld	a,l
11056 3699  93          	sub	a, e
11057 369A  7C          	ld	a,h
11058 369B  99          	sbc	a, c
11059 369C  E2 A1 36    	jp	PO, l_DoSkullSinusMovement_00123
11060 369F  EE 80       	xor	a,0x80
11061 36A1              l_DoSkullSinusMovement_00123:
11062 36A1  F2 AC 36    	jp	P,l_DoSkullSinusMovement_00108
11063 36A4  DD 6E FE    	ld	l,(ix-2)
11064 36A7  DD 66 FF    	ld	h,(ix-1)
11065 36AA  36 00       	ld	(hl),0x00
11066 36AC              l_DoSkullSinusMovement_00108:
11067 36AC  DD F9       	ld	sp, ix
11068 36AE  DD E1       	pop	ix
11069 36B0  C9          	ret
11070 36B1              	SECTION code_compiler
11071 36B1              ;	---------------------------------
11072 36B1              ; Function CreateCustomBoneC
11073 36B1              ; ---------------------------------
11074 36B1              _CreateCustomBoneC:
11075 36B1  DD E5       	push	ix
11076 36B3  DD 21 00 00 	ld	ix,0
11077 36B7  DD 39       	add	ix,sp
11078 36B9  3E 3D       	ld	a,0x3d
11079 36BB  F5          	push	af
11080 36BC  33          	inc	sp
11081 36BD  DD 66 05    	ld	h,(ix+5)
11082 36C0  DD 6E 04    	ld	l,(ix+4)
11083 36C3  E5          	push	hl
11084 36C4  CD 23 49    	call	_InitEnemy
11085 36C7  F1          	pop	af
11086 36C8  33          	inc	sp
11087 36C9  21 89 00    	ld	hl,_numenemies
11088 36CC  4E          	ld	c,(hl)
11089 36CD  0D          	dec	c
11090 36CE  06 00       	ld	b,0x00
11091 36D0  69          	ld	l, c
11092 36D1  60          	ld	h, b
11093 36D2  29          	add	hl, hl
11094 36D3  29          	add	hl, hl
11095 36D4  29          	add	hl, hl
11096 36D5  09          	add	hl, bc
11097 36D6  01 8A 00    	ld	bc,_enemies
11098 36D9  09          	add	hl,bc
11099 36DA  4D          	ld	c,l
11100 36DB  44          	ld	b,h
11101 36DC  21 04 00    	ld	hl,0x0004
11102 36DF  09          	add	hl,bc
11103 36E0  EB          	ex	de,hl
11104 36E1  DD 7E 06    	ld	a,(ix+6)
11105 36E4  12          	ld	(de),a
11106 36E5  21 05 00    	ld	hl,0x0005
11107 36E8  09          	add	hl,bc
11108 36E9  DD 7E 07    	ld	a,(ix+7)
11109 36EC  77          	ld	(hl),a
11110 36ED  DD E1       	pop	ix
11111 36EF  C9          	ret
11112 36F0              	SECTION code_compiler
11113 36F0              ;	---------------------------------
11114 36F0              ; Function LaunchSkullBoneC
11115 36F0              ; ---------------------------------
11116 36F0              _LaunchSkullBoneC:
11117 36F0  DD E5       	push	ix
11118 36F2  DD 21 00 00 	ld	ix,0
11119 36F6  DD 39       	add	ix,sp
11120 36F8  F5          	push	af
11121 36F9  3A 89 00    	ld	a,(_numenemies)
11122 36FC  D6 04       	sub	a,0x04
11123 36FE  30 58       	jr	NC,l_LaunchSkullBoneC_00105
11124 3700  DD 6E 04    	ld	l,(ix+4)
11125 3703  DD 66 05    	ld	h,(ix+5)
11126 3706  4D          	ld	c,l
11127 3707  44          	ld	b,h
11128 3708  23          	inc	hl
11129 3709  23          	inc	hl
11130 370A  23          	inc	hl
11131 370B  56          	ld	d,(hl)
11132 370C  C5          	push	bc
11133 370D  3E 50       	ld	a,0x50
11134 370F  5A          	ld	e,d
11135 3710  57          	ld	d,a
11136 3711  D5          	push	de
11137 3712  CD 00 00    	call	__moduchar_callee
11138 3715  C1          	pop	bc
11139 3716  7D          	ld	a,l
11140 3717  B7          	or	a, a
11141 3718  20 3E       	jr	NZ,l_LaunchSkullBoneC_00105
11142 371A  59          	ld	e, c
11143 371B  50          	ld	d, b
11144 371C  13          	inc	de
11145 371D  1A          	ld	a,(de)
11146 371E  C6 14       	add	a,0x14
11147 3720  DD 77 FF    	ld	(ix-1),a
11148 3723  0A          	ld	a,(bc)
11149 3724  C6 F0       	add	a,0xf0
11150 3726  DD 77 FE    	ld	(ix-2),a
11151 3729  C5          	push	bc
11152 372A  D5          	push	de
11153 372B  DD 66 06    	ld	h,(ix+6)
11154 372E  AF          	xor	a,a
11155 372F  6F          	ld	l,a
11156 3730  E5          	push	hl
11157 3731  DD 66 FF    	ld	h,(ix-1)
11158 3734  DD 6E FE    	ld	l,(ix-2)
11159 3737  E5          	push	hl
11160 3738  CD B1 36    	call	_CreateCustomBoneC
11161 373B  F1          	pop	af
11162 373C  F1          	pop	af
11163 373D  D1          	pop	de
11164 373E  C1          	pop	bc
11165 373F  1A          	ld	a,(de)
11166 3740  C6 14       	add	a,0x14
11167 3742  57          	ld	d,a
11168 3743  0A          	ld	a,(bc)
11169 3744  C6 28       	add	a,0x28
11170 3746  47          	ld	b,a
11171 3747  DD 7E 06    	ld	a,(ix+6)
11172 374A  F5          	push	af
11173 374B  33          	inc	sp
11174 374C  3E 10       	ld	a,0x10
11175 374E  5A          	ld	e,d
11176 374F  57          	ld	d,a
11177 3750  D5          	push	de
11178 3751  C5          	push	bc
11179 3752  33          	inc	sp
11180 3753  CD B1 36    	call	_CreateCustomBoneC
11181 3756  F1          	pop	af
11182 3757  F1          	pop	af
11183 3758              l_LaunchSkullBoneC_00105:
11184 3758  DD F9       	ld	sp, ix
11185 375A  DD E1       	pop	ix
11186 375C  C9          	ret
11187 375D              	SECTION code_compiler
11188 375D              ;	---------------------------------
11189 375D              ; Function DoSkullShootDirection
11190 375D              ; ---------------------------------
11191 375D              _DoSkullShootDirection:
11192 375D  DD E5       	push	ix
11193 375F  DD 21 00 00 	ld	ix,0
11194 3763  DD 39       	add	ix,sp
11195 3765  DD 6E 04    	ld	l,(ix+4)
11196 3768  DD 66 05    	ld	h,(ix+5)
11197 376B  4D          	ld	c,l
11198 376C  44          	ld	b,h
11199 376D  23          	inc	hl
11200 376E  23          	inc	hl
11201 376F  23          	inc	hl
11202 3770  7E          	ld	a,(hl)
11203 3771  E6 3F       	and	a,0x3f
11204 3773  D6 20       	sub	a,0x20
11205 3775  20 21       	jr	NZ,l_DoSkullShootDirection_00103
11206 3777  69          	ld	l, c
11207 3778  60          	ld	h, b
11208 3779  23          	inc	hl
11209 377A  7E          	ld	a,(hl)
11210 377B  C6 38       	add	a,0x38
11211 377D  57          	ld	d,a
11212 377E  0A          	ld	a,(bc)
11213 377F  C6 10       	add	a,0x10
11214 3781  47          	ld	b,a
11215 3782  3E 07       	ld	a,0x07
11216 3784  F5          	push	af
11217 3785  33          	inc	sp
11218 3786  21 00 00    	ld	hl,_skullshootvely
11219 3789  E5          	push	hl
11220 378A  21 00 00    	ld	hl,_skullshootvelx
11221 378D  E5          	push	hl
11222 378E  58          	ld	e,b
11223 378F  D5          	push	de
11224 3790  CD 40 5C    	call	_SpreadEnemyshootDirection
11225 3793  21 07 00    	ld	hl,7
11226 3796  39          	add	hl,sp
11227 3797  F9          	ld	sp,hl
11228 3798              l_DoSkullShootDirection_00103:
11229 3798  DD E1       	pop	ix
11230 379A  C9          	ret
11231 379B              	SECTION code_compiler
11232 379B              ;	---------------------------------
11233 379B              ; Function DoSkullShootDirectionB
11234 379B              ; ---------------------------------
11235 379B              _DoSkullShootDirectionB:
11236 379B  DD E5       	push	ix
11237 379D  DD 21 00 00 	ld	ix,0
11238 37A1  DD 39       	add	ix,sp
11239 37A3  F5          	push	af
11240 37A4  F5          	push	af
11241 37A5  DD 6E 04    	ld	l,(ix+4)
11242 37A8  DD 66 05    	ld	h,(ix+5)
11243 37AB  4D          	ld	c,l
11244 37AC  44          	ld	b,h
11245 37AD  23          	inc	hl
11246 37AE  23          	inc	hl
11247 37AF  23          	inc	hl
11248 37B0  56          	ld	d,(hl)
11249 37B1  C5          	push	bc
11250 37B2  3E 18       	ld	a,0x18
11251 37B4  5A          	ld	e,d
11252 37B5  57          	ld	d,a
11253 37B6  D5          	push	de
11254 37B7  CD 00 00    	call	__moduchar_callee
11255 37BA  C1          	pop	bc
11256 37BB  7D          	ld	a,l
11257 37BC  B7          	or	a, a
11258 37BD  20 4E       	jr	NZ,l_DoSkullShootDirectionB_00106
11259 37BF  DD 71 FD    	ld	(ix-3),c
11260 37C2  DD 70 FE    	ld	(ix-2),b
11261 37C5  DD 36 FC 00 	ld	(ix-4),0x00
11262 37C9              l_DoSkullShootDirectionB_00104:
11263 37C9  DD 6E FD    	ld	l,(ix-3)
11264 37CC  DD 66 FE    	ld	h,(ix-2)
11265 37CF  23          	inc	hl
11266 37D0  7E          	ld	a,(hl)
11267 37D1  DD 77 FF    	ld	(ix-1),a
11268 37D4  C5          	push	bc
11269 37D5  CD 00 00    	call	_myRand
11270 37D8  5D          	ld	e, l
11271 37D9  16 30       	ld	d,0x30
11272 37DB  D5          	push	de
11273 37DC  CD 00 00    	call	__moduchar_callee
11274 37DF  C1          	pop	bc
11275 37E0  5D          	ld	e,l
11276 37E1  DD 7E FF    	ld	a,(ix-1)
11277 37E4  83          	add	a, e
11278 37E5  5F          	ld	e,a
11279 37E6  0A          	ld	a,(bc)
11280 37E7  57          	ld	d,a
11281 37E8  C5          	push	bc
11282 37E9  D5          	push	de
11283 37EA  CD 00 00    	call	_myRand
11284 37ED  D1          	pop	de
11285 37EE  C1          	pop	bc
11286 37EF  7D          	ld	a,l
11287 37F0  E6 1F       	and	a,0x1f
11288 37F2  82          	add	a,d
11289 37F3  57          	ld	d,a
11290 37F4  C5          	push	bc
11291 37F5  3E 01       	ld	a,0x01
11292 37F7  F5          	push	af
11293 37F8  33          	inc	sp
11294 37F9  7B          	ld	a,e
11295 37FA  5A          	ld	e,d
11296 37FB  57          	ld	d,a
11297 37FC  D5          	push	de
11298 37FD  CD D7 5C    	call	_InitEnemyshoot
11299 3800  F1          	pop	af
11300 3801  33          	inc	sp
11301 3802  C1          	pop	bc
11302 3803  DD 34 FC    	inc	(ix-4)
11303 3806  DD 7E FC    	ld	a,(ix-4)
11304 3809  D6 02       	sub	a,0x02
11305 380B  38 BC       	jr	C,l_DoSkullShootDirectionB_00104
11306 380D              l_DoSkullShootDirectionB_00106:
11307 380D  DD F9       	ld	sp, ix
11308 380F  DD E1       	pop	ix
11309 3811  C9          	ret
11310 3812              	SECTION code_compiler
11311 3812              ;	---------------------------------
11312 3812              ; Function UpdateStage6EndBoss0
11313 3812              ; ---------------------------------
11314 3812              _UpdateStage6EndBoss0:
11315 3812  DD E5       	push	ix
11316 3814  DD 21 00 00 	ld	ix,0
11317 3818  DD 39       	add	ix,sp
11318 381A  DD 6E 04    	ld	l,(ix+4)
11319 381D  DD 66 05    	ld	h,(ix+5)
11320 3820  4D          	ld	c,l
11321 3821  44          	ld	b,h
11322 3822  23          	inc	hl
11323 3823  5E          	ld	e,(hl)
11324 3824  1C          	inc	e
11325 3825  73          	ld	(hl),e
11326 3826  7B          	ld	a,e
11327 3827  D6 1E       	sub	a,0x1e
11328 3829  38 0F       	jr	C,l_UpdateStage6EndBoss0_00103
11329 382B  3E 01       	ld	a,0x01
11330 382D  F5          	push	af
11331 382E  33          	inc	sp
11332 382F  21 01 00    	ld	hl,0x0001
11333 3832  E5          	push	hl
11334 3833  C5          	push	bc
11335 3834  CD F6 35    	call	_ResetSkullState
11336 3837  F1          	pop	af
11337 3838  F1          	pop	af
11338 3839  33          	inc	sp
11339 383A              l_UpdateStage6EndBoss0_00103:
11340 383A  DD E1       	pop	ix
11341 383C  C9          	ret
11342 383D              	SECTION code_compiler
11343 383D              ;	---------------------------------
11344 383D              ; Function UpdateStage6EndBoss1
11345 383D              ; ---------------------------------
11346 383D              _UpdateStage6EndBoss1:
11347 383D  DD E5       	push	ix
11348 383F  DD 21 00 00 	ld	ix,0
11349 3843  DD 39       	add	ix,sp
11350 3845  DD 4E 04    	ld	c,(ix+4)
11351 3848  DD 46 05    	ld	b,(ix+5)
11352 384B  21 06 00    	ld	hl,0x0006
11353 384E  09          	add	hl,bc
11354 384F  7E          	ld	a, (hl)
11355 3850  D6 0A       	sub	a,0x0a
11356 3852  30 11       	jr	NC,l_UpdateStage6EndBoss1_00106
11357 3854  3E 01       	ld	a,0x01
11358 3856  F5          	push	af
11359 3857  33          	inc	sp
11360 3858  21 02 00    	ld	hl,0x0002
11361 385B  E5          	push	hl
11362 385C  C5          	push	bc
11363 385D  CD F6 35    	call	_ResetSkullState
11364 3860  F1          	pop	af
11365 3861  F1          	pop	af
11366 3862  33          	inc	sp
11367 3863  18 4D       	jr	l_UpdateStage6EndBoss1_00108
11368 3865              l_UpdateStage6EndBoss1_00106:
11369 3865  C5          	push	bc
11370 3866  21 01 00    	ld	hl,0x0001
11371 3869  E5          	push	hl
11372 386A  C5          	push	bc
11373 386B  CD 29 36    	call	_DoSkullSinusMovement
11374 386E  F1          	pop	af
11375 386F  F1          	pop	af
11376 3870  C1          	pop	bc
11377 3871  3A 89 00    	ld	a,(_numenemies)
11378 3874  D6 04       	sub	a,0x04
11379 3876  30 2F       	jr	NC,l_UpdateStage6EndBoss1_00104
11380 3878  69          	ld	l, c
11381 3879  60          	ld	h, b
11382 387A  23          	inc	hl
11383 387B  23          	inc	hl
11384 387C  23          	inc	hl
11385 387D  7E          	ld	a,(hl)
11386 387E  E6 0F       	and	a,0x0f
11387 3880  20 25       	jr	NZ,l_UpdateStage6EndBoss1_00104
11388 3882  69          	ld	l, c
11389 3883  60          	ld	h, b
11390 3884  23          	inc	hl
11391 3885  7E          	ld	a,(hl)
11392 3886  C6 38       	add	a,0x38
11393 3888  57          	ld	d,a
11394 3889  0A          	ld	a,(bc)
11395 388A  5F          	ld	e,a
11396 388B  D5          	push	de
11397 388C  CD 00 00    	call	_myRand
11398 388F  06 18       	ld	b,0x18
11399 3891  4D          	ld	c, l
11400 3892  C5          	push	bc
11401 3893  CD 00 00    	call	__moduchar_callee
11402 3896  D1          	pop	de
11403 3897  7B          	ld	a,e
11404 3898  85          	add	a,l
11405 3899  4D          	ld	c,l
11406 389A  47          	ld	b,a
11407 389B  3E 3B       	ld	a,0x3b
11408 389D  5A          	ld	e,d
11409 389E  57          	ld	d,a
11410 389F  D5          	push	de
11411 38A0  C5          	push	bc
11412 38A1  33          	inc	sp
11413 38A2  CD 23 49    	call	_InitEnemy
11414 38A5  F1          	pop	af
11415 38A6  33          	inc	sp
11416 38A7              l_UpdateStage6EndBoss1_00104:
11417 38A7  DD 6E 04    	ld	l,(ix+4)
11418 38AA  DD 66 05    	ld	h,(ix+5)
11419 38AD  E5          	push	hl
11420 38AE  CD 5D 37    	call	_DoSkullShootDirection
11421 38B1  F1          	pop	af
11422 38B2              l_UpdateStage6EndBoss1_00108:
11423 38B2  DD E1       	pop	ix
11424 38B4  C9          	ret
11425 38B5              	SECTION code_compiler
11426 38B5              ;	---------------------------------
11427 38B5              ; Function UpdateStage6EndBoss2
11428 38B5              ; ---------------------------------
11429 38B5              _UpdateStage6EndBoss2:
11430 38B5  DD E5       	push	ix
11431 38B7  DD 21 00 00 	ld	ix,0
11432 38BB  DD 39       	add	ix,sp
11433 38BD  DD 4E 04    	ld	c,(ix+4)
11434 38C0  DD 46 05    	ld	b,(ix+5)
11435 38C3  21 06 00    	ld	hl,0x0006
11436 38C6  09          	add	hl,bc
11437 38C7  7E          	ld	a, (hl)
11438 38C8  D6 0A       	sub	a,0x0a
11439 38CA  30 11       	jr	NC,l_UpdateStage6EndBoss2_00106
11440 38CC  3E 01       	ld	a,0x01
11441 38CE  F5          	push	af
11442 38CF  33          	inc	sp
11443 38D0  21 03 00    	ld	hl,0x0003
11444 38D3  E5          	push	hl
11445 38D4  C5          	push	bc
11446 38D5  CD F6 35    	call	_ResetSkullState
11447 38D8  F1          	pop	af
11448 38D9  F1          	pop	af
11449 38DA  33          	inc	sp
11450 38DB  18 57       	jr	l_UpdateStage6EndBoss2_00108
11451 38DD              l_UpdateStage6EndBoss2_00106:
11452 38DD  C5          	push	bc
11453 38DE  21 02 00    	ld	hl,0x0002
11454 38E1  E5          	push	hl
11455 38E2  C5          	push	bc
11456 38E3  CD 29 36    	call	_DoSkullSinusMovement
11457 38E6  F1          	pop	af
11458 38E7  F1          	pop	af
11459 38E8  C1          	pop	bc
11460 38E9  3A 89 00    	ld	a,(_numenemies)
11461 38EC  D6 04       	sub	a,0x04
11462 38EE  30 39       	jr	NC,l_UpdateStage6EndBoss2_00104
11463 38F0  69          	ld	l, c
11464 38F1  60          	ld	h, b
11465 38F2  23          	inc	hl
11466 38F3  23          	inc	hl
11467 38F4  23          	inc	hl
11468 38F5  56          	ld	d,(hl)
11469 38F6  C5          	push	bc
11470 38F7  3E 0C       	ld	a,0x0c
11471 38F9  5A          	ld	e,d
11472 38FA  57          	ld	d,a
11473 38FB  D5          	push	de
11474 38FC  CD 00 00    	call	__moduchar_callee
11475 38FF  C1          	pop	bc
11476 3900  7D          	ld	a,l
11477 3901  B7          	or	a, a
11478 3902  20 25       	jr	NZ,l_UpdateStage6EndBoss2_00104
11479 3904  69          	ld	l, c
11480 3905  60          	ld	h, b
11481 3906  23          	inc	hl
11482 3907  7E          	ld	a,(hl)
11483 3908  C6 38       	add	a,0x38
11484 390A  57          	ld	d,a
11485 390B  0A          	ld	a,(bc)
11486 390C  5F          	ld	e,a
11487 390D  D5          	push	de
11488 390E  CD 00 00    	call	_myRand
11489 3911  06 18       	ld	b,0x18
11490 3913  4D          	ld	c, l
11491 3914  C5          	push	bc
11492 3915  CD 00 00    	call	__moduchar_callee
11493 3918  D1          	pop	de
11494 3919  7B          	ld	a,e
11495 391A  85          	add	a,l
11496 391B  4D          	ld	c,l
11497 391C  47          	ld	b,a
11498 391D  3E 3C       	ld	a,0x3c
11499 391F  5A          	ld	e,d
11500 3920  57          	ld	d,a
11501 3921  D5          	push	de
11502 3922  C5          	push	bc
11503 3923  33          	inc	sp
11504 3924  CD 23 49    	call	_InitEnemy
11505 3927  F1          	pop	af
11506 3928  33          	inc	sp
11507 3929              l_UpdateStage6EndBoss2_00104:
11508 3929  DD 6E 04    	ld	l,(ix+4)
11509 392C  DD 66 05    	ld	h,(ix+5)
11510 392F  E5          	push	hl
11511 3930  CD 9B 37    	call	_DoSkullShootDirectionB
11512 3933  F1          	pop	af
11513 3934              l_UpdateStage6EndBoss2_00108:
11514 3934  DD E1       	pop	ix
11515 3936  C9          	ret
11516 3937              	SECTION code_compiler
11517 3937              ;	---------------------------------
11518 3937              ; Function UpdateStage6EndBoss3
11519 3937              ; ---------------------------------
11520 3937              _UpdateStage6EndBoss3:
11521 3937  DD E5       	push	ix
11522 3939  DD 21 00 00 	ld	ix,0
11523 393D  DD 39       	add	ix,sp
11524 393F  F5          	push	af
11525 3940  F5          	push	af
11526 3941  3B          	dec	sp
11527 3942  DD 4E 04    	ld	c,(ix+4)
11528 3945  DD 46 05    	ld	b,(ix+5)
11529 3948  21 06 00    	ld	hl,0x0006
11530 394B  09          	add	hl,bc
11531 394C  7E          	ld	a,(hl)
11532 394D  D6 0A       	sub	a,0x0a
11533 394F  30 12       	jr	NC,l_UpdateStage6EndBoss3_00112
11534 3951  3E 01       	ld	a,0x01
11535 3953  F5          	push	af
11536 3954  33          	inc	sp
11537 3955  21 04 00    	ld	hl,0x0004
11538 3958  E5          	push	hl
11539 3959  C5          	push	bc
11540 395A  CD F6 35    	call	_ResetSkullState
11541 395D  F1          	pop	af
11542 395E  F1          	pop	af
11543 395F  33          	inc	sp
11544 3960  C3 6A 3A    	jp	l_UpdateStage6EndBoss3_00114
11545 3963              l_UpdateStage6EndBoss3_00112:
11546 3963  21 03 00    	ld	hl,0x0003
11547 3966  09          	add	hl,bc
11548 3967  DD 75 FE    	ld	(ix-2),l
11549 396A  DD 74 FF    	ld	(ix-1),h
11550 396D  56          	ld	d,(hl)
11551 396E  C5          	push	bc
11552 396F  3E 30       	ld	a,0x30
11553 3971  5A          	ld	e,d
11554 3972  57          	ld	d,a
11555 3973  D5          	push	de
11556 3974  CD 00 00    	call	__moduchar_callee
11557 3977  C1          	pop	bc
11558 3978  5D          	ld	e,l
11559 3979  21 01 00    	ld	hl,0x0001
11560 397C  09          	add	hl,bc
11561 397D  DD 75 FC    	ld	(ix-4),l
11562 3980  DD 74 FD    	ld	(ix-3),h
11563 3983  7B          	ld	a,e
11564 3984  D6 10       	sub	a,0x10
11565 3986  20 1D       	jr	NZ,l_UpdateStage6EndBoss3_00102
11566 3988  DD 6E FC    	ld	l,(ix-4)
11567 398B  DD 66 FD    	ld	h,(ix-3)
11568 398E  7E          	ld	a,(hl)
11569 398F  C6 10       	add	a,0x10
11570 3991  5F          	ld	e,a
11571 3992  0A          	ld	a,(bc)
11572 3993  C6 F0       	add	a,0xf0
11573 3995  57          	ld	d,a
11574 3996  C5          	push	bc
11575 3997  21 00 00    	ld	hl,0x0000
11576 399A  E5          	push	hl
11577 399B  7B          	ld	a,e
11578 399C  5A          	ld	e,d
11579 399D  57          	ld	d,a
11580 399E  D5          	push	de
11581 399F  CD B1 36    	call	_CreateCustomBoneC
11582 39A2  F1          	pop	af
11583 39A3  F1          	pop	af
11584 39A4  C1          	pop	bc
11585 39A5              l_UpdateStage6EndBoss3_00102:
11586 39A5  DD 6E FE    	ld	l,(ix-2)
11587 39A8  DD 66 FF    	ld	h,(ix-1)
11588 39AB  56          	ld	d,(hl)
11589 39AC  C5          	push	bc
11590 39AD  3E 30       	ld	a,0x30
11591 39AF  5A          	ld	e,d
11592 39B0  57          	ld	d,a
11593 39B1  D5          	push	de
11594 39B2  CD 00 00    	call	__moduchar_callee
11595 39B5  C1          	pop	bc
11596 39B6  7D          	ld	a,l
11597 39B7  D6 20       	sub	a,0x20
11598 39B9  20 1A       	jr	NZ,l_UpdateStage6EndBoss3_00104
11599 39BB  DD 6E FC    	ld	l,(ix-4)
11600 39BE  DD 66 FD    	ld	h,(ix-3)
11601 39C1  7E          	ld	a,(hl)
11602 39C2  C6 10       	add	a,0x10
11603 39C4  57          	ld	d,a
11604 39C5  0A          	ld	a,(bc)
11605 39C6  C6 28       	add	a,0x28
11606 39C8  5F          	ld	e,a
11607 39C9  C5          	push	bc
11608 39CA  21 10 00    	ld	hl,0x0010
11609 39CD  E5          	push	hl
11610 39CE  D5          	push	de
11611 39CF  CD B1 36    	call	_CreateCustomBoneC
11612 39D2  F1          	pop	af
11613 39D3  F1          	pop	af
11614 39D4  C1          	pop	bc
11615 39D5              l_UpdateStage6EndBoss3_00104:
11616 39D5  3A 12 00    	ld	a,(_playerx)
11617 39D8  5F          	ld	e,a
11618 39D9  16 00       	ld	d,0x00
11619 39DB  21 10 00    	ld	hl,0x0010
11620 39DE  19          	add	hl,de
11621 39DF  DD 75 FE    	ld	(ix-2),l
11622 39E2  DD 74 FF    	ld	(ix-1),h
11623 39E5  0A          	ld	a,(bc)
11624 39E6  DD 77 FB    	ld	(ix-5),a
11625 39E9  6F          	ld	l, a
11626 39EA  26 00       	ld	h,0x00
11627 39EC  3E 14       	ld	a,+((0x0014) & 0xFF)
11628 39EE  85          	add	a,l
11629 39EF  6F          	ld	l,a
11630 39F0  3E 00       	ld	a,+((0x0014) / 256)
11631 39F2  8C          	adc	a,h
11632 39F3  67          	ld	h,a
11633 39F4  DD 7E FE    	ld	a,(ix-2)
11634 39F7  95          	sub	a, l
11635 39F8  DD 7E FF    	ld	a,(ix-1)
11636 39FB  9C          	sbc	a, h
11637 39FC  E2 01 3A    	jp	PO, l_UpdateStage6EndBoss3_00140
11638 39FF  EE 80       	xor	a,0x80
11639 3A01              l_UpdateStage6EndBoss3_00140:
11640 3A01  F2 0C 3A    	jp	P,l_UpdateStage6EndBoss3_00109
11641 3A04  DD 7E FB    	ld	a,(ix-5)
11642 3A07  C6 FE       	add	a,0xfe
11643 3A09  02          	ld	(bc),a
11644 3A0A  18 5E       	jr	l_UpdateStage6EndBoss3_00114
11645 3A0C              l_UpdateStage6EndBoss3_00109:
11646 3A0C  7D          	ld	a,l
11647 3A0D  93          	sub	a, e
11648 3A0E  7C          	ld	a,h
11649 3A0F  9A          	sbc	a, d
11650 3A10  E2 15 3A    	jp	PO, l_UpdateStage6EndBoss3_00141
11651 3A13  EE 80       	xor	a,0x80
11652 3A15              l_UpdateStage6EndBoss3_00141:
11653 3A15  F2 20 3A    	jp	P,l_UpdateStage6EndBoss3_00106
11654 3A18  DD 7E FB    	ld	a,(ix-5)
11655 3A1B  C6 02       	add	a,0x02
11656 3A1D  02          	ld	(bc),a
11657 3A1E  18 4A       	jr	l_UpdateStage6EndBoss3_00114
11658 3A20              l_UpdateStage6EndBoss3_00106:
11659 3A20  DD 6E FC    	ld	l,(ix-4)
11660 3A23  DD 66 FD    	ld	h,(ix-3)
11661 3A26  7E          	ld	a,(hl)
11662 3A27  C6 18       	add	a,0x18
11663 3A29  5F          	ld	e,a
11664 3A2A  DD 7E FB    	ld	a,(ix-5)
11665 3A2D  C6 08       	add	a,0x08
11666 3A2F  57          	ld	d,a
11667 3A30  C5          	push	bc
11668 3A31  3E 2D       	ld	a,0x2d
11669 3A33  F5          	push	af
11670 3A34  33          	inc	sp
11671 3A35  7B          	ld	a,e
11672 3A36  5A          	ld	e,d
11673 3A37  57          	ld	d,a
11674 3A38  D5          	push	de
11675 3A39  CD 23 49    	call	_InitEnemy
11676 3A3C  F1          	pop	af
11677 3A3D  33          	inc	sp
11678 3A3E  C1          	pop	bc
11679 3A3F  DD 6E FC    	ld	l,(ix-4)
11680 3A42  DD 66 FD    	ld	h,(ix-3)
11681 3A45  7E          	ld	a,(hl)
11682 3A46  C6 18       	add	a,0x18
11683 3A48  5F          	ld	e,a
11684 3A49  0A          	ld	a,(bc)
11685 3A4A  C6 18       	add	a,0x18
11686 3A4C  57          	ld	d,a
11687 3A4D  C5          	push	bc
11688 3A4E  3E 2D       	ld	a,0x2d
11689 3A50  F5          	push	af
11690 3A51  33          	inc	sp
11691 3A52  7B          	ld	a,e
11692 3A53  5A          	ld	e,d
11693 3A54  57          	ld	d,a
11694 3A55  D5          	push	de
11695 3A56  CD 23 49    	call	_InitEnemy
11696 3A59  F1          	pop	af
11697 3A5A  33          	inc	sp
11698 3A5B  C1          	pop	bc
11699 3A5C  AF          	xor	a, a
11700 3A5D  F5          	push	af
11701 3A5E  33          	inc	sp
11702 3A5F  21 03 00    	ld	hl,0x0003
11703 3A62  E5          	push	hl
11704 3A63  C5          	push	bc
11705 3A64  CD F6 35    	call	_ResetSkullState
11706 3A67  F1          	pop	af
11707 3A68  F1          	pop	af
11708 3A69  33          	inc	sp
11709 3A6A              l_UpdateStage6EndBoss3_00114:
11710 3A6A  DD F9       	ld	sp, ix
11711 3A6C  DD E1       	pop	ix
11712 3A6E  C9          	ret
11713 3A6F              	SECTION code_compiler
11714 3A6F              ;	---------------------------------
11715 3A6F              ; Function UpdateStage6EndBoss3A
11716 3A6F              ; ---------------------------------
11717 3A6F              _UpdateStage6EndBoss3A:
11718 3A6F  DD E5       	push	ix
11719 3A71  DD 21 00 00 	ld	ix,0
11720 3A75  DD 39       	add	ix,sp
11721 3A77  F5          	push	af
11722 3A78  DD 4E 04    	ld	c,(ix+4)
11723 3A7B  DD 46 05    	ld	b,(ix+5)
11724 3A7E  21 06 00    	ld	hl,0x0006
11725 3A81  09          	add	hl,bc
11726 3A82  7E          	ld	a, (hl)
11727 3A83  D6 0A       	sub	a,0x0a
11728 3A85  30 02       	jr	NC,l_UpdateStage6EndBoss3A_00102
11729 3A87  36 0A       	ld	(hl),0x0a
11730 3A89              l_UpdateStage6EndBoss3A_00102:
11731 3A89  59          	ld	e, c
11732 3A8A  50          	ld	d, b
11733 3A8B  13          	inc	de
11734 3A8C  13          	inc	de
11735 3A8D  13          	inc	de
11736 3A8E  1A          	ld	a,(de)
11737 3A8F  6F          	ld	l,a
11738 3A90  3E 23       	ld	a,0x23
11739 3A92  95          	sub	a, l
11740 3A93  30 0F       	jr	NC,l_UpdateStage6EndBoss3A_00105
11741 3A95  21 04 00    	ld	hl,0x0004
11742 3A98  09          	add	hl,bc
11743 3A99  E3          	ex	(sp), hl
11744 3A9A  21 05 00    	ld	hl,0x0005
11745 3A9D  09          	add	hl,bc
11746 3A9E  4E          	ld	c,(hl)
11747 3A9F  E1          	pop	hl
11748 3AA0  E5          	push	hl
11749 3AA1  71          	ld	(hl),c
11750 3AA2  AF          	xor	a, a
11751 3AA3  12          	ld	(de),a
11752 3AA4              l_UpdateStage6EndBoss3A_00105:
11753 3AA4  DD F9       	ld	sp, ix
11754 3AA6  DD E1       	pop	ix
11755 3AA8  C9          	ret
11756 3AA9              	SECTION code_compiler
11757 3AA9              ;	---------------------------------
11758 3AA9              ; Function UpdateStage6EndBoss4
11759 3AA9              ; ---------------------------------
11760 3AA9              _UpdateStage6EndBoss4:
11761 3AA9  DD E5       	push	ix
11762 3AAB  DD 21 00 00 	ld	ix,0
11763 3AAF  DD 39       	add	ix,sp
11764 3AB1  3B          	dec	sp
11765 3AB2  DD 4E 04    	ld	c,(ix+4)
11766 3AB5  DD 46 05    	ld	b,(ix+5)
11767 3AB8  21 06 00    	ld	hl,0x0006
11768 3ABB  09          	add	hl,bc
11769 3ABC  7E          	ld	a, (hl)
11770 3ABD  D6 0A       	sub	a,0x0a
11771 3ABF  30 11       	jr	NC,l_UpdateStage6EndBoss4_00104
11772 3AC1  3E 01       	ld	a,0x01
11773 3AC3  F5          	push	af
11774 3AC4  33          	inc	sp
11775 3AC5  21 05 00    	ld	hl,0x0005
11776 3AC8  E5          	push	hl
11777 3AC9  C5          	push	bc
11778 3ACA  CD F6 35    	call	_ResetSkullState
11779 3ACD  F1          	pop	af
11780 3ACE  F1          	pop	af
11781 3ACF  33          	inc	sp
11782 3AD0  18 61       	jr	l_UpdateStage6EndBoss4_00106
11783 3AD2              l_UpdateStage6EndBoss4_00104:
11784 3AD2  C5          	push	bc
11785 3AD3  21 03 00    	ld	hl,0x0003
11786 3AD6  E5          	push	hl
11787 3AD7  C5          	push	bc
11788 3AD8  CD 29 36    	call	_DoSkullSinusMovement
11789 3ADB  F1          	pop	af
11790 3ADC  F1          	pop	af
11791 3ADD  AF          	xor	a, a
11792 3ADE  F5          	push	af
11793 3ADF  33          	inc	sp
11794 3AE0  DD 6E 04    	ld	l,(ix+4)
11795 3AE3  DD 66 05    	ld	h,(ix+5)
11796 3AE6  E5          	push	hl
11797 3AE7  CD F0 36    	call	_LaunchSkullBoneC
11798 3AEA  F1          	pop	af
11799 3AEB  33          	inc	sp
11800 3AEC  E1          	pop	hl
11801 3AED  4D          	ld	c,l
11802 3AEE  44          	ld	b,h
11803 3AEF  23          	inc	hl
11804 3AF0  23          	inc	hl
11805 3AF1  23          	inc	hl
11806 3AF2  56          	ld	d,(hl)
11807 3AF3  C5          	push	bc
11808 3AF4  3E 0C       	ld	a,0x0c
11809 3AF6  5A          	ld	e,d
11810 3AF7  57          	ld	d,a
11811 3AF8  D5          	push	de
11812 3AF9  CD 00 00    	call	__moduchar_callee
11813 3AFC  C1          	pop	bc
11814 3AFD  7D          	ld	a,l
11815 3AFE  B7          	or	a, a
11816 3AFF  20 32       	jr	NZ,l_UpdateStage6EndBoss4_00106
11817 3B01  69          	ld	l, c
11818 3B02  60          	ld	h, b
11819 3B03  23          	inc	hl
11820 3B04  7E          	ld	a,(hl)
11821 3B05  DD 77 FF    	ld	(ix-1),a
11822 3B08  C5          	push	bc
11823 3B09  CD 00 00    	call	_myRand
11824 3B0C  5D          	ld	e, l
11825 3B0D  16 30       	ld	d,0x30
11826 3B0F  D5          	push	de
11827 3B10  CD 00 00    	call	__moduchar_callee
11828 3B13  C1          	pop	bc
11829 3B14  5D          	ld	e,l
11830 3B15  DD 7E FF    	ld	a,(ix-1)
11831 3B18  83          	add	a, e
11832 3B19  57          	ld	d,a
11833 3B1A  0A          	ld	a,(bc)
11834 3B1B  5F          	ld	e,a
11835 3B1C  D5          	push	de
11836 3B1D  CD 00 00    	call	_myRand
11837 3B20  D1          	pop	de
11838 3B21  7D          	ld	a,l
11839 3B22  E6 1F       	and	a,0x1f
11840 3B24  4F          	ld	c, a
11841 3B25  83          	add	a,e
11842 3B26  47          	ld	b,a
11843 3B27  3E 01       	ld	a,0x01
11844 3B29  5A          	ld	e,d
11845 3B2A  57          	ld	d,a
11846 3B2B  D5          	push	de
11847 3B2C  C5          	push	bc
11848 3B2D  33          	inc	sp
11849 3B2E  CD D7 5C    	call	_InitEnemyshoot
11850 3B31  F1          	pop	af
11851 3B32  33          	inc	sp
11852 3B33              l_UpdateStage6EndBoss4_00106:
11853 3B33  33          	inc	sp
11854 3B34  DD E1       	pop	ix
11855 3B36  C9          	ret
11856 3B37              	SECTION code_compiler
11857 3B37              ;	---------------------------------
11858 3B37              ; Function UpdateStage6EndBoss5
11859 3B37              ; ---------------------------------
11860 3B37              _UpdateStage6EndBoss5:
11861 3B37  DD E5       	push	ix
11862 3B39  DD 21 00 00 	ld	ix,0
11863 3B3D  DD 39       	add	ix,sp
11864 3B3F  F5          	push	af
11865 3B40  F5          	push	af
11866 3B41  3B          	dec	sp
11867 3B42  3A 12 00    	ld	a,(_playerx)
11868 3B45  5F          	ld	e,a
11869 3B46  16 00       	ld	d,0x00
11870 3B48  21 10 00    	ld	hl,0x0010
11871 3B4B  19          	add	hl,de
11872 3B4C  45          	ld	b,l
11873 3B4D  5C          	ld	e,h
11874 3B4E  DD 7E 04    	ld	a,(ix+4)
11875 3B51  DD 77 FE    	ld	(ix-2),a
11876 3B54  6F          	ld	l, a
11877 3B55  DD 7E 05    	ld	a,(ix+5)
11878 3B58  DD 77 FF    	ld	(ix-1),a
11879 3B5B  67          	ld	h,a
11880 3B5C  4E          	ld	c,(hl)
11881 3B5D  51          	ld	d,c
11882 3B5E  2E 00       	ld	l,0x00
11883 3B60  78          	ld	a,b
11884 3B61  92          	sub	a, d
11885 3B62  7B          	ld	a,e
11886 3B63  9D          	sbc	a, l
11887 3B64  E2 69 3B    	jp	PO, l_UpdateStage6EndBoss5_00133
11888 3B67  EE 80       	xor	a,0x80
11889 3B69              l_UpdateStage6EndBoss5_00133:
11890 3B69  F2 74 3B    	jp	P,l_UpdateStage6EndBoss5_00102
11891 3B6C  0D          	dec	c
11892 3B6D  DD 6E FE    	ld	l,(ix-2)
11893 3B70  DD 66 FF    	ld	h,(ix-1)
11894 3B73  71          	ld	(hl),c
11895 3B74              l_UpdateStage6EndBoss5_00102:
11896 3B74  DD 6E FE    	ld	l,(ix-2)
11897 3B77  DD 66 FF    	ld	h,(ix-1)
11898 3B7A  7E          	ld	a,(hl)
11899 3B7B  DD 77 FB    	ld	(ix-5),a
11900 3B7E  4F          	ld	c, a
11901 3B7F  06 00       	ld	b,0x00
11902 3B81  21 28 00    	ld	hl,0x0028
11903 3B84  09          	add	hl,bc
11904 3B85  3A 12 00    	ld	a,(_playerx)
11905 3B88  5F          	ld	e,a
11906 3B89  16 00       	ld	d,0x00
11907 3B8B  7D          	ld	a,l
11908 3B8C  93          	sub	a,e
11909 3B8D  7C          	ld	a,h
11910 3B8E  9A          	sbc	a, d
11911 3B8F  E2 94 3B    	jp	PO, l_UpdateStage6EndBoss5_00134
11912 3B92  EE 80       	xor	a,0x80
11913 3B94              l_UpdateStage6EndBoss5_00134:
11914 3B94  F2 A2 3B    	jp	P,l_UpdateStage6EndBoss5_00104
11915 3B97  DD 4E FB    	ld	c,(ix-5)
11916 3B9A  0C          	inc	c
11917 3B9B  DD 6E FE    	ld	l,(ix-2)
11918 3B9E  DD 66 FF    	ld	h,(ix-1)
11919 3BA1  71          	ld	(hl),c
11920 3BA2              l_UpdateStage6EndBoss5_00104:
11921 3BA2  2A 13 00    	ld	hl,(_playery)
11922 3BA5  26 00       	ld	h,0x00
11923 3BA7  01 10 00    	ld	bc,0x0010
11924 3BAA  09          	add	hl,bc
11925 3BAB  EB          	ex	de,hl
11926 3BAC  DD 4E FE    	ld	c,(ix-2)
11927 3BAF  DD 46 FF    	ld	b,(ix-1)
11928 3BB2  03          	inc	bc
11929 3BB3  0A          	ld	a,(bc)
11930 3BB4  DD 77 FB    	ld	(ix-5),a
11931 3BB7  6F          	ld	l, a
11932 3BB8  26 00       	ld	h,0x00
11933 3BBA  7B          	ld	a,e
11934 3BBB  95          	sub	a, l
11935 3BBC  7A          	ld	a,d
11936 3BBD  9C          	sbc	a, h
11937 3BBE  E2 C3 3B    	jp	PO, l_UpdateStage6EndBoss5_00135
11938 3BC1  EE 80       	xor	a,0x80
11939 3BC3              l_UpdateStage6EndBoss5_00135:
11940 3BC3  F2 CC 3B    	jp	P,l_UpdateStage6EndBoss5_00106
11941 3BC6  DD 5E FB    	ld	e,(ix-5)
11942 3BC9  1D          	dec	e
11943 3BCA  7B          	ld	a,e
11944 3BCB  02          	ld	(bc),a
11945 3BCC              l_UpdateStage6EndBoss5_00106:
11946 3BCC  0A          	ld	a,(bc)
11947 3BCD  DD 77 FB    	ld	(ix-5),a
11948 3BD0  5F          	ld	e, a
11949 3BD1  16 00       	ld	d,0x00
11950 3BD3  21 28 00    	ld	hl,0x0028
11951 3BD6  19          	add	hl,de
11952 3BD7  DD 75 FC    	ld	(ix-4),l
11953 3BDA  DD 74 FD    	ld	(ix-3),h
11954 3BDD  3A 13 00    	ld	a,(_playery)
11955 3BE0  5F          	ld	e,a
11956 3BE1  16 00       	ld	d,0x00
11957 3BE3  DD 7E FC    	ld	a,(ix-4)
11958 3BE6  93          	sub	a, e
11959 3BE7  DD 7E FD    	ld	a,(ix-3)
11960 3BEA  9A          	sbc	a, d
11961 3BEB  E2 F0 3B    	jp	PO, l_UpdateStage6EndBoss5_00136
11962 3BEE  EE 80       	xor	a,0x80
11963 3BF0              l_UpdateStage6EndBoss5_00136:
11964 3BF0  F2 F8 3B    	jp	P,l_UpdateStage6EndBoss5_00108
11965 3BF3  DD 7E FB    	ld	a,(ix-5)
11966 3BF6  3C          	inc	a
11967 3BF7  02          	ld	(bc),a
11968 3BF8              l_UpdateStage6EndBoss5_00108:
11969 3BF8  C5          	push	bc
11970 3BF9  3E 08       	ld	a,0x08
11971 3BFB  F5          	push	af
11972 3BFC  33          	inc	sp
11973 3BFD  DD 6E FE    	ld	l,(ix-2)
11974 3C00  DD 66 FF    	ld	h,(ix-1)
11975 3C03  E5          	push	hl
11976 3C04  CD F0 36    	call	_LaunchSkullBoneC
11977 3C07  F1          	pop	af
11978 3C08  33          	inc	sp
11979 3C09  C1          	pop	bc
11980 3C0A  DD 6E FE    	ld	l,(ix-2)
11981 3C0D  DD 66 FF    	ld	h,(ix-1)
11982 3C10  23          	inc	hl
11983 3C11  23          	inc	hl
11984 3C12  23          	inc	hl
11985 3C13  7E          	ld	a,(hl)
11986 3C14  5F          	ld	e,a
11987 3C15  E6 07       	and	a,0x07
11988 3C17  20 2A       	jr	NZ,l_UpdateStage6EndBoss5_00111
11989 3C19  7B          	ld	a,e
11990 3C1A  0F          	rrca
11991 3C1B  0F          	rrca
11992 3C1C  0F          	rrca
11993 3C1D  E6 0F       	and	a,+(0x1f&0x0f)
11994 3C1F  5F          	ld	e,a
11995 3C20  16 00       	ld	d,0x00
11996 3C22  21 00 00    	ld	hl,_skullbshootvely
11997 3C25  19          	add	hl, de
11998 3C26  16 00       	ld	d,0x00
11999 3C28  21 00 00    	ld	hl,_skullbshootvelx
12000 3C2B  19          	add	hl,de
12001 3C2C  56          	ld	d,(hl)
12002 3C2D  5A          	ld	e,d
12003 3C2E  0A          	ld	a,(bc)
12004 3C2F  C6 1C       	add	a,0x1c
12005 3C31  47          	ld	b,a
12006 3C32  DD 6E FE    	ld	l,(ix-2)
12007 3C35  DD 66 FF    	ld	h,(ix-1)
12008 3C38  7E          	ld	a,(hl)
12009 3C39  C6 14       	add	a,0x14
12010 3C3B  4F          	ld	c,a
12011 3C3C  D5          	push	de
12012 3C3D  C5          	push	bc
12013 3C3E  CD F7 5B    	call	_InitEnemyshootDirection
12014 3C41  F1          	pop	af
12015 3C42  F1          	pop	af
12016 3C43              l_UpdateStage6EndBoss5_00111:
12017 3C43  DD F9       	ld	sp, ix
12018 3C45  DD E1       	pop	ix
12019 3C47  C9          	ret
12020 3C48              	SECTION code_compiler
12021 3C48              ;	---------------------------------
12022 3C48              ; Function UpdateStage6EndBoss
12023 3C48              ; ---------------------------------
12024 3C48              _UpdateStage6EndBoss:
12025 3C48  DD E5       	push	ix
12026 3C4A  DD 21 00 00 	ld	ix,0
12027 3C4E  DD 39       	add	ix,sp
12028 3C50  DD 6E 04    	ld	l,(ix+4)
12029 3C53  DD 66 05    	ld	h,(ix+5)
12030 3C56  5D          	ld	e,l
12031 3C57  54          	ld	d,h
12032 3C58  23          	inc	hl
12033 3C59  46          	ld	b,(hl)
12034 3C5A  1A          	ld	a,(de)
12035 3C5B  4F          	ld	c,a
12036 3C5C  D5          	push	de
12037 3C5D  21 28 38    	ld	hl,0x3828
12038 3C60  E5          	push	hl
12039 3C61  C5          	push	bc
12040 3C62  21 6D 01    	ld	hl,0x016d
12041 3C65  E5          	push	hl
12042 3C66  CD 46 00    	call	_DrawSpriteArray
12043 3C69  21 06 00    	ld	hl,6
12044 3C6C  39          	add	hl,sp
12045 3C6D  F9          	ld	sp,hl
12046 3C6E  D1          	pop	de
12047 3C6F  01 00 00    	ld	bc,_updatestage6endbossfunctions+0
12048 3C72  6B          	ld	l, e
12049 3C73  62          	ld	h, d
12050 3C74  23          	inc	hl
12051 3C75  23          	inc	hl
12052 3C76  23          	inc	hl
12053 3C77  23          	inc	hl
12054 3C78  6E          	ld	l,(hl)
12055 3C79  26 00       	ld	h,0x00
12056 3C7B  29          	add	hl, hl
12057 3C7C  09          	add	hl,bc
12058 3C7D  4E          	ld	c,(hl)
12059 3C7E  23          	inc	hl
12060 3C7F  66          	ld	h,(hl)
12061 3C80  D5          	push	de
12062 3C81  69          	ld	l, c
12063 3C82  CD 00 00    	call	___sdcc_call_hl
12064 3C85  F1          	pop	af
12065 3C86  2E 01       	ld	l,0x01
12066 3C88  DD E1       	pop	ix
12067 3C8A  C9          	ret
12068 3C8B              	SECTION code_compiler
12069 3C8B              ;	---------------------------------
12070 3C8B              ; Function UpdateStage6EndBossB0
12071 3C8B              ; ---------------------------------
12072 3C8B              _UpdateStage6EndBossB0:
12073 3C8B  DD E5       	push	ix
12074 3C8D  DD 21 00 00 	ld	ix,0
12075 3C91  DD 39       	add	ix,sp
12076 3C93  DD 6E 04    	ld	l,(ix+4)
12077 3C96  DD 66 05    	ld	h,(ix+5)
12078 3C99  4D          	ld	c,l
12079 3C9A  44          	ld	b,h
12080 3C9B  23          	inc	hl
12081 3C9C  5E          	ld	e,(hl)
12082 3C9D  1D          	dec	e
12083 3C9E  73          	ld	(hl),e
12084 3C9F  3E 20       	ld	a,0x20
12085 3CA1  93          	sub	a, e
12086 3CA2  38 13       	jr	C,l_UpdateStage6EndBossB0_00103
12087 3CA4  21 04 00    	ld	hl,0x0004
12088 3CA7  09          	add	hl,bc
12089 3CA8  36 01       	ld	(hl),0x01
12090 3CAA  21 05 00    	ld	hl,0x0005
12091 3CAD  09          	add	hl,bc
12092 3CAE  36 00       	ld	(hl),0x00
12093 3CB0  69          	ld	l,c
12094 3CB1  60          	ld	h,b
12095 3CB2  23          	inc	hl
12096 3CB3  23          	inc	hl
12097 3CB4  23          	inc	hl
12098 3CB5  36 00       	ld	(hl),0x00
12099 3CB7              l_UpdateStage6EndBossB0_00103:
12100 3CB7  DD E1       	pop	ix
12101 3CB9  C9          	ret
12102 3CBA              	SECTION code_compiler
12103 3CBA              ;	---------------------------------
12104 3CBA              ; Function UpdateStage6EndBossB1
12105 3CBA              ; ---------------------------------
12106 3CBA              _UpdateStage6EndBossB1:
12107 3CBA  DD E5       	push	ix
12108 3CBC  DD 21 00 00 	ld	ix,0
12109 3CC0  DD 39       	add	ix,sp
12110 3CC2  3B          	dec	sp
12111 3CC3  21 03 00    	ld	hl,0x0003
12112 3CC6  E5          	push	hl
12113 3CC7  DD 6E 04    	ld	l,(ix+4)
12114 3CCA  DD 66 05    	ld	h,(ix+5)
12115 3CCD  E5          	push	hl
12116 3CCE  CD 29 36    	call	_DoSkullSinusMovement
12117 3CD1  F1          	pop	af
12118 3CD2  F1          	pop	af
12119 3CD3  AF          	xor	a, a
12120 3CD4  F5          	push	af
12121 3CD5  33          	inc	sp
12122 3CD6  DD 6E 04    	ld	l,(ix+4)
12123 3CD9  DD 66 05    	ld	h,(ix+5)
12124 3CDC  E5          	push	hl
12125 3CDD  CD F0 36    	call	_LaunchSkullBoneC
12126 3CE0  F1          	pop	af
12127 3CE1  33          	inc	sp
12128 3CE2  DD 6E 04    	ld	l,(ix+4)
12129 3CE5  DD 66 05    	ld	h,(ix+5)
12130 3CE8  4D          	ld	c,l
12131 3CE9  44          	ld	b,h
12132 3CEA  23          	inc	hl
12133 3CEB  23          	inc	hl
12134 3CEC  23          	inc	hl
12135 3CED  56          	ld	d,(hl)
12136 3CEE  C5          	push	bc
12137 3CEF  3E 0C       	ld	a,0x0c
12138 3CF1  5A          	ld	e,d
12139 3CF2  57          	ld	d,a
12140 3CF3  D5          	push	de
12141 3CF4  CD 00 00    	call	__moduchar_callee
12142 3CF7  C1          	pop	bc
12143 3CF8  7D          	ld	a,l
12144 3CF9  D6 02       	sub	a,0x02
12145 3CFB  20 32       	jr	NZ,l_UpdateStage6EndBossB1_00103
12146 3CFD  69          	ld	l, c
12147 3CFE  60          	ld	h, b
12148 3CFF  23          	inc	hl
12149 3D00  7E          	ld	a,(hl)
12150 3D01  DD 77 FF    	ld	(ix-1),a
12151 3D04  C5          	push	bc
12152 3D05  CD 00 00    	call	_myRand
12153 3D08  5D          	ld	e, l
12154 3D09  16 30       	ld	d,0x30
12155 3D0B  D5          	push	de
12156 3D0C  CD 00 00    	call	__moduchar_callee
12157 3D0F  C1          	pop	bc
12158 3D10  5D          	ld	e,l
12159 3D11  DD 7E FF    	ld	a,(ix-1)
12160 3D14  83          	add	a, e
12161 3D15  57          	ld	d,a
12162 3D16  0A          	ld	a,(bc)
12163 3D17  5F          	ld	e,a
12164 3D18  D5          	push	de
12165 3D19  CD 00 00    	call	_myRand
12166 3D1C  D1          	pop	de
12167 3D1D  7D          	ld	a,l
12168 3D1E  E6 1F       	and	a,0x1f
12169 3D20  4F          	ld	c, a
12170 3D21  83          	add	a,e
12171 3D22  47          	ld	b,a
12172 3D23  3E 01       	ld	a,0x01
12173 3D25  5A          	ld	e,d
12174 3D26  57          	ld	d,a
12175 3D27  D5          	push	de
12176 3D28  C5          	push	bc
12177 3D29  33          	inc	sp
12178 3D2A  CD D7 5C    	call	_InitEnemyshoot
12179 3D2D  F1          	pop	af
12180 3D2E  33          	inc	sp
12181 3D2F              l_UpdateStage6EndBossB1_00103:
12182 3D2F  33          	inc	sp
12183 3D30  DD E1       	pop	ix
12184 3D32  C9          	ret
12185 3D33              	SECTION code_compiler
12186 3D33              ;	---------------------------------
12187 3D33              ; Function InitStage6EndBossB
12188 3D33              ; ---------------------------------
12189 3D33              _InitStage6EndBossB:
12190 3D33  DD E5       	push	ix
12191 3D35  DD 21 00 00 	ld	ix,0
12192 3D39  DD 39       	add	ix,sp
12193 3D3B  3E 0D       	ld	a,0x0d
12194 3D3D  F5          	push	af
12195 3D3E  33          	inc	sp
12196 3D3F  21 6D 01    	ld	hl,0x016d
12197 3D42  E5          	push	hl
12198 3D43  21 00 00    	ld	hl,_skullb_psgcompr
12199 3D46  E5          	push	hl
12200 3D47  CD FD 00    	call	_LoadSprite
12201 3D4A  F1          	pop	af
12202 3D4B  F1          	pop	af
12203 3D4C  33          	inc	sp
12204 3D4D  DD E1       	pop	ix
12205 3D4F  C9          	ret
12206 3D50              	SECTION code_compiler
12207 3D50              ;	---------------------------------
12208 3D50              ; Function UpdateStage6EndBossB
12209 3D50              ; ---------------------------------
12210 3D50              _UpdateStage6EndBossB:
12211 3D50  DD E5       	push	ix
12212 3D52  DD 21 00 00 	ld	ix,0
12213 3D56  DD 39       	add	ix,sp
12214 3D58  DD 6E 04    	ld	l,(ix+4)
12215 3D5B  DD 66 05    	ld	h,(ix+5)
12216 3D5E  4D          	ld	c,l
12217 3D5F  44          	ld	b,h
12218 3D60  23          	inc	hl
12219 3D61  56          	ld	d,(hl)
12220 3D62  0A          	ld	a,(bc)
12221 3D63  5F          	ld	e,a
12222 3D64  C5          	push	bc
12223 3D65  21 28 38    	ld	hl,0x3828
12224 3D68  E5          	push	hl
12225 3D69  D5          	push	de
12226 3D6A  21 6D 01    	ld	hl,0x016d
12227 3D6D  E5          	push	hl
12228 3D6E  CD 46 00    	call	_DrawSpriteArray
12229 3D71  21 06 00    	ld	hl,6
12230 3D74  39          	add	hl,sp
12231 3D75  F9          	ld	sp,hl
12232 3D76  C1          	pop	bc
12233 3D77  21 04 00    	ld	hl,0x0004
12234 3D7A  09          	add	hl,bc
12235 3D7B  7E          	ld	a,(hl)
12236 3D7C  B7          	or	a, a
12237 3D7D  20 07       	jr	NZ,l_UpdateStage6EndBossB_00102
12238 3D7F  C5          	push	bc
12239 3D80  CD 8B 3C    	call	_UpdateStage6EndBossB0
12240 3D83  F1          	pop	af
12241 3D84  18 05       	jr	l_UpdateStage6EndBossB_00103
12242 3D86              l_UpdateStage6EndBossB_00102:
12243 3D86  C5          	push	bc
12244 3D87  CD BA 3C    	call	_UpdateStage6EndBossB1
12245 3D8A  F1          	pop	af
12246 3D8B              l_UpdateStage6EndBossB_00103:
12247 3D8B  2E 01       	ld	l,0x01
12248 3D8D  DD E1       	pop	ix
12249 3D8F  C9          	ret
12250 3D90              	SECTION code_compiler
12251 3D90              ;	---------------------------------
12252 3D90              ; Function UpdateStage6Object
12253 3D90              ; ---------------------------------
12254 3D90              _UpdateStage6Object:
12255 3D90  DD E5       	push	ix
12256 3D92  DD 21 00 00 	ld	ix,0
12257 3D96  DD 39       	add	ix,sp
12258 3D98  DD 6E 04    	ld	l,(ix+4)
12259 3D9B  DD 66 05    	ld	h,(ix+5)
12260 3D9E  23          	inc	hl
12261 3D9F  23          	inc	hl
12262 3DA0  23          	inc	hl
12263 3DA1  4E          	ld	c,(hl)
12264 3DA2  3E 80       	ld	a,0x80
12265 3DA4  91          	sub	a, c
12266 3DA5  30 20       	jr	NC,l_UpdateStage6Object_00102
12267 3DA7  CD CB 09    	call	_updatescrollact
12268 3DAA  21 0C 01    	ld	hl,0x010c
12269 3DAD  E5          	push	hl
12270 3DAE  21 00 00    	ld	hl,_escape_psg
12271 3DB1  E5          	push	hl
12272 3DB2  CD 16 04    	call	_PlayMusic
12273 3DB5  F1          	pop	af
12274 3DB6  21 00 00    	ld	hl,0x0000
12275 3DB9  E3          	ex	(sp),hl
12276 3DBA  21 00 00    	ld	hl,_stage6scriptb
12277 3DBD  E5          	push	hl
12278 3DBE  CD F4 49    	call	_InitScript
12279 3DC1  F1          	pop	af
12280 3DC2  F1          	pop	af
12281 3DC3  2E 00       	ld	l,0x00
12282 3DC5  18 02       	jr	l_UpdateStage6Object_00104
12283 3DC7              l_UpdateStage6Object_00102:
12284 3DC7  2E 01       	ld	l,0x01
12285 3DC9              l_UpdateStage6Object_00104:
12286 3DC9  DD E1       	pop	ix
12287 3DCB  C9          	ret
12288 3DCC              	SECTION code_compiler
12289 3DCC              ;	---------------------------------
12290 3DCC              ; Function SkullAccelX
12291 3DCC              ; ---------------------------------
12292 3DCC              _SkullAccelX:
12293 3DCC  DD E5       	push	ix
12294 3DCE  DD 21 00 00 	ld	ix,0
12295 3DD2  DD 39       	add	ix,sp
12296 3DD4  3B          	dec	sp
12297 3DD5  DD 5E 04    	ld	e,(ix+4)
12298 3DD8  DD 56 05    	ld	d,(ix+5)
12299 3DDB  1A          	ld	a,(de)
12300 3DDC  DD 77 FF    	ld	(ix-1),a
12301 3DDF  21 05 00    	ld	hl,0x0005
12302 3DE2  19          	add	hl,de
12303 3DE3  DD 7E FF    	ld	a,(ix-1)
12304 3DE6  4D          	ld	c,l
12305 3DE7  44          	ld	b,h
12306 3DE8  21 12 00    	ld	hl,_playerx
12307 3DEB  96          	sub	a, (hl)
12308 3DEC  30 09       	jr	NC,l_SkullAccelX_00102
12309 3DEE  0A          	ld	a,(bc)
12310 3DEF  6F          	ld	l,a
12311 3DF0  D6 10       	sub	a,0x10
12312 3DF2  30 03       	jr	NC,l_SkullAccelX_00102
12313 3DF4  7D          	ld	a,l
12314 3DF5  3C          	inc	a
12315 3DF6  02          	ld	(bc),a
12316 3DF7              l_SkullAccelX_00102:
12317 3DF7  1A          	ld	a,(de)
12318 3DF8  5F          	ld	e,a
12319 3DF9  3A 12 00    	ld	a,(_playerx)
12320 3DFC  93          	sub	a, e
12321 3DFD  30 07       	jr	NC,l_SkullAccelX_00107
12322 3DFF  0A          	ld	a,(bc)
12323 3E00  B7          	or	a, a
12324 3E01  28 03       	jr	Z,l_SkullAccelX_00107
12325 3E03  C6 FF       	add	a,0xff
12326 3E05  02          	ld	(bc),a
12327 3E06              l_SkullAccelX_00107:
12328 3E06  33          	inc	sp
12329 3E07  DD E1       	pop	ix
12330 3E09  C9          	ret
12331 3E0A              	SECTION code_compiler
12332 3E0A              ;	---------------------------------
12333 3E0A              ; Function SkullAccelY
12334 3E0A              ; ---------------------------------
12335 3E0A              _SkullAccelY:
12336 3E0A  DD E5       	push	ix
12337 3E0C  DD 21 00 00 	ld	ix,0
12338 3E10  DD 39       	add	ix,sp
12339 3E12  3B          	dec	sp
12340 3E13  DD 4E 04    	ld	c,(ix+4)
12341 3E16  DD 46 05    	ld	b,(ix+5)
12342 3E19  59          	ld	e, c
12343 3E1A  50          	ld	d, b
12344 3E1B  13          	inc	de
12345 3E1C  1A          	ld	a,(de)
12346 3E1D  DD 77 FF    	ld	(ix-1),a
12347 3E20  03          	inc	bc
12348 3E21  03          	inc	bc
12349 3E22  03          	inc	bc
12350 3E23  03          	inc	bc
12351 3E24  DD 7E FF    	ld	a,(ix-1)
12352 3E27  21 13 00    	ld	hl,_playery
12353 3E2A  96          	sub	a, (hl)
12354 3E2B  30 09       	jr	NC,l_SkullAccelY_00102
12355 3E2D  0A          	ld	a,(bc)
12356 3E2E  6F          	ld	l,a
12357 3E2F  D6 10       	sub	a,0x10
12358 3E31  30 03       	jr	NC,l_SkullAccelY_00102
12359 3E33  7D          	ld	a,l
12360 3E34  3C          	inc	a
12361 3E35  02          	ld	(bc),a
12362 3E36              l_SkullAccelY_00102:
12363 3E36  1A          	ld	a,(de)
12364 3E37  5F          	ld	e,a
12365 3E38  3A 13 00    	ld	a,(_playery)
12366 3E3B  93          	sub	a, e
12367 3E3C  30 07       	jr	NC,l_SkullAccelY_00107
12368 3E3E  0A          	ld	a,(bc)
12369 3E3F  B7          	or	a, a
12370 3E40  28 03       	jr	Z,l_SkullAccelY_00107
12371 3E42  C6 FF       	add	a,0xff
12372 3E44  02          	ld	(bc),a
12373 3E45              l_SkullAccelY_00107:
12374 3E45  33          	inc	sp
12375 3E46  DD E1       	pop	ix
12376 3E48  C9          	ret
12377 3E49              	SECTION code_compiler
12378 3E49              ;	---------------------------------
12379 3E49              ; Function SkullBoneCMove
12380 3E49              ; ---------------------------------
12381 3E49              _SkullBoneCMove:
12382 3E49  DD E5       	push	ix
12383 3E4B  DD 21 00 00 	ld	ix,0
12384 3E4F  DD 39       	add	ix,sp
12385 3E51  3B          	dec	sp
12386 3E52  DD 5E 04    	ld	e,(ix+4)
12387 3E55  DD 56 05    	ld	d,(ix+5)
12388 3E58  1A          	ld	a,(de)
12389 3E59  4F          	ld	c,a
12390 3E5A  6B          	ld	l, e
12391 3E5B  62          	ld	h, d
12392 3E5C  23          	inc	hl
12393 3E5D  23          	inc	hl
12394 3E5E  23          	inc	hl
12395 3E5F  23          	inc	hl
12396 3E60  23          	inc	hl
12397 3E61  46          	ld	b,(hl)
12398 3E62  CB 38       	srl	b
12399 3E64  CB 38       	srl	b
12400 3E66  05          	dec	b
12401 3E67  05          	dec	b
12402 3E68  79          	ld	a,c
12403 3E69  80          	add	a, b
12404 3E6A  12          	ld	(de),a
12405 3E6B  4B          	ld	c, e
12406 3E6C  42          	ld	b, d
12407 3E6D  03          	inc	bc
12408 3E6E  0A          	ld	a,(bc)
12409 3E6F  DD 77 FF    	ld	(ix-1),a
12410 3E72  EB          	ex	de,hl
12411 3E73  11 04 00    	ld	de,0x0004
12412 3E76  19          	add	hl, de
12413 3E77  5E          	ld	e,(hl)
12414 3E78  CB 3B       	srl	e
12415 3E7A  CB 3B       	srl	e
12416 3E7C  1D          	dec	e
12417 3E7D  1D          	dec	e
12418 3E7E  DD 7E FF    	ld	a,(ix-1)
12419 3E81  83          	add	a, e
12420 3E82  02          	ld	(bc),a
12421 3E83  33          	inc	sp
12422 3E84  DD E1       	pop	ix
12423 3E86  C9          	ret
12424 3E87              	SECTION code_compiler
12425 3E87              ;	---------------------------------
12426 3E87              ; Function InitSkullBoneA
12427 3E87              ; ---------------------------------
12428 3E87              _InitSkullBoneA:
12429 3E87  DD E5       	push	ix
12430 3E89  DD 21 00 00 	ld	ix,0
12431 3E8D  DD 39       	add	ix,sp
12432 3E8F  DD 6E 04    	ld	l,(ix+4)
12433 3E92  DD 66 05    	ld	h,(ix+5)
12434 3E95  E5          	push	hl
12435 3E96  CD 68 46    	call	_GetEnemyDirection
12436 3E99  F1          	pop	af
12437 3E9A  DD 4E 04    	ld	c,(ix+4)
12438 3E9D  DD 46 05    	ld	b,(ix+5)
12439 3EA0  21 04 00    	ld	hl,0x0004
12440 3EA3  09          	add	hl,bc
12441 3EA4  7E          	ld	a,(hl)
12442 3EA5  87          	add	a, a
12443 3EA6  77          	ld	(hl),a
12444 3EA7  21 05 00    	ld	hl,0x0005
12445 3EAA  09          	add	hl,bc
12446 3EAB  7E          	ld	a,(hl)
12447 3EAC  87          	add	a, a
12448 3EAD  77          	ld	(hl),a
12449 3EAE  DD E1       	pop	ix
12450 3EB0  C9          	ret
12451 3EB1              	SECTION code_compiler
12452 3EB1              ;	---------------------------------
12453 3EB1              ; Function InitSkullBoneB
12454 3EB1              ; ---------------------------------
12455 3EB1              _InitSkullBoneB:
12456 3EB1  DD E5       	push	ix
12457 3EB3  DD 21 00 00 	ld	ix,0
12458 3EB7  DD 39       	add	ix,sp
12459 3EB9  F5          	push	af
12460 3EBA  DD 4E 04    	ld	c,(ix+4)
12461 3EBD  DD 46 05    	ld	b,(ix+5)
12462 3EC0  21 04 00    	ld	hl,0x0004
12463 3EC3  09          	add	hl,bc
12464 3EC4  E3          	ex	(sp), hl
12465 3EC5  C5          	push	bc
12466 3EC6  CD 00 00    	call	_myRand
12467 3EC9  5D          	ld	e, l
12468 3ECA  16 07       	ld	d,0x07
12469 3ECC  D5          	push	de
12470 3ECD  CD 00 00    	call	__moduchar_callee
12471 3ED0  C1          	pop	bc
12472 3ED1  7D          	ld	a,l
12473 3ED2  C6 FD       	add	a,0xfd
12474 3ED4  E1          	pop	hl
12475 3ED5  E5          	push	hl
12476 3ED6  77          	ld	(hl),a
12477 3ED7  21 05 00    	ld	hl,0x0005
12478 3EDA  09          	add	hl,bc
12479 3EDB  36 04       	ld	(hl),0x04
12480 3EDD  DD F9       	ld	sp, ix
12481 3EDF  DD E1       	pop	ix
12482 3EE1  C9          	ret
12483 3EE2              	SECTION code_compiler
12484 3EE2              ;	---------------------------------
12485 3EE2              ; Function InitSkullBoneC
12486 3EE2              ; ---------------------------------
12487 3EE2              _InitSkullBoneC:
12488 3EE2  DD E5       	push	ix
12489 3EE4  DD 21 00 00 	ld	ix,0
12490 3EE8  DD 39       	add	ix,sp
12491 3EEA  DD 4E 04    	ld	c,(ix+4)
12492 3EED  DD 46 05    	ld	b,(ix+5)
12493 3EF0  21 05 00    	ld	hl,0x0005
12494 3EF3  09          	add	hl,bc
12495 3EF4  36 08       	ld	(hl),0x08
12496 3EF6  DD E1       	pop	ix
12497 3EF8  C9          	ret
12498 3EF9              	SECTION code_compiler
12499 3EF9              ;	---------------------------------
12500 3EF9              ; Function TestSkullOut
12501 3EF9              ; ---------------------------------
12502 3EF9              _TestSkullOut:
12503 3EF9  DD E5       	push	ix
12504 3EFB  DD 21 00 00 	ld	ix,0
12505 3EFF  DD 39       	add	ix,sp
12506 3F01  DD 4E 04    	ld	c,(ix+4)
12507 3F04  DD 46 05    	ld	b,(ix+5)
12508 3F07  0A          	ld	a,(bc)
12509 3F08  5F          	ld	e,a
12510 3F09  D6 04       	sub	a,0x04
12511 3F0B  38 17       	jr	C,l_TestSkullOut_00104
12512 3F0D  3E F0       	ld	a,0xf0
12513 3F0F  93          	sub	a, e
12514 3F10  38 12       	jr	C,l_TestSkullOut_00104
12515 3F12  69          	ld	l, c
12516 3F13  60          	ld	h, b
12517 3F14  23          	inc	hl
12518 3F15  7E          	ld	a,(hl)
12519 3F16  4F          	ld	c,a
12520 3F17  D6 04       	sub	a,0x04
12521 3F19  38 09       	jr	C,l_TestSkullOut_00104
12522 3F1B  3E C0       	ld	a,0xc0
12523 3F1D  91          	sub	a, c
12524 3F1E  38 04       	jr	C,l_TestSkullOut_00104
12525 3F20  2E 00       	ld	l,0x00
12526 3F22  18 02       	jr	l_TestSkullOut_00105
12527 3F24              l_TestSkullOut_00104:
12528 3F24  2E 01       	ld	l,0x01
12529 3F26              l_TestSkullOut_00105:
12530 3F26  DD E1       	pop	ix
12531 3F28  C9          	ret
12532 3F29              	SECTION code_compiler
12533 3F29              ;	---------------------------------
12534 3F29              ; Function UpdateSkullBoneAB
12535 3F29              ; ---------------------------------
12536 3F29              _UpdateSkullBoneAB:
12537 3F29  DD E5       	push	ix
12538 3F2B  DD 21 00 00 	ld	ix,0
12539 3F2F  DD 39       	add	ix,sp
12540 3F31  F5          	push	af
12541 3F32  DD 6E 04    	ld	l,(ix+4)
12542 3F35  DD 66 05    	ld	h,(ix+5)
12543 3F38  E5          	push	hl
12544 3F39  CD F9 3E    	call	_TestSkullOut
12545 3F3C  F1          	pop	af
12546 3F3D  7D          	ld	a,l
12547 3F3E  B7          	or	a, a
12548 3F3F  28 04       	jr	Z,l_UpdateSkullBoneAB_00102
12549 3F41  2E 00       	ld	l,0x00
12550 3F43  18 44       	jr	l_UpdateSkullBoneAB_00104
12551 3F45              l_UpdateSkullBoneAB_00102:
12552 3F45  DD 4E 04    	ld	c,(ix+4)
12553 3F48  DD 46 05    	ld	b,(ix+5)
12554 3F4B  0A          	ld	a,(bc)
12555 3F4C  5F          	ld	e,a
12556 3F4D  69          	ld	l, c
12557 3F4E  60          	ld	h, b
12558 3F4F  23          	inc	hl
12559 3F50  23          	inc	hl
12560 3F51  23          	inc	hl
12561 3F52  23          	inc	hl
12562 3F53  56          	ld	d,(hl)
12563 3F54  7B          	ld	a,e
12564 3F55  82          	add	a, d
12565 3F56  5F          	ld	e,a
12566 3F57  02          	ld	(bc),a
12567 3F58  21 01 00    	ld	hl,0x0001
12568 3F5B  09          	add	hl,bc
12569 3F5C  F1          	pop	af
12570 3F5D  56          	ld	d,(hl)
12571 3F5E  E5          	push	hl
12572 3F5F  69          	ld	l, c
12573 3F60  60          	ld	h, b
12574 3F61  23          	inc	hl
12575 3F62  23          	inc	hl
12576 3F63  23          	inc	hl
12577 3F64  23          	inc	hl
12578 3F65  23          	inc	hl
12579 3F66  6E          	ld	l,(hl)
12580 3F67  7A          	ld	a,d
12581 3F68  85          	add	a, l
12582 3F69  E1          	pop	hl
12583 3F6A  57          	ld	d,a
12584 3F6B  E5          	push	hl
12585 3F6C  72          	ld	(hl),d
12586 3F6D  69          	ld	l, c
12587 3F6E  60          	ld	h, b
12588 3F6F  23          	inc	hl
12589 3F70  23          	inc	hl
12590 3F71  23          	inc	hl
12591 3F72  7E          	ld	a,(hl)
12592 3F73  CB 3F       	srl	a
12593 3F75  E6 03       	and	a,0x03
12594 3F77  6F          	ld	l,a
12595 3F78  26 00       	ld	h,0x00
12596 3F7A  29          	add	hl, hl
12597 3F7B  29          	add	hl, hl
12598 3F7C  01 90 01    	ld	bc,0x0190
12599 3F7F  09          	add	hl,bc
12600 3F80  E5          	push	hl
12601 3F81  D5          	push	de
12602 3F82  CD A7 00    	call	_DrawQuadSprite
12603 3F85  F1          	pop	af
12604 3F86  F1          	pop	af
12605 3F87  2E 01       	ld	l,0x01
12606 3F89              l_UpdateSkullBoneAB_00104:
12607 3F89  DD F9       	ld	sp, ix
12608 3F8B  DD E1       	pop	ix
12609 3F8D  C9          	ret
12610 3F8E              	SECTION code_compiler
12611 3F8E              ;	---------------------------------
12612 3F8E              ; Function UpdateSkullBoneCMovement
12613 3F8E              ; ---------------------------------
12614 3F8E              _UpdateSkullBoneCMovement:
12615 3F8E  DD E5       	push	ix
12616 3F90  DD 21 00 00 	ld	ix,0
12617 3F94  DD 39       	add	ix,sp
12618 3F96  DD 6E 04    	ld	l,(ix+4)
12619 3F99  DD 66 05    	ld	h,(ix+5)
12620 3F9C  4D          	ld	c,l
12621 3F9D  44          	ld	b,h
12622 3F9E  23          	inc	hl
12623 3F9F  23          	inc	hl
12624 3FA0  23          	inc	hl
12625 3FA1  7E          	ld	a,(hl)
12626 3FA2  0F          	rrca
12627 3FA3  38 12       	jr	C,l_UpdateSkullBoneCMovement_00102
12628 3FA5  C5          	push	bc
12629 3FA6  C5          	push	bc
12630 3FA7  CD CC 3D    	call	_SkullAccelX
12631 3FAA  F1          	pop	af
12632 3FAB  DD 6E 04    	ld	l,(ix+4)
12633 3FAE  DD 66 05    	ld	h,(ix+5)
12634 3FB1  E5          	push	hl
12635 3FB2  CD 0A 3E    	call	_SkullAccelY
12636 3FB5  F1          	pop	af
12637 3FB6  C1          	pop	bc
12638 3FB7              l_UpdateSkullBoneCMovement_00102:
12639 3FB7  C5          	push	bc
12640 3FB8  CD 49 3E    	call	_SkullBoneCMove
12641 3FBB  F1          	pop	af
12642 3FBC  DD E1       	pop	ix
12643 3FBE  C9          	ret
12644 3FBF              	SECTION code_compiler
12645 3FBF              ;	---------------------------------
12646 3FBF              ; Function UpdateSkullBoneC
12647 3FBF              ; ---------------------------------
12648 3FBF              _UpdateSkullBoneC:
12649 3FBF  DD E5       	push	ix
12650 3FC1  DD 21 00 00 	ld	ix,0
12651 3FC5  DD 39       	add	ix,sp
12652 3FC7  DD 6E 04    	ld	l,(ix+4)
12653 3FCA  DD 66 05    	ld	h,(ix+5)
12654 3FCD  E5          	push	hl
12655 3FCE  CD F9 3E    	call	_TestSkullOut
12656 3FD1  F1          	pop	af
12657 3FD2  7D          	ld	a,l
12658 3FD3  B7          	or	a, a
12659 3FD4  28 04       	jr	Z,l_UpdateSkullBoneC_00102
12660 3FD6  2E 00       	ld	l,0x00
12661 3FD8  18 37       	jr	l_UpdateSkullBoneC_00103
12662 3FDA              l_UpdateSkullBoneC_00102:
12663 3FDA  DD 6E 04    	ld	l,(ix+4)
12664 3FDD  DD 66 05    	ld	h,(ix+5)
12665 3FE0  E5          	push	hl
12666 3FE1  CD 8E 3F    	call	_UpdateSkullBoneCMovement
12667 3FE4  F1          	pop	af
12668 3FE5  DD 6E 04    	ld	l,(ix+4)
12669 3FE8  DD 66 05    	ld	h,(ix+5)
12670 3FEB  45          	ld	b,l
12671 3FEC  4C          	ld	c,h
12672 3FED  23          	inc	hl
12673 3FEE  23          	inc	hl
12674 3FEF  23          	inc	hl
12675 3FF0  7E          	ld	a,(hl)
12676 3FF1  CB 3F       	srl	a
12677 3FF3  E6 03       	and	a,0x03
12678 3FF5  6F          	ld	l,a
12679 3FF6  26 00       	ld	h,0x00
12680 3FF8  29          	add	hl, hl
12681 3FF9  29          	add	hl, hl
12682 3FFA  11 90 01    	ld	de,0x0190
12683 3FFD  19          	add	hl,de
12684 3FFE  58          	ld	e,b
12685 3FFF  51          	ld	d,c
12686 4000  EB          	ex	de,hl
12687 4001  23          	inc	hl
12688 4002  7E          	ld	a,(hl)
12689 4003  68          	ld	l, b
12690 4004  61          	ld	h, c
12691 4005  46          	ld	b,(hl)
12692 4006  D5          	push	de
12693 4007  48          	ld	c,b
12694 4008  47          	ld	b,a
12695 4009  C5          	push	bc
12696 400A  CD A7 00    	call	_DrawQuadSprite
12697 400D  F1          	pop	af
12698 400E  F1          	pop	af
12699 400F  2E 01       	ld	l,0x01
12700 4011              l_UpdateSkullBoneC_00103:
12701 4011  DD E1       	pop	ix
12702 4013  C9          	ret
12703 4014              	SECTION code_compiler
12704 4014              ;	---------------------------------
12705 4014              ; Function InitTurnShip
12706 4014              ; ---------------------------------
12707 4014              _InitTurnShip:
12708 4014  DD E5       	push	ix
12709 4016  DD 21 00 00 	ld	ix,0
12710 401A  DD 39       	add	ix,sp
12711 401C  DD 4E 04    	ld	c,(ix+4)
12712 401F  DD 46 05    	ld	b,(ix+5)
12713 4022  21 04 00    	ld	hl,0x0004
12714 4025  09          	add	hl,bc
12715 4026  0A          	ld	a,(bc)
12716 4027  5F          	ld	e,a
12717 4028  3E 80       	ld	a,0x80
12718 402A  EB          	ex	de,hl
12719 402B  95          	sub	a, l
12720 402C  30 04       	jr	NC,l_InitTurnShip_00103
12721 402E  3E 00       	ld	a,0x00
12722 4030  18 02       	jr	l_InitTurnShip_00104
12723 4032              l_InitTurnShip_00103:
12724 4032  3E 02       	ld	a,0x02
12725 4034              l_InitTurnShip_00104:
12726 4034  12          	ld	(de),a
12727 4035  21 05 00    	ld	hl,0x0005
12728 4038  09          	add	hl,bc
12729 4039  36 40       	ld	(hl),0x40
12730 403B  DD E1       	pop	ix
12731 403D  C9          	ret
12732 403E              	SECTION code_compiler
12733 403E              ;	---------------------------------
12734 403E              ; Function UpdateTurnShip
12735 403E              ; ---------------------------------
12736 403E              _UpdateTurnShip:
12737 403E  DD E5       	push	ix
12738 4040  DD 21 00 00 	ld	ix,0
12739 4044  DD 39       	add	ix,sp
12740 4046  F5          	push	af
12741 4047  DD 6E 04    	ld	l,(ix+4)
12742 404A  DD 66 05    	ld	h,(ix+5)
12743 404D  4D          	ld	c,l
12744 404E  44          	ld	b,h
12745 404F  23          	inc	hl
12746 4050  5E          	ld	e,(hl)
12747 4051  1C          	inc	e
12748 4052  1C          	inc	e
12749 4053  1C          	inc	e
12750 4054  1C          	inc	e
12751 4055  73          	ld	(hl),e
12752 4056  DD 73 FF    	ld	(ix-1),e
12753 4059  3E C0       	ld	a,0xc0
12754 405B  93          	sub	a, e
12755 405C  30 04       	jr	NC,l_UpdateTurnShip_00102
12756 405E  2E 00       	ld	l,0x00
12757 4060  18 57       	jr	l_UpdateTurnShip_00105
12758 4062              l_UpdateTurnShip_00102:
12759 4062  3A 07 00    	ld	a,(_sprite164anim)
12760 4065  5F          	ld	e,a
12761 4066  16 00       	ld	d,0x00
12762 4068  21 69 01    	ld	hl,0x0169
12763 406B  19          	add	hl,de
12764 406C  0A          	ld	a,(bc)
12765 406D  EB          	ex	de,hl
12766 406E  DD 77 FE    	ld	(ix-2),a
12767 4071  C5          	push	bc
12768 4072  D5          	push	de
12769 4073  DD 66 FF    	ld	h,(ix-1)
12770 4076  DD 6E FE    	ld	l,(ix-2)
12771 4079  E5          	push	hl
12772 407A  CD A7 00    	call	_DrawQuadSprite
12773 407D  F1          	pop	af
12774 407E  F1          	pop	af
12775 407F  C1          	pop	bc
12776 4080  C5          	push	bc
12777 4081  3E 06       	ld	a,0x06
12778 4083  F5          	push	af
12779 4084  33          	inc	sp
12780 4085  C5          	push	bc
12781 4086  CD C6 5F    	call	_TestEnemyShootOne
12782 4089  F1          	pop	af
12783 408A  33          	inc	sp
12784 408B  C1          	pop	bc
12785 408C  0A          	ld	a,(bc)
12786 408D  DD 77 FE    	ld	(ix-2),a
12787 4090  21 05 00    	ld	hl,0x0005
12788 4093  09          	add	hl,bc
12789 4094  7E          	ld	a,(hl)
12790 4095  EB          	ex	de,hl
12791 4096  C6 C0       	add	a,0xc0
12792 4098  6F          	ld	l,a
12793 4099  DD 7E FE    	ld	a,(ix-2)
12794 409C  85          	add	a, l
12795 409D  02          	ld	(bc),a
12796 409E  69          	ld	l, c
12797 409F  60          	ld	h, b
12798 40A0  23          	inc	hl
12799 40A1  23          	inc	hl
12800 40A2  23          	inc	hl
12801 40A3  7E          	ld	a,(hl)
12802 40A4  E6 07       	and	a,0x07
12803 40A6  20 0F       	jr	NZ,l_UpdateTurnShip_00104
12804 40A8  1A          	ld	a,(de)
12805 40A9  DD 77 FE    	ld	(ix-2),a
12806 40AC  21 04 00    	ld	hl,0x0004
12807 40AF  09          	add	hl,bc
12808 40B0  4E          	ld	c,(hl)
12809 40B1  0D          	dec	c
12810 40B2  DD 7E FE    	ld	a,(ix-2)
12811 40B5  81          	add	a, c
12812 40B6  12          	ld	(de),a
12813 40B7              l_UpdateTurnShip_00104:
12814 40B7  2E 01       	ld	l,0x01
12815 40B9              l_UpdateTurnShip_00105:
12816 40B9  DD F9       	ld	sp, ix
12817 40BB  DD E1       	pop	ix
12818 40BD  C9          	ret
12819 40BE              	SECTION code_compiler
12820 40BE              ;	---------------------------------
12821 40BE              ; Function UpdateStage8Lateral
12822 40BE              ; ---------------------------------
12823 40BE              _UpdateStage8Lateral:
12824 40BE  DD E5       	push	ix
12825 40C0  DD 21 00 00 	ld	ix,0
12826 40C4  DD 39       	add	ix,sp
12827 40C6  F5          	push	af
12828 40C7  F5          	push	af
12829 40C8  3B          	dec	sp
12830 40C9  DD 4E 04    	ld	c,(ix+4)
12831 40CC  DD 46 05    	ld	b,(ix+5)
12832 40CF  0A          	ld	a,(bc)
12833 40D0  5F          	ld	e,a
12834 40D1  3E 04       	ld	a,0x04
12835 40D3  93          	sub	a, e
12836 40D4  30 05       	jr	NC,l_UpdateStage8Lateral_00101
12837 40D6  7B          	ld	a,e
12838 40D7  D6 FC       	sub	a,0xfc
12839 40D9  38 04       	jr	C,l_UpdateStage8Lateral_00102
12840 40DB              l_UpdateStage8Lateral_00101:
12841 40DB  2E 00       	ld	l,0x00
12842 40DD  18 76       	jr	l_UpdateStage8Lateral_00104
12843 40DF              l_UpdateStage8Lateral_00102:
12844 40DF  21 04 00    	ld	hl,0x0004
12845 40E2  09          	add	hl,bc
12846 40E3  DD 75 FC    	ld	(ix-4),l
12847 40E6  DD 74 FD    	ld	(ix-3),h
12848 40E9  7E          	ld	a,(hl)
12849 40EA  87          	add	a, a
12850 40EB  C6 FC       	add	a,0xfc
12851 40ED  83          	add	a,e
12852 40EE  DD 77 FB    	ld	(ix-5),a
12853 40F1  02          	ld	(bc),a
12854 40F2  DD 6E FC    	ld	l,(ix-4)
12855 40F5  DD 66 FD    	ld	h,(ix-3)
12856 40F8  5E          	ld	e,(hl)
12857 40F9  16 00       	ld	d,0x00
12858 40FB  21 B6 01    	ld	hl,0x01b6
12859 40FE  19          	add	hl,de
12860 40FF  EB          	ex	de,hl
12861 4100  21 01 00    	ld	hl,0x0001
12862 4103  09          	add	hl,bc
12863 4104  DD 75 FE    	ld	(ix-2),l
12864 4107  DD 74 FF    	ld	(ix-1),h
12865 410A  66          	ld	h,(hl)
12866 410B  C5          	push	bc
12867 410C  D5          	push	de
12868 410D  DD 6E FB    	ld	l,(ix-5)
12869 4110  E5          	push	hl
12870 4111  CD A7 00    	call	_DrawQuadSprite
12871 4114  F1          	pop	af
12872 4115  F1          	pop	af
12873 4116  C1          	pop	bc
12874 4117  3A 06 00    	ld	a,(_sprite82anim)
12875 411A  C6 BE       	add	a,0xbe
12876 411C  57          	ld	d,a
12877 411D  DD 6E FE    	ld	l,(ix-2)
12878 4120  DD 66 FF    	ld	h,(ix-1)
12879 4123  7E          	ld	a,(hl)
12880 4124  C6 04       	add	a,0x04
12881 4126  DD 77 FE    	ld	(ix-2),a
12882 4129  0A          	ld	a,(bc)
12883 412A  C6 10       	add	a,0x10
12884 412C  5F          	ld	e,a
12885 412D  DD 6E FC    	ld	l,(ix-4)
12886 4130  DD 66 FD    	ld	h,(ix-3)
12887 4133  7E          	ld	a,(hl)
12888 4134  D5          	push	de
12889 4135  5F          	ld	e,a
12890 4136  87          	add	a, a
12891 4137  83          	add	a, e
12892 4138  87          	add	a, a
12893 4139  D1          	pop	de
12894 413A  6F          	ld	l,a
12895 413B  7B          	ld	a,e
12896 413C  95          	sub	a, l
12897 413D  5F          	ld	e,a
12898 413E  C5          	push	bc
12899 413F  D5          	push	de
12900 4140  33          	inc	sp
12901 4141  DD 56 FE    	ld	d,(ix-2)
12902 4144  D5          	push	de
12903 4145  CD 00 00    	call	_SMS_addSprite_callee
12904 4148  C1          	pop	bc
12905 4149  3E 32       	ld	a,0x32
12906 414B  F5          	push	af
12907 414C  33          	inc	sp
12908 414D  C5          	push	bc
12909 414E  CD C6 5F    	call	_TestEnemyShootOne
12910 4151  F1          	pop	af
12911 4152  33          	inc	sp
12912 4153  2E 01       	ld	l,0x01
12913 4155              l_UpdateStage8Lateral_00104:
12914 4155  DD F9       	ld	sp, ix
12915 4157  DD E1       	pop	ix
12916 4159  C9          	ret
12917 415A              	SECTION code_compiler
12918 415A              ;	---------------------------------
12919 415A              ; Function InitStage8Lateral
12920 415A              ; ---------------------------------
12921 415A              _InitStage8Lateral:
12922 415A  DD E5       	push	ix
12923 415C  DD 21 00 00 	ld	ix,0
12924 4160  DD 39       	add	ix,sp
12925 4162  DD 5E 04    	ld	e,(ix+4)
12926 4165  DD 56 05    	ld	d,(ix+5)
12927 4168  21 04 00    	ld	hl,0x0004
12928 416B  19          	add	hl,de
12929 416C  1A          	ld	a,(de)
12930 416D  5F          	ld	e,a
12931 416E  3E 80       	ld	a,0x80
12932 4170  93          	sub	a,e
12933 4171  4D          	ld	c,l
12934 4172  44          	ld	b,h
12935 4173  30 04       	jr	NC,l_InitStage8Lateral_00103
12936 4175  3E 00       	ld	a,0x00
12937 4177  18 02       	jr	l_InitStage8Lateral_00104
12938 4179              l_InitStage8Lateral_00103:
12939 4179  3E 04       	ld	a,0x04
12940 417B              l_InitStage8Lateral_00104:
12941 417B  02          	ld	(bc),a
12942 417C  DD E1       	pop	ix
12943 417E  C9          	ret
12944 417F              	SECTION code_compiler
12945 417F              ;	---------------------------------
12946 417F              ; Function InitStage8BossA
12947 417F              ; ---------------------------------
12948 417F              _InitStage8BossA:
12949 417F  DD E5       	push	ix
12950 4181  DD 21 00 00 	ld	ix,0
12951 4185  DD 39       	add	ix,sp
12952 4187  21 FF 00    	ld	hl,_disablescroll
12953 418A  36 01       	ld	(hl),0x01
12954 418C  DD E1       	pop	ix
12955 418E  C9          	ret
12956 418F              	SECTION code_compiler
12957 418F              ;	---------------------------------
12958 418F              ; Function UpdateStage8BossA
12959 418F              ; ---------------------------------
12960 418F              _UpdateStage8BossA:
12961 418F  DD E5       	push	ix
12962 4191  DD 21 00 00 	ld	ix,0
12963 4195  DD 39       	add	ix,sp
12964 4197  DD 6E 04    	ld	l,(ix+4)
12965 419A  DD 66 05    	ld	h,(ix+5)
12966 419D  23          	inc	hl
12967 419E  23          	inc	hl
12968 419F  23          	inc	hl
12969 41A0  4E          	ld	c,(hl)
12970 41A1  3E 10       	ld	a,0x10
12971 41A3  91          	sub	a, c
12972 41A4  30 35       	jr	NC,l_UpdateStage8BossA_00112
12973 41A6  79          	ld	a,c
12974 41A7  FE D4       	cp	a,0xd4
12975 41A9  30 30       	jr	NC,l_UpdateStage8BossA_00112
12976 41AB  E6 07       	and	a,0x07
12977 41AD  20 56       	jr	NZ,l_UpdateStage8BossA_00113
12978 41AF  CD 00 00    	call	_myRand
12979 41B2  7D          	ld	a,l
12980 41B3  E6 7F       	and	a,0x7f
12981 41B5  C6 18       	add	a,0x18
12982 41B7  47          	ld	b,a
12983 41B8  C5          	push	bc
12984 41B9  CD 00 00    	call	_myRand
12985 41BC  C1          	pop	bc
12986 41BD  7D          	ld	a,l
12987 41BE  E6 01       	and	a,0x01
12988 41C0  5F          	ld	e,a
12989 41C1  87          	add	a, a
12990 41C2  83          	add	a, e
12991 41C3  87          	add	a, a
12992 41C4  83          	add	a, e
12993 41C5  87          	add	a, a
12994 41C6  83          	add	a, e
12995 41C7  87          	add	a, a
12996 41C8  87          	add	a, a
12997 41C9  87          	add	a, a
12998 41CA  87          	add	a, a
12999 41CB  C6 08       	add	a,0x08
13000 41CD  57          	ld	d,a
13001 41CE  3E 55       	ld	a,0x55
13002 41D0  F5          	push	af
13003 41D1  33          	inc	sp
13004 41D2  4A          	ld	c, d
13005 41D3  C5          	push	bc
13006 41D4  CD 23 49    	call	_InitEnemy
13007 41D7  F1          	pop	af
13008 41D8  33          	inc	sp
13009 41D9  18 2A       	jr	l_UpdateStage8BossA_00113
13010 41DB              l_UpdateStage8BossA_00112:
13011 41DB  79          	ld	a,c
13012 41DC  D6 10       	sub	a,0x10
13013 41DE  20 07       	jr	NZ,l_UpdateStage8BossA_00109
13014 41E0  21 40 01    	ld	hl,_stage8phase
13015 41E3  36 01       	ld	(hl),0x01
13016 41E5  18 1E       	jr	l_UpdateStage8BossA_00113
13017 41E7              l_UpdateStage8BossA_00109:
13018 41E7  79          	ld	a,c
13019 41E8  D6 F0       	sub	a,0xf0
13020 41EA  20 07       	jr	NZ,l_UpdateStage8BossA_00106
13021 41EC  21 40 01    	ld	hl,_stage8phase
13022 41EF  36 02       	ld	(hl),0x02
13023 41F1  18 12       	jr	l_UpdateStage8BossA_00113
13024 41F3              l_UpdateStage8BossA_00106:
13025 41F3  0C          	inc	c
13026 41F4  20 0F       	jr	NZ,l_UpdateStage8BossA_00113
13027 41F6  21 FF 00    	ld	hl,_disablescroll
13028 41F9  36 00       	ld	(hl),0x00
13029 41FB  21 00 00    	ld	hl,0x0000
13030 41FE  22 02 00    	ld	(_stageframe),hl
13031 4201  2E 00       	ld	l,0x00
13032 4203  18 02       	jr	l_UpdateStage8BossA_00115
13033 4205              l_UpdateStage8BossA_00113:
13034 4205  2E 01       	ld	l,0x01
13035 4207              l_UpdateStage8BossA_00115:
13036 4207  DD E1       	pop	ix
13037 4209  C9          	ret
13038 420A              	SECTION code_compiler
13039 420A              ;	---------------------------------
13040 420A              ; Function UpdateStage8BossB1
13041 420A              ; ---------------------------------
13042 420A              _UpdateStage8BossB1:
13043 420A  DD E5       	push	ix
13044 420C  DD 21 00 00 	ld	ix,0
13045 4210  DD 39       	add	ix,sp
13046 4212  21 FA FF    	ld	hl,-6
13047 4215  39          	add	hl,sp
13048 4216  F9          	ld	sp,hl
13049 4217  DD 4E 04    	ld	c,(ix+4)
13050 421A  DD 46 05    	ld	b,(ix+5)
13051 421D  21 06 00    	ld	hl,0x0006
13052 4220  09          	add	hl,bc
13053 4221  5E          	ld	e, (hl)
13054 4222  79          	ld	a,c
13055 4223  EB          	ex	de,hl
13056 4224  C6 03       	add	a,0x03
13057 4226  DD 77 FE    	ld	(ix-2),a
13058 4229  78          	ld	a,b
13059 422A  CE 00       	adc	a,0x00
13060 422C  DD 77 FF    	ld	(ix-1),a
13061 422F  7D          	ld	a,l
13062 4230  D6 0A       	sub	a,0x0a
13063 4232  30 10       	jr	NC,l_UpdateStage8BossB1_00102
13064 4234  21 04 00    	ld	hl,0x0004
13065 4237  09          	add	hl,bc
13066 4238  34          	inc	(hl)
13067 4239  3E 96       	ld	a,0x96
13068 423B  12          	ld	(de),a
13069 423C  DD 6E FE    	ld	l,(ix-2)
13070 423F  DD 66 FF    	ld	h,(ix-1)
13071 4242  36 00       	ld	(hl),0x00
13072 4244              l_UpdateStage8BossB1_00102:
13073 4244  21 01 00    	ld	hl,0x0001
13074 4247  09          	add	hl,bc
13075 4248  DD 75 FC    	ld	(ix-4),l
13076 424B  DD 74 FD    	ld	(ix-3),h
13077 424E  7E          	ld	a,(hl)
13078 424F  DD 77 FB    	ld	(ix-5),a
13079 4252  0A          	ld	a,(bc)
13080 4253  DD 77 FA    	ld	(ix-6),a
13081 4256  ED 5B 02 00 	ld	de,(_stageframe)
13082 425A  CB 3A       	srl	d
13083 425C  CB 1B       	rr	e
13084 425E  CB 3A       	srl	d
13085 4260  CB 1B       	rr	e
13086 4262  C5          	push	bc
13087 4263  21 06 00    	ld	hl,0x0006
13088 4266  E5          	push	hl
13089 4267  D5          	push	de
13090 4268  CD 00 00    	call	__moduint_callee
13091 426B  C1          	pop	bc
13092 426C  5D          	ld	e,l
13093 426D  54          	ld	d,h
13094 426E  29          	add	hl, hl
13095 426F  29          	add	hl, hl
13096 4270  19          	add	hl, de
13097 4271  29          	add	hl, hl
13098 4272  29          	add	hl, hl
13099 4273  11 3F 01    	ld	de,0x013f
13100 4276  19          	add	hl,de
13101 4277  EB          	ex	de,hl
13102 4278  C5          	push	bc
13103 4279  21 20 28    	ld	hl,0x2820
13104 427C  E5          	push	hl
13105 427D  DD 66 FB    	ld	h,(ix-5)
13106 4280  DD 6E FA    	ld	l,(ix-6)
13107 4283  E5          	push	hl
13108 4284  D5          	push	de
13109 4285  CD 46 00    	call	_DrawSpriteArray
13110 4288  21 06 00    	ld	hl,6
13111 428B  39          	add	hl,sp
13112 428C  F9          	ld	sp,hl
13113 428D  C1          	pop	bc
13114 428E  DD 6E FE    	ld	l,(ix-2)
13115 4291  DD 66 FF    	ld	h,(ix-1)
13116 4294  7E          	ld	a,(hl)
13117 4295  5F          	ld	e,a
13118 4296  E6 03       	and	a,0x03
13119 4298  20 34       	jr	NZ,l_UpdateStage8BossB1_00105
13120 429A  7B          	ld	a,e
13121 429B  E6 3F       	and	a,0x3f
13122 429D  5F          	ld	e,a
13123 429E  CB 3B       	srl	e
13124 42A0  CB 3B       	srl	e
13125 42A2  16 00       	ld	d,0x00
13126 42A4  21 00 00    	ld	hl,_stage8bossbshootspeedy
13127 42A7  19          	add	hl, de
13128 42A8  7E          	ld	a,(hl)
13129 42A9  DD 77 FA    	ld	(ix-6),a
13130 42AC  16 00       	ld	d,0x00
13131 42AE  21 00 00    	ld	hl,_stage8bossbshootspeedx
13132 42B1  19          	add	hl, de
13133 42B2  56          	ld	d,(hl)
13134 42B3  DD 6E FC    	ld	l,(ix-4)
13135 42B6  DD 66 FD    	ld	h,(ix-3)
13136 42B9  7E          	ld	a,(hl)
13137 42BA  C6 18       	add	a,0x18
13138 42BC  5F          	ld	e,a
13139 42BD  0A          	ld	a,(bc)
13140 42BE  C6 0C       	add	a,0x0c
13141 42C0  47          	ld	b,a
13142 42C1  DD 7E FA    	ld	a,(ix-6)
13143 42C4  F5          	push	af
13144 42C5  33          	inc	sp
13145 42C6  D5          	push	de
13146 42C7  C5          	push	bc
13147 42C8  33          	inc	sp
13148 42C9  CD F7 5B    	call	_InitEnemyshootDirection
13149 42CC  F1          	pop	af
13150 42CD  F1          	pop	af
13151 42CE              l_UpdateStage8BossB1_00105:
13152 42CE  DD F9       	ld	sp, ix
13153 42D0  DD E1       	pop	ix
13154 42D2  C9          	ret
13155 42D3              	SECTION code_compiler
13156 42D3              ;	---------------------------------
13157 42D3              ; Function UpdateStage8BossB2
13158 42D3              ; ---------------------------------
13159 42D3              _UpdateStage8BossB2:
13160 42D3  DD E5       	push	ix
13161 42D5  DD 21 00 00 	ld	ix,0
13162 42D9  DD 39       	add	ix,sp
13163 42DB  DD 4E 04    	ld	c,(ix+4)
13164 42DE  DD 46 05    	ld	b,(ix+5)
13165 42E1  59          	ld	e, c
13166 42E2  50          	ld	d, b
13167 42E3  13          	inc	de
13168 42E4  13          	inc	de
13169 42E5  13          	inc	de
13170 42E6  1A          	ld	a,(de)
13171 42E7  D6 40       	sub	a,0x40
13172 42E9  38 07       	jr	C,l_UpdateStage8BossB2_00102
13173 42EB  21 04 00    	ld	hl,0x0004
13174 42EE  09          	add	hl,bc
13175 42EF  34          	inc	(hl)
13176 42F0  AF          	xor	a, a
13177 42F1  12          	ld	(de),a
13178 42F2              l_UpdateStage8BossB2_00102:
13179 42F2  69          	ld	l, c
13180 42F3  60          	ld	h, b
13181 42F4  23          	inc	hl
13182 42F5  56          	ld	d,(hl)
13183 42F6  0A          	ld	a,(bc)
13184 42F7  47          	ld	b,a
13185 42F8  21 20 28    	ld	hl,0x2820
13186 42FB  E5          	push	hl
13187 42FC  58          	ld	e,b
13188 42FD  D5          	push	de
13189 42FE  21 7B 01    	ld	hl,0x017b
13190 4301  E5          	push	hl
13191 4302  CD 46 00    	call	_DrawSpriteArray
13192 4305  21 06 00    	ld	hl,6
13193 4308  39          	add	hl,sp
13194 4309  F9          	ld	sp,hl
13195 430A  DD E1       	pop	ix
13196 430C  C9          	ret
13197 430D              	SECTION code_compiler
13198 430D              ;	---------------------------------
13199 430D              ; Function UpdateStage8BossB3
13200 430D              ; ---------------------------------
13201 430D              _UpdateStage8BossB3:
13202 430D  DD E5       	push	ix
13203 430F  DD 21 00 00 	ld	ix,0
13204 4313  DD 39       	add	ix,sp
13205 4315  F5          	push	af
13206 4316  F5          	push	af
13207 4317  21 02 00    	ld	hl,0x0002
13208 431A  E5          	push	hl
13209 431B  DD 6E 04    	ld	l,(ix+4)
13210 431E  DD 66 05    	ld	h,(ix+5)
13211 4321  E5          	push	hl
13212 4322  CD 29 36    	call	_DoSkullSinusMovement
13213 4325  F1          	pop	af
13214 4326  F1          	pop	af
13215 4327  DD 4E 04    	ld	c,(ix+4)
13216 432A  DD 46 05    	ld	b,(ix+5)
13217 432D  21 01 00    	ld	hl,0x0001
13218 4330  09          	add	hl,bc
13219 4331  F1          	pop	af
13220 4332  7E          	ld	a,(hl)
13221 4333  E5          	push	hl
13222 4334  DD 77 FF    	ld	(ix-1),a
13223 4337  0A          	ld	a,(bc)
13224 4338  DD 77 FE    	ld	(ix-2),a
13225 433B  ED 5B 02 00 	ld	de,(_stageframe)
13226 433F  CB 3A       	srl	d
13227 4341  CB 1B       	rr	e
13228 4343  CB 3A       	srl	d
13229 4345  CB 1B       	rr	e
13230 4347  C5          	push	bc
13231 4348  21 06 00    	ld	hl,0x0006
13232 434B  E5          	push	hl
13233 434C  D5          	push	de
13234 434D  CD 00 00    	call	__moduint_callee
13235 4350  C1          	pop	bc
13236 4351  5D          	ld	e,l
13237 4352  54          	ld	d,h
13238 4353  29          	add	hl, hl
13239 4354  29          	add	hl, hl
13240 4355  19          	add	hl, de
13241 4356  29          	add	hl, hl
13242 4357  29          	add	hl, hl
13243 4358  11 3F 01    	ld	de,0x013f
13244 435B  19          	add	hl,de
13245 435C  EB          	ex	de,hl
13246 435D  C5          	push	bc
13247 435E  21 20 28    	ld	hl,0x2820
13248 4361  E5          	push	hl
13249 4362  DD 66 FF    	ld	h,(ix-1)
13250 4365  DD 6E FE    	ld	l,(ix-2)
13251 4368  E5          	push	hl
13252 4369  D5          	push	de
13253 436A  CD 46 00    	call	_DrawSpriteArray
13254 436D  21 06 00    	ld	hl,6
13255 4370  39          	add	hl,sp
13256 4371  F9          	ld	sp,hl
13257 4372  C1          	pop	bc
13258 4373  3A 89 00    	ld	a,(_numenemies)
13259 4376  D6 03       	sub	a,0x03
13260 4378  30 22       	jr	NC,l_UpdateStage8BossB3_00104
13261 437A  69          	ld	l, c
13262 437B  60          	ld	h, b
13263 437C  23          	inc	hl
13264 437D  23          	inc	hl
13265 437E  23          	inc	hl
13266 437F  7E          	ld	a,(hl)
13267 4380  E6 1F       	and	a,0x1f
13268 4382  D6 18       	sub	a,0x18
13269 4384  20 16       	jr	NZ,l_UpdateStage8BossB3_00104
13270 4386  E1          	pop	hl
13271 4387  7E          	ld	a,(hl)
13272 4388  E5          	push	hl
13273 4389  C6 18       	add	a,0x18
13274 438B  57          	ld	d,a
13275 438C  0A          	ld	a,(bc)
13276 438D  C6 08       	add	a,0x08
13277 438F  5F          	ld	e,a
13278 4390  C5          	push	bc
13279 4391  3E 53       	ld	a,0x53
13280 4393  F5          	push	af
13281 4394  33          	inc	sp
13282 4395  D5          	push	de
13283 4396  CD 23 49    	call	_InitEnemy
13284 4399  F1          	pop	af
13285 439A  33          	inc	sp
13286 439B  C1          	pop	bc
13287 439C              l_UpdateStage8BossB3_00104:
13288 439C  C5          	push	bc
13289 439D  CD 57 22    	call	_DoStage1BossDirectionShoots
13290 43A0  DD F9       	ld	sp,ix
13291 43A2  DD E1       	pop	ix
13292 43A4  C9          	ret
13293 43A5              	SECTION code_compiler
13294 43A5              ;	---------------------------------
13295 43A5              ; Function InitStage8BossB
13296 43A5              ; ---------------------------------
13297 43A5              _InitStage8BossB:
13298 43A5  DD E5       	push	ix
13299 43A7  DD 21 00 00 	ld	ix,0
13300 43AB  DD 39       	add	ix,sp
13301 43AD  3E 0D       	ld	a,0x0d
13302 43AF  F5          	push	af
13303 43B0  33          	inc	sp
13304 43B1  21 3F 01    	ld	hl,0x013f
13305 43B4  E5          	push	hl
13306 43B5  21 00 00    	ld	hl,_stage8bossb_psgcompr
13307 43B8  E5          	push	hl
13308 43B9  CD FD 00    	call	_LoadSprite
13309 43BC  F1          	pop	af
13310 43BD  F1          	pop	af
13311 43BE  33          	inc	sp
13312 43BF  21 FF 00    	ld	hl,_disablescroll
13313 43C2  36 01       	ld	(hl),0x01
13314 43C4  21 40 01    	ld	hl,_stage8phase
13315 43C7  36 03       	ld	(hl),0x03
13316 43C9  DD E1       	pop	ix
13317 43CB  C9          	ret
13318 43CC              	SECTION code_compiler
13319 43CC              ;	---------------------------------
13320 43CC              ; Function UpdateStage8BossB
13321 43CC              ; ---------------------------------
13322 43CC              _UpdateStage8BossB:
13323 43CC  DD E5       	push	ix
13324 43CE  DD 21 00 00 	ld	ix,0
13325 43D2  DD 39       	add	ix,sp
13326 43D4  F5          	push	af
13327 43D5  DD 5E 04    	ld	e,(ix+4)
13328 43D8  DD 56 05    	ld	d,(ix+5)
13329 43DB  21 04 00    	ld	hl,0x0004
13330 43DE  19          	add	hl,de
13331 43DF  F1          	pop	af
13332 43E0  7E          	ld	a,(hl)
13333 43E1  E5          	push	hl
13334 43E2  B7          	or	a, a
13335 43E3  20 19       	jr	NZ,l_UpdateStage8BossB_00102
13336 43E5  6B          	ld	l, e
13337 43E6  62          	ld	h, d
13338 43E7  23          	inc	hl
13339 43E8  46          	ld	b,(hl)
13340 43E9  1A          	ld	a,(de)
13341 43EA  4F          	ld	c,a
13342 43EB  D5          	push	de
13343 43EC  21 20 28    	ld	hl,0x2820
13344 43EF  E5          	push	hl
13345 43F0  C5          	push	bc
13346 43F1  21 7B 01    	ld	hl,0x017b
13347 43F4  E5          	push	hl
13348 43F5  CD 46 00    	call	_DrawSpriteArray
13349 43F8  21 06 00    	ld	hl,6
13350 43FB  39          	add	hl,sp
13351 43FC  F9          	ld	sp,hl
13352 43FD  D1          	pop	de
13353 43FE              l_UpdateStage8BossB_00102:
13354 43FE  E1          	pop	hl
13355 43FF  01 00 00    	ld	bc,_updatestage8bossbfunctions+0
13356 4402  E5          	push	hl
13357 4403  6E          	ld	l,(hl)
13358 4404  26 00       	ld	h,0x00
13359 4406  29          	add	hl, hl
13360 4407  09          	add	hl,bc
13361 4408  4E          	ld	c,(hl)
13362 4409  23          	inc	hl
13363 440A  66          	ld	h,(hl)
13364 440B  D5          	push	de
13365 440C  69          	ld	l, c
13366 440D  CD 00 00    	call	___sdcc_call_hl
13367 4410  F1          	pop	af
13368 4411  2E 01       	ld	l,0x01
13369 4413  DD F9       	ld	sp, ix
13370 4415  DD E1       	pop	ix
13371 4417  C9          	ret
13372 4418              	SECTION code_compiler
13373 4418              ;	---------------------------------
13374 4418              ; Function InitStage8BossC
13375 4418              ; ---------------------------------
13376 4418              _InitStage8BossC:
13377 4418  DD E5       	push	ix
13378 441A  DD 21 00 00 	ld	ix,0
13379 441E  DD 39       	add	ix,sp
13380 4420  DD 5E 04    	ld	e,(ix+4)
13381 4423  DD 56 05    	ld	d,(ix+5)
13382 4426  4B          	ld	c, e
13383 4427  42          	ld	b, d
13384 4428  03          	inc	bc
13385 4429  03          	inc	bc
13386 442A  03          	inc	bc
13387 442B  1A          	ld	a,(de)
13388 442C  5F          	ld	e,a
13389 442D  16 00       	ld	d,0x00
13390 442F  21 E0 FF    	ld	hl,0xffe0
13391 4432  19          	add	hl,de
13392 4433  EB          	ex	de,hl
13393 4434  7B          	ld	a,e
13394 4435  CB 2A       	sra	d
13395 4437  1F          	rra
13396 4438  CB 2A       	sra	d
13397 443A  1F          	rra
13398 443B  02          	ld	(bc),a
13399 443C  DD E1       	pop	ix
13400 443E  C9          	ret
13401 443F              	SECTION code_compiler
13402 443F              ;	---------------------------------
13403 443F              ; Function FinishStage8BossC
13404 443F              ; ---------------------------------
13405 443F              _FinishStage8BossC:
13406 443F  3A 89 00    	ld	a,(_numenemies)
13407 4442  B7          	or	a, a
13408 4443  C0          	ret	NZ
13409 4444  21 FF 00    	ld	hl,_disablescroll
13410 4447  36 00       	ld	(hl),0x00
13411 4449  21 40 01    	ld	hl,_stage8phase
13412 444C  36 02       	ld	(hl),0x02
13413 444E  21 00 00    	ld	hl,0x0000
13414 4451  22 02 00    	ld	(_stageframe),hl
13415 4454  C9          	ret
13416 4455              	SECTION code_compiler
13417 4455              ;	---------------------------------
13418 4455              ; Function UpdateStage8BossC
13419 4455              ; ---------------------------------
13420 4455              _UpdateStage8BossC:
13421 4455  DD E5       	push	ix
13422 4457  DD 21 00 00 	ld	ix,0
13423 445B  DD 39       	add	ix,sp
13424 445D  F5          	push	af
13425 445E  F5          	push	af
13426 445F  3B          	dec	sp
13427 4460  DD 4E 04    	ld	c,(ix+4)
13428 4463  DD 46 05    	ld	b,(ix+5)
13429 4466  21 01 00    	ld	hl,0x0001
13430 4469  09          	add	hl,bc
13431 446A  DD 75 FD    	ld	(ix-3),l
13432 446D  DD 74 FE    	ld	(ix-2),h
13433 4470  3A FF 00    	ld	a,(_disablescroll)
13434 4473  B7          	or	a, a
13435 4474  20 16       	jr	NZ,l_UpdateStage8BossC_00116
13436 4476  DD 6E FD    	ld	l,(ix-3)
13437 4479  DD 66 FE    	ld	h,(ix-2)
13438 447C  7E          	ld	a,(hl)
13439 447D  3C          	inc	a
13440 447E  77          	ld	(hl),a
13441 447F  D6 38       	sub	a,0x38
13442 4481  C2 25 45    	jp	NZ,l_UpdateStage8BossC_00117
13443 4484  21 FF 00    	ld	hl,_disablescroll
13444 4487  36 01       	ld	(hl),0x01
13445 4489  C3 25 45    	jp	l_UpdateStage8BossC_00117
13446 448C              l_UpdateStage8BossC_00116:
13447 448C  59          	ld	e, c
13448 448D  50          	ld	d, b
13449 448E  13          	inc	de
13450 448F  13          	inc	de
13451 4490  13          	inc	de
13452 4491  3E 01       	ld	a,0x01
13453 4493  21 89 00    	ld	hl,_numenemies
13454 4496  96          	sub	a, (hl)
13455 4497  30 1B       	jr	NC,l_UpdateStage8BossC_00113
13456 4499  1A          	ld	a,(de)
13457 449A  E6 3F       	and	a,0x3f
13458 449C  D6 28       	sub	a,0x28
13459 449E  DA 25 45    	jp	C,l_UpdateStage8BossC_00117
13460 44A1  C5          	push	bc
13461 44A2  21 0C 18    	ld	hl,0x180c
13462 44A5  E5          	push	hl
13463 44A6  3E 06       	ld	a,0x06
13464 44A8  F5          	push	af
13465 44A9  33          	inc	sp
13466 44AA  C5          	push	bc
13467 44AB  CD F9 5F    	call	_TestEnemyShootComplex
13468 44AE  F1          	pop	af
13469 44AF  F1          	pop	af
13470 44B0  33          	inc	sp
13471 44B1  C1          	pop	bc
13472 44B2  18 71       	jr	l_UpdateStage8BossC_00117
13473 44B4              l_UpdateStage8BossC_00113:
13474 44B4  0A          	ld	a,(bc)
13475 44B5  DD 77 FC    	ld	(ix-4),a
13476 44B8  D6 70       	sub	a,0x70
13477 44BA  28 69       	jr	Z,l_UpdateStage8BossC_00117
13478 44BC  1A          	ld	a,(de)
13479 44BD  5F          	ld	e,a
13480 44BE  E6 03       	and	a,0x03
13481 44C0  20 63       	jr	NZ,l_UpdateStage8BossC_00117
13482 44C2  7B          	ld	a,e
13483 44C3  E6 3F       	and	a,0x3f
13484 44C5  5F          	ld	e,a
13485 44C6  CB 3B       	srl	e
13486 44C8  CB 3B       	srl	e
13487 44CA  DD 7E FC    	ld	a,(ix-4)
13488 44CD  C6 0C       	add	a,0x0c
13489 44CF  DD 77 FB    	ld	(ix-5),a
13490 44D2  DD 6E FD    	ld	l,(ix-3)
13491 44D5  DD 66 FE    	ld	h,(ix-2)
13492 44D8  7E          	ld	a,(hl)
13493 44D9  C6 18       	add	a,0x18
13494 44DB  DD 77 FF    	ld	(ix-1),a
13495 44DE  DD 7E FC    	ld	a,(ix-4)
13496 44E1  D6 80       	sub	a,0x80
13497 44E3  30 20       	jr	NC,l_UpdateStage8BossC_00106
13498 44E5  16 00       	ld	d,0x00
13499 44E7  21 00 00    	ld	hl,_stage8bosscshootspeedy
13500 44EA  19          	add	hl, de
13501 44EB  16 00       	ld	d,0x00
13502 44ED  21 00 00    	ld	hl,_stage8bosscshootspeedx
13503 44F0  19          	add	hl,de
13504 44F1  7E          	ld	a,(hl)
13505 44F2  57          	ld	d,a
13506 44F3  C5          	push	bc
13507 44F4  5F          	ld	e,a
13508 44F5  D5          	push	de
13509 44F6  DD 66 FF    	ld	h,(ix-1)
13510 44F9  DD 6E FB    	ld	l,(ix-5)
13511 44FC  E5          	push	hl
13512 44FD  CD F7 5B    	call	_InitEnemyshootDirection
13513 4500  F1          	pop	af
13514 4501  F1          	pop	af
13515 4502  C1          	pop	bc
13516 4503  18 20       	jr	l_UpdateStage8BossC_00117
13517 4505              l_UpdateStage8BossC_00106:
13518 4505  16 00       	ld	d,0x00
13519 4507  21 00 00    	ld	hl,_stage8bosscshootspeedy
13520 450A  19          	add	hl, de
13521 450B  16 00       	ld	d,0x00
13522 450D  21 00 00    	ld	hl,_stage8bosscshootspeedx
13523 4510  19          	add	hl,de
13524 4511  56          	ld	d,(hl)
13525 4512  5A          	ld	e,d
13526 4513  AF          	xor	a, a
13527 4514  93          	sub	a, e
13528 4515  5F          	ld	e,a
13529 4516  C5          	push	bc
13530 4517  D5          	push	de
13531 4518  DD 66 FF    	ld	h,(ix-1)
13532 451B  DD 6E FB    	ld	l,(ix-5)
13533 451E  E5          	push	hl
13534 451F  CD F7 5B    	call	_InitEnemyshootDirection
13535 4522  F1          	pop	af
13536 4523  F1          	pop	af
13537 4524  C1          	pop	bc
13538 4525              l_UpdateStage8BossC_00117:
13539 4525  DD 6E FD    	ld	l,(ix-3)
13540 4528  DD 66 FE    	ld	h,(ix-2)
13541 452B  56          	ld	d,(hl)
13542 452C  0A          	ld	a,(bc)
13543 452D  47          	ld	b,a
13544 452E  21 20 20    	ld	hl,0x2020
13545 4531  E5          	push	hl
13546 4532  58          	ld	e,b
13547 4533  D5          	push	de
13548 4534  21 A6 01    	ld	hl,0x01a6
13549 4537  E5          	push	hl
13550 4538  CD 46 00    	call	_DrawSpriteArray
13551 453B  21 06 00    	ld	hl,6
13552 453E  39          	add	hl,sp
13553 453F  F9          	ld	sp,hl
13554 4540  2E 01       	ld	l,0x01
13555 4542  DD F9       	ld	sp, ix
13556 4544  DD E1       	pop	ix
13557 4546  C9          	ret
13558 4547              	SECTION code_compiler
13559 4547              ;	---------------------------------
13560 4547              ; Function UpdateRSGThing
13561 4547              ; ---------------------------------
13562 4547              _UpdateRSGThing:
13563 4547  DD E5       	push	ix
13564 4549  DD 21 00 00 	ld	ix,0
13565 454D  DD 39       	add	ix,sp
13566 454F  DD 6E 04    	ld	l,(ix+4)
13567 4552  DD 66 05    	ld	h,(ix+5)
13568 4555  E5          	push	hl
13569 4556  CD F9 3E    	call	_TestSkullOut
13570 4559  F1          	pop	af
13571 455A  7D          	ld	a,l
13572 455B  B7          	or	a, a
13573 455C  28 04       	jr	Z,l_UpdateRSGThing_00102
13574 455E  2E 00       	ld	l,0x00
13575 4560  18 3A       	jr	l_UpdateRSGThing_00103
13576 4562              l_UpdateRSGThing_00102:
13577 4562  DD 6E 04    	ld	l,(ix+4)
13578 4565  DD 66 05    	ld	h,(ix+5)
13579 4568  E5          	push	hl
13580 4569  CD 8E 3F    	call	_UpdateSkullBoneCMovement
13581 456C  F1          	pop	af
13582 456D  DD 6E 04    	ld	l,(ix+4)
13583 4570  DD 66 05    	ld	h,(ix+5)
13584 4573  E5          	push	hl
13585 4574  CD 8E 3F    	call	_UpdateSkullBoneCMovement
13586 4577  F1          	pop	af
13587 4578  2A 06 00    	ld	hl,(_sprite82anim)
13588 457B  26 00       	ld	h,0x00
13589 457D  29          	add	hl, hl
13590 457E  29          	add	hl, hl
13591 457F  11 B7 01    	ld	de,0x01b7
13592 4582  19          	add	hl, de
13593 4583  EB          	ex	de,hl
13594 4584  DD 6E 04    	ld	l,(ix+4)
13595 4587  DD 66 05    	ld	h,(ix+5)
13596 458A  45          	ld	b,l
13597 458B  4C          	ld	c,h
13598 458C  23          	inc	hl
13599 458D  7E          	ld	a,(hl)
13600 458E  68          	ld	l, b
13601 458F  61          	ld	h, c
13602 4590  46          	ld	b,(hl)
13603 4591  D5          	push	de
13604 4592  48          	ld	c,b
13605 4593  47          	ld	b,a
13606 4594  C5          	push	bc
13607 4595  CD A7 00    	call	_DrawQuadSprite
13608 4598  F1          	pop	af
13609 4599  F1          	pop	af
13610 459A  2E 01       	ld	l,0x01
13611 459C              l_UpdateRSGThing_00103:
13612 459C  DD E1       	pop	ix
13613 459E  C9          	ret
13614 459F              	SECTION code_compiler
13615 459F              ;	---------------------------------
13616 459F              ; Function InitRSGThing
13617 459F              ; ---------------------------------
13618 459F              _InitRSGThing:
13619 459F  DD E5       	push	ix
13620 45A1  DD 21 00 00 	ld	ix,0
13621 45A5  DD 39       	add	ix,sp
13622 45A7  DD 4E 04    	ld	c,(ix+4)
13623 45AA  DD 46 05    	ld	b,(ix+5)
13624 45AD  21 04 00    	ld	hl,0x0004
13625 45B0  09          	add	hl,bc
13626 45B1  C5          	push	bc
13627 45B2  E5          	push	hl
13628 45B3  CD 00 00    	call	_myRand
13629 45B6  D1          	pop	de
13630 45B7  C1          	pop	bc
13631 45B8  7D          	ld	a,l
13632 45B9  E6 01       	and	a,0x01
13633 45BB  07          	rlca
13634 45BC  07          	rlca
13635 45BD  07          	rlca
13636 45BE  07          	rlca
13637 45BF  E6 F0       	and	a,0xf0
13638 45C1  12          	ld	(de),a
13639 45C2  21 05 00    	ld	hl,0x0005
13640 45C5  09          	add	hl,bc
13641 45C6  36 10       	ld	(hl),0x10
13642 45C8  DD E1       	pop	ix
13643 45CA  C9          	ret
13644 45CB              	SECTION code_compiler
13645 45CB              ;	---------------------------------
13646 45CB              ; Function checkEnemyPlayerShoot
13647 45CB              ; ---------------------------------
13648 45CB              _checkEnemyPlayerShoot:
13649 45CB  DD E5       	push	ix
13650 45CD  DD 21 00 00 	ld	ix,0
13651 45D1  DD 39       	add	ix,sp
13652 45D3  F5          	push	af
13653 45D4  F5          	push	af
13654 45D5  DD 7E 04    	ld	a,(ix+4)
13655 45D8  DD 77 FC    	ld	(ix-4),a
13656 45DB  DD 7E 05    	ld	a,(ix+5)
13657 45DE  DD 77 FD    	ld	(ix-3),a
13658 45E1  E1          	pop	hl
13659 45E2  E5          	push	hl
13660 45E3  23          	inc	hl
13661 45E4  5E          	ld	e,(hl)
13662 45E5  DD 7E 06    	ld	a,(ix+6)
13663 45E8  DD 77 FE    	ld	(ix-2),a
13664 45EB  DD 7E 07    	ld	a,(ix+7)
13665 45EE  DD 77 FF    	ld	(ix-1),a
13666 45F1  C1          	pop	bc
13667 45F2  E1          	pop	hl
13668 45F3  E5          	push	hl
13669 45F4  C5          	push	bc
13670 45F5  23          	inc	hl
13671 45F6  4E          	ld	c,(hl)
13672 45F7  06 00       	ld	b,0x00
13673 45F9  21 0C 00    	ld	hl,0x000c
13674 45FC  09          	add	hl,bc
13675 45FD  16 00       	ld	d,0x00
13676 45FF  7B          	ld	a,e
13677 4600  95          	sub	a, l
13678 4601  7A          	ld	a,d
13679 4602  9C          	sbc	a, h
13680 4603  E2 08 46    	jp	PO, l_checkEnemyPlayerShoot_00124
13681 4606  EE 80       	xor	a,0x80
13682 4608              l_checkEnemyPlayerShoot_00124:
13683 4608  F2 61 46    	jp	P,l_checkEnemyPlayerShoot_00102
13684 460B  E1          	pop	hl
13685 460C  E5          	push	hl
13686 460D  3E 08       	ld	a,+((0x0008) & 0xFF)
13687 460F  85          	add	a,l
13688 4610  6F          	ld	l,a
13689 4611  3E 00       	ld	a,+((0x0008) / 256)
13690 4613  8C          	adc	a,h
13691 4614  67          	ld	h,a
13692 4615  6E          	ld	l,(hl)
13693 4616  26 00       	ld	h,0x00
13694 4618  19          	add	hl,de
13695 4619  79          	ld	a,c
13696 461A  95          	sub	a, l
13697 461B  78          	ld	a,b
13698 461C  9C          	sbc	a, h
13699 461D  E2 22 46    	jp	PO, l_checkEnemyPlayerShoot_00125
13700 4620  EE 80       	xor	a,0x80
13701 4622              l_checkEnemyPlayerShoot_00125:
13702 4622  F2 61 46    	jp	P,l_checkEnemyPlayerShoot_00102
13703 4625  E1          	pop	hl
13704 4626  5E          	ld	e,(hl)
13705 4627  E5          	push	hl
13706 4628  DD 6E FE    	ld	l,(ix-2)
13707 462B  DD 66 FF    	ld	h,(ix-1)
13708 462E  4E          	ld	c,(hl)
13709 462F  06 00       	ld	b,0x00
13710 4631  21 10 00    	ld	hl,0x0010
13711 4634  09          	add	hl,bc
13712 4635  16 00       	ld	d,0x00
13713 4637  7B          	ld	a,e
13714 4638  95          	sub	a, l
13715 4639  7A          	ld	a,d
13716 463A  9C          	sbc	a, h
13717 463B  E2 40 46    	jp	PO, l_checkEnemyPlayerShoot_00126
13718 463E  EE 80       	xor	a,0x80
13719 4640              l_checkEnemyPlayerShoot_00126:
13720 4640  F2 61 46    	jp	P,l_checkEnemyPlayerShoot_00102
13721 4643  E1          	pop	hl
13722 4644  E5          	push	hl
13723 4645  3E 07       	ld	a,+((0x0007) & 0xFF)
13724 4647  85          	add	a,l
13725 4648  6F          	ld	l,a
13726 4649  3E 00       	ld	a,+((0x0007) / 256)
13727 464B  8C          	adc	a,h
13728 464C  67          	ld	h,a
13729 464D  6E          	ld	l,(hl)
13730 464E  26 00       	ld	h,0x00
13731 4650  19          	add	hl,de
13732 4651  79          	ld	a,c
13733 4652  95          	sub	a, l
13734 4653  78          	ld	a,b
13735 4654  9C          	sbc	a, h
13736 4655  E2 5A 46    	jp	PO, l_checkEnemyPlayerShoot_00127
13737 4658  EE 80       	xor	a,0x80
13738 465A              l_checkEnemyPlayerShoot_00127:
13739 465A  F2 61 46    	jp	P,l_checkEnemyPlayerShoot_00102
13740 465D  2E 01       	ld	l,0x01
13741 465F  18 02       	jr	l_checkEnemyPlayerShoot_00106
13742 4661              l_checkEnemyPlayerShoot_00102:
13743 4661  2E 00       	ld	l,0x00
13744 4663              l_checkEnemyPlayerShoot_00106:
13745 4663  DD F9       	ld	sp, ix
13746 4665  DD E1       	pop	ix
13747 4667  C9          	ret
13748 4668              	SECTION code_compiler
13749 4668              ;	---------------------------------
13750 4668              ; Function GetEnemyDirection
13751 4668              ; ---------------------------------
13752 4668              _GetEnemyDirection:
13753 4668  DD E5       	push	ix
13754 466A  DD 21 00 00 	ld	ix,0
13755 466E  DD 39       	add	ix,sp
13756 4670  21 F8 FF    	ld	hl,-8
13757 4673  39          	add	hl,sp
13758 4674  F9          	ld	sp,hl
13759 4675  3A 12 00    	ld	a,(_playerx)
13760 4678  4F          	ld	c,a
13761 4679  06 00       	ld	b,0x00
13762 467B  DD 7E 04    	ld	a,(ix+4)
13763 467E  DD 77 FE    	ld	(ix-2),a
13764 4681  6F          	ld	l, a
13765 4682  DD 7E 05    	ld	a,(ix+5)
13766 4685  DD 77 FF    	ld	(ix-1),a
13767 4688  67          	ld	h,a
13768 4689  5E          	ld	e,(hl)
13769 468A  16 00       	ld	d,0x00
13770 468C  79          	ld	a,c
13771 468D  93          	sub	a, e
13772 468E  5F          	ld	e,a
13773 468F  78          	ld	a,b
13774 4690  9A          	sbc	a, d
13775 4691  57          	ld	d,a
13776 4692  3A 13 00    	ld	a,(_playery)
13777 4695  4F          	ld	c,a
13778 4696  06 00       	ld	b,0x00
13779 4698  DD 6E FE    	ld	l,(ix-2)
13780 469B  DD 66 FF    	ld	h,(ix-1)
13781 469E  23          	inc	hl
13782 469F  6E          	ld	l,(hl)
13783 46A0  26 00       	ld	h,0x00
13784 46A2  79          	ld	a,c
13785 46A3  95          	sub	a, l
13786 46A4  DD 77 FC    	ld	(ix-4),a
13787 46A7  78          	ld	a,b
13788 46A8  9C          	sbc	a, h
13789 46A9  DD 77 FD    	ld	(ix-3),a
13790 46AC  6B          	ld	l, e
13791 46AD  62          	ld	h, d
13792 46AE  CD 00 00    	call	_abs_fastcall
13793 46B1  4D          	ld	c,l
13794 46B2  DD 6E FC    	ld	l,(ix-4)
13795 46B5  44          	ld	b,h
13796 46B6  DD 66 FD    	ld	h,(ix-3)
13797 46B9  CD 00 00    	call	_abs_fastcall
13798 46BC  DD 74 FB    	ld	(ix-5),h
13799 46BF  DD 75 FA    	ld	(ix-6),l
13800 46C2  09          	add	hl,bc
13801 46C3  4D          	ld	c, l
13802 46C4  44          	ld	b, h
13803 46C5  6B          	ld	l, e
13804 46C6  62          	ld	h, d
13805 46C7  29          	add	hl, hl
13806 46C8  19          	add	hl, de
13807 46C9  E5          	push	hl
13808 46CA  DD 6E FC    	ld	l,(ix-4)
13809 46CD  DD 66 FD    	ld	h,(ix-3)
13810 46D0  5D          	ld	e,l
13811 46D1  54          	ld	d,h
13812 46D2  29          	add	hl, hl
13813 46D3  19          	add	hl, de
13814 46D4  D1          	pop	de
13815 46D5  E3          	ex	(sp), hl
13816 46D6  C5          	push	bc
13817 46D7  C5          	push	bc
13818 46D8  D5          	push	de
13819 46D9  CD 00 00    	call	__divsint_callee
13820 46DC  EB          	ex	de,hl
13821 46DD  C1          	pop	bc
13822 46DE  D5          	push	de
13823 46DF  C5          	push	bc
13824 46E0  DD 6E F8    	ld	l,(ix-8)
13825 46E3  DD 66 F9    	ld	h,(ix-7)
13826 46E6  E5          	push	hl
13827 46E7  CD 00 00    	call	__divsint_callee
13828 46EA  D1          	pop	de
13829 46EB  DD 7E FE    	ld	a,(ix-2)
13830 46EE  C6 04       	add	a,0x04
13831 46F0  4D          	ld	c,l
13832 46F1  6F          	ld	l,a
13833 46F2  DD 7E FF    	ld	a,(ix-1)
13834 46F5  CE 00       	adc	a,0x00
13835 46F7  67          	ld	h,a
13836 46F8  73          	ld	(hl),e
13837 46F9  DD 6E FE    	ld	l,(ix-2)
13838 46FC  DD 66 FF    	ld	h,(ix-1)
13839 46FF  11 05 00    	ld	de,0x0005
13840 4702  19          	add	hl,de
13841 4703  71          	ld	(hl),c
13842 4704  DD F9       	ld	sp, ix
13843 4706  DD E1       	pop	ix
13844 4708  C9          	ret
13845 4709              	SECTION code_compiler
13846 4709              ;	---------------------------------
13847 4709              ; Function RemoveEnemy
13848 4709              ; ---------------------------------
13849 4709              _RemoveEnemy:
13850 4709  DD E5       	push	ix
13851 470B  DD 21 00 00 	ld	ix,0
13852 470F  DD 39       	add	ix,sp
13853 4711  F5          	push	af
13854 4712  3A 89 00    	ld	a,(_numenemies)
13855 4715  4F          	ld	c,a
13856 4716  06 00       	ld	b,0x00
13857 4718  0B          	dec	bc
13858 4719  DD 5E 04    	ld	e,(ix+4)
13859 471C  7B          	ld	a,e
13860 471D  17          	rla
13861 471E  9F          	sbc	a, a
13862 471F  57          	ld	d,a
13863 4720  7B          	ld	a,e
13864 4721  91          	sub	a, c
13865 4722  7A          	ld	a,d
13866 4723  98          	sbc	a, b
13867 4724  E2 29 47    	jp	PO, l_RemoveEnemy_00115
13868 4727  EE 80       	xor	a,0x80
13869 4729              l_RemoveEnemy_00115:
13870 4729  F2 BE 47    	jp	P,l_RemoveEnemy_00102
13871 472C  DD 4E 04    	ld	c,(ix+4)
13872 472F  79          	ld	a, c
13873 4730  CB 07       	rlc	a
13874 4732  9F          	sbc	a, a
13875 4733  47          	ld	b,a
13876 4734  69          	ld	l,c
13877 4735  67          	ld	h,a
13878 4736  29          	add	hl, hl
13879 4737  29          	add	hl, hl
13880 4738  29          	add	hl, hl
13881 4739  09          	add	hl, bc
13882 473A  01 8A 00    	ld	bc,_enemies
13883 473D  09          	add	hl,bc
13884 473E  4D          	ld	c,l
13885 473F  44          	ld	b,h
13886 4740  21 89 00    	ld	hl,_numenemies
13887 4743  5E          	ld	e,(hl)
13888 4744  1D          	dec	e
13889 4745  16 00       	ld	d,0x00
13890 4747  6B          	ld	l, e
13891 4748  62          	ld	h, d
13892 4749  29          	add	hl, hl
13893 474A  29          	add	hl, hl
13894 474B  29          	add	hl, hl
13895 474C  19          	add	hl, de
13896 474D  11 8A 00    	ld	de,_enemies
13897 4750  19          	add	hl,de
13898 4751  D1          	pop	de
13899 4752  7E          	ld	a,(hl)
13900 4753  E5          	push	hl
13901 4754  02          	ld	(bc),a
13902 4755  59          	ld	e, c
13903 4756  50          	ld	d, b
13904 4757  13          	inc	de
13905 4758  E1          	pop	hl
13906 4759  E5          	push	hl
13907 475A  23          	inc	hl
13908 475B  7E          	ld	a,(hl)
13909 475C  12          	ld	(de),a
13910 475D  59          	ld	e, c
13911 475E  50          	ld	d, b
13912 475F  13          	inc	de
13913 4760  13          	inc	de
13914 4761  E1          	pop	hl
13915 4762  E5          	push	hl
13916 4763  23          	inc	hl
13917 4764  23          	inc	hl
13918 4765  7E          	ld	a,(hl)
13919 4766  12          	ld	(de),a
13920 4767  59          	ld	e, c
13921 4768  50          	ld	d, b
13922 4769  13          	inc	de
13923 476A  13          	inc	de
13924 476B  13          	inc	de
13925 476C  E1          	pop	hl
13926 476D  E5          	push	hl
13927 476E  23          	inc	hl
13928 476F  23          	inc	hl
13929 4770  23          	inc	hl
13930 4771  7E          	ld	a,(hl)
13931 4772  12          	ld	(de),a
13932 4773  21 04 00    	ld	hl,0x0004
13933 4776  09          	add	hl,bc
13934 4777  EB          	ex	de,hl
13935 4778  E1          	pop	hl
13936 4779  E5          	push	hl
13937 477A  23          	inc	hl
13938 477B  23          	inc	hl
13939 477C  23          	inc	hl
13940 477D  23          	inc	hl
13941 477E  7E          	ld	a,(hl)
13942 477F  12          	ld	(de),a
13943 4780  21 05 00    	ld	hl,0x0005
13944 4783  09          	add	hl,bc
13945 4784  EB          	ex	de,hl
13946 4785  E1          	pop	hl
13947 4786  E5          	push	hl
13948 4787  23          	inc	hl
13949 4788  23          	inc	hl
13950 4789  23          	inc	hl
13951 478A  23          	inc	hl
13952 478B  23          	inc	hl
13953 478C  7E          	ld	a,(hl)
13954 478D  12          	ld	(de),a
13955 478E  21 06 00    	ld	hl,0x0006
13956 4791  09          	add	hl,bc
13957 4792  EB          	ex	de,hl
13958 4793  E1          	pop	hl
13959 4794  E5          	push	hl
13960 4795  3E 06       	ld	a,+((0x0006) & 0xFF)
13961 4797  85          	add	a,l
13962 4798  6F          	ld	l,a
13963 4799  3E 00       	ld	a,+((0x0006) / 256)
13964 479B  8C          	adc	a,h
13965 479C  67          	ld	h,a
13966 479D  7E          	ld	a,(hl)
13967 479E  12          	ld	(de),a
13968 479F  21 07 00    	ld	hl,0x0007
13969 47A2  09          	add	hl,bc
13970 47A3  EB          	ex	de,hl
13971 47A4  E1          	pop	hl
13972 47A5  E5          	push	hl
13973 47A6  3E 07       	ld	a,+((0x0007) & 0xFF)
13974 47A8  85          	add	a,l
13975 47A9  6F          	ld	l,a
13976 47AA  3E 00       	ld	a,+((0x0007) / 256)
13977 47AC  8C          	adc	a,h
13978 47AD  67          	ld	h,a
13979 47AE  7E          	ld	a,(hl)
13980 47AF  12          	ld	(de),a
13981 47B0  21 08 00    	ld	hl,0x0008
13982 47B3  09          	add	hl,bc
13983 47B4  4D          	ld	c,l
13984 47B5  44          	ld	b,h
13985 47B6  E1          	pop	hl
13986 47B7  E5          	push	hl
13987 47B8  11 08 00    	ld	de,0x0008
13988 47BB  19          	add	hl, de
13989 47BC  7E          	ld	a,(hl)
13990 47BD  02          	ld	(bc),a
13991 47BE              l_RemoveEnemy_00102:
13992 47BE  21 89 00    	ld	hl,_numenemies
13993 47C1  7E          	ld	a,(hl)
13994 47C2  B7          	or	a, a
13995 47C3  28 01       	jr	Z,l_RemoveEnemy_00105
13996 47C5  35          	dec	(hl)
13997 47C6              l_RemoveEnemy_00105:
13998 47C6  DD F9       	ld	sp, ix
13999 47C8  DD E1       	pop	ix
14000 47CA  C9          	ret
14001 47CB              	SECTION code_compiler
14002 47CB              ;	---------------------------------
14003 47CB              ; Function KillEnemy
14004 47CB              ; ---------------------------------
14005 47CB              _KillEnemy:
14006 47CB  DD E5       	push	ix
14007 47CD  DD 21 00 00 	ld	ix,0
14008 47D1  DD 39       	add	ix,sp
14009 47D3  F5          	push	af
14010 47D4  3B          	dec	sp
14011 47D5  DD 7E 04    	ld	a,(ix+4)
14012 47D8  21 89 00    	ld	hl,_numenemies
14013 47DB  96          	sub	a, (hl)
14014 47DC  30 79       	jr	NC,l_KillEnemy_00108
14015 47DE  DD 6E 04    	ld	l,(ix+4)
14016 47E1  26 00       	ld	h,0x00
14017 47E3  4D          	ld	c,l
14018 47E4  44          	ld	b,h
14019 47E5  29          	add	hl, hl
14020 47E6  29          	add	hl, hl
14021 47E7  29          	add	hl, hl
14022 47E8  09          	add	hl, bc
14023 47E9  01 8A 00    	ld	bc,_enemies
14024 47EC  09          	add	hl,bc
14025 47ED  11 07 00    	ld	de,0x0007
14026 47F0  4D          	ld	c,l
14027 47F1  44          	ld	b,h
14028 47F2  19          	add	hl, de
14029 47F3  7E          	ld	a,(hl)
14030 47F4  DD 77 FF    	ld	(ix-1),a
14031 47F7  D1          	pop	de
14032 47F8  0A          	ld	a,(bc)
14033 47F9  69          	ld	l,c
14034 47FA  60          	ld	h,b
14035 47FB  5F          	ld	e,a
14036 47FC  E5          	push	hl
14037 47FD  23          	inc	hl
14038 47FE  56          	ld	d,(hl)
14039 47FF  3E 11       	ld	a,0x11
14040 4801  DD 96 FF    	sub	a,(ix-1)
14041 4804  38 15       	jr	C,l_KillEnemy_00104
14042 4806  C5          	push	bc
14043 4807  3E 01       	ld	a,0x01
14044 4809  F5          	push	af
14045 480A  33          	inc	sp
14046 480B  D5          	push	de
14047 480C  CD 43 0B    	call	_InitExplosion
14048 480F  F1          	pop	af
14049 4810  33          	inc	sp
14050 4811  C1          	pop	bc
14051 4812  C5          	push	bc
14052 4813  C5          	push	bc
14053 4814  CD B8 64    	call	_InitPowerup
14054 4817  F1          	pop	af
14055 4818  C1          	pop	bc
14056 4819  18 11       	jr	l_KillEnemy_00105
14057 481B              l_KillEnemy_00104:
14058 481B  21 08 00    	ld	hl,0x0008
14059 481E  09          	add	hl,bc
14060 481F  66          	ld	h,(hl)
14061 4820  C5          	push	bc
14062 4821  DD 6E FF    	ld	l,(ix-1)
14063 4824  E5          	push	hl
14064 4825  D5          	push	de
14065 4826  CD 22 0C    	call	_InitSpawnedExplosion
14066 4829  F1          	pop	af
14067 482A  F1          	pop	af
14068 482B  C1          	pop	bc
14069 482C              l_KillEnemy_00105:
14070 482C  69          	ld	l, c
14071 482D  60          	ld	h, b
14072 482E  23          	inc	hl
14073 482F  23          	inc	hl
14074 4830  4E          	ld	c,(hl)
14075 4831  C5          	push	bc
14076 4832  DD 7E 04    	ld	a,(ix+4)
14077 4835  F5          	push	af
14078 4836  33          	inc	sp
14079 4837  CD 09 47    	call	_RemoveEnemy
14080 483A  33          	inc	sp
14081 483B  3E 0F       	ld	a,0x0f
14082 483D  F5          	push	af
14083 483E  33          	inc	sp
14084 483F  CD 27 00    	call	_changeBank
14085 4842  33          	inc	sp
14086 4843  C1          	pop	bc
14087 4844  26 00       	ld	h,0x00
14088 4846  69          	ld	l, c
14089 4847  29          	add	hl, hl
14090 4848  11 00 00    	ld	de,_killenemyfunctions
14091 484B  19          	add	hl,de
14092 484C  4E          	ld	c,(hl)
14093 484D  23          	inc	hl
14094 484E  7E          	ld	a,(hl)
14095 484F  67          	ld	h,a
14096 4850  B1          	or	a,c
14097 4851  28 04       	jr	Z,l_KillEnemy_00108
14098 4853  69          	ld	l, c
14099 4854  CD 00 00    	call	___sdcc_call_hl
14100 4857              l_KillEnemy_00108:
14101 4857  DD F9       	ld	sp, ix
14102 4859  DD E1       	pop	ix
14103 485B  C9          	ret
14104 485C              	SECTION code_compiler
14105 485C              ;	---------------------------------
14106 485C              ; Function KillEnemies
14107 485C              ; ---------------------------------
14108 485C              _KillEnemies:
14109 485C  DD E5       	push	ix
14110 485E  DD 21 00 00 	ld	ix,0
14111 4862  DD 39       	add	ix,sp
14112 4864  21 89 00    	ld	hl,_numenemies
14113 4867  7E          	ld	a,(hl)
14114 4868  B7          	or	a, a
14115 4869  28 3B       	jr	Z,l_KillEnemies_00110
14116 486B  46          	ld	b,(hl)
14117 486C  05          	dec	b
14118 486D  DD 7E 04    	ld	a,(ix+4)
14119 4870  3D          	dec	a
14120 4871  20 04       	jr	NZ,l_KillEnemies_00129
14121 4873  3E 01       	ld	a,0x01
14122 4875  18 01       	jr	l_KillEnemies_00130
14123 4877              l_KillEnemies_00129:
14124 4877  AF          	xor	a,a
14125 4878              l_KillEnemies_00130:
14126 4878  4F          	ld	c,a
14127 4879              l_KillEnemies_00108:
14128 4879  CB 78       	bit	7, b
14129 487B  20 29       	jr	NZ,l_KillEnemies_00110
14130 487D  79          	ld	a,c
14131 487E  B7          	or	a, a
14132 487F  20 1A       	jr	NZ,l_KillEnemies_00101
14133 4881  58          	ld	e,b
14134 4882  7B          	ld	a, e
14135 4883  CB 07       	rlc	a
14136 4885  9F          	sbc	a, a
14137 4886  57          	ld	d, a
14138 4887  6B          	ld	l, e
14139 4888  62          	ld	h, d
14140 4889  29          	add	hl, hl
14141 488A  29          	add	hl, hl
14142 488B  29          	add	hl, hl
14143 488C  19          	add	hl, de
14144 488D  11 8A 00    	ld	de,_enemies
14145 4890  19          	add	hl,de
14146 4891  11 07 00    	ld	de,0x0007
14147 4894  19          	add	hl, de
14148 4895  5E          	ld	e,(hl)
14149 4896  3E 10       	ld	a,0x10
14150 4898  93          	sub	a, e
14151 4899  38 08       	jr	C,l_KillEnemies_00109
14152 489B              l_KillEnemies_00101:
14153 489B  C5          	push	bc
14154 489C  C5          	push	bc
14155 489D  33          	inc	sp
14156 489E  CD CB 47    	call	_KillEnemy
14157 48A1  33          	inc	sp
14158 48A2  C1          	pop	bc
14159 48A3              l_KillEnemies_00109:
14160 48A3  05          	dec	b
14161 48A4  18 D3       	jr	l_KillEnemies_00108
14162 48A6              l_KillEnemies_00110:
14163 48A6  DD E1       	pop	ix
14164 48A8  C9          	ret
14165 48A9              	SECTION code_compiler
14166 48A9              ;	---------------------------------
14167 48A9              ; Function UpdateEnemy
14168 48A9              ; ---------------------------------
14169 48A9              _UpdateEnemy:
14170 48A9  DD E5       	push	ix
14171 48AB  DD 21 00 00 	ld	ix,0
14172 48AF  DD 39       	add	ix,sp
14173 48B1  DD 7E 04    	ld	a,(ix+4)
14174 48B4  21 89 00    	ld	hl,_numenemies
14175 48B7  96          	sub	a, (hl)
14176 48B8  30 46       	jr	NC,l_UpdateEnemy_00108
14177 48BA  DD 6E 04    	ld	l,(ix+4)
14178 48BD  26 00       	ld	h,0x00
14179 48BF  4D          	ld	c,l
14180 48C0  44          	ld	b,h
14181 48C1  29          	add	hl, hl
14182 48C2  29          	add	hl, hl
14183 48C3  29          	add	hl, hl
14184 48C4  09          	add	hl, bc
14185 48C5  01 8A 00    	ld	bc,_enemies
14186 48C8  09          	add	hl,bc
14187 48C9  16 01       	ld	d,0x01
14188 48CB  4D          	ld	c,l
14189 48CC  44          	ld	b,h
14190 48CD  23          	inc	hl
14191 48CE  23          	inc	hl
14192 48CF  6E          	ld	l,(hl)
14193 48D0  26 00       	ld	h,0x00
14194 48D2  29          	add	hl, hl
14195 48D3  3E 00       	ld	a,+((_updateenemyfunctions) & 0xFF)
14196 48D5  85          	add	a, l
14197 48D6  6F          	ld	l,a
14198 48D7  3E 00       	ld	a,+((_updateenemyfunctions) / 256)
14199 48D9  8C          	adc	a, h
14200 48DA  67          	ld	h,a
14201 48DB  5E          	ld	e,(hl)
14202 48DC  23          	inc	hl
14203 48DD  7E          	ld	a,(hl)
14204 48DE  67          	ld	h,a
14205 48DF  B3          	or	a,e
14206 48E0  28 09       	jr	Z,l_UpdateEnemy_00104
14207 48E2  C5          	push	bc
14208 48E3  C5          	push	bc
14209 48E4  6B          	ld	l, e
14210 48E5  CD 00 00    	call	___sdcc_call_hl
14211 48E8  F1          	pop	af
14212 48E9  C1          	pop	bc
14213 48EA  55          	ld	d,l
14214 48EB              l_UpdateEnemy_00104:
14215 48EB  7A          	ld	a,d
14216 48EC  B7          	or	a, a
14217 48ED  20 0B       	jr	NZ,l_UpdateEnemy_00106
14218 48EF  DD 7E 04    	ld	a,(ix+4)
14219 48F2  F5          	push	af
14220 48F3  33          	inc	sp
14221 48F4  CD 09 47    	call	_RemoveEnemy
14222 48F7  33          	inc	sp
14223 48F8  18 06       	jr	l_UpdateEnemy_00108
14224 48FA              l_UpdateEnemy_00106:
14225 48FA  03          	inc	bc
14226 48FB  03          	inc	bc
14227 48FC  03          	inc	bc
14228 48FD  0A          	ld	a,(bc)
14229 48FE  3C          	inc	a
14230 48FF  02          	ld	(bc),a
14231 4900              l_UpdateEnemy_00108:
14232 4900  DD E1       	pop	ix
14233 4902  C9          	ret
14234 4903              	SECTION code_compiler
14235 4903              ;	---------------------------------
14236 4903              ; Function UpdateEnemies
14237 4903              ; ---------------------------------
14238 4903              _UpdateEnemies:
14239 4903  3E 0F       	ld	a,0x0f
14240 4905  F5          	push	af
14241 4906  33          	inc	sp
14242 4907  CD 27 00    	call	_changeBank
14243 490A  33          	inc	sp
14244 490B  21 89 00    	ld	hl,_numenemies
14245 490E  7E          	ld	a,(hl)
14246 490F  B7          	or	a, a
14247 4910  28 10       	jr	Z,l_UpdateEnemies_00107
14248 4912  46          	ld	b,(hl)
14249 4913  05          	dec	b
14250 4914              l_UpdateEnemies_00105:
14251 4914  CB 78       	bit	7, b
14252 4916  C0          	ret	NZ
14253 4917  C5          	push	bc
14254 4918  C5          	push	bc
14255 4919  33          	inc	sp
14256 491A  CD A9 48    	call	_UpdateEnemy
14257 491D  33          	inc	sp
14258 491E  C1          	pop	bc
14259 491F  05          	dec	b
14260 4920  18 F2       	jr	l_UpdateEnemies_00105
14261 4922              l_UpdateEnemies_00107:
14262 4922  C9          	ret
14263 4923              	SECTION code_compiler
14264 4923              ;	---------------------------------
14265 4923              ; Function InitEnemy
14266 4923              ; ---------------------------------
14267 4923              _InitEnemy:
14268 4923  DD E5       	push	ix
14269 4925  DD 21 00 00 	ld	ix,0
14270 4929  DD 39       	add	ix,sp
14271 492B  F5          	push	af
14272 492C  21 89 00    	ld	hl,_numenemies
14273 492F  7E          	ld	a,(hl)
14274 4930  D6 0A       	sub	a,0x0a
14275 4932  D2 E3 49    	jp	NC,l_InitEnemy_00109
14276 4935  6E          	ld	l,(hl)
14277 4936  26 00       	ld	h,0x00
14278 4938  4D          	ld	c,l
14279 4939  44          	ld	b,h
14280 493A  29          	add	hl, hl
14281 493B  29          	add	hl, hl
14282 493C  29          	add	hl, hl
14283 493D  09          	add	hl, bc
14284 493E  01 8A 00    	ld	bc,_enemies
14285 4941  09          	add	hl,bc
14286 4942  DD 7E 04    	ld	a,(ix+4)
14287 4945  77          	ld	(hl),a
14288 4946  5D          	ld	e,l
14289 4947  54          	ld	d,h
14290 4948  4D          	ld	c,l
14291 4949  44          	ld	b,h
14292 494A  13          	inc	de
14293 494B  DD 7E 05    	ld	a,(ix+5)
14294 494E  12          	ld	(de),a
14295 494F  59          	ld	e, c
14296 4950  50          	ld	d, b
14297 4951  13          	inc	de
14298 4952  13          	inc	de
14299 4953  DD 7E 06    	ld	a,(ix+6)
14300 4956  12          	ld	(de),a
14301 4957  59          	ld	e, c
14302 4958  50          	ld	d, b
14303 4959  13          	inc	de
14304 495A  13          	inc	de
14305 495B  13          	inc	de
14306 495C  AF          	xor	a, a
14307 495D  12          	ld	(de),a
14308 495E  21 04 00    	ld	hl,0x0004
14309 4961  09          	add	hl,bc
14310 4962  36 00       	ld	(hl),0x00
14311 4964  21 05 00    	ld	hl,0x0005
14312 4967  09          	add	hl,bc
14313 4968  36 00       	ld	(hl),0x00
14314 496A  21 07 00    	ld	hl,0x0007
14315 496D  09          	add	hl,bc
14316 496E  3E 00       	ld	a,+((_enemieswidth) & 0xFF)
14317 4970  EB          	ex	de,hl
14318 4971  DD 86 06    	add	a,(ix+6)
14319 4974  DD 77 FE    	ld	(ix-2),a
14320 4977  3E 00       	ld	a,+((_enemieswidth) / 256)
14321 4979  CE 00       	adc	a,0x00
14322 497B  DD 77 FF    	ld	(ix-1),a
14323 497E  E1          	pop	hl
14324 497F  7E          	ld	a,(hl)
14325 4980  E5          	push	hl
14326 4981  12          	ld	(de),a
14327 4982  21 08 00    	ld	hl,0x0008
14328 4985  09          	add	hl,bc
14329 4986  3E 00       	ld	a,+((_enemiesheight) & 0xFF)
14330 4988  EB          	ex	de,hl
14331 4989  DD 86 06    	add	a,(ix+6)
14332 498C  DD 77 FE    	ld	(ix-2),a
14333 498F  3E 00       	ld	a,+((_enemiesheight) / 256)
14334 4991  CE 00       	adc	a,0x00
14335 4993  DD 77 FF    	ld	(ix-1),a
14336 4996  E1          	pop	hl
14337 4997  7E          	ld	a,(hl)
14338 4998  E5          	push	hl
14339 4999  12          	ld	(de),a
14340 499A  21 06 00    	ld	hl,0x0006
14341 499D  09          	add	hl,bc
14342 499E  E3          	ex	(sp), hl
14343 499F  3E 00       	ld	a,+((_enemiesenergy) & 0xFF)
14344 49A1  DD 86 06    	add	a,(ix+6)
14345 49A4  5F          	ld	e,a
14346 49A5  3E 00       	ld	a,+((_enemiesenergy) / 256)
14347 49A7  CE 00       	adc	a,0x00
14348 49A9  E1          	pop	hl
14349 49AA  57          	ld	d,a
14350 49AB  1A          	ld	a,(de)
14351 49AC  57          	ld	d,a
14352 49AD  E5          	push	hl
14353 49AE  72          	ld	(hl),d
14354 49AF  E1          	pop	hl
14355 49B0  5E          	ld	e,(hl)
14356 49B1  E5          	push	hl
14357 49B2  3E 64       	ld	a,0x64
14358 49B4  92          	sub	a, d
14359 49B5  30 11       	jr	NC,l_InitEnemy_00102
14360 49B7  7B          	ld	a,e
14361 49B8  D6 FF       	sub	a,0xff
14362 49BA  30 0C       	jr	NC,l_InitEnemy_00102
14363 49BC  3A 0F 00    	ld	a,(_gamelevel)
14364 49BF  B7          	or	a, a
14365 49C0  20 06       	jr	NZ,l_InitEnemy_00102
14366 49C2  7B          	ld	a,e
14367 49C3  C6 E2       	add	a,0xe2
14368 49C5  E1          	pop	hl
14369 49C6  E5          	push	hl
14370 49C7  77          	ld	(hl),a
14371 49C8              l_InitEnemy_00102:
14372 49C8  21 89 00    	ld	hl,_numenemies
14373 49CB  34          	inc	(hl)
14374 49CC  DD 6E 06    	ld	l,(ix+6)
14375 49CF  26 00       	ld	h,0x00
14376 49D1  29          	add	hl, hl
14377 49D2  11 00 00    	ld	de,_initenemyfunctions
14378 49D5  19          	add	hl,de
14379 49D6  5E          	ld	e,(hl)
14380 49D7  23          	inc	hl
14381 49D8  7E          	ld	a,(hl)
14382 49D9  67          	ld	h,a
14383 49DA  B3          	or	a,e
14384 49DB  28 06       	jr	Z,l_InitEnemy_00109
14385 49DD  C5          	push	bc
14386 49DE  6B          	ld	l, e
14387 49DF  CD 00 00    	call	___sdcc_call_hl
14388 49E2  F1          	pop	af
14389 49E3              l_InitEnemy_00109:
14390 49E3  DD F9       	ld	sp, ix
14391 49E5  DD E1       	pop	ix
14392 49E7  C9          	ret
14393 49E8              	SECTION code_compiler
14394 49E8              ;	---------------------------------
14395 49E8              ; Function InitEnemies
14396 49E8              ; ---------------------------------
14397 49E8              _InitEnemies:
14398 49E8  21 89 00    	ld	hl,_numenemies
14399 49EB  36 00       	ld	(hl),0x00
14400 49ED  C9          	ret
14401 49EE              	SECTION code_compiler
14402 49EE              ;	---------------------------------
14403 49EE              ; Function InitScripts
14404 49EE              ; ---------------------------------
14405 49EE              _InitScripts:
14406 49EE  21 02 01    	ld	hl,_numscripts
14407 49F1  36 00       	ld	(hl),0x00
14408 49F3  C9          	ret
14409 49F4              	SECTION code_compiler
14410 49F4              ;	---------------------------------
14411 49F4              ; Function InitScript
14412 49F4              ; ---------------------------------
14413 49F4              _InitScript:
14414 49F4  DD E5       	push	ix
14415 49F6  DD 21 00 00 	ld	ix,0
14416 49FA  DD 39       	add	ix,sp
14417 49FC  21 02 01    	ld	hl,_numscripts
14418 49FF  7E          	ld	a,(hl)
14419 4A00  D6 04       	sub	a,0x04
14420 4A02  30 39       	jr	NC,l_InitScript_00103
14421 4A04  01 03 01    	ld	bc,_scripts+0
14422 4A07  5E          	ld	e,(hl)
14423 4A08  34          	inc	(hl)
14424 4A09  26 00       	ld	h,0x00
14425 4A0B  6B          	ld	l, e
14426 4A0C  29          	add	hl, hl
14427 4A0D  29          	add	hl, hl
14428 4A0E  29          	add	hl, hl
14429 4A0F  09          	add	hl,bc
14430 4A10  AF          	xor	a,a
14431 4A11  4D          	ld	c,l
14432 4A12  44          	ld	b,h
14433 4A13  77          	ld	(hl), a
14434 4A14  23          	inc	hl
14435 4A15  77          	ld	(hl), a
14436 4A16  21 06 00    	ld	hl,0x0006
14437 4A19  09          	add	hl,bc
14438 4A1A  36 00       	ld	(hl),0x00
14439 4A1C  59          	ld	e, c
14440 4A1D  50          	ld	d, b
14441 4A1E  13          	inc	de
14442 4A1F  13          	inc	de
14443 4A20  DD 7E 04    	ld	a,(ix+4)
14444 4A23  12          	ld	(de),a
14445 4A24  13          	inc	de
14446 4A25  DD 7E 05    	ld	a,(ix+5)
14447 4A28  12          	ld	(de),a
14448 4A29  21 04 00    	ld	hl,0x0004
14449 4A2C  09          	add	hl,bc
14450 4A2D  EB          	ex	de,hl
14451 4A2E  DD 7E 06    	ld	a,(ix+6)
14452 4A31  12          	ld	(de),a
14453 4A32  13          	inc	de
14454 4A33  DD 7E 07    	ld	a,(ix+7)
14455 4A36  12          	ld	(de),a
14456 4A37  21 07 00    	ld	hl,0x0007
14457 4A3A  09          	add	hl,bc
14458 4A3B  36 FF       	ld	(hl),0xff
14459 4A3D              l_InitScript_00103:
14460 4A3D  DD E1       	pop	ix
14461 4A3F  C9          	ret
14462 4A40              	SECTION code_compiler
14463 4A40              ;	---------------------------------
14464 4A40              ; Function RemoveScript
14465 4A40              ; ---------------------------------
14466 4A40              _RemoveScript:
14467 4A40  DD E5       	push	ix
14468 4A42  DD 21 00 00 	ld	ix,0
14469 4A46  DD 39       	add	ix,sp
14470 4A48  F5          	push	af
14471 4A49  F5          	push	af
14472 4A4A  3A 02 01    	ld	a,(_numscripts)
14473 4A4D  5F          	ld	e,a
14474 4A4E  16 00       	ld	d,0x00
14475 4A50  1B          	dec	de
14476 4A51  DD 4E 04    	ld	c,(ix+4)
14477 4A54  79          	ld	a,c
14478 4A55  17          	rla
14479 4A56  9F          	sbc	a, a
14480 4A57  47          	ld	b,a
14481 4A58  79          	ld	a,c
14482 4A59  93          	sub	a, e
14483 4A5A  78          	ld	a,b
14484 4A5B  9A          	sbc	a, d
14485 4A5C  E2 61 4A    	jp	PO, l_RemoveScript_00109
14486 4A5F  EE 80       	xor	a,0x80
14487 4A61              l_RemoveScript_00109:
14488 4A61  F2 DA 4A    	jp	P,l_RemoveScript_00102
14489 4A64  11 03 01    	ld	de,_scripts+0
14490 4A67  69          	ld	l, c
14491 4A68  60          	ld	h, b
14492 4A69  29          	add	hl, hl
14493 4A6A  29          	add	hl, hl
14494 4A6B  29          	add	hl, hl
14495 4A6C  19          	add	hl,de
14496 4A6D  3A 02 01    	ld	a,(_numscripts)
14497 4A70  C6 FF       	add	a,0xff
14498 4A72  4D          	ld	c,l
14499 4A73  44          	ld	b,h
14500 4A74  6F          	ld	l,a
14501 4A75  26 00       	ld	h,0x00
14502 4A77  29          	add	hl, hl
14503 4A78  29          	add	hl, hl
14504 4A79  29          	add	hl, hl
14505 4A7A  19          	add	hl,de
14506 4A7B  D1          	pop	de
14507 4A7C  5E          	ld	e,(hl)
14508 4A7D  E5          	push	hl
14509 4A7E  23          	inc	hl
14510 4A7F  56          	ld	d,(hl)
14511 4A80  69          	ld	l, c
14512 4A81  60          	ld	h, b
14513 4A82  73          	ld	(hl),e
14514 4A83  23          	inc	hl
14515 4A84  72          	ld	(hl),d
14516 4A85  59          	ld	e, c
14517 4A86  50          	ld	d, b
14518 4A87  13          	inc	de
14519 4A88  13          	inc	de
14520 4A89  E1          	pop	hl
14521 4A8A  E5          	push	hl
14522 4A8B  23          	inc	hl
14523 4A8C  23          	inc	hl
14524 4A8D  7E          	ld	a,(hl)
14525 4A8E  DD 77 FE    	ld	(ix-2),a
14526 4A91  23          	inc	hl
14527 4A92  7E          	ld	a,(hl)
14528 4A93  DD 77 FF    	ld	(ix-1),a
14529 4A96  DD 7E FE    	ld	a,(ix-2)
14530 4A99  12          	ld	(de),a
14531 4A9A  13          	inc	de
14532 4A9B  DD 7E FF    	ld	a,(ix-1)
14533 4A9E  12          	ld	(de),a
14534 4A9F  21 04 00    	ld	hl,0x0004
14535 4AA2  09          	add	hl,bc
14536 4AA3  DD 75 FE    	ld	(ix-2),l
14537 4AA6  DD 74 FF    	ld	(ix-1),h
14538 4AA9  E1          	pop	hl
14539 4AAA  E5          	push	hl
14540 4AAB  11 04 00    	ld	de,0x0004
14541 4AAE  19          	add	hl, de
14542 4AAF  5E          	ld	e,(hl)
14543 4AB0  23          	inc	hl
14544 4AB1  56          	ld	d,(hl)
14545 4AB2  DD 6E FE    	ld	l,(ix-2)
14546 4AB5  DD 66 FF    	ld	h,(ix-1)
14547 4AB8  73          	ld	(hl),e
14548 4AB9  23          	inc	hl
14549 4ABA  72          	ld	(hl),d
14550 4ABB  21 06 00    	ld	hl,0x0006
14551 4ABE  09          	add	hl,bc
14552 4ABF  EB          	ex	de,hl
14553 4AC0  E1          	pop	hl
14554 4AC1  E5          	push	hl
14555 4AC2  3E 06       	ld	a,+((0x0006) & 0xFF)
14556 4AC4  85          	add	a,l
14557 4AC5  6F          	ld	l,a
14558 4AC6  3E 00       	ld	a,+((0x0006) / 256)
14559 4AC8  8C          	adc	a,h
14560 4AC9  67          	ld	h,a
14561 4ACA  7E          	ld	a,(hl)
14562 4ACB  12          	ld	(de),a
14563 4ACC  21 07 00    	ld	hl,0x0007
14564 4ACF  09          	add	hl,bc
14565 4AD0  4D          	ld	c,l
14566 4AD1  44          	ld	b,h
14567 4AD2  E1          	pop	hl
14568 4AD3  E5          	push	hl
14569 4AD4  11 07 00    	ld	de,0x0007
14570 4AD7  19          	add	hl, de
14571 4AD8  7E          	ld	a,(hl)
14572 4AD9  02          	ld	(bc),a
14573 4ADA              l_RemoveScript_00102:
14574 4ADA  21 02 01    	ld	hl,_numscripts
14575 4ADD  35          	dec	(hl)
14576 4ADE  DD F9       	ld	sp, ix
14577 4AE0  DD E1       	pop	ix
14578 4AE2  C9          	ret
14579 4AE3              	SECTION code_compiler
14580 4AE3              ;	---------------------------------
14581 4AE3              ; Function UpdateScript
14582 4AE3              ; ---------------------------------
14583 4AE3              _UpdateScript:
14584 4AE3  DD E5       	push	ix
14585 4AE5  DD 21 00 00 	ld	ix,0
14586 4AE9  DD 39       	add	ix,sp
14587 4AEB  21 EF FF    	ld	hl,-17
14588 4AEE  39          	add	hl,sp
14589 4AEF  F9          	ld	sp,hl
14590 4AF0  01 03 01    	ld	bc,_scripts+0
14591 4AF3  DD 6E 04    	ld	l,(ix+4)
14592 4AF6  16 00       	ld	d,0x00
14593 4AF8  62          	ld	h, d
14594 4AF9  29          	add	hl, hl
14595 4AFA  29          	add	hl, hl
14596 4AFB  29          	add	hl, hl
14597 4AFC  09          	add	hl,bc
14598 4AFD  EB          	ex	de,hl
14599 4AFE  21 06 00    	ld	hl,0x0006
14600 4B01  19          	add	hl,de
14601 4B02  DD 75 F4    	ld	(ix-12),l
14602 4B05  DD 74 F5    	ld	(ix-11),h
14603 4B08  4E          	ld	c,(hl)
14604 4B09  0C          	inc	c
14605 4B0A  71          	ld	(hl),c
14606 4B0B  DD 71 EF    	ld	(ix-17),c
14607 4B0E  1A          	ld	a,(de)
14608 4B0F  DD 77 F8    	ld	(ix-8),a
14609 4B12  13          	inc	de
14610 4B13  1A          	ld	a,(de)
14611 4B14  DD 77 F9    	ld	(ix-7),a
14612 4B17  1B          	dec	de
14613 4B18  6B          	ld	l, e
14614 4B19  62          	ld	h, d
14615 4B1A  23          	inc	hl
14616 4B1B  23          	inc	hl
14617 4B1C  7E          	ld	a,(hl)
14618 4B1D  DD 77 F1    	ld	(ix-15),a
14619 4B20  23          	inc	hl
14620 4B21  7E          	ld	a,(hl)
14621 4B22  DD 77 F2    	ld	(ix-14),a
14622 4B25  DD 73 FC    	ld	(ix-4),e
14623 4B28  DD 72 FD    	ld	(ix-3),d
14624 4B2B              l_UpdateScript_00117:
14625 4B2B  DD 7E F1    	ld	a,(ix-15)
14626 4B2E  DD 86 F8    	add	a,(ix-8)
14627 4B31  6F          	ld	l,a
14628 4B32  DD 7E F2    	ld	a,(ix-14)
14629 4B35  DD 8E F9    	adc	a,(ix-7)
14630 4B38  67          	ld	h,a
14631 4B39  DD 7E EF    	ld	a,(ix-17)
14632 4B3C  96          	sub	a,(hl)
14633 4B3D  C2 14 4D    	jp	NZ,l_UpdateScript_00120
14634 4B40  DD 4E F8    	ld	c,(ix-8)
14635 4B43  DD 46 F9    	ld	b,(ix-7)
14636 4B46  03          	inc	bc
14637 4B47  03          	inc	bc
14638 4B48  DD 6E F1    	ld	l,(ix-15)
14639 4B4B  DD 66 F2    	ld	h,(ix-14)
14640 4B4E  09          	add	hl,bc
14641 4B4F  7E          	ld	a,(hl)
14642 4B50  DD 77 F0    	ld	(ix-16),a
14643 4B53  DD 4E F8    	ld	c,(ix-8)
14644 4B56  DD 46 F9    	ld	b,(ix-7)
14645 4B59  03          	inc	bc
14646 4B5A  03          	inc	bc
14647 4B5B  03          	inc	bc
14648 4B5C  DD 6E F1    	ld	l,(ix-15)
14649 4B5F  DD 66 F2    	ld	h,(ix-14)
14650 4B62  09          	add	hl,bc
14651 4B63  7E          	ld	a,(hl)
14652 4B64  DD 77 F3    	ld	(ix-13),a
14653 4B67  DD 7E F8    	ld	a,(ix-8)
14654 4B6A  C6 04       	add	a,0x04
14655 4B6C  4F          	ld	c,a
14656 4B6D  DD 7E F9    	ld	a,(ix-7)
14657 4B70  CE 00       	adc	a,0x00
14658 4B72  47          	ld	b,a
14659 4B73  DD 6E F1    	ld	l,(ix-15)
14660 4B76  DD 66 F2    	ld	h,(ix-14)
14661 4B79  09          	add	hl,bc
14662 4B7A  46          	ld	b,(hl)
14663 4B7B  DD 6E F8    	ld	l,(ix-8)
14664 4B7E  DD 66 F9    	ld	h,(ix-7)
14665 4B81  23          	inc	hl
14666 4B82  DD 7E F1    	ld	a,(ix-15)
14667 4B85  85          	add	a, l
14668 4B86  6F          	ld	l,a
14669 4B87  DD 7E F2    	ld	a,(ix-14)
14670 4B8A  8C          	adc	a, h
14671 4B8B  67          	ld	h,a
14672 4B8C  7E          	ld	a,(hl)
14673 4B8D  4F          	ld	c,a
14674 4B8E  D6 01       	sub	a,0x01
14675 4B90  DA F1 4C    	jp	C,l_UpdateScript_00116
14676 4B93  3E 0A       	ld	a,0x0a
14677 4B95  91          	sub	a, c
14678 4B96  DA F1 4C    	jp	C,l_UpdateScript_00116
14679 4B99  0D          	dec	c
14680 4B9A  DD 6E F0    	ld	l,(ix-16)
14681 4B9D  26 00       	ld	h,0x00
14682 4B9F  29          	add	hl, hl
14683 4BA0  DD 75 F6    	ld	(ix-10),l
14684 4BA3  DD 74 F7    	ld	(ix-9),h
14685 4BA6  D5          	push	de
14686 4BA7  59          	ld	e,c
14687 4BA8  16 00       	ld	d,0x00
14688 4BAA  21 B2 4B    	ld	hl,l_UpdateScript_00148
14689 4BAD  19          	add	hl,de
14690 4BAE  19          	add	hl,de
14691 4BAF  19          	add	hl,de
14692 4BB0  D1          	pop	de
14693 4BB1  E9          	jp	(hl)
14694 4BB2              l_UpdateScript_00148:
14695 4BB2  C3 D0 4B    	jp	l_UpdateScript_00101
14696 4BB5  C3 2A 4C    	jp	l_UpdateScript_00104
14697 4BB8  C3 3F 4C    	jp	l_UpdateScript_00105
14698 4BBB  C3 4C 4C    	jp	l_UpdateScript_00106
14699 4BBE  C3 54 4C    	jp	l_UpdateScript_00107
14700 4BC1  C3 5C 4C    	jp	l_UpdateScript_00108
14701 4BC4  C3 D4 4C    	jp	l_UpdateScript_00114
14702 4BC7  C3 E6 4C    	jp	l_UpdateScript_00115
14703 4BCA  C3 D8 4B    	jp	l_UpdateScript_00102
14704 4BCD  C3 F4 4B    	jp	l_UpdateScript_00103
14705 4BD0              l_UpdateScript_00101:
14706 4BD0  D5          	push	de
14707 4BD1  CD CB 09    	call	_updatescrollact
14708 4BD4  D1          	pop	de
14709 4BD5  C3 F1 4C    	jp	l_UpdateScript_00116
14710 4BD8              l_UpdateScript_00102:
14711 4BD8  01 00 00    	ld	bc,_spawners
14712 4BDB  DD 6E F6    	ld	l,(ix-10)
14713 4BDE  DD 66 F7    	ld	h,(ix-9)
14714 4BE1  09          	add	hl,bc
14715 4BE2  4E          	ld	c,(hl)
14716 4BE3  23          	inc	hl
14717 4BE4  46          	ld	b,(hl)
14718 4BE5  D5          	push	de
14719 4BE6  21 00 00    	ld	hl,0x0000
14720 4BE9  E5          	push	hl
14721 4BEA  C5          	push	bc
14722 4BEB  CD F4 49    	call	_InitScript
14723 4BEE  F1          	pop	af
14724 4BEF  F1          	pop	af
14725 4BF0  D1          	pop	de
14726 4BF1  C3 F1 4C    	jp	l_UpdateScript_00116
14727 4BF4              l_UpdateScript_00103:
14728 4BF4  DD 70 FA    	ld	(ix-6),b
14729 4BF7  DD 36 FB 00 	ld	(ix-5),0x00
14730 4BFB  DD 6E FC    	ld	l,(ix-4)
14731 4BFE  DD 66 FD    	ld	h,(ix-3)
14732 4C01  01 04 00    	ld	bc,0x0004
14733 4C04  09          	add	hl, bc
14734 4C05  4E          	ld	c,(hl)
14735 4C06  23          	inc	hl
14736 4C07  46          	ld	b,(hl)
14737 4C08  DD 6E F6    	ld	l,(ix-10)
14738 4C0B  DD 66 F7    	ld	h,(ix-9)
14739 4C0E  09          	add	hl,bc
14740 4C0F  4E          	ld	c,(hl)
14741 4C10  23          	inc	hl
14742 4C11  46          	ld	b,(hl)
14743 4C12  D5          	push	de
14744 4C13  DD 6E FA    	ld	l,(ix-6)
14745 4C16  DD 66 FB    	ld	h,(ix-5)
14746 4C19  E5          	push	hl
14747 4C1A  DD 7E F3    	ld	a,(ix-13)
14748 4C1D  F5          	push	af
14749 4C1E  33          	inc	sp
14750 4C1F  C5          	push	bc
14751 4C20  CD 5F 05    	call	_InitTimeredLabel
14752 4C23  F1          	pop	af
14753 4C24  F1          	pop	af
14754 4C25  33          	inc	sp
14755 4C26  D1          	pop	de
14756 4C27  C3 F1 4C    	jp	l_UpdateScript_00116
14757 4C2A              l_UpdateScript_00104:
14758 4C2A  D5          	push	de
14759 4C2B  DD 7E F0    	ld	a,(ix-16)
14760 4C2E  48          	ld	c,b
14761 4C2F  47          	ld	b,a
14762 4C30  C5          	push	bc
14763 4C31  DD 7E F3    	ld	a,(ix-13)
14764 4C34  F5          	push	af
14765 4C35  33          	inc	sp
14766 4C36  CD 23 49    	call	_InitEnemy
14767 4C39  F1          	pop	af
14768 4C3A  33          	inc	sp
14769 4C3B  D1          	pop	de
14770 4C3C  C3 F1 4C    	jp	l_UpdateScript_00116
14771 4C3F              l_UpdateScript_00105:
14772 4C3F  DD 66 F3    	ld	h,(ix-13)
14773 4C42  DD 6E F0    	ld	l,(ix-16)
14774 4C45  E5          	push	hl
14775 4C46  CD 00 00    	call	_SMS_setBGPaletteColor_callee
14776 4C49  C3 F1 4C    	jp	l_UpdateScript_00116
14777 4C4C              l_UpdateScript_00106:
14778 4C4C  D5          	push	de
14779 4C4D  CD C9 01    	call	_fillBackground
14780 4C50  D1          	pop	de
14781 4C51  C3 F1 4C    	jp	l_UpdateScript_00116
14782 4C54              l_UpdateScript_00107:
14783 4C54  D5          	push	de
14784 4C55  CD E8 49    	call	_InitEnemies
14785 4C58  D1          	pop	de
14786 4C59  C3 F1 4C    	jp	l_UpdateScript_00116
14787 4C5C              l_UpdateScript_00108:
14788 4C5C  21 07 00    	ld	hl,0x0007
14789 4C5F  19          	add	hl,de
14790 4C60  DD 75 FA    	ld	(ix-6),l
14791 4C63  DD 74 FB    	ld	(ix-5),h
14792 4C66  4E          	ld	c,(hl)
14793 4C67  D5          	push	de
14794 4C68  DD 5E F3    	ld	e,(ix-13)
14795 4C6B  16 00       	ld	d,0x00
14796 4C6D  6B          	ld	l, e
14797 4C6E  62          	ld	h, d
14798 4C6F  29          	add	hl, hl
14799 4C70  29          	add	hl, hl
14800 4C71  19          	add	hl, de
14801 4C72  D1          	pop	de
14802 4C73  DD 7E F0    	ld	a,(ix-16)
14803 4C76  C6 FF       	add	a,0xff
14804 4C78  DD 77 F6    	ld	(ix-10),a
14805 4C7B  DD 75 FE    	ld	(ix-2),l
14806 4C7E  DD 74 FF    	ld	(ix-1),h
14807 4C81  79          	ld	a,c
14808 4C82  3C          	inc	a
14809 4C83  20 25       	jr	NZ,l_UpdateScript_00112
14810 4C85  DD 6E FA    	ld	l,(ix-6)
14811 4C88  DD 66 FB    	ld	h,(ix-5)
14812 4C8B  70          	ld	(hl),b
14813 4C8C  6B          	ld	l, e
14814 4C8D  62          	ld	h, d
14815 4C8E  7E          	ld	a,(hl)
14816 4C8F  23          	inc	hl
14817 4C90  46          	ld	b,(hl)
14818 4C91  DD 96 FE    	sub	a,(ix-2)
14819 4C94  4F          	ld	c,a
14820 4C95  78          	ld	a,b
14821 4C96  DD 9E FF    	sbc	a,(ix-1)
14822 4C99  47          	ld	b,a
14823 4C9A  EB          	ex	de,hl
14824 4C9B  71          	ld	(hl),c
14825 4C9C  23          	inc	hl
14826 4C9D  70          	ld	(hl),b
14827 4C9E  DD 6E F4    	ld	l,(ix-12)
14828 4CA1  DD 66 F5    	ld	h,(ix-11)
14829 4CA4  DD 7E F6    	ld	a,(ix-10)
14830 4CA7  77          	ld	(hl),a
14831 4CA8  18 6A       	jr	l_UpdateScript_00120
14832 4CAA              l_UpdateScript_00112:
14833 4CAA  0D          	dec	c
14834 4CAB  DD 6E FA    	ld	l,(ix-6)
14835 4CAE  DD 66 FB    	ld	h,(ix-5)
14836 4CB1  71          	ld	(hl),c
14837 4CB2  CB 79       	bit	7, c
14838 4CB4  20 3B       	jr	NZ,l_UpdateScript_00116
14839 4CB6  6B          	ld	l, e
14840 4CB7  62          	ld	h, d
14841 4CB8  7E          	ld	a,(hl)
14842 4CB9  23          	inc	hl
14843 4CBA  46          	ld	b,(hl)
14844 4CBB  DD 96 FE    	sub	a,(ix-2)
14845 4CBE  4F          	ld	c,a
14846 4CBF  78          	ld	a,b
14847 4CC0  DD 9E FF    	sbc	a,(ix-1)
14848 4CC3  47          	ld	b,a
14849 4CC4  EB          	ex	de,hl
14850 4CC5  71          	ld	(hl),c
14851 4CC6  23          	inc	hl
14852 4CC7  70          	ld	(hl),b
14853 4CC8  DD 6E F4    	ld	l,(ix-12)
14854 4CCB  DD 66 F5    	ld	h,(ix-11)
14855 4CCE  DD 7E F6    	ld	a,(ix-10)
14856 4CD1  77          	ld	(hl),a
14857 4CD2  18 40       	jr	l_UpdateScript_00120
14858 4CD4              l_UpdateScript_00114:
14859 4CD4  D5          	push	de
14860 4CD5  C5          	push	bc
14861 4CD6  33          	inc	sp
14862 4CD7  DD 66 F3    	ld	h,(ix-13)
14863 4CDA  DD 6E F0    	ld	l,(ix-16)
14864 4CDD  E5          	push	hl
14865 4CDE  CD 43 0B    	call	_InitExplosion
14866 4CE1  F1          	pop	af
14867 4CE2  33          	inc	sp
14868 4CE3  D1          	pop	de
14869 4CE4  18 0B       	jr	l_UpdateScript_00116
14870 4CE6              l_UpdateScript_00115:
14871 4CE6  DD 7E 04    	ld	a,(ix+4)
14872 4CE9  F5          	push	af
14873 4CEA  33          	inc	sp
14874 4CEB  CD 40 4A    	call	_RemoveScript
14875 4CEE  33          	inc	sp
14876 4CEF  18 23       	jr	l_UpdateScript_00120
14877 4CF1              l_UpdateScript_00116:
14878 4CF1  DD 7E F8    	ld	a,(ix-8)
14879 4CF4  C6 05       	add	a,0x05
14880 4CF6  DD 77 F8    	ld	(ix-8),a
14881 4CF9  DD 7E F9    	ld	a,(ix-7)
14882 4CFC  CE 00       	adc	a,0x00
14883 4CFE  DD 77 F9    	ld	(ix-7),a
14884 4D01  6B          	ld	l, e
14885 4D02  62          	ld	h, d
14886 4D03  4E          	ld	c,(hl)
14887 4D04  23          	inc	hl
14888 4D05  46          	ld	b,(hl)
14889 4D06  21 05 00    	ld	hl,0x0005
14890 4D09  09          	add	hl,bc
14891 4D0A  4D          	ld	c,l
14892 4D0B  44          	ld	b,h
14893 4D0C  6B          	ld	l, e
14894 4D0D  62          	ld	h, d
14895 4D0E  71          	ld	(hl),c
14896 4D0F  23          	inc	hl
14897 4D10  70          	ld	(hl),b
14898 4D11  C3 2B 4B    	jp	l_UpdateScript_00117
14899 4D14              l_UpdateScript_00120:
14900 4D14  DD F9       	ld	sp, ix
14901 4D16  DD E1       	pop	ix
14902 4D18  C9          	ret
14903 4D19              	SECTION code_compiler
14904 4D19              ;	---------------------------------
14905 4D19              ; Function UpdateScripts
14906 4D19              ; ---------------------------------
14907 4D19              _UpdateScripts:
14908 4D19  3E 0F       	ld	a,0x0f
14909 4D1B  F5          	push	af
14910 4D1C  33          	inc	sp
14911 4D1D  CD 27 00    	call	_changeBank
14912 4D20  33          	inc	sp
14913 4D21  21 02 01    	ld	hl,_numscripts
14914 4D24  7E          	ld	a,(hl)
14915 4D25  B7          	or	a, a
14916 4D26  28 10       	jr	Z,l_UpdateScripts_00107
14917 4D28  46          	ld	b,(hl)
14918 4D29  05          	dec	b
14919 4D2A              l_UpdateScripts_00105:
14920 4D2A  CB 78       	bit	7, b
14921 4D2C  C0          	ret	NZ
14922 4D2D  C5          	push	bc
14923 4D2E  C5          	push	bc
14924 4D2F  33          	inc	sp
14925 4D30  CD E3 4A    	call	_UpdateScript
14926 4D33  33          	inc	sp
14927 4D34  C1          	pop	bc
14928 4D35  05          	dec	b
14929 4D36  18 F2       	jr	l_UpdateScripts_00105
14930 4D38              l_UpdateScripts_00107:
14931 4D38  C9          	ret
14932 4D39              	SECTION code_compiler
14933 4D39              ;	---------------------------------
14934 4D39              ; Function InitMikGamesStage
14935 4D39              ; ---------------------------------
14936 4D39              _InitMikGamesStage:
14937 4D39  CD FD 02    	call	_InitStage
14938 4D3C  21 40 01    	ld	hl,0x0140
14939 4D3F  CD 00 00    	call	_SMS_VDPturnOffFeature_fastcall
14940 4D42  3E 03       	ld	a,0x03
14941 4D44  F5          	push	af
14942 4D45  33          	inc	sp
14943 4D46  21 00 00    	ld	hl,_logopalette_bin
14944 4D49  E5          	push	hl
14945 4D4A  CD 7D 01    	call	_LoadBGPalette
14946 4D4D  F1          	pop	af
14947 4D4E  33          	inc	sp
14948 4D4F  3E 02       	ld	a,0x02
14949 4D51  F5          	push	af
14950 4D52  33          	inc	sp
14951 4D53  21 80 00    	ld	hl,0x0080
14952 4D56  E5          	push	hl
14953 4D57  21 00 00    	ld	hl,_mikgamestilemap_bin
14954 4D5A  E5          	push	hl
14955 4D5B  21 00 00    	ld	hl,_mikgamestiles_psgcompr
14956 4D5E  E5          	push	hl
14957 4D5F  CD 4C 01    	call	_LoadGraphics
14958 4D62  21 07 00    	ld	hl,7
14959 4D65  39          	add	hl,sp
14960 4D66  F9          	ld	sp,hl
14961 4D67  2E 10       	ld	l,0x10
14962 4D69  CD 00 00    	call	_SMS_setBGScrollY_fastcall
14963 4D6C  21 40 01    	ld	hl,0x0140
14964 4D6F  CD 00 00    	call	_SMS_VDPturnOnFeature_fastcall
14965 4D72              l_InitMikGamesStage_00108:
14966 4D72  CD 6A 03    	call	_UpdateStage
14967 4D75  21 02 00    	ld	hl,_stageframe
14968 4D78  7E          	ld	a,(hl)
14969 4D79  D6 1E       	sub	a,0x1e
14970 4D7B  23          	inc	hl
14971 4D7C  7E          	ld	a,(hl)
14972 4D7D  DE 00       	sbc	a,0x00
14973 4D7F  30 0A       	jr	NC,l_InitMikGamesStage_00102
14974 4D81  2B          	dec	hl
14975 4D82  7E          	ld	a,(hl)
14976 4D83  87          	add	a, a
14977 4D84  87          	add	a, a
14978 4D85  C6 10       	add	a,0x10
14979 4D87  6F          	ld	l,a
14980 4D88  CD 00 00    	call	_SMS_setBGScrollY_fastcall
14981 4D8B              l_InitMikGamesStage_00102:
14982 4D8B  3A 00 00    	ld	a,(_keystatus)
14983 4D8E  E6 10       	and	a,0x10
14984 4D90  C0          	ret	NZ
14985 4D91  3E 78       	ld	a,0x78
14986 4D93  21 02 00    	ld	hl,_stageframe
14987 4D96  BE          	cp	a, (hl)
14988 4D97  3E 00       	ld	a,0x00
14989 4D99  23          	inc	hl
14990 4D9A  9E          	sbc	a, (hl)
14991 4D9B  D8          	ret	C
14992 4D9C  CD 77 04    	call	_UpdatePSG
14993 4D9F  18 D1       	jr	l_InitMikGamesStage_00108
14994 4DA1              	SECTION code_compiler
14995 4DA1              ;	---------------------------------
14996 4DA1              ; Function InitLogoStage
14997 4DA1              ; ---------------------------------
14998 4DA1              _InitLogoStage:
14999 4DA1  CD FD 02    	call	_InitStage
15000 4DA4  21 40 01    	ld	hl,0x0140
15001 4DA7  CD 00 00    	call	_SMS_VDPturnOffFeature_fastcall
15002 4DAA  3E 03       	ld	a,0x03
15003 4DAC  F5          	push	af
15004 4DAD  33          	inc	sp
15005 4DAE  21 00 00    	ld	hl,_logopalette_bin
15006 4DB1  E5          	push	hl
15007 4DB2  CD 7D 01    	call	_LoadBGPalette
15008 4DB5  F1          	pop	af
15009 4DB6  33          	inc	sp
15010 4DB7  3E 03       	ld	a,0x03
15011 4DB9  F5          	push	af
15012 4DBA  33          	inc	sp
15013 4DBB  21 00 00    	ld	hl,_logotiles_psgcompr
15014 4DBE  E5          	push	hl
15015 4DBF  CD 2A 01    	call	_LoadTiles
15016 4DC2  33          	inc	sp
15017 4DC3  21 00 00    	ld	hl,_logotilemap_m
15018 4DC6  E3          	ex	(sp),hl
15019 4DC7  21 1C 00    	ld	hl,0x001c
15020 4DCA  E5          	push	hl
15021 4DCB  21 00 00    	ld	hl,_logotilemap_l
15022 4DCE  E5          	push	hl
15023 4DCF  CD 21 06    	call	_SetMapLines
15024 4DD2  21 06 00    	ld	hl,6
15025 4DD5  39          	add	hl,sp
15026 4DD6  F9          	ld	sp,hl
15027 4DD7  3E 03       	ld	a,0x03
15028 4DD9  F5          	push	af
15029 4DDA  33          	inc	sp
15030 4DDB  CD 01 07    	call	_InitMap
15031 4DDE  33          	inc	sp
15032 4DDF  21 06 15    	ld	hl,0x1506
15033 4DE2  E5          	push	hl
15034 4DE3  21 00 00    	ld	hl,___str_0
15035 4DE6  E5          	push	hl
15036 4DE7  CD 05 02    	call	_WriteText
15037 4DEA  F1          	pop	af
15038 4DEB  21 06 16    	ld	hl,0x1606
15039 4DEE  E3          	ex	(sp),hl
15040 4DEF  21 14 00    	ld	hl,___str_1
15041 4DF2  E5          	push	hl
15042 4DF3  CD 05 02    	call	_WriteText
15043 4DF6  F1          	pop	af
15044 4DF7  F1          	pop	af
15045 4DF8  21 40 01    	ld	hl,0x0140
15046 4DFB  CD 00 00    	call	_SMS_VDPturnOnFeature_fastcall
15047 4DFE  21 06 00    	ld	hl,0x0006
15048 4E01  E5          	push	hl
15049 4E02  21 00 00    	ld	hl,_logo_psg
15050 4E05  E5          	push	hl
15051 4E06  CD 16 04    	call	_PlayMusic
15052 4E09  F1          	pop	af
15053 4E0A  F1          	pop	af
15054 4E0B  21 2E 01    	ld	hl,_dojukebox
15055 4E0E  36 00       	ld	(hl),0x00
15056 4E10              l_InitLogoStage_00109:
15057 4E10  CD 6A 03    	call	_UpdateStage
15058 4E13  ED 4B 02 00 	ld	bc,(_stageframe)
15059 4E17  79          	ld	a,c
15060 4E18  CB 38       	srl	b
15061 4E1A  1F          	rra
15062 4E1B  CB 38       	srl	b
15063 4E1D  1F          	rra
15064 4E1E  CB 38       	srl	b
15065 4E20  1F          	rra
15066 4E21  CB 38       	srl	b
15067 4E23  1F          	rra
15068 4E24  CB 38       	srl	b
15069 4E26  1F          	rra
15070 4E27  CB 47       	bit	0,a
15071 4E29  20 0F       	jr	NZ,l_InitLogoStage_00102
15072 4E2B  21 08 0E    	ld	hl,0x0e08
15073 4E2E  E5          	push	hl
15074 4E2F  21 28 00    	ld	hl,___str_2
15075 4E32  E5          	push	hl
15076 4E33  CD 05 02    	call	_WriteText
15077 4E36  F1          	pop	af
15078 4E37  F1          	pop	af
15079 4E38  18 0D       	jr	l_InitLogoStage_00103
15080 4E3A              l_InitLogoStage_00102:
15081 4E3A  21 08 0E    	ld	hl,0x0e08
15082 4E3D  E5          	push	hl
15083 4E3E  21 39 00    	ld	hl,___str_3
15084 4E41  E5          	push	hl
15085 4E42  CD 05 02    	call	_WriteText
15086 4E45  F1          	pop	af
15087 4E46  F1          	pop	af
15088 4E47              l_InitLogoStage_00103:
15089 4E47  3A 00 00    	ld	a,(_keystatus)
15090 4E4A  E6 10       	and	a,0x10
15091 4E4C  28 07       	jr	Z,l_InitLogoStage_00105
15092 4E4E  21 2E 01    	ld	hl,_dojukebox
15093 4E51  36 00       	ld	(hl),0x00
15094 4E53  18 13       	jr	l_InitLogoStage_00111
15095 4E55              l_InitLogoStage_00105:
15096 4E55  3A 00 00    	ld	a,(_keystatus)
15097 4E58  E6 20       	and	a,0x20
15098 4E5A  28 07       	jr	Z,l_InitLogoStage_00107
15099 4E5C  21 2E 01    	ld	hl,_dojukebox
15100 4E5F  36 01       	ld	(hl),0x01
15101 4E61  18 05       	jr	l_InitLogoStage_00111
15102 4E63              l_InitLogoStage_00107:
15103 4E63  CD 77 04    	call	_UpdatePSG
15104 4E66  18 A8       	jr	l_InitLogoStage_00109
15105 4E68              l_InitLogoStage_00111:
15106 4E68  C9          	ret
15107 4E69              	SECTION rodata_compiler
15108 0000              ___str_0:
15109 0000  4D 41 52 43 48 20 32 30 31 37 2C 4D 49 4B 47 41 4D 45 53 
                        	DEFM "MARCH 2017,MIKGAMES"
15110 0013  00          	DEFB 0x00
15111 0014              	SECTION rodata_compiler
15112 0014              ___str_1:
15113 0014  41 4C 4C 20 52 49 47 48 54 53 20 52 45 53 45 52 56 45 44 
                        	DEFM "ALL RIGHTS RESERVED"
15114 0027  00          	DEFB 0x00
15115 0028              	SECTION rodata_compiler
15116 0028              ___str_2:
15117 0028  50 55 53 48 20 46 49 52 45 20 42 55 54 54 4F 4E 
                        	DEFM "PUSH FIRE BUTTON"
15118 0038  00          	DEFB 0x00
15119 0039              	SECTION rodata_compiler
15120 0039              ___str_3:
15121 0039  20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 
                        	DEFM "                "
15122 0049  00          	DEFB 0x00
15123 004A              	SECTION code_compiler
15124 4E69              ;	---------------------------------
15125 4E69              ; Function UpdateJukeboxInfo
15126 4E69              ; ---------------------------------
15127 4E69              _UpdateJukeboxInfo:
15128 4E69  3E 0F       	ld	a,0x0f
15129 4E6B  F5          	push	af
15130 4E6C  33          	inc	sp
15131 4E6D  CD 27 00    	call	_changeBank
15132 4E70  33          	inc	sp
15133 4E71  3A 54 01    	ld	a,(_jukeboxselectedline)
15134 4E74  87          	add	a, a
15135 4E75  C6 08       	add	a,0x08
15136 4E77  07          	rlca
15137 4E78  07          	rlca
15138 4E79  07          	rlca
15139 4E7A  E6 F8       	and	a,0xf8
15140 4E7C  47          	ld	b,a
15141 4E7D  AF          	xor	a, a
15142 4E7E  48          	ld	c,b
15143 4E7F  47          	ld	b,a
15144 4E80  C5          	push	bc
15145 4E81  3E 20       	ld	a,0x20
15146 4E83  F5          	push	af
15147 4E84  33          	inc	sp
15148 4E85  CD 00 00    	call	_SMS_addSprite_callee
15149 4E88  01 00 00    	ld	bc,_jukebox_names+0
15150 4E8B  2A 55 01    	ld	hl,(_jukeboxselectedsong)
15151 4E8E  26 00       	ld	h,0x00
15152 4E90  29          	add	hl, hl
15153 4E91  09          	add	hl,bc
15154 4E92  4E          	ld	c,(hl)
15155 4E93  23          	inc	hl
15156 4E94  46          	ld	b,(hl)
15157 4E95  21 10 0E    	ld	hl,0x0e10
15158 4E98  E5          	push	hl
15159 4E99  C5          	push	bc
15160 4E9A  CD 05 02    	call	_WriteText
15161 4E9D  F1          	pop	af
15162 4E9E  F1          	pop	af
15163 4E9F  01 00 00    	ld	bc,_difficultlabels+0
15164 4EA2  2A 0F 00    	ld	hl,(_gamelevel)
15165 4EA5  26 00       	ld	h,0x00
15166 4EA7  29          	add	hl, hl
15167 4EA8  09          	add	hl,bc
15168 4EA9  4E          	ld	c,(hl)
15169 4EAA  23          	inc	hl
15170 4EAB  46          	ld	b,(hl)
15171 4EAC  21 10 0A    	ld	hl,0x0a10
15172 4EAF  E5          	push	hl
15173 4EB0  C5          	push	bc
15174 4EB1  CD 05 02    	call	_WriteText
15175 4EB4  F1          	pop	af
15176 4EB5  F1          	pop	af
15177 4EB6  3A 10 00    	ld	a,(_gamestock)
15178 4EB9  4F          	ld	c,a
15179 4EBA  06 00       	ld	b,0x00
15180 4EBC  21 0F 0C    	ld	hl,0x0c0f
15181 4EBF  E5          	push	hl
15182 4EC0  21 02 00    	ld	hl,0x0002
15183 4EC3  E5          	push	hl
15184 4EC4  C5          	push	bc
15185 4EC5  CD 61 02    	call	_WriteNumber
15186 4EC8  21 06 00    	ld	hl,6
15187 4ECB  39          	add	hl,sp
15188 4ECC  F9          	ld	sp,hl
15189 4ECD  3A 56 01    	ld	a,(_jukeboxcheckkey)
15190 4ED0  3D          	dec	a
15191 4ED1  C2 8E 4F    	jp	NZ,l_UpdateJukeboxInfo_00127
15192 4ED4  21 56 01    	ld	hl,_jukeboxcheckkey
15193 4ED7  36 00       	ld	(hl),0x00
15194 4ED9  3A 54 01    	ld	a,(_jukeboxselectedline)
15195 4EDC  D6 03       	sub	a,0x03
15196 4EDE  20 1F       	jr	NZ,l_UpdateJukeboxInfo_00110
15197 4EE0  3A 00 00    	ld	a,(_keystatus)
15198 4EE3  E6 04       	and	a,0x04
15199 4EE5  28 08       	jr	Z,l_UpdateJukeboxInfo_00104
15200 4EE7  21 55 01    	ld	hl,_jukeboxselectedsong
15201 4EEA  7E          	ld	a,(hl)
15202 4EEB  B7          	or	a, a
15203 4EEC  28 01       	jr	Z,l_UpdateJukeboxInfo_00104
15204 4EEE  35          	dec	(hl)
15205 4EEF              l_UpdateJukeboxInfo_00104:
15206 4EEF  3A 00 00    	ld	a,(_keystatus)
15207 4EF2  E6 08       	and	a,0x08
15208 4EF4  28 09       	jr	Z,l_UpdateJukeboxInfo_00110
15209 4EF6  21 55 01    	ld	hl,_jukeboxselectedsong
15210 4EF9  7E          	ld	a,(hl)
15211 4EFA  D6 14       	sub	a,0x14
15212 4EFC  30 01       	jr	NC,l_UpdateJukeboxInfo_00110
15213 4EFE  34          	inc	(hl)
15214 4EFF              l_UpdateJukeboxInfo_00110:
15215 4EFF  3A 00 00    	ld	a,(_keystatus)
15216 4F02  0F          	rrca
15217 4F03  30 09       	jr	NC,l_UpdateJukeboxInfo_00114
15218 4F05  3E 01       	ld	a,0x01
15219 4F07  21 54 01    	ld	hl,_jukeboxselectedline
15220 4F0A  96          	sub	a, (hl)
15221 4F0B  30 01       	jr	NC,l_UpdateJukeboxInfo_00114
15222 4F0D  35          	dec	(hl)
15223 4F0E              l_UpdateJukeboxInfo_00114:
15224 4F0E  3A 00 00    	ld	a,(_keystatus)
15225 4F11  E6 02       	and	a,0x02
15226 4F13  28 09       	jr	Z,l_UpdateJukeboxInfo_00118
15227 4F15  21 54 01    	ld	hl,_jukeboxselectedline
15228 4F18  7E          	ld	a,(hl)
15229 4F19  D6 04       	sub	a,0x04
15230 4F1B  30 01       	jr	NC,l_UpdateJukeboxInfo_00118
15231 4F1D  34          	inc	(hl)
15232 4F1E              l_UpdateJukeboxInfo_00118:
15233 4F1E  3A 00 00    	ld	a,(_keystatus)
15234 4F21  E6 10       	and	a,0x10
15235 4F23  28 69       	jr	Z,l_UpdateJukeboxInfo_00127
15236 4F25  21 54 01    	ld	hl,_jukeboxselectedline
15237 4F28  7E          	ld	a,(hl)
15238 4F29  D6 01       	sub	a,0x01
15239 4F2B  38 61       	jr	C,l_UpdateJukeboxInfo_00127
15240 4F2D  3E 04       	ld	a,0x04
15241 4F2F  96          	sub	a, (hl)
15242 4F30  38 5C       	jr	C,l_UpdateJukeboxInfo_00127
15243 4F32  5E          	ld	e,(hl)
15244 4F33  1D          	dec	e
15245 4F34  16 00       	ld	d,0x00
15246 4F36  21 3C 4F    	ld	hl,l_UpdateJukeboxInfo_00197
15247 4F39  19          	add	hl,de
15248 4F3A  19          	add	hl,de
15249 4F3B  E9          	jp	(hl)
15250 4F3C              l_UpdateJukeboxInfo_00197:
15251 4F3C  18 06       	jr	l_UpdateJukeboxInfo_00119
15252 4F3E  18 0D       	jr	l_UpdateJukeboxInfo_00120
15253 4F40  18 1B       	jr	l_UpdateJukeboxInfo_00121
15254 4F42  18 46       	jr	l_UpdateJukeboxInfo_00122
15255 4F44              l_UpdateJukeboxInfo_00119:
15256 4F44  3E 01       	ld	a,0x01
15257 4F46  21 0F 00    	ld	hl,_gamelevel
15258 4F49  96          	sub	a, (hl)
15259 4F4A  77          	ld	(hl),a
15260 4F4B  18 41       	jr	l_UpdateJukeboxInfo_00127
15261 4F4D              l_UpdateJukeboxInfo_00120:
15262 4F4D  2A 10 00    	ld	hl,(_gamestock)
15263 4F50  26 06       	ld	h,0x06
15264 4F52  E5          	push	hl
15265 4F53  CD 00 00    	call	__moduchar_callee
15266 4F56  7D          	ld	a,l
15267 4F57  3C          	inc	a
15268 4F58  32 10 00    	ld	(_gamestock),a
15269 4F5B  18 31       	jr	l_UpdateJukeboxInfo_00127
15270 4F5D              l_UpdateJukeboxInfo_00121:
15271 4F5D  2A 55 01    	ld	hl,(_jukeboxselectedsong)
15272 4F60  26 00       	ld	h,0x00
15273 4F62  01 00 00    	ld	bc,_jukebox_repeat
15274 4F65  09          	add	hl,bc
15275 4F66  4E          	ld	c, (hl)
15276 4F67  2A 55 01    	ld	hl,(_jukeboxselectedsong)
15277 4F6A  26 00       	ld	h,0x00
15278 4F6C  11 00 00    	ld	de,_jukebox_banks
15279 4F6F  19          	add	hl,de
15280 4F70  46          	ld	b, (hl)
15281 4F71  2A 55 01    	ld	hl,(_jukeboxselectedsong)
15282 4F74  26 00       	ld	h,0x00
15283 4F76  29          	add	hl, hl
15284 4F77  11 00 00    	ld	de,_jukebox_songs
15285 4F7A  19          	add	hl,de
15286 4F7B  5E          	ld	e,(hl)
15287 4F7C  23          	inc	hl
15288 4F7D  56          	ld	d,(hl)
15289 4F7E  79          	ld	a,c
15290 4F7F  48          	ld	c,b
15291 4F80  47          	ld	b,a
15292 4F81  C5          	push	bc
15293 4F82  D5          	push	de
15294 4F83  CD 16 04    	call	_PlayMusic
15295 4F86  F1          	pop	af
15296 4F87  F1          	pop	af
15297 4F88  18 04       	jr	l_UpdateJukeboxInfo_00127
15298 4F8A              l_UpdateJukeboxInfo_00122:
15299 4F8A  2E 00       	ld	l,0x00
15300 4F8C  18 0E       	jr	l_UpdateJukeboxInfo_00130
15301 4F8E              l_UpdateJukeboxInfo_00127:
15302 4F8E  2A 00 00    	ld	hl,(_keystatus)
15303 4F91  7C          	ld	a,h
15304 4F92  B5          	or	a,l
15305 4F93  20 05       	jr	NZ,l_UpdateJukeboxInfo_00129
15306 4F95  21 56 01    	ld	hl,_jukeboxcheckkey
15307 4F98  36 01       	ld	(hl),0x01
15308 4F9A              l_UpdateJukeboxInfo_00129:
15309 4F9A  2E 01       	ld	l,0x01
15310 4F9C              l_UpdateJukeboxInfo_00130:
15311 4F9C  C9          	ret
15312 4F9D              	SECTION code_compiler
15313 4F9D              ;	---------------------------------
15314 4F9D              ; Function InitJukeboxStage
15315 4F9D              ; ---------------------------------
15316 4F9D              _InitJukeboxStage:
15317 4F9D  21 54 01    	ld	hl,_jukeboxselectedline
15318 4FA0  36 01       	ld	(hl),0x01
15319 4FA2  21 55 01    	ld	hl,_jukeboxselectedsong
15320 4FA5  36 00       	ld	(hl),0x00
15321 4FA7  21 56 01    	ld	hl,_jukeboxcheckkey
15322 4FAA  36 00       	ld	(hl),0x00
15323 4FAC  CD FD 02    	call	_InitStage
15324 4FAF  21 40 01    	ld	hl,0x0140
15325 4FB2  CD 00 00    	call	_SMS_VDPturnOffFeature_fastcall
15326 4FB5  3E 03       	ld	a,0x03
15327 4FB7  F5          	push	af
15328 4FB8  33          	inc	sp
15329 4FB9  21 00 00    	ld	hl,_logopalette_bin
15330 4FBC  E5          	push	hl
15331 4FBD  CD 7D 01    	call	_LoadBGPalette
15332 4FC0  F1          	pop	af
15333 4FC1  33          	inc	sp
15334 4FC2  3E 07       	ld	a,0x07
15335 4FC4  F5          	push	af
15336 4FC5  33          	inc	sp
15337 4FC6  21 00 01    	ld	hl,0x0100
15338 4FC9  E5          	push	hl
15339 4FCA  21 00 00    	ld	hl,_cursors_psgcompr
15340 4FCD  E5          	push	hl
15341 4FCE  CD FD 00    	call	_LoadSprite
15342 4FD1  F1          	pop	af
15343 4FD2  F1          	pop	af
15344 4FD3  33          	inc	sp
15345 4FD4  21 40 01    	ld	hl,0x0140
15346 4FD7  CD 00 00    	call	_SMS_VDPturnOnFeature_fastcall
15347 4FDA  21 0A 06    	ld	hl,0x060a
15348 4FDD  E5          	push	hl
15349 4FDE  21 4A 00    	ld	hl,___str_4
15350 4FE1  E5          	push	hl
15351 4FE2  CD 05 02    	call	_WriteText
15352 4FE5  F1          	pop	af
15353 4FE6  21 06 0A    	ld	hl,0x0a06
15354 4FE9  E3          	ex	(sp),hl
15355 4FEA  21 57 00    	ld	hl,___str_5
15356 4FED  E5          	push	hl
15357 4FEE  CD 05 02    	call	_WriteText
15358 4FF1  F1          	pop	af
15359 4FF2  21 06 0C    	ld	hl,0x0c06
15360 4FF5  E3          	ex	(sp),hl
15361 4FF6  21 5D 00    	ld	hl,___str_6
15362 4FF9  E5          	push	hl
15363 4FFA  CD 05 02    	call	_WriteText
15364 4FFD  F1          	pop	af
15365 4FFE  21 06 0E    	ld	hl,0x0e06
15366 5001  E3          	ex	(sp),hl
15367 5002  21 63 00    	ld	hl,___str_7
15368 5005  E5          	push	hl
15369 5006  CD 05 02    	call	_WriteText
15370 5009  F1          	pop	af
15371 500A  21 06 10    	ld	hl,0x1006
15372 500D  E3          	ex	(sp),hl
15373 500E  21 69 00    	ld	hl,___str_8
15374 5011  E5          	push	hl
15375 5012  CD 05 02    	call	_WriteText
15376 5015  F1          	pop	af
15377 5016  F1          	pop	af
15378 5017              l_InitJukeboxStage_00104:
15379 5017  CD 6A 03    	call	_UpdateStage
15380 501A  CD 69 4E    	call	_UpdateJukeboxInfo
15381 501D  7D          	ld	a,l
15382 501E  B7          	or	a, a
15383 501F  C8          	ret	Z
15384 5020  CD 77 04    	call	_UpdatePSG
15385 5023  18 F2       	jr	l_InitJukeboxStage_00104
15386 5025              	SECTION rodata_compiler
15387 004A              ___str_4:
15388 004A  47 41 4D 45 20 4F 50 54 49 4F 4E 53 
                        	DEFM "GAME OPTIONS"
15389 0056  00          	DEFB 0x00
15390 0057              	SECTION rodata_compiler
15391 0057              ___str_5:
15392 0057  4C 45 56 45 4C 
                        	DEFM "LEVEL"
15393 005C  00          	DEFB 0x00
15394 005D              	SECTION rodata_compiler
15395 005D              ___str_6:
15396 005D  53 54 4F 43 4B 
                        	DEFM "STOCK"
15397 0062  00          	DEFB 0x00
15398 0063              	SECTION rodata_compiler
15399 0063              ___str_7:
15400 0063  4D 55 53 49 43 
                        	DEFM "MUSIC"
15401 0068  00          	DEFB 0x00
15402 0069              	SECTION rodata_compiler
15403 0069              ___str_8:
15404 0069  45 58 49 54 	DEFM "EXIT"
15405 006D  00          	DEFB 0x00
15406 006E              	SECTION code_compiler
15407 5025              ;	---------------------------------
15408 5025              ; Function InitIntro1Stage
15409 5025              ; ---------------------------------
15410 5025              _InitIntro1Stage:
15411 5025  3E 08       	ld	a,0x08
15412 5027  F5          	push	af
15413 5028  33          	inc	sp
15414 5029  21 80 02    	ld	hl,0x0280
15415 502C  E5          	push	hl
15416 502D  21 00 00    	ld	hl,_introstage1tilemap_bin
15417 5030  E5          	push	hl
15418 5031  21 00 00    	ld	hl,_introstage1tiles_psgcompr
15419 5034  E5          	push	hl
15420 5035  CD 4C 01    	call	_LoadGraphics
15421 5038  21 07 00    	ld	hl,7
15422 503B  39          	add	hl,sp
15423 503C  F9          	ld	sp,hl
15424 503D  3E 04       	ld	a,0x04
15425 503F  F5          	push	af
15426 5040  33          	inc	sp
15427 5041  21 36 01    	ld	hl,0x0136
15428 5044  E5          	push	hl
15429 5045  21 00 00    	ld	hl,_introovni_psgcompr
15430 5048  E5          	push	hl
15431 5049  CD FD 00    	call	_LoadSprite
15432 504C  F1          	pop	af
15433 504D  33          	inc	sp
15434 504E  21 0F 00    	ld	hl,0x000f
15435 5051  E3          	ex	(sp),hl
15436 5052  21 00 00    	ld	hl,_intro1_psg
15437 5055  E5          	push	hl
15438 5056  CD 16 04    	call	_PlayMusic
15439 5059  F1          	pop	af
15440 505A  21 00 00    	ld	hl,_intro1labels
15441 505D  E3          	ex	(sp),hl
15442 505E  21 00 00    	ld	hl,_intro1script
15443 5061  E5          	push	hl
15444 5062  CD F4 49    	call	_InitScript
15445 5065  F1          	pop	af
15446 5066  F1          	pop	af
15447 5067  C9          	ret
15448 5068              	SECTION code_compiler
15449 5068              ;	---------------------------------
15450 5068              ; Function DoIntro2Scroll
15451 5068              ; ---------------------------------
15452 5068              _DoIntro2Scroll:
15453 5068  3A 04 00    	ld	a,(_stageframe2mod)
15454 506B  B7          	or	a, a
15455 506C  20 57       	jr	NZ,l_DoIntro2Scroll_00105
15456 506E  2A 02 00    	ld	hl,(_stageframe)
15457 5071  22 2C 01    	ld	(_introstagevelx),hl
15458 5074  21 2D 01    	ld	hl,_introstagevelx + 1
15459 5077  CB 2E       	sra	(hl)
15460 5079  2B          	dec	hl
15461 507A  CB 1E       	rr	(hl)
15462 507C  23          	inc	hl
15463 507D  CB 2E       	sra	(hl)
15464 507F  2B          	dec	hl
15465 5080  CB 1E       	rr	(hl)
15466 5082  23          	inc	hl
15467 5083  CB 2E       	sra	(hl)
15468 5085  2B          	dec	hl
15469 5086  CB 1E       	rr	(hl)
15470 5088  3E 20       	ld	a,0x20
15471 508A  BE          	cp	a, (hl)
15472 508B  3E 00       	ld	a,0x00
15473 508D  23          	inc	hl
15474 508E  9E          	sbc	a, (hl)
15475 508F  E2 94 50    	jp	PO, l_DoIntro2Scroll_00115
15476 5092  EE 80       	xor	a,0x80
15477 5094              l_DoIntro2Scroll_00115:
15478 5094  F2 9D 50    	jp	P,l_DoIntro2Scroll_00102
15479 5097  21 20 00    	ld	hl,0x0020
15480 509A  22 2C 01    	ld	(_introstagevelx),hl
15481 509D              l_DoIntro2Scroll_00102:
15482 509D  2A 2A 01    	ld	hl,(_introstageposx)
15483 50A0  ED 4B 2C 01 	ld	bc,(_introstagevelx)
15484 50A4  09          	add	hl,bc
15485 50A5  22 2A 01    	ld	(_introstageposx),hl
15486 50A8  AF          	xor	a,a
15487 50A9  21 2A 01    	ld	hl,_introstageposx
15488 50AC  96          	sub	a, (hl)
15489 50AD  4F          	ld	c,a
15490 50AE  3E 00       	ld	a,0x00
15491 50B0  23          	inc	hl
15492 50B1  9E          	sbc	a, (hl)
15493 50B2  47          	ld	b,a
15494 50B3  CB 28       	sra	b
15495 50B5  CB 19       	rr	c
15496 50B7  CB 28       	sra	b
15497 50B9  CB 19       	rr	c
15498 50BB  21 C0 FF    	ld	hl,0xffc0
15499 50BE  E5          	push	hl
15500 50BF  C5          	push	bc
15501 50C0  CD EF 01    	call	_UpdateScroll
15502 50C3  F1          	pop	af
15503 50C4  F1          	pop	af
15504 50C5              l_DoIntro2Scroll_00105:
15505 50C5  C9          	ret
15506 50C6              	SECTION code_compiler
15507 50C6              ;	---------------------------------
15508 50C6              ; Function InitIntro2Stage
15509 50C6              ; ---------------------------------
15510 50C6              _InitIntro2Stage:
15511 50C6  3E 08       	ld	a,0x08
15512 50C8  F5          	push	af
15513 50C9  33          	inc	sp
15514 50CA  21 C0 02    	ld	hl,0x02c0
15515 50CD  E5          	push	hl
15516 50CE  21 00 00    	ld	hl,_introstage2tilemap_bin
15517 50D1  E5          	push	hl
15518 50D2  21 00 00    	ld	hl,_introstage2tiles_psgcompr
15519 50D5  E5          	push	hl
15520 50D6  CD 4C 01    	call	_LoadGraphics
15521 50D9  21 07 00    	ld	hl,7
15522 50DC  39          	add	hl,sp
15523 50DD  F9          	ld	sp,hl
15524 50DE  3E 04       	ld	a,0x04
15525 50E0  F5          	push	af
15526 50E1  33          	inc	sp
15527 50E2  21 36 01    	ld	hl,0x0136
15528 50E5  E5          	push	hl
15529 50E6  21 00 00    	ld	hl,_introsideplayer_psgcompr
15530 50E9  E5          	push	hl
15531 50EA  CD FD 00    	call	_LoadSprite
15532 50ED  F1          	pop	af
15533 50EE  33          	inc	sp
15534 50EF  21 04 00    	ld	hl,0x0004
15535 50F2  E3          	ex	(sp),hl
15536 50F3  21 00 00    	ld	hl,_intro2_psg
15537 50F6  E5          	push	hl
15538 50F7  CD 16 04    	call	_PlayMusic
15539 50FA  F1          	pop	af
15540 50FB  21 00 00    	ld	hl,0x0000
15541 50FE  E3          	ex	(sp),hl
15542 50FF  21 00 00    	ld	hl,_intro2script
15543 5102  E5          	push	hl
15544 5103  CD F4 49    	call	_InitScript
15545 5106  F1          	pop	af
15546 5107  F1          	pop	af
15547 5108  C9          	ret
15548 5109              	SECTION code_compiler
15549 5109              ;	---------------------------------
15550 5109              ; Function InitIntro3Stage
15551 5109              ; ---------------------------------
15552 5109              _InitIntro3Stage:
15553 5109  3E 04       	ld	a,0x04
15554 510B  F5          	push	af
15555 510C  33          	inc	sp
15556 510D  21 39 01    	ld	hl,0x0139
15557 5110  E5          	push	hl
15558 5111  21 00 00    	ld	hl,_warning_psgcompr
15559 5114  E5          	push	hl
15560 5115  CD FD 00    	call	_LoadSprite
15561 5118  F1          	pop	af
15562 5119  F1          	pop	af
15563 511A  33          	inc	sp
15564 511B  3E 02       	ld	a,0x02
15565 511D  F5          	push	af
15566 511E  33          	inc	sp
15567 511F  21 00 00    	ld	hl,_personspalette_bin
15568 5122  E5          	push	hl
15569 5123  CD 7D 01    	call	_LoadBGPalette
15570 5126  F1          	pop	af
15571 5127  33          	inc	sp
15572 5128  3E 02       	ld	a,0x02
15573 512A  F5          	push	af
15574 512B  33          	inc	sp
15575 512C  21 00 00    	ld	hl,_persons_psgcompr
15576 512F  E5          	push	hl
15577 5130  CD 2A 01    	call	_LoadTiles
15578 5133  33          	inc	sp
15579 5134  21 05 00    	ld	hl,0x0005
15580 5137  E3          	ex	(sp),hl
15581 5138  21 00 00    	ld	hl,_intro3_psg
15582 513B  E5          	push	hl
15583 513C  CD 16 04    	call	_PlayMusic
15584 513F  F1          	pop	af
15585 5140  21 00 00    	ld	hl,_intro3labels
15586 5143  E3          	ex	(sp),hl
15587 5144  21 00 00    	ld	hl,_intro3script
15588 5147  E5          	push	hl
15589 5148  CD F4 49    	call	_InitScript
15590 514B  F1          	pop	af
15591 514C  F1          	pop	af
15592 514D  C9          	ret
15593 514E              	SECTION code_compiler
15594 514E              ;	---------------------------------
15595 514E              ; Function InitIntro4Stage
15596 514E              ; ---------------------------------
15597 514E              _InitIntro4Stage:
15598 514E  3E 0C       	ld	a,0x0c
15599 5150  F5          	push	af
15600 5151  33          	inc	sp
15601 5152  21 00 03    	ld	hl,0x0300
15602 5155  E5          	push	hl
15603 5156  21 00 00    	ld	hl,_introstage3tilemap_bin
15604 5159  E5          	push	hl
15605 515A  21 00 00    	ld	hl,_introstage3tiles_psgcompr
15606 515D  E5          	push	hl
15607 515E  CD 4C 01    	call	_LoadGraphics
15608 5161  21 07 00    	ld	hl,7
15609 5164  39          	add	hl,sp
15610 5165  F9          	ld	sp,hl
15611 5166  21 02 00    	ld	hl,0x0002
15612 5169  E5          	push	hl
15613 516A  21 00 00    	ld	hl,_silence_psg
15614 516D  E5          	push	hl
15615 516E  CD 16 04    	call	_PlayMusic
15616 5171  F1          	pop	af
15617 5172  21 00 00    	ld	hl,0x0000
15618 5175  E3          	ex	(sp),hl
15619 5176  21 00 00    	ld	hl,_intro4script
15620 5179  E5          	push	hl
15621 517A  CD F4 49    	call	_InitScript
15622 517D  F1          	pop	af
15623 517E  F1          	pop	af
15624 517F  C9          	ret
15625 5180              	SECTION code_compiler
15626 5180              ;	---------------------------------
15627 5180              ; Function InitFinishStage
15628 5180              ; ---------------------------------
15629 5180              _InitFinishStage:
15630 5180  3E 04       	ld	a,0x04
15631 5182  F5          	push	af
15632 5183  33          	inc	sp
15633 5184  21 C0 02    	ld	hl,0x02c0
15634 5187  E5          	push	hl
15635 5188  21 00 00    	ld	hl,_endingstagetilemap_bin
15636 518B  E5          	push	hl
15637 518C  21 00 00    	ld	hl,_endingstagetiles_psgcompr
15638 518F  E5          	push	hl
15639 5190  CD 4C 01    	call	_LoadGraphics
15640 5193  21 07 00    	ld	hl,7
15641 5196  39          	add	hl,sp
15642 5197  F9          	ld	sp,hl
15643 5198  3E 04       	ld	a,0x04
15644 519A  F5          	push	af
15645 519B  33          	inc	sp
15646 519C  21 36 01    	ld	hl,0x0136
15647 519F  E5          	push	hl
15648 51A0  21 00 00    	ld	hl,_introsideplayer_psgcompr
15649 51A3  E5          	push	hl
15650 51A4  CD FD 00    	call	_LoadSprite
15651 51A7  F1          	pop	af
15652 51A8  F1          	pop	af
15653 51A9  33          	inc	sp
15654 51AA  3E 0A       	ld	a,0x0a
15655 51AC  F5          	push	af
15656 51AD  33          	inc	sp
15657 51AE  21 3A 01    	ld	hl,0x013a
15658 51B1  E5          	push	hl
15659 51B2  21 00 00    	ld	hl,_introstar_psgcompr
15660 51B5  E5          	push	hl
15661 51B6  CD FD 00    	call	_LoadSprite
15662 51B9  F1          	pop	af
15663 51BA  33          	inc	sp
15664 51BB  21 02 00    	ld	hl,0x0002
15665 51BE  E3          	ex	(sp),hl
15666 51BF  21 00 00    	ld	hl,_ending_psg
15667 51C2  E5          	push	hl
15668 51C3  CD 16 04    	call	_PlayMusic
15669 51C6  F1          	pop	af
15670 51C7  21 00 00    	ld	hl,_finishlabels
15671 51CA  E3          	ex	(sp),hl
15672 51CB  21 00 00    	ld	hl,_finishscript
15673 51CE  E5          	push	hl
15674 51CF  CD F4 49    	call	_InitScript
15675 51D2  F1          	pop	af
15676 51D3  F1          	pop	af
15677 51D4  21 0B 00    	ld	hl,_stagenum
15678 51D7  36 0A       	ld	(hl),0x0a
15679 51D9  C9          	ret
15680 51DA              	SECTION code_compiler
15681 51DA              ;	---------------------------------
15682 51DA              ; Function InitIntroScroll
15683 51DA              ; ---------------------------------
15684 51DA              _InitIntroScroll:
15685 51DA  21 00 00    	ld	hl,0x0000
15686 51DD  22 2A 01    	ld	(_introstageposx),hl
15687 51E0  22 2C 01    	ld	(_introstagevelx),hl
15688 51E3  C9          	ret
15689 51E4              	SECTION code_compiler
15690 51E4              ;	---------------------------------
15691 51E4              ; Function setIntroStageGraphics
15692 51E4              ; ---------------------------------
15693 51E4              _setIntroStageGraphics:
15694 51E4  3E 03       	ld	a,0x03
15695 51E6  F5          	push	af
15696 51E7  33          	inc	sp
15697 51E8  21 00 00    	ld	hl,_logopalette_bin
15698 51EB  E5          	push	hl
15699 51EC  CD 7D 01    	call	_LoadBGPalette
15700 51EF  F1          	pop	af
15701 51F0  33          	inc	sp
15702 51F1  CD EE 49    	call	_InitScripts
15703 51F4  CD E8 49    	call	_InitEnemies
15704 51F7  CD 14 0C    	call	_InitExplosions
15705 51FA  CD B3 05    	call	_InitTimeredLabels
15706 51FD  2E C0       	ld	l,0xc0
15707 51FF  C3 00 00    	jp  _SMS_setBGScrollY_fastcall
15708 5202              	SECTION code_compiler
15709 5202              ;	---------------------------------
15710 5202              ; Function InitIntroStage
15711 5202              ; ---------------------------------
15712 5202              _InitIntroStage:
15713 5202  DD E5       	push	ix
15714 5204  DD 21 00 00 	ld	ix,0
15715 5208  DD 39       	add	ix,sp
15716 520A  3B          	dec	sp
15717 520B  CD FD 02    	call	_InitStage
15718 520E  21 40 01    	ld	hl,0x0140
15719 5211  CD 00 00    	call	_SMS_VDPturnOffFeature_fastcall
15720 5214  CD E4 51    	call	_setIntroStageGraphics
15721 5217  DD 7E 04    	ld	a,(ix+4)
15722 521A  D6 01       	sub	a,0x01
15723 521C  38 34       	jr	C,l_InitIntroStage_00106
15724 521E  3E 05       	ld	a,0x05
15725 5220  DD 96 04    	sub	a,(ix+4)
15726 5223  38 2D       	jr	C,l_InitIntroStage_00106
15727 5225  DD 5E 04    	ld	e,(ix+4)
15728 5228  1D          	dec	e
15729 5229  16 00       	ld	d,0x00
15730 522B  21 31 52    	ld	hl,l_InitIntroStage_00149
15731 522E  19          	add	hl,de
15732 522F  19          	add	hl,de
15733 5230  E9          	jp	(hl)
15734 5231              l_InitIntroStage_00149:
15735 5231  18 08       	jr	l_InitIntroStage_00101
15736 5233  18 0B       	jr	l_InitIntroStage_00102
15737 5235  18 0E       	jr	l_InitIntroStage_00103
15738 5237  18 11       	jr	l_InitIntroStage_00104
15739 5239  18 14       	jr	l_InitIntroStage_00105
15740 523B              l_InitIntroStage_00101:
15741 523B  CD 25 50    	call	_InitIntro1Stage
15742 523E  18 12       	jr	l_InitIntroStage_00106
15743 5240              l_InitIntroStage_00102:
15744 5240  CD C6 50    	call	_InitIntro2Stage
15745 5243  18 0D       	jr	l_InitIntroStage_00106
15746 5245              l_InitIntroStage_00103:
15747 5245  CD 80 51    	call	_InitFinishStage
15748 5248  18 08       	jr	l_InitIntroStage_00106
15749 524A              l_InitIntroStage_00104:
15750 524A  CD 09 51    	call	_InitIntro3Stage
15751 524D  18 03       	jr	l_InitIntroStage_00106
15752 524F              l_InitIntroStage_00105:
15753 524F  CD 4E 51    	call	_InitIntro4Stage
15754 5252              l_InitIntroStage_00106:
15755 5252  21 40 01    	ld	hl,0x0140
15756 5255  CD 00 00    	call	_SMS_VDPturnOnFeature_fastcall
15757 5258  CD DA 51    	call	_InitIntroScroll
15758 525B  DD 7E 04    	ld	a,(ix+4)
15759 525E  D6 02       	sub	a,0x02
15760 5260  20 04       	jr	NZ,l_InitIntroStage_00150
15761 5262  3E 01       	ld	a,0x01
15762 5264  18 01       	jr	l_InitIntroStage_00151
15763 5266              l_InitIntroStage_00150:
15764 5266  AF          	xor	a,a
15765 5267              l_InitIntroStage_00151:
15766 5267  DD 77 FF    	ld	(ix-1),a
15767 526A              l_InitIntroStage_00117:
15768 526A  CD 6A 03    	call	_UpdateStage
15769 526D  CD 47 05    	call	_UpdateTimeredLabels
15770 5270  3A 02 00    	ld	a,(_stageframe)
15771 5273  E6 07       	and	a,0x07
15772 5275  20 03       	jr	NZ,l_InitIntroStage_00108
15773 5277  CD 19 4D    	call	_UpdateScripts
15774 527A              l_InitIntroStage_00108:
15775 527A  3A 04 00    	ld	a,(_stageframe2mod)
15776 527D  B7          	or	a, a
15777 527E  20 06       	jr	NZ,l_InitIntroStage_00110
15778 5280  CD 90 0B    	call	_UpdateExplosions
15779 5283  CD 03 49    	call	_UpdateEnemies
15780 5286              l_InitIntroStage_00110:
15781 5286  DD 7E FF    	ld	a,(ix-1)
15782 5289  B7          	or	a, a
15783 528A  28 03       	jr	Z,l_InitIntroStage_00112
15784 528C  CD 68 50    	call	_DoIntro2Scroll
15785 528F              l_InitIntroStage_00112:
15786 528F  3A 00 00    	ld	a,(_keystatus)
15787 5292  E6 10       	and	a,0x10
15788 5294  20 0C       	jr	NZ,l_InitIntroStage_00119
15789 5296  CD 00 00    	call	_PSGGetStatus
15790 5299  7D          	ld	a,l
15791 529A  B7          	or	a, a
15792 529B  28 05       	jr	Z,l_InitIntroStage_00119
15793 529D  CD 77 04    	call	_UpdatePSG
15794 52A0  18 C8       	jr	l_InitIntroStage_00117
15795 52A2              l_InitIntroStage_00119:
15796 52A2  33          	inc	sp
15797 52A3  DD E1       	pop	ix
15798 52A5  C9          	ret
15799 52A6              	SECTION code_compiler
15800 52A6              ;	---------------------------------
15801 52A6              ; Function UpdateSelectorMarks
15802 52A6              ; ---------------------------------
15803 52A6              _UpdateSelectorMarks:
15804 52A6  DD E5       	push	ix
15805 52A8  DD 21 00 00 	ld	ix,0
15806 52AC  DD 39       	add	ix,sp
15807 52AE  F5          	push	af
15808 52AF  3B          	dec	sp
15809 52B0  3E 0F       	ld	a,0x0f
15810 52B2  F5          	push	af
15811 52B3  33          	inc	sp
15812 52B4  CD 27 00    	call	_changeBank
15813 52B7  33          	inc	sp
15814 52B8  DD 36 FD 00 	ld	(ix-3),0x00
15815 52BC              l_UpdateSelectorMarks_00111:
15816 52BC  DD 7E FD    	ld	a,(ix-3)
15817 52BF  4F          	ld	c,a
15818 52C0  87          	add	a, a
15819 52C1  81          	add	a, c
15820 52C2  87          	add	a, a
15821 52C3  DD 77 FF    	ld	(ix-1),a
15822 52C6  3C          	inc	a
15823 52C7  DD 77 FE    	ld	(ix-2),a
15824 52CA  DD 7E 04    	ld	a,(ix+4)
15825 52CD  DD 96 FD    	sub	a,(ix-3)
15826 52D0  20 04       	jr	NZ,l_UpdateSelectorMarks_00157
15827 52D2  3E 01       	ld	a,0x01
15828 52D4  18 01       	jr	l_UpdateSelectorMarks_00158
15829 52D6              l_UpdateSelectorMarks_00157:
15830 52D6  AF          	xor	a,a
15831 52D7              l_UpdateSelectorMarks_00158:
15832 52D7  47          	ld	b,a
15833 52D8  1E 00       	ld	e,0x00
15834 52DA              l_UpdateSelectorMarks_00105:
15835 52DA  16 00       	ld	d,0x00
15836 52DC  21 00 00    	ld	hl,_selectormarky
15837 52DF  19          	add	hl, de
15838 52E0  6E          	ld	l,(hl)
15839 52E1  AF          	xor	a,a
15840 52E2  67          	ld	h,a
15841 52E3  CB 3C       	srl	h
15842 52E5  CB 1D       	rr	l
15843 52E7  1F          	rra
15844 52E8  CB 3C       	srl	h
15845 52EA  CB 1D       	rr	l
15846 52EC  1F          	rra
15847 52ED  65          	ld	h,l
15848 52EE  6F          	ld	l,a
15849 52EF  7C          	ld	a,h
15850 52F0  F6 78       	or	a,0x78
15851 52F2  4D          	ld	c,l
15852 52F3  57          	ld	d,a
15853 52F4  3E 00       	ld	a,+((_selectormarkx) & 0xFF)
15854 52F6  83          	add	a, e
15855 52F7  6F          	ld	l,a
15856 52F8  3E 00       	ld	a,+((_selectormarkx) / 256)
15857 52FA  CE 00       	adc	a,0x00
15858 52FC  67          	ld	h,a
15859 52FD  6E          	ld	l,(hl)
15860 52FE  DD 7E FE    	ld	a,(ix-2)
15861 5301  85          	add	a, l
15862 5302  6F          	ld	l,a
15863 5303  26 00       	ld	h,0x00
15864 5305  29          	add	hl, hl
15865 5306  7D          	ld	a,l
15866 5307  B1          	or	a, c
15867 5308  6F          	ld	l,a
15868 5309  7C          	ld	a,h
15869 530A  B2          	or	a, d
15870 530B  67          	ld	h,a
15871 530C  CF          	rst	 0x08  ; call __RST08_SMS_crt0_RST08
15872 530D  78          	ld	a,b
15873 530E  B7          	or	a, a
15874 530F  28 09       	jr	Z,l_UpdateSelectorMarks_00115
15875 5311  16 00       	ld	d,0x00
15876 5313  21 00 00    	ld	hl,_selectormarkt
15877 5316  19          	add	hl, de
15878 5317  6E          	ld	l,(hl)
15879 5318  18 02       	jr	l_UpdateSelectorMarks_00116
15880 531A              l_UpdateSelectorMarks_00115:
15881 531A  2E 00       	ld	l,0x00
15882 531C              l_UpdateSelectorMarks_00116:
15883 531C  26 00       	ld	h,0x00
15884 531E  DF          	rst	 0x18  ; call __RST18_SMS_crt0_RST18
15885 531F  1C          	inc	e
15886 5320  7B          	ld	a,e
15887 5321  D6 04       	sub	a,0x04
15888 5323  38 B5       	jr	C,l_UpdateSelectorMarks_00105
15889 5325  3E 00       	ld	a,+((_selectorstatebasetiles) & 0xFF)
15890 5327  DD 86 FD    	add	a,(ix-3)
15891 532A  6F          	ld	l,a
15892 532B  3E 00       	ld	a,+((_selectorstatebasetiles) / 256)
15893 532D  CE 00       	adc	a,0x00
15894 532F  67          	ld	h,a
15895 5330  56          	ld	d,(hl)
15896 5331  DD 34 FF    	inc	(ix-1)
15897 5334  DD 34 FF    	inc	(ix-1)
15898 5337  1E 00       	ld	e,0x00
15899 5339              l_UpdateSelectorMarks_00109:
15900 5339  4B          	ld	c,e
15901 533A  06 00       	ld	b,0x00
15902 533C  21 0A 00    	ld	hl,0x000a
15903 533F  09          	add	hl,bc
15904 5340  AF          	xor	a,a
15905 5341  CB 3C       	srl	h
15906 5343  CB 1D       	rr	l
15907 5345  1F          	rra
15908 5346  CB 3C       	srl	h
15909 5348  CB 1D       	rr	l
15910 534A  1F          	rra
15911 534B  65          	ld	h,l
15912 534C  6F          	ld	l,a
15913 534D  7C          	ld	a,h
15914 534E  F6 78       	or	a,0x78
15915 5350  4D          	ld	c,l
15916 5351  47          	ld	b,a
15917 5352  DD 6E FF    	ld	l,(ix-1)
15918 5355  26 00       	ld	h,0x00
15919 5357  29          	add	hl, hl
15920 5358  7D          	ld	a,l
15921 5359  B1          	or	a, c
15922 535A  6F          	ld	l,a
15923 535B  7C          	ld	a,h
15924 535C  B0          	or	a, b
15925 535D  67          	ld	h,a
15926 535E  CF          	rst	 0x08  ; call __RST08_SMS_crt0_RST08
15927 535F  0E 00       	ld	c,0x00
15928 5361              l_UpdateSelectorMarks_00107:
15929 5361  6A          	ld	l,d
15930 5362  14          	inc	d
15931 5363  26 00       	ld	h,0x00
15932 5365  DF          	rst	 0x18  ; call __RST18_SMS_crt0_RST18
15933 5366  0C          	inc	c
15934 5367  79          	ld	a,c
15935 5368  D6 04       	sub	a,0x04
15936 536A  38 F5       	jr	C,l_UpdateSelectorMarks_00107
15937 536C  14          	inc	d
15938 536D  14          	inc	d
15939 536E  14          	inc	d
15940 536F  14          	inc	d
15941 5370  1C          	inc	e
15942 5371  7B          	ld	a,e
15943 5372  D6 04       	sub	a,0x04
15944 5374  38 C3       	jr	C,l_UpdateSelectorMarks_00109
15945 5376  DD 34 FD    	inc	(ix-3)
15946 5379  DD 7E FD    	ld	a,(ix-3)
15947 537C  D6 05       	sub	a,0x05
15948 537E  DA BC 52    	jp	C,l_UpdateSelectorMarks_00111
15949 5381  DD 6E 04    	ld	l,(ix+4)
15950 5384  26 00       	ld	h,0x00
15951 5386  29          	add	hl, hl
15952 5387  11 00 00    	ld	de,_selectornamestage
15953 538A  19          	add	hl,de
15954 538B  4E          	ld	c,(hl)
15955 538C  23          	inc	hl
15956 538D  46          	ld	b,(hl)
15957 538E  21 0C 11    	ld	hl,0x110c
15958 5391  E5          	push	hl
15959 5392  C5          	push	bc
15960 5393  CD 05 02    	call	_WriteText
15961 5396  DD F9       	ld	sp,ix
15962 5398  DD E1       	pop	ix
15963 539A  C9          	ret
15964 539B              	SECTION code_compiler
15965 539B              ;	---------------------------------
15966 539B              ; Function InitSelectorStage
15967 539B              ; ---------------------------------
15968 539B              _InitSelectorStage:
15969 539B  01 01 00    	ld	bc,0x0001
15970 539E  C5          	push	bc
15971 539F  CD FD 02    	call	_InitStage
15972 53A2  C1          	pop	bc
15973 53A3  21 40 01    	ld	hl,0x0140
15974 53A6  CD 00 00    	call	_SMS_VDPturnOffFeature_fastcall
15975 53A9  C5          	push	bc
15976 53AA  3E 02       	ld	a,0x02
15977 53AC  F5          	push	af
15978 53AD  33          	inc	sp
15979 53AE  21 00 00    	ld	hl,_selectorpalette_bin
15980 53B1  E5          	push	hl
15981 53B2  CD 7D 01    	call	_LoadBGPalette
15982 53B5  F1          	pop	af
15983 53B6  33          	inc	sp
15984 53B7  3E 02       	ld	a,0x02
15985 53B9  F5          	push	af
15986 53BA  33          	inc	sp
15987 53BB  21 00 00    	ld	hl,_selectortiles_psgcompr
15988 53BE  E5          	push	hl
15989 53BF  CD 2A 01    	call	_LoadTiles
15990 53C2  33          	inc	sp
15991 53C3  21 06 06    	ld	hl,0x0606
15992 53C6  E3          	ex	(sp),hl
15993 53C7  21 6E 00    	ld	hl,___str_9
15994 53CA  E5          	push	hl
15995 53CB  CD 05 02    	call	_WriteText
15996 53CE  F1          	pop	af
15997 53CF  F1          	pop	af
15998 53D0  C1          	pop	bc
15999 53D1  21 40 01    	ld	hl,0x0140
16000 53D4  CD 00 00    	call	_SMS_VDPturnOnFeature_fastcall
16001 53D7  C5          	push	bc
16002 53D8  21 04 01    	ld	hl,0x0104
16003 53DB  E5          	push	hl
16004 53DC  21 00 00    	ld	hl,_select_psg
16005 53DF  E5          	push	hl
16006 53E0  CD 16 04    	call	_PlayMusic
16007 53E3  F1          	pop	af
16008 53E4  F1          	pop	af
16009 53E5  C1          	pop	bc
16010 53E6              l_InitSelectorStage_00118:
16011 53E6  C5          	push	bc
16012 53E7  CD 6A 03    	call	_UpdateStage
16013 53EA  C1          	pop	bc
16014 53EB  C5          	push	bc
16015 53EC  C5          	push	bc
16016 53ED  33          	inc	sp
16017 53EE  CD A6 52    	call	_UpdateSelectorMarks
16018 53F1  33          	inc	sp
16019 53F2  C1          	pop	bc
16020 53F3  0D          	dec	c
16021 53F4  28 01       	jr	Z,l_InitSelectorStage_00155
16022 53F6  AF          	xor	a,a
16023 53F7              l_InitSelectorStage_00155:
16024 53F7  3A 00 00    	ld	a,(_keystatus)
16025 53FA  E6 04       	and	a,0x04
16026 53FC  28 0C       	jr	Z,l_InitSelectorStage_00113
16027 53FE  B7          	or	a, a
16028 53FF  28 05       	jr	Z,l_InitSelectorStage_00104
16029 5401  78          	ld	a,b
16030 5402  B7          	or	a, a
16031 5403  28 01       	jr	Z,l_InitSelectorStage_00104
16032 5405  05          	dec	b
16033 5406              l_InitSelectorStage_00104:
16034 5406  0E 00       	ld	c,0x00
16035 5408  18 16       	jr	l_InitSelectorStage_00114
16036 540A              l_InitSelectorStage_00113:
16037 540A  3A 00 00    	ld	a,(_keystatus)
16038 540D  E6 08       	and	a,0x08
16039 540F  28 0D       	jr	Z,l_InitSelectorStage_00110
16040 5411  B7          	or	a, a
16041 5412  28 06       	jr	Z,l_InitSelectorStage_00108
16042 5414  78          	ld	a,b
16043 5415  D6 04       	sub	a,0x04
16044 5417  30 01       	jr	NC,l_InitSelectorStage_00108
16045 5419  04          	inc	b
16046 541A              l_InitSelectorStage_00108:
16047 541A  0E 00       	ld	c,0x00
16048 541C  18 02       	jr	l_InitSelectorStage_00114
16049 541E              l_InitSelectorStage_00110:
16050 541E  0E 01       	ld	c,0x01
16051 5420              l_InitSelectorStage_00114:
16052 5420  3A 00 00    	ld	a,(_keystatus)
16053 5423  E6 10       	and	a,0x10
16054 5425  28 09       	jr	Z,l_InitSelectorStage_00116
16055 5427  21 08 00    	ld	hl,_basestage
16056 542A  70          	ld	(hl),b
16057 542B  CD 44 69    	call	_InitPlayerConstants
16058 542E  18 07       	jr	l_InitSelectorStage_00120
16059 5430              l_InitSelectorStage_00116:
16060 5430  C5          	push	bc
16061 5431  CD 77 04    	call	_UpdatePSG
16062 5434  C1          	pop	bc
16063 5435  18 AF       	jr	l_InitSelectorStage_00118
16064 5437              l_InitSelectorStage_00120:
16065 5437  C9          	ret
16066 5438              	SECTION rodata_compiler
16067 006E              ___str_9:
16068 006E  53 45 4C 45 43 54 20 49 4E 49 54 49 41 4C 20 53 54 41 47 45 
                        	DEFM "SELECT INITIAL STAGE"
16069 0082  00          	DEFB 0x00
16070 0083              	SECTION code_compiler
16071 5438              ;	---------------------------------
16072 5438              ; Function InitGameoverStage
16073 5438              ; ---------------------------------
16074 5438              _InitGameoverStage:
16075 5438  CD FD 02    	call	_InitStage
16076 543B  21 40 01    	ld	hl,0x0140
16077 543E  CD 00 00    	call	_SMS_VDPturnOffFeature_fastcall
16078 5441  3E 03       	ld	a,0x03
16079 5443  F5          	push	af
16080 5444  33          	inc	sp
16081 5445  21 00 00    	ld	hl,_logopalette_bin
16082 5448  E5          	push	hl
16083 5449  CD 7D 01    	call	_LoadBGPalette
16084 544C  33          	inc	sp
16085 544D  21 0B 0C    	ld	hl,0x0c0b
16086 5450  E3          	ex	(sp),hl
16087 5451  21 83 00    	ld	hl,___str_10
16088 5454  E5          	push	hl
16089 5455  CD 05 02    	call	_WriteText
16090 5458  F1          	pop	af
16091 5459  21 05 0E    	ld	hl,0x0e05
16092 545C  E3          	ex	(sp),hl
16093 545D  21 8E 00    	ld	hl,___str_11
16094 5460  E5          	push	hl
16095 5461  CD 05 02    	call	_WriteText
16096 5464  F1          	pop	af
16097 5465  F1          	pop	af
16098 5466  21 40 01    	ld	hl,0x0140
16099 5469  CD 00 00    	call	_SMS_VDPturnOnFeature_fastcall
16100 546C  21 08 00    	ld	hl,0x0008
16101 546F  E5          	push	hl
16102 5470  21 00 00    	ld	hl,_gameover_psg
16103 5473  E5          	push	hl
16104 5474  CD 16 04    	call	_PlayMusic
16105 5477  F1          	pop	af
16106 5478  F1          	pop	af
16107 5479              l_InitGameoverStage_00106:
16108 5479  CD 6A 03    	call	_UpdateStage
16109 547C  3A 00 00    	ld	a,(_keystatus)
16110 547F  E6 10       	and	a,0x10
16111 5481  28 0E       	jr	Z,l_InitGameoverStage_00102
16112 5483  3A 0C 00    	ld	a,(_laststagenum)
16113 5486  32 0B 00    	ld	(_stagenum),a
16114 5489  3A 10 00    	ld	a,(_gamestock)
16115 548C  32 0D 00    	ld	(_numplayers),a
16116 548F  18 13       	jr	l_InitGameoverStage_00108
16117 5491              l_InitGameoverStage_00102:
16118 5491  CD 00 00    	call	_PSGGetStatus
16119 5494  7D          	ld	a,l
16120 5495  B7          	or	a, a
16121 5496  20 07       	jr	NZ,l_InitGameoverStage_00104
16122 5498  21 0B 00    	ld	hl,_stagenum
16123 549B  36 0A       	ld	(hl),0x0a
16124 549D  18 05       	jr	l_InitGameoverStage_00108
16125 549F              l_InitGameoverStage_00104:
16126 549F  CD 77 04    	call	_UpdatePSG
16127 54A2  18 D5       	jr	l_InitGameoverStage_00106
16128 54A4              l_InitGameoverStage_00108:
16129 54A4  C9          	ret
16130 54A5              	SECTION rodata_compiler
16131 0083              ___str_10:
16132 0083  47 41 4D 45 20 20 4F 56 45 52 
                        	DEFM "GAME  OVER"
16133 008D  00          	DEFB 0x00
16134 008E              	SECTION rodata_compiler
16135 008E              ___str_11:
16136 008E  50 52 45 53 53 20 46 49 52 45 20 54 4F 20 43 4F 4E 54 49 4E 55 45 
                        	DEFM "PRESS FIRE TO CONTINUE"
16137 00A4  00          	DEFB 0x00
16138 00A5              	SECTION code_compiler
16139 54A5              ;	---------------------------------
16140 54A5              ; Function UpdateStage1
16141 54A5              ; ---------------------------------
16142 54A5              _UpdateStage1:
16143 54A5  3E 0A       	ld	a,0x0a
16144 54A7  F5          	push	af
16145 54A8  33          	inc	sp
16146 54A9  CD 27 00    	call	_changeBank
16147 54AC  33          	inc	sp
16148 54AD  3A 05 00    	ld	a,(_stageframe4mod)
16149 54B0  B7          	or	a, a
16150 54B1  20 48       	jr	NZ,l_UpdateStage1_00104
16151 54B3  ED 4B 02 00 	ld	bc,(_stageframe)
16152 54B7  CB 38       	srl	b
16153 54B9  CB 19       	rr	c
16154 54BB  CB 38       	srl	b
16155 54BD  CB 19       	rr	c
16156 54BF  79          	ld	a,c
16157 54C0  E6 07       	and	a,0x07
16158 54C2  6F          	ld	l,a
16159 54C3  26 00       	ld	h,0x00
16160 54C5  29          	add	hl, hl
16161 54C6  29          	add	hl, hl
16162 54C7  11 80 00    	ld	de,+(_scrolltilestage1_bin + 0x0080)
16163 54CA  19          	add	hl,de
16164 54CB  E5          	push	hl
16165 54CC  21 60 00    	ld	hl,0x0060
16166 54CF  E5          	push	hl
16167 54D0  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy32_callee
16168 54D3  3A 02 00    	ld	a,(_stageframe)
16169 54D6  E6 07       	and	a,0x07
16170 54D8  20 21       	jr	NZ,l_UpdateStage1_00104
16171 54DA  ED 4B 02 00 	ld	bc,(_stageframe)
16172 54DE  79          	ld	a,c
16173 54DF  CB 38       	srl	b
16174 54E1  1F          	rra
16175 54E2  CB 38       	srl	b
16176 54E4  1F          	rra
16177 54E5  CB 38       	srl	b
16178 54E7  1F          	rra
16179 54E8  E6 0F       	and	a,0x0f
16180 54EA  6F          	ld	l,a
16181 54EB  26 00       	ld	h,0x00
16182 54ED  29          	add	hl, hl
16183 54EE  29          	add	hl, hl
16184 54EF  11 00 00    	ld	de,_scrolltilestage1_bin
16185 54F2  19          	add	hl,de
16186 54F3  E5          	push	hl
16187 54F4  21 00 00    	ld	hl,0x0000
16188 54F7  E5          	push	hl
16189 54F8  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
16190 54FB              l_UpdateStage1_00104:
16191 54FB  ED 4B 02 00 	ld	bc,(_stageframe)
16192 54FF  CB 38       	srl	b
16193 5501  CB 19       	rr	c
16194 5503  CB 38       	srl	b
16195 5505  CB 19       	rr	c
16196 5507  21 03 00    	ld	hl,0x0003
16197 550A  E5          	push	hl
16198 550B  C5          	push	bc
16199 550C  CD 00 00    	call	__moduint_callee
16200 550F  29          	add	hl, hl
16201 5510  29          	add	hl, hl
16202 5511  29          	add	hl, hl
16203 5512  29          	add	hl, hl
16204 5513  29          	add	hl, hl
16205 5514  11 00 00    	ld	de,_animtilestage1_bin
16206 5517  19          	add	hl,de
16207 5518  E5          	push	hl
16208 5519  21 E0 00    	ld	hl,0x00e0
16209 551C  E5          	push	hl
16210 551D  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy32_callee
16211 5520  3E 0F       	ld	a,0x0f
16212 5522  F5          	push	af
16213 5523  33          	inc	sp
16214 5524  CD 27 00    	call	_changeBank
16215 5527  33          	inc	sp
16216 5528  ED 4B 02 00 	ld	bc,(_stageframe)
16217 552C  CB 38       	srl	b
16218 552E  CB 19       	rr	c
16219 5530  CB 38       	srl	b
16220 5532  CB 19       	rr	c
16221 5534  79          	ld	a,c
16222 5535  E6 07       	and	a,0x07
16223 5537  4F          	ld	c,a
16224 5538  06 00       	ld	b,0x00
16225 553A  21 00 00    	ld	hl,_stage1_flashpalette
16226 553D  09          	add	hl,bc
16227 553E  46          	ld	b,(hl)
16228 553F  C5          	push	bc
16229 5540  33          	inc	sp
16230 5541  3E 0F       	ld	a,0x0f
16231 5543  F5          	push	af
16232 5544  33          	inc	sp
16233 5545  CD 00 00    	call	_SMS_setBGPaletteColor_callee
16234 5548  3A 57 01    	ld	a,(_stage1musicreplayed)
16235 554B  B7          	or	a, a
16236 554C  C0          	ret	NZ
16237 554D  CD 00 00    	call	_PSGGetStatus
16238 5550  7D          	ld	a,l
16239 5551  B7          	or	a, a
16240 5552  C0          	ret	NZ
16241 5553  21 0B 01    	ld	hl,0x010b
16242 5556  E5          	push	hl
16243 5557  21 00 00    	ld	hl,_stage7_psg
16244 555A  E5          	push	hl
16245 555B  CD 16 04    	call	_PlayMusic
16246 555E  F1          	pop	af
16247 555F  F1          	pop	af
16248 5560  21 57 01    	ld	hl,_stage1musicreplayed
16249 5563  36 01       	ld	(hl),0x01
16250 5565  C9          	ret
16251 5566              	SECTION code_compiler
16252 5566              ;	---------------------------------
16253 5566              ; Function InitStage1
16254 5566              ; ---------------------------------
16255 5566              _InitStage1:
16256 5566  21 5F 00    	ld	hl,_playstageshootspeed
16257 5569  35          	dec	(hl)
16258 556A  3E 0A       	ld	a,0x0a
16259 556C  F5          	push	af
16260 556D  33          	inc	sp
16261 556E  21 00 00    	ld	hl,_stage1tiles_psgcompr
16262 5571  E5          	push	hl
16263 5572  CD 2A 01    	call	_LoadTiles
16264 5575  F1          	pop	af
16265 5576  33          	inc	sp
16266 5577  3E 08       	ld	a,0x08
16267 5579  F5          	push	af
16268 557A  33          	inc	sp
16269 557B  21 00 00    	ld	hl,_stage1spriteslist
16270 557E  E5          	push	hl
16271 557F  CD 9A 69    	call	_InitStageSprites
16272 5582  F1          	pop	af
16273 5583  33          	inc	sp
16274 5584  3E 04       	ld	a,0x04
16275 5586  F5          	push	af
16276 5587  33          	inc	sp
16277 5588  21 00 00    	ld	hl,_stage1_scrollers
16278 558B  E5          	push	hl
16279 558C  CD 87 08    	call	_AddScrollers
16280 558F  F1          	pop	af
16281 5590  33          	inc	sp
16282 5591  3E 0F       	ld	a,0x0f
16283 5593  F5          	push	af
16284 5594  33          	inc	sp
16285 5595  21 00 00    	ld	hl,_stage1_statics
16286 5598  E5          	push	hl
16287 5599  CD 47 06    	call	_SetStaticEnemies
16288 559C  F1          	pop	af
16289 559D  33          	inc	sp
16290 559E  21 57 01    	ld	hl,_stage1musicreplayed
16291 55A1  36 00       	ld	(hl),0x00
16292 55A3  C9          	ret
16293 55A4              	SECTION code_compiler
16294 55A4              ;	---------------------------------
16295 55A4              ; Function CheckCollisionStage1
16296 55A4              ; ---------------------------------
16297 55A4              _CheckCollisionStage1:
16298 55A4  DD E5       	push	ix
16299 55A6  DD 21 00 00 	ld	ix,0
16300 55AA  DD 39       	add	ix,sp
16301 55AC  DD 66 05    	ld	h,(ix+5)
16302 55AF  DD 6E 04    	ld	l,(ix+4)
16303 55B2  E5          	push	hl
16304 55B3  CD B9 05    	call	_getTileAt
16305 55B6  F1          	pop	af
16306 55B7  3E 05       	ld	a,0x05
16307 55B9  95          	sub	a,l
16308 55BA  30 04       	jr	NC,l_CheckCollisionStage1_00102
16309 55BC  2E 01       	ld	l,0x01
16310 55BE  18 02       	jr	l_CheckCollisionStage1_00103
16311 55C0              l_CheckCollisionStage1_00102:
16312 55C0  2E 00       	ld	l,0x00
16313 55C2              l_CheckCollisionStage1_00103:
16314 55C2  DD E1       	pop	ix
16315 55C4  C9          	ret
16316 55C5              	SECTION code_compiler
16317 55C5              ;	---------------------------------
16318 55C5              ; Function CheckCollisionStage2
16319 55C5              ; ---------------------------------
16320 55C5              _CheckCollisionStage2:
16321 55C5  DD E5       	push	ix
16322 55C7  DD 21 00 00 	ld	ix,0
16323 55CB  DD 39       	add	ix,sp
16324 55CD  DD 66 05    	ld	h,(ix+5)
16325 55D0  DD 6E 04    	ld	l,(ix+4)
16326 55D3  E5          	push	hl
16327 55D4  CD B9 05    	call	_getTileAt
16328 55D7  F1          	pop	af
16329 55D8  7D          	ld	a,l
16330 55D9  FE 02       	cp	a,0x02
16331 55DB  28 04       	jr	Z,l_CheckCollisionStage2_00101
16332 55DD  D6 03       	sub	a,0x03
16333 55DF  20 04       	jr	NZ,l_CheckCollisionStage2_00102
16334 55E1              l_CheckCollisionStage2_00101:
16335 55E1  2E 01       	ld	l,0x01
16336 55E3  18 02       	jr	l_CheckCollisionStage2_00104
16337 55E5              l_CheckCollisionStage2_00102:
16338 55E5  2E 00       	ld	l,0x00
16339 55E7              l_CheckCollisionStage2_00104:
16340 55E7  DD E1       	pop	ix
16341 55E9  C9          	ret
16342 55EA              	SECTION code_compiler
16343 55EA              ;	---------------------------------
16344 55EA              ; Function UpdateStage2
16345 55EA              ; ---------------------------------
16346 55EA              _UpdateStage2:
16347 55EA  3E 09       	ld	a,0x09
16348 55EC  F5          	push	af
16349 55ED  33          	inc	sp
16350 55EE  CD 27 00    	call	_changeBank
16351 55F1  33          	inc	sp
16352 55F2  01 00 00    	ld	bc,_firetiles_bin+0
16353 55F5  ED 5B 02 00 	ld	de,(_stageframe)
16354 55F9  CB 3A       	srl	d
16355 55FB  CB 1B       	rr	e
16356 55FD  CB 3A       	srl	d
16357 55FF  CB 1B       	rr	e
16358 5601  7B          	ld	a,e
16359 5602  E6 0F       	and	a,0x0f
16360 5604  6F          	ld	l,a
16361 5605  AF          	xor	a,a
16362 5606  67          	ld	h,a
16363 5607  CB 3C       	srl	h
16364 5609  CB 1D       	rr	l
16365 560B  1F          	rra
16366 560C  CB 3C       	srl	h
16367 560E  CB 1D       	rr	l
16368 5610  1F          	rra
16369 5611  65          	ld	h,l
16370 5612  6F          	ld	l,a
16371 5613  09          	add	hl,bc
16372 5614  E5          	push	hl
16373 5615  21 00 00    	ld	hl,0x0000
16374 5618  E5          	push	hl
16375 5619  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
16376 561C  C9          	ret
16377 561D              	SECTION code_compiler
16378 561D              ;	---------------------------------
16379 561D              ; Function InitStage2
16380 561D              ; ---------------------------------
16381 561D              _InitStage2:
16382 561D  3E 03       	ld	a,0x03
16383 561F  F5          	push	af
16384 5620  33          	inc	sp
16385 5621  21 00 00    	ld	hl,_stage2tiles_psgcompr
16386 5624  E5          	push	hl
16387 5625  CD 2A 01    	call	_LoadTiles
16388 5628  F1          	pop	af
16389 5629  33          	inc	sp
16390 562A  3E 08       	ld	a,0x08
16391 562C  F5          	push	af
16392 562D  33          	inc	sp
16393 562E  21 00 00    	ld	hl,_stage2spriteslist
16394 5631  E5          	push	hl
16395 5632  CD 9A 69    	call	_InitStageSprites
16396 5635  F1          	pop	af
16397 5636  33          	inc	sp
16398 5637  3E 0F       	ld	a,0x0f
16399 5639  F5          	push	af
16400 563A  33          	inc	sp
16401 563B  21 00 00    	ld	hl,_stage2_statics
16402 563E  E5          	push	hl
16403 563F  CD 47 06    	call	_SetStaticEnemies
16404 5642  F1          	pop	af
16405 5643  33          	inc	sp
16406 5644  3E 03       	ld	a,0x03
16407 5646  F5          	push	af
16408 5647  33          	inc	sp
16409 5648  21 00 00    	ld	hl,_stage2_scrollers
16410 564B  E5          	push	hl
16411 564C  CD 87 08    	call	_AddScrollers
16412 564F  F1          	pop	af
16413 5650  33          	inc	sp
16414 5651  C9          	ret
16415 5652              	SECTION code_compiler
16416 5652              ;	---------------------------------
16417 5652              ; Function InitStage3
16418 5652              ; ---------------------------------
16419 5652              _InitStage3:
16420 5652  3E 07       	ld	a,0x07
16421 5654  F5          	push	af
16422 5655  33          	inc	sp
16423 5656  21 00 00    	ld	hl,_stage3tiles_psgcompr
16424 5659  E5          	push	hl
16425 565A  CD 2A 01    	call	_LoadTiles
16426 565D  F1          	pop	af
16427 565E  33          	inc	sp
16428 565F  3E 0C       	ld	a,0x0c
16429 5661  F5          	push	af
16430 5662  33          	inc	sp
16431 5663  21 00 00    	ld	hl,_stage3spriteslist
16432 5666  E5          	push	hl
16433 5667  CD 9A 69    	call	_InitStageSprites
16434 566A  33          	inc	sp
16435 566B  21 00 00    	ld	hl,0x0000
16436 566E  E3          	ex	(sp),hl
16437 566F  21 00 00    	ld	hl,_stage3script
16438 5672  E5          	push	hl
16439 5673  CD F4 49    	call	_InitScript
16440 5676  F1          	pop	af
16441 5677  26 0F       	ld	h,0x0f
16442 5679  E3          	ex	(sp),hl
16443 567A  33          	inc	sp
16444 567B  21 00 00    	ld	hl,_stage3_statics
16445 567E  E5          	push	hl
16446 567F  CD 47 06    	call	_SetStaticEnemies
16447 5682  F1          	pop	af
16448 5683  33          	inc	sp
16449 5684  3E 02       	ld	a,0x02
16450 5686  F5          	push	af
16451 5687  33          	inc	sp
16452 5688  21 00 00    	ld	hl,_stage3_scrollers
16453 568B  E5          	push	hl
16454 568C  CD 87 08    	call	_AddScrollers
16455 568F  F1          	pop	af
16456 5690  33          	inc	sp
16457 5691  3E 0A       	ld	a,0x0a
16458 5693  F5          	push	af
16459 5694  33          	inc	sp
16460 5695  21 98 01    	ld	hl,0x0198
16461 5698  E5          	push	hl
16462 5699  21 00 00    	ld	hl,_introstar_psgcompr
16463 569C  E5          	push	hl
16464 569D  CD FD 00    	call	_LoadSprite
16465 56A0  F1          	pop	af
16466 56A1  F1          	pop	af
16467 56A2  33          	inc	sp
16468 56A3  0E 00       	ld	c,0x00
16469 56A5              l_InitStage3_00102:
16470 56A5  C5          	push	bc
16471 56A6  CD 00 00    	call	_myRand
16472 56A9  5D          	ld	e, l
16473 56AA  16 03       	ld	d,0x03
16474 56AC  D5          	push	de
16475 56AD  CD 00 00    	call	__moduchar_callee
16476 56B0  C1          	pop	bc
16477 56B1  45          	ld	b, l
16478 56B2  04          	inc	b
16479 56B3  04          	inc	b
16480 56B4  59          	ld	e,c
16481 56B5  16 00       	ld	d,0x00
16482 56B7  6B          	ld	l, e
16483 56B8  62          	ld	h, d
16484 56B9  29          	add	hl, hl
16485 56BA  19          	add	hl, de
16486 56BB  11 42 01    	ld	de,_stage3stars
16487 56BE  19          	add	hl,de
16488 56BF  EB          	ex	de,hl
16489 56C0  C5          	push	bc
16490 56C1  C5          	push	bc
16491 56C2  33          	inc	sp
16492 56C3  D5          	push	de
16493 56C4  CD 12 35    	call	_InitStage3Star
16494 56C7  F1          	pop	af
16495 56C8  33          	inc	sp
16496 56C9  C1          	pop	bc
16497 56CA  0C          	inc	c
16498 56CB  79          	ld	a,c
16499 56CC  D6 06       	sub	a,0x06
16500 56CE  38 D5       	jr	C,l_InitStage3_00102
16501 56D0  C9          	ret
16502 56D1              	SECTION code_compiler
16503 56D1              ;	---------------------------------
16504 56D1              ; Function UpdateStage3
16505 56D1              ; ---------------------------------
16506 56D1              _UpdateStage3:
16507 56D1  3E 0A       	ld	a,0x0a
16508 56D3  F5          	push	af
16509 56D4  33          	inc	sp
16510 56D5  CD 27 00    	call	_changeBank
16511 56D8  33          	inc	sp
16512 56D9  ED 4B 02 00 	ld	bc,(_stageframe)
16513 56DD  CB 38       	srl	b
16514 56DF  CB 19       	rr	c
16515 56E1  CB 38       	srl	b
16516 56E3  CB 19       	rr	c
16517 56E5  21 38 00    	ld	hl,0x0038
16518 56E8  E5          	push	hl
16519 56E9  C5          	push	bc
16520 56EA  CD 00 00    	call	__moduint_callee
16521 56ED  29          	add	hl,hl
16522 56EE  29          	add	hl,hl
16523 56EF  01 00 00    	ld	bc,_spaceanimtiles_bin
16524 56F2  09          	add	hl,bc
16525 56F3  E5          	push	hl
16526 56F4  E5          	push	hl
16527 56F5  21 20 00    	ld	hl,0x0020
16528 56F8  E5          	push	hl
16529 56F9  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
16530 56FC  C1          	pop	bc
16531 56FD  21 40 00    	ld	hl,0x0040
16532 5700  09          	add	hl,bc
16533 5701  C5          	push	bc
16534 5702  E5          	push	hl
16535 5703  21 60 00    	ld	hl,0x0060
16536 5706  E5          	push	hl
16537 5707  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
16538 570A  C1          	pop	bc
16539 570B  21 80 00    	ld	hl,0x0080
16540 570E  09          	add	hl,bc
16541 570F  C5          	push	bc
16542 5710  E5          	push	hl
16543 5711  21 A0 00    	ld	hl,0x00a0
16544 5714  E5          	push	hl
16545 5715  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
16546 5718  C1          	pop	bc
16547 5719  21 C0 00    	ld	hl,0x00c0
16548 571C  09          	add	hl,bc
16549 571D  E5          	push	hl
16550 571E  21 E0 00    	ld	hl,0x00e0
16551 5721  E5          	push	hl
16552 5722  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy32_callee
16553 5725  0E 00       	ld	c,0x00
16554 5727              l_UpdateStage3_00102:
16555 5727  06 00       	ld	b,0x00
16556 5729  69          	ld	l, c
16557 572A  60          	ld	h, b
16558 572B  29          	add	hl, hl
16559 572C  09          	add	hl, bc
16560 572D  11 42 01    	ld	de,_stage3stars
16561 5730  19          	add	hl,de
16562 5731  C5          	push	bc
16563 5732  E5          	push	hl
16564 5733  CD 8B 35    	call	_UpdateStage3Star
16565 5736  F1          	pop	af
16566 5737  C1          	pop	bc
16567 5738  0C          	inc	c
16568 5739  79          	ld	a,c
16569 573A  D6 06       	sub	a,0x06
16570 573C  38 E9       	jr	C,l_UpdateStage3_00102
16571 573E  C9          	ret
16572 573F              	SECTION code_compiler
16573 573F              ;	---------------------------------
16574 573F              ; Function UpdateStage4
16575 573F              ; ---------------------------------
16576 573F              _UpdateStage4:
16577 573F  3A 34 01    	ld	a,(_stage4playrays)
16578 5742  3D          	dec	a
16579 5743  20 48       	jr	NZ,l_UpdateStage4_00104
16580 5745  ED 4B 02 00 	ld	bc,(_stageframe)
16581 5749  79          	ld	a,c
16582 574A  CB 38       	srl	b
16583 574C  1F          	rra
16584 574D  CB 38       	srl	b
16585 574F  1F          	rra
16586 5750  CB 38       	srl	b
16587 5752  1F          	rra
16588 5753  4F          	ld	c,a
16589 5754  21 30 00    	ld	hl,0x0030
16590 5757  E5          	push	hl
16591 5758  C5          	push	bc
16592 5759  CD 00 00    	call	__moduint_callee
16593 575C  7D          	ld	a,l
16594 575D  D6 0F       	sub	a,0x0f
16595 575F  7C          	ld	a,h
16596 5760  DE 00       	sbc	a,0x00
16597 5762  4D          	ld	c,l
16598 5763  38 03       	jr	C,l_UpdateStage4_00109
16599 5765  01 0F 00    	ld	bc,0x000f
16600 5768              l_UpdateStage4_00109:
16601 5768  3E 00       	ld	a,+((_stage4_stormpalette) & 0xFF)
16602 576A  81          	add	a, c
16603 576B  5F          	ld	e,a
16604 576C  3E 00       	ld	a,+((_stage4_stormpalette) / 256)
16605 576E  CE 00       	adc	a,0x00
16606 5770  57          	ld	d,a
16607 5771  1A          	ld	a,(de)
16608 5772  47          	ld	b,a
16609 5773  0E 0C       	ld	c,0x0c
16610 5775  C5          	push	bc
16611 5776  CD 00 00    	call	_SMS_setBGPaletteColor_callee
16612 5779  1A          	ld	a,(de)
16613 577A  D6 3F       	sub	a,0x3f
16614 577C  20 33       	jr	NZ,l_UpdateStage4_00106
16615 577E  3E 01       	ld	a,0x01
16616 5780  F5          	push	af
16617 5781  33          	inc	sp
16618 5782  21 00 00    	ld	hl,_ray_psg
16619 5785  E5          	push	hl
16620 5786  CD E0 03    	call	_PlaySound
16621 5789  F1          	pop	af
16622 578A  33          	inc	sp
16623 578B  18 24       	jr	l_UpdateStage4_00106
16624 578D              l_UpdateStage4_00104:
16625 578D  ED 4B 02 00 	ld	bc,(_stageframe)
16626 5791  79          	ld	a,c
16627 5792  CB 38       	srl	b
16628 5794  1F          	rra
16629 5795  CB 38       	srl	b
16630 5797  1F          	rra
16631 5798  CB 38       	srl	b
16632 579A  1F          	rra
16633 579B  CB 38       	srl	b
16634 579D  1F          	rra
16635 579E  E6 03       	and	a,0x03
16636 57A0  4F          	ld	c,a
16637 57A1  06 00       	ld	b,0x00
16638 57A3  21 00 00    	ld	hl,_stage4_seapalette
16639 57A6  09          	add	hl,bc
16640 57A7  46          	ld	b,(hl)
16641 57A8  C5          	push	bc
16642 57A9  33          	inc	sp
16643 57AA  3E 04       	ld	a,0x04
16644 57AC  F5          	push	af
16645 57AD  33          	inc	sp
16646 57AE  CD 00 00    	call	_SMS_setBGPaletteColor_callee
16647 57B1              l_UpdateStage4_00106:
16648 57B1  C9          	ret
16649 57B2              	SECTION code_compiler
16650 57B2              ;	---------------------------------
16651 57B2              ; Function InitStage4
16652 57B2              ; ---------------------------------
16653 57B2              _InitStage4:
16654 57B2  3E 04       	ld	a,0x04
16655 57B4  F5          	push	af
16656 57B5  33          	inc	sp
16657 57B6  21 00 00    	ld	hl,_stage4tiles_psgcompr
16658 57B9  E5          	push	hl
16659 57BA  CD 2A 01    	call	_LoadTiles
16660 57BD  F1          	pop	af
16661 57BE  33          	inc	sp
16662 57BF  3E 0A       	ld	a,0x0a
16663 57C1  F5          	push	af
16664 57C2  33          	inc	sp
16665 57C3  21 00 00    	ld	hl,_stage4spriteslist
16666 57C6  E5          	push	hl
16667 57C7  CD 9A 69    	call	_InitStageSprites
16668 57CA  F1          	pop	af
16669 57CB  33          	inc	sp
16670 57CC  3E 12       	ld	a,0x12
16671 57CE  F5          	push	af
16672 57CF  33          	inc	sp
16673 57D0  21 00 00    	ld	hl,_stage4_scrollers
16674 57D3  E5          	push	hl
16675 57D4  CD 87 08    	call	_AddScrollers
16676 57D7  33          	inc	sp
16677 57D8  21 00 00    	ld	hl,0x0000
16678 57DB  E3          	ex	(sp),hl
16679 57DC  21 00 00    	ld	hl,_stage4script
16680 57DF  E5          	push	hl
16681 57E0  CD F4 49    	call	_InitScript
16682 57E3  F1          	pop	af
16683 57E4  F1          	pop	af
16684 57E5  21 34 01    	ld	hl,_stage4playrays
16685 57E8  36 01       	ld	(hl),0x01
16686 57EA  C9          	ret
16687 57EB              	SECTION code_compiler
16688 57EB              ;	---------------------------------
16689 57EB              ; Function InitStage5
16690 57EB              ; ---------------------------------
16691 57EB              _InitStage5:
16692 57EB  3E 06       	ld	a,0x06
16693 57ED  F5          	push	af
16694 57EE  33          	inc	sp
16695 57EF  21 00 00    	ld	hl,_stage5tiles_psgcompr
16696 57F2  E5          	push	hl
16697 57F3  CD 2A 01    	call	_LoadTiles
16698 57F6  F1          	pop	af
16699 57F7  33          	inc	sp
16700 57F8  3E 06       	ld	a,0x06
16701 57FA  F5          	push	af
16702 57FB  33          	inc	sp
16703 57FC  21 00 00    	ld	hl,_stage5spriteslist
16704 57FF  E5          	push	hl
16705 5800  CD 9A 69    	call	_InitStageSprites
16706 5803  33          	inc	sp
16707 5804  21 00 00    	ld	hl,0x0000
16708 5807  E3          	ex	(sp),hl
16709 5808  21 00 00    	ld	hl,_stage5script
16710 580B  E5          	push	hl
16711 580C  CD F4 49    	call	_InitScript
16712 580F  F1          	pop	af
16713 5810  26 04       	ld	h,0x04
16714 5812  E3          	ex	(sp),hl
16715 5813  33          	inc	sp
16716 5814  21 00 00    	ld	hl,_stage5_scrollers
16717 5817  E5          	push	hl
16718 5818  CD 87 08    	call	_AddScrollers
16719 581B  F1          	pop	af
16720 581C  33          	inc	sp
16721 581D  3E 06       	ld	a,0x06
16722 581F  F5          	push	af
16723 5820  33          	inc	sp
16724 5821  21 B3 01    	ld	hl,0x01b3
16725 5824  E5          	push	hl
16726 5825  21 00 00    	ld	hl,_ww2cloud_psgcompr
16727 5828  E5          	push	hl
16728 5829  CD FD 00    	call	_LoadSprite
16729 582C  F1          	pop	af
16730 582D  F1          	pop	af
16731 582E  33          	inc	sp
16732 582F  0E 00       	ld	c,0x00
16733 5831              l_InitStage5_00102:
16734 5831  41          	ld	b,c
16735 5832  04          	inc	b
16736 5833  04          	inc	b
16737 5834  59          	ld	e,c
16738 5835  16 00       	ld	d,0x00
16739 5837  6B          	ld	l, e
16740 5838  62          	ld	h, d
16741 5839  29          	add	hl, hl
16742 583A  19          	add	hl, de
16743 583B  11 42 01    	ld	de,_stage3stars
16744 583E  19          	add	hl,de
16745 583F  EB          	ex	de,hl
16746 5840  C5          	push	bc
16747 5841  C5          	push	bc
16748 5842  33          	inc	sp
16749 5843  D5          	push	de
16750 5844  CD 12 35    	call	_InitStage3Star
16751 5847  F1          	pop	af
16752 5848  33          	inc	sp
16753 5849  C1          	pop	bc
16754 584A  0C          	inc	c
16755 584B  79          	ld	a,c
16756 584C  D6 02       	sub	a,0x02
16757 584E  38 E1       	jr	C,l_InitStage5_00102
16758 5850  3E 0F       	ld	a,0x0f
16759 5852  F5          	push	af
16760 5853  33          	inc	sp
16761 5854  21 00 00    	ld	hl,_stage5_statics
16762 5857  E5          	push	hl
16763 5858  CD 47 06    	call	_SetStaticEnemies
16764 585B  F1          	pop	af
16765 585C  33          	inc	sp
16766 585D  C9          	ret
16767 585E              	SECTION code_compiler
16768 585E              ;	---------------------------------
16769 585E              ; Function UpdateStage5
16770 585E              ; ---------------------------------
16771 585E              _UpdateStage5:
16772 585E  3E 06       	ld	a,0x06
16773 5860  F5          	push	af
16774 5861  33          	inc	sp
16775 5862  CD 27 00    	call	_changeBank
16776 5865  33          	inc	sp
16777 5866  01 00 00    	ld	bc,_watertiles_bin+0
16778 5869  ED 5B 02 00 	ld	de,(_stageframe)
16779 586D  CB 3A       	srl	d
16780 586F  CB 1B       	rr	e
16781 5871  7B          	ld	a,e
16782 5872  E6 07       	and	a,0x07
16783 5874  6F          	ld	l,a
16784 5875  26 00       	ld	h,0x00
16785 5877  29          	add	hl, hl
16786 5878  29          	add	hl, hl
16787 5879  29          	add	hl, hl
16788 587A  29          	add	hl, hl
16789 587B  29          	add	hl, hl
16790 587C  09          	add	hl,bc
16791 587D  E5          	push	hl
16792 587E  21 00 00    	ld	hl,0x0000
16793 5881  E5          	push	hl
16794 5882  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy32_callee
16795 5885  0E 00       	ld	c,0x00
16796 5887              l_UpdateStage5_00102:
16797 5887  06 00       	ld	b,0x00
16798 5889  69          	ld	l, c
16799 588A  60          	ld	h, b
16800 588B  29          	add	hl, hl
16801 588C  09          	add	hl, bc
16802 588D  11 42 01    	ld	de,_stage3stars
16803 5890  19          	add	hl,de
16804 5891  C5          	push	bc
16805 5892  E5          	push	hl
16806 5893  CD AF 35    	call	_UpdateStage5Cloud
16807 5896  F1          	pop	af
16808 5897  C1          	pop	bc
16809 5898  0C          	inc	c
16810 5899  79          	ld	a,c
16811 589A  D6 02       	sub	a,0x02
16812 589C  38 E9       	jr	C,l_UpdateStage5_00102
16813 589E  C9          	ret
16814 589F              	SECTION code_compiler
16815 589F              ;	---------------------------------
16816 589F              ; Function InitStage6
16817 589F              ; ---------------------------------
16818 589F              _InitStage6:
16819 589F  3E 06       	ld	a,0x06
16820 58A1  F5          	push	af
16821 58A2  33          	inc	sp
16822 58A3  21 00 00    	ld	hl,_stage6tiles_psgcompr
16823 58A6  E5          	push	hl
16824 58A7  CD 2A 01    	call	_LoadTiles
16825 58AA  F1          	pop	af
16826 58AB  33          	inc	sp
16827 58AC  3E 03       	ld	a,0x03
16828 58AE  F5          	push	af
16829 58AF  33          	inc	sp
16830 58B0  21 00 00    	ld	hl,_stage6spriteslist
16831 58B3  E5          	push	hl
16832 58B4  CD 9A 69    	call	_InitStageSprites
16833 58B7  33          	inc	sp
16834 58B8  21 00 00    	ld	hl,0x0000
16835 58BB  E3          	ex	(sp),hl
16836 58BC  21 00 00    	ld	hl,_stage6script
16837 58BF  E5          	push	hl
16838 58C0  CD F4 49    	call	_InitScript
16839 58C3  F1          	pop	af
16840 58C4  26 02       	ld	h,0x02
16841 58C6  E3          	ex	(sp),hl
16842 58C7  33          	inc	sp
16843 58C8  21 00 00    	ld	hl,_stage6_scrollers
16844 58CB  E5          	push	hl
16845 58CC  CD 87 08    	call	_AddScrollers
16846 58CF  33          	inc	sp
16847 58D0  21 09 00    	ld	hl,0x0009
16848 58D3  E3          	ex	(sp),hl
16849 58D4  CD 00 00    	call	_SMS_setBGPaletteColor_callee
16850 58D7  C9          	ret
16851 58D8              	SECTION code_compiler
16852 58D8              ;	---------------------------------
16853 58D8              ; Function UpdateStage6
16854 58D8              ; ---------------------------------
16855 58D8              _UpdateStage6:
16856 58D8  3E 0F       	ld	a,0x0f
16857 58DA  F5          	push	af
16858 58DB  33          	inc	sp
16859 58DC  CD 27 00    	call	_changeBank
16860 58DF  33          	inc	sp
16861 58E0  ED 4B 02 00 	ld	bc,(_stageframe)
16862 58E4  79          	ld	a,c
16863 58E5  CB 38       	srl	b
16864 58E7  1F          	rra
16865 58E8  CB 38       	srl	b
16866 58EA  1F          	rra
16867 58EB  CB 38       	srl	b
16868 58ED  1F          	rra
16869 58EE  E6 07       	and	a,0x07
16870 58F0  5F          	ld	e, a
16871 58F1  C6 00       	add	a,+((_stage6_fade_pink) & 0xFF)
16872 58F3  4F          	ld	c,a
16873 58F4  3E 00       	ld	a,+((_stage6_fade_pink) / 256)
16874 58F6  CE 00       	adc	a,0x00
16875 58F8  47          	ld	b,a
16876 58F9  0A          	ld	a,(bc)
16877 58FA  57          	ld	d,a
16878 58FB  C5          	push	bc
16879 58FC  D5          	push	de
16880 58FD  33          	inc	sp
16881 58FE  3E 02       	ld	a,0x02
16882 5900  F5          	push	af
16883 5901  33          	inc	sp
16884 5902  CD 00 00    	call	_SMS_setBGPaletteColor_callee
16885 5905  C1          	pop	bc
16886 5906  0A          	ld	a,(bc)
16887 5907  47          	ld	b,a
16888 5908  0E 03       	ld	c,0x03
16889 590A  C5          	push	bc
16890 590B  CD 00 00    	call	_SMS_setBGPaletteColor_callee
16891 590E  3E 00       	ld	a,+((_stage6_fade_blue) & 0xFF)
16892 5910  83          	add	a, e
16893 5911  5F          	ld	e,a
16894 5912  3E 00       	ld	a,+((_stage6_fade_blue) / 256)
16895 5914  CE 00       	adc	a,0x00
16896 5916  57          	ld	d,a
16897 5917  1A          	ld	a,(de)
16898 5918  47          	ld	b,a
16899 5919  0E 0D       	ld	c,0x0d
16900 591B  C5          	push	bc
16901 591C  CD 00 00    	call	_SMS_setBGPaletteColor_callee
16902 591F  1A          	ld	a,(de)
16903 5920  47          	ld	b,a
16904 5921  0E 0F       	ld	c,0x0f
16905 5923  C5          	push	bc
16906 5924  CD 00 00    	call	_SMS_setBGPaletteColor_callee
16907 5927  1A          	ld	a,(de)
16908 5928  57          	ld	d,a
16909 5929  1E 0E       	ld	e,0x0e
16910 592B  D5          	push	de
16911 592C  CD 00 00    	call	_SMS_setBGPaletteColor_callee
16912 592F  C9          	ret
16913 5930              	SECTION code_compiler
16914 5930              ;	---------------------------------
16915 5930              ; Function CheckStage7PlayerMovement
16916 5930              ; ---------------------------------
16917 5930              _CheckStage7PlayerMovement:
16918 5930  3A F7 00    	ld	a,(_mapbank)
16919 5933  F5          	push	af
16920 5934  33          	inc	sp
16921 5935  CD 27 00    	call	_changeBank
16922 5938  33          	inc	sp
16923 5939  ED 4B EC 00 	ld	bc,(_mappositiony)
16924 593D  CB 28       	sra	b
16925 593F  CB 19       	rr	c
16926 5941  CB 28       	sra	b
16927 5943  CB 19       	rr	c
16928 5945  3A 13 00    	ld	a,(_playery)
16929 5948  5F          	ld	e,a
16930 5949  16 00       	ld	d,0x00
16931 594B  69          	ld	l, c
16932 594C  60          	ld	h, b
16933 594D  19          	add	hl,de
16934 594E  7D          	ld	a,l
16935 594F  CB 3C       	srl	h
16936 5951  1F          	rra
16937 5952  CB 3C       	srl	h
16938 5954  1F          	rra
16939 5955  CB 3C       	srl	h
16940 5957  1F          	rra
16941 5958  6F          	ld	l,a
16942 5959  ED 4B E4 00 	ld	bc,(_maplines)
16943 595D  09          	add	hl,bc
16944 595E  6E          	ld	l, (hl)
16945 595F  AF          	xor	a,a
16946 5960  67          	ld	h,a
16947 5961  CB 3C       	srl	h
16948 5963  CB 1D       	rr	l
16949 5965  1F          	rra
16950 5966  CB 3C       	srl	h
16951 5968  CB 1D       	rr	l
16952 596A  1F          	rra
16953 596B  65          	ld	h,l
16954 596C  4F          	ld	c, a
16955 596D  3A 12 00    	ld	a, (_playerx)
16956 5970  44          	ld	b,h
16957 5971  0F          	rrca
16958 5972  0F          	rrca
16959 5973  0F          	rrca
16960 5974  E6 1F       	and	a,0x1f
16961 5976  6F          	ld	l,a
16962 5977  26 00       	ld	h,0x00
16963 5979  29          	add	hl, hl
16964 597A  09          	add	hl,bc
16965 597B  4D          	ld	c,l
16966 597C  44          	ld	b,h
16967 597D  2A E8 00    	ld	hl,(_maptiles)
16968 5980  09          	add	hl,bc
16969 5981  6E          	ld	l, (hl)
16970 5982  03          	inc	bc
16971 5983  EB          	ex	de,hl
16972 5984  2A E8 00    	ld	hl,(_maptiles)
16973 5987  09          	add	hl,bc
16974 5988  4E          	ld	c, (hl)
16975 5989  7B          	ld	a,e
16976 598A  D6 0C       	sub	a,0x0c
16977 598C  20 0F       	jr	NZ,l_CheckStage7PlayerMovement_00107
16978 598E  B1          	or	a,c
16979 598F  20 04       	jr	NZ,l_CheckStage7PlayerMovement_00102
16980 5991  21 12 00    	ld	hl,_playerx
16981 5994  35          	dec	(hl)
16982 5995              l_CheckStage7PlayerMovement_00102:
16983 5995  79          	ld	a,c
16984 5996  D6 02       	sub	a,0x02
16985 5998  C0          	ret	NZ
16986 5999  21 12 00    	ld	hl,_playerx
16987 599C  34          	inc	(hl)
16988 599D              l_CheckStage7PlayerMovement_00107:
16989 599D  C9          	ret
16990 599E              	SECTION code_compiler
16991 599E              ;	---------------------------------
16992 599E              ; Function UpdateStage7
16993 599E              ; ---------------------------------
16994 599E              _UpdateStage7:
16995 599E  3E 07       	ld	a,0x07
16996 59A0  F5          	push	af
16997 59A1  33          	inc	sp
16998 59A2  CD 27 00    	call	_changeBank
16999 59A5  33          	inc	sp
17000 59A6  3A 02 00    	ld	a,(_stageframe)
17001 59A9  E6 0F       	and	a,0x0f
17002 59AB  4F          	ld	c,a
17003 59AC  06 00       	ld	b,0x00
17004 59AE  CB 21       	sla	c
17005 59B0  CB 10       	rl	b
17006 59B2  CB 21       	sla	c
17007 59B4  CB 10       	rl	b
17008 59B6  21 00 00    	ld	hl,_stage7animtilese_bin
17009 59B9  09          	add	hl,bc
17010 59BA  E5          	push	hl
17011 59BB  E5          	push	hl
17012 59BC  21 00 00    	ld	hl,0x0000
17013 59BF  E5          	push	hl
17014 59C0  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17015 59C3  C1          	pop	bc
17016 59C4  21 80 00    	ld	hl,0x0080
17017 59C7  09          	add	hl,bc
17018 59C8  E5          	push	hl
17019 59C9  21 40 00    	ld	hl,0x0040
17020 59CC  E5          	push	hl
17021 59CD  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17022 59D0  3A FF 00    	ld	a,(_disablescroll)
17023 59D3  B7          	or	a, a
17024 59D4  20 5D       	jr	NZ,l_UpdateStage7_00102
17025 59D6  ED 4B 02 00 	ld	bc,(_stageframe)
17026 59DA  CB 38       	srl	b
17027 59DC  CB 19       	rr	c
17028 59DE  CB 38       	srl	b
17029 59E0  CB 19       	rr	c
17030 59E2  79          	ld	a,c
17031 59E3  E6 0F       	and	a,0x0f
17032 59E5  6F          	ld	l,a
17033 59E6  26 00       	ld	h,0x00
17034 59E8  29          	add	hl, hl
17035 59E9  29          	add	hl, hl
17036 59EA  01 00 00    	ld	bc,_stage7animtilesd_bin
17037 59ED  09          	add	hl,bc
17038 59EE  E5          	push	hl
17039 59EF  E5          	push	hl
17040 59F0  21 00 01    	ld	hl,0x0100
17041 59F3  E5          	push	hl
17042 59F4  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17043 59F7  C1          	pop	bc
17044 59F8  21 80 00    	ld	hl,0x0080
17045 59FB  09          	add	hl,bc
17046 59FC  E5          	push	hl
17047 59FD  21 40 01    	ld	hl,0x0140
17048 5A00  E5          	push	hl
17049 5A01  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17050 5A04  ED 4B 02 00 	ld	bc,(_stageframe)
17051 5A08  79          	ld	a,c
17052 5A09  CB 38       	srl	b
17053 5A0B  1F          	rra
17054 5A0C  CB 38       	srl	b
17055 5A0E  1F          	rra
17056 5A0F  CB 38       	srl	b
17057 5A11  1F          	rra
17058 5A12  E6 0F       	and	a,0x0f
17059 5A14  6F          	ld	l,a
17060 5A15  26 00       	ld	h,0x00
17061 5A17  29          	add	hl, hl
17062 5A18  29          	add	hl, hl
17063 5A19  01 00 00    	ld	bc,_stage7animtiles_bin
17064 5A1C  09          	add	hl,bc
17065 5A1D  E5          	push	hl
17066 5A1E  E5          	push	hl
17067 5A1F  21 80 00    	ld	hl,0x0080
17068 5A22  E5          	push	hl
17069 5A23  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17070 5A26  C1          	pop	bc
17071 5A27  21 80 00    	ld	hl,0x0080
17072 5A2A  09          	add	hl,bc
17073 5A2B  E5          	push	hl
17074 5A2C  21 C0 00    	ld	hl,0x00c0
17075 5A2F  E5          	push	hl
17076 5A30  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17077 5A33              l_UpdateStage7_00102:
17078 5A33  01 00 00    	ld	bc,_stage7animtilesc_bin+0
17079 5A36  ED 5B 02 00 	ld	de,(_stageframe)
17080 5A3A  CB 3A       	srl	d
17081 5A3C  CB 1B       	rr	e
17082 5A3E  7B          	ld	a,e
17083 5A3F  E6 07       	and	a,0x07
17084 5A41  6F          	ld	l,a
17085 5A42  26 00       	ld	h,0x00
17086 5A44  29          	add	hl, hl
17087 5A45  29          	add	hl, hl
17088 5A46  29          	add	hl, hl
17089 5A47  29          	add	hl, hl
17090 5A48  29          	add	hl, hl
17091 5A49  09          	add	hl,bc
17092 5A4A  E5          	push	hl
17093 5A4B  21 80 01    	ld	hl,0x0180
17094 5A4E  E5          	push	hl
17095 5A4F  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy32_callee
17096 5A52  3A 02 00    	ld	a,(_stageframe)
17097 5A55  0F          	rrca
17098 5A56  D8          	ret	C
17099 5A57  CD 30 59    	call	_CheckStage7PlayerMovement
17100 5A5A  C9          	ret
17101 5A5B              	SECTION code_compiler
17102 5A5B              ;	---------------------------------
17103 5A5B              ; Function InitStage7
17104 5A5B              ; ---------------------------------
17105 5A5B              _InitStage7:
17106 5A5B  3E 09       	ld	a,0x09
17107 5A5D  F5          	push	af
17108 5A5E  33          	inc	sp
17109 5A5F  21 00 00    	ld	hl,_stage7tiles_psgcompr
17110 5A62  E5          	push	hl
17111 5A63  CD 2A 01    	call	_LoadTiles
17112 5A66  F1          	pop	af
17113 5A67  33          	inc	sp
17114 5A68  3E 06       	ld	a,0x06
17115 5A6A  F5          	push	af
17116 5A6B  33          	inc	sp
17117 5A6C  21 00 00    	ld	hl,_stage7spriteslist
17118 5A6F  E5          	push	hl
17119 5A70  CD 9A 69    	call	_InitStageSprites
17120 5A73  F1          	pop	af
17121 5A74  33          	inc	sp
17122 5A75  3E 02       	ld	a,0x02
17123 5A77  F5          	push	af
17124 5A78  33          	inc	sp
17125 5A79  21 00 00    	ld	hl,_stage7_scrollers
17126 5A7C  E5          	push	hl
17127 5A7D  CD 87 08    	call	_AddScrollers
17128 5A80  F1          	pop	af
17129 5A81  33          	inc	sp
17130 5A82  3E 0F       	ld	a,0x0f
17131 5A84  F5          	push	af
17132 5A85  33          	inc	sp
17133 5A86  21 00 00    	ld	hl,_stage7_statics
17134 5A89  E5          	push	hl
17135 5A8A  CD 47 06    	call	_SetStaticEnemies
17136 5A8D  F1          	pop	af
17137 5A8E  33          	inc	sp
17138 5A8F  21 5F 00    	ld	hl,_playstageshootspeed
17139 5A92  35          	dec	(hl)
17140 5A93  C9          	ret
17141 5A94              	SECTION code_compiler
17142 5A94              ;	---------------------------------
17143 5A94              ; Function CheckCollisionStage7
17144 5A94              ; ---------------------------------
17145 5A94              _CheckCollisionStage7:
17146 5A94  DD E5       	push	ix
17147 5A96  DD 21 00 00 	ld	ix,0
17148 5A9A  DD 39       	add	ix,sp
17149 5A9C  DD 66 05    	ld	h,(ix+5)
17150 5A9F  DD 6E 04    	ld	l,(ix+4)
17151 5AA2  E5          	push	hl
17152 5AA3  CD B9 05    	call	_getTileAt
17153 5AA6  F1          	pop	af
17154 5AA7  3E 1D       	ld	a,0x1d
17155 5AA9  95          	sub	a,l
17156 5AAA  30 04       	jr	NC,l_CheckCollisionStage7_00102
17157 5AAC  2E 01       	ld	l,0x01
17158 5AAE  18 02       	jr	l_CheckCollisionStage7_00103
17159 5AB0              l_CheckCollisionStage7_00102:
17160 5AB0  2E 00       	ld	l,0x00
17161 5AB2              l_CheckCollisionStage7_00103:
17162 5AB2  DD E1       	pop	ix
17163 5AB4  C9          	ret
17164 5AB5              	SECTION code_compiler
17165 5AB5              ;	---------------------------------
17166 5AB5              ; Function UpdateStage8
17167 5AB5              ; ---------------------------------
17168 5AB5              _UpdateStage8:
17169 5AB5  3E 0D       	ld	a,0x0d
17170 5AB7  F5          	push	af
17171 5AB8  33          	inc	sp
17172 5AB9  CD 27 00    	call	_changeBank
17173 5ABC  33          	inc	sp
17174 5ABD  3A 40 01    	ld	a,(_stage8phase)
17175 5AC0  B7          	or	a, a
17176 5AC1  28 04       	jr	Z,l_UpdateStage8_00106
17177 5AC3  D6 02       	sub	a,0x02
17178 5AC5  20 2E       	jr	NZ,l_UpdateStage8_00107
17179 5AC7              l_UpdateStage8_00106:
17180 5AC7  2A 02 00    	ld	hl,(_stageframe)
17181 5ACA  29          	add	hl,hl
17182 5ACB  7D          	ld	a,l
17183 5ACC  E6 0F       	and	a,0x0f
17184 5ACE  4F          	ld	c,a
17185 5ACF  AF          	xor	a,a
17186 5AD0  47          	ld	b,a
17187 5AD1  21 10 00    	ld	hl,0x0010
17188 5AD4  ED 42       	sbc	hl,bc
17189 5AD6  29          	add	hl, hl
17190 5AD7  29          	add	hl, hl
17191 5AD8  01 00 00    	ld	bc,_stage8animtilescloudsmov_bin
17192 5ADB  09          	add	hl,bc
17193 5ADC  E5          	push	hl
17194 5ADD  E5          	push	hl
17195 5ADE  21 00 01    	ld	hl,0x0100
17196 5AE1  E5          	push	hl
17197 5AE2  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17198 5AE5  C1          	pop	bc
17199 5AE6  21 80 00    	ld	hl,0x0080
17200 5AE9  09          	add	hl,bc
17201 5AEA  E5          	push	hl
17202 5AEB  21 40 01    	ld	hl,0x0140
17203 5AEE  E5          	push	hl
17204 5AEF  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17205 5AF2  C3 7D 5B    	jp	l_UpdateStage8_00108
17206 5AF5              l_UpdateStage8_00107:
17207 5AF5  ED 4B 02 00 	ld	bc,(_stageframe)
17208 5AF9  CB 38       	srl	b
17209 5AFB  CB 19       	rr	c
17210 5AFD  79          	ld	a,c
17211 5AFE  E6 07       	and	a,0x07
17212 5B00  4F          	ld	c,a
17213 5B01  06 00       	ld	b,0x00
17214 5B03  69          	ld	l, c
17215 5B04  60          	ld	h, b
17216 5B05  29          	add	hl, hl
17217 5B06  09          	add	hl, bc
17218 5B07  29          	add	hl, hl
17219 5B08  09          	add	hl, bc
17220 5B09  29          	add	hl, hl
17221 5B0A  29          	add	hl, hl
17222 5B0B  29          	add	hl, hl
17223 5B0C  29          	add	hl, hl
17224 5B0D  29          	add	hl, hl
17225 5B0E  3A 40 01    	ld	a,(_stage8phase)
17226 5B11  3D          	dec	a
17227 5B12  4D          	ld	c,l
17228 5B13  44          	ld	b,h
17229 5B14  20 38       	jr	NZ,l_UpdateStage8_00104
17230 5B16  21 00 00    	ld	hl,_stage8animtilesamov_bin
17231 5B19  09          	add	hl,bc
17232 5B1A  E5          	push	hl
17233 5B1B  E5          	push	hl
17234 5B1C  21 00 00    	ld	hl,0x0000
17235 5B1F  E5          	push	hl
17236 5B20  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17237 5B23  C1          	pop	bc
17238 5B24  21 40 00    	ld	hl,0x0040
17239 5B27  09          	add	hl,bc
17240 5B28  C5          	push	bc
17241 5B29  E5          	push	hl
17242 5B2A  21 40 00    	ld	hl,0x0040
17243 5B2D  E5          	push	hl
17244 5B2E  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17245 5B31  C1          	pop	bc
17246 5B32  21 80 00    	ld	hl,0x0080
17247 5B35  09          	add	hl,bc
17248 5B36  C5          	push	bc
17249 5B37  E5          	push	hl
17250 5B38  21 80 00    	ld	hl,0x0080
17251 5B3B  E5          	push	hl
17252 5B3C  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17253 5B3F  C1          	pop	bc
17254 5B40  21 C0 00    	ld	hl,0x00c0
17255 5B43  09          	add	hl,bc
17256 5B44  E5          	push	hl
17257 5B45  21 C0 00    	ld	hl,0x00c0
17258 5B48  E5          	push	hl
17259 5B49  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy32_callee
17260 5B4C  18 2F       	jr	l_UpdateStage8_00108
17261 5B4E              l_UpdateStage8_00104:
17262 5B4E  3A 40 01    	ld	a,(_stage8phase)
17263 5B51  D6 03       	sub	a,0x03
17264 5B53  20 28       	jr	NZ,l_UpdateStage8_00108
17265 5B55  21 00 00    	ld	hl,_stage8animtilesbmov_bin
17266 5B58  09          	add	hl,bc
17267 5B59  E5          	push	hl
17268 5B5A  E5          	push	hl
17269 5B5B  21 80 01    	ld	hl,0x0180
17270 5B5E  E5          	push	hl
17271 5B5F  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17272 5B62  C1          	pop	bc
17273 5B63  21 40 00    	ld	hl,0x0040
17274 5B66  09          	add	hl,bc
17275 5B67  C5          	push	bc
17276 5B68  E5          	push	hl
17277 5B69  21 C0 01    	ld	hl,0x01c0
17278 5B6C  E5          	push	hl
17279 5B6D  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy64_callee
17280 5B70  C1          	pop	bc
17281 5B71  21 80 00    	ld	hl,0x0080
17282 5B74  09          	add	hl,bc
17283 5B75  E5          	push	hl
17284 5B76  21 00 02    	ld	hl,0x0200
17285 5B79  E5          	push	hl
17286 5B7A  CD 00 00    	call	_UNSAFE_SMS_VRAMmemcpy32_callee
17287 5B7D              l_UpdateStage8_00108:
17288 5B7D  3E 0F       	ld	a,0x0f
17289 5B7F  F5          	push	af
17290 5B80  33          	inc	sp
17291 5B81  CD 27 00    	call	_changeBank
17292 5B84  33          	inc	sp
17293 5B85  ED 4B 02 00 	ld	bc,(_stageframe)
17294 5B89  CB 38       	srl	b
17295 5B8B  CB 19       	rr	c
17296 5B8D  CB 38       	srl	b
17297 5B8F  CB 19       	rr	c
17298 5B91  21 0E 00    	ld	hl,0x000e
17299 5B94  E5          	push	hl
17300 5B95  C5          	push	bc
17301 5B96  CD 00 00    	call	__moduint_callee
17302 5B99  4D          	ld	c,l
17303 5B9A  44          	ld	b,h
17304 5B9B  21 00 00    	ld	hl,_stage8animpalette
17305 5B9E  09          	add	hl,bc
17306 5B9F  46          	ld	b,(hl)
17307 5BA0  C5          	push	bc
17308 5BA1  33          	inc	sp
17309 5BA2  3E 0F       	ld	a,0x0f
17310 5BA4  F5          	push	af
17311 5BA5  33          	inc	sp
17312 5BA6  CD 00 00    	call	_SMS_setBGPaletteColor_callee
17313 5BA9  C9          	ret
17314 5BAA              	SECTION code_compiler
17315 5BAA              ;	---------------------------------
17316 5BAA              ; Function InitStage8
17317 5BAA              ; ---------------------------------
17318 5BAA              _InitStage8:
17319 5BAA  3E 0E       	ld	a,0x0e
17320 5BAC  F5          	push	af
17321 5BAD  33          	inc	sp
17322 5BAE  21 00 00    	ld	hl,_stage8tiles_psgcompr
17323 5BB1  E5          	push	hl
17324 5BB2  CD 2A 01    	call	_LoadTiles
17325 5BB5  F1          	pop	af
17326 5BB6  33          	inc	sp
17327 5BB7  3E 07       	ld	a,0x07
17328 5BB9  F5          	push	af
17329 5BBA  33          	inc	sp
17330 5BBB  21 00 00    	ld	hl,_stage8spriteslist
17331 5BBE  E5          	push	hl
17332 5BBF  CD 9A 69    	call	_InitStageSprites
17333 5BC2  F1          	pop	af
17334 5BC3  33          	inc	sp
17335 5BC4  3E 0F       	ld	a,0x0f
17336 5BC6  F5          	push	af
17337 5BC7  33          	inc	sp
17338 5BC8  21 00 00    	ld	hl,_stage8_statics
17339 5BCB  E5          	push	hl
17340 5BCC  CD 47 06    	call	_SetStaticEnemies
17341 5BCF  F1          	pop	af
17342 5BD0  33          	inc	sp
17343 5BD1  3E 02       	ld	a,0x02
17344 5BD3  F5          	push	af
17345 5BD4  33          	inc	sp
17346 5BD5  21 00 00    	ld	hl,_stage8_scrollers
17347 5BD8  E5          	push	hl
17348 5BD9  CD 87 08    	call	_AddScrollers
17349 5BDC  F1          	pop	af
17350 5BDD  33          	inc	sp
17351 5BDE  21 40 01    	ld	hl,_stage8phase
17352 5BE1  36 00       	ld	(hl),0x00
17353 5BE3  C9          	ret
17354 5BE4              	SECTION code_compiler
17355 5BE4              ;	---------------------------------
17356 5BE4              ; Function InitEnemyshootSprites
17357 5BE4              ; ---------------------------------
17358 5BE4              _InitEnemyshootSprites:
17359 5BE4  3E 07       	ld	a,0x07
17360 5BE6  F5          	push	af
17361 5BE7  33          	inc	sp
17362 5BE8  21 35 01    	ld	hl,0x0135
17363 5BEB  E5          	push	hl
17364 5BEC  21 00 00    	ld	hl,_enemyshoot_psgcompr
17365 5BEF  E5          	push	hl
17366 5BF0  CD FD 00    	call	_LoadSprite
17367 5BF3  F1          	pop	af
17368 5BF4  F1          	pop	af
17369 5BF5  33          	inc	sp
17370 5BF6  C9          	ret
17371 5BF7              	SECTION code_compiler
17372 5BF7              ;	---------------------------------
17373 5BF7              ; Function InitEnemyshootDirection
17374 5BF7              ; ---------------------------------
17375 5BF7              _InitEnemyshootDirection:
17376 5BF7  DD E5       	push	ix
17377 5BF9  DD 21 00 00 	ld	ix,0
17378 5BFD  DD 39       	add	ix,sp
17379 5BFF  21 2B 00    	ld	hl,_shootcount
17380 5C02  34          	inc	(hl)
17381 5C03  21 2C 00    	ld	hl,_numenemyshoots
17382 5C06  7E          	ld	a,(hl)
17383 5C07  D6 0A       	sub	a,0x0a
17384 5C09  30 32       	jr	NC,l_InitEnemyshootDirection_00103
17385 5C0B  6E          	ld	l,(hl)
17386 5C0C  26 00       	ld	h,0x00
17387 5C0E  4D          	ld	c,l
17388 5C0F  44          	ld	b,h
17389 5C10  29          	add	hl, hl
17390 5C11  29          	add	hl, hl
17391 5C12  09          	add	hl, bc
17392 5C13  01 2D 00    	ld	bc,_enemyshoots
17393 5C16  09          	add	hl,bc
17394 5C17  DD 7E 04    	ld	a,(ix+4)
17395 5C1A  77          	ld	(hl),a
17396 5C1B  5D          	ld	e,l
17397 5C1C  54          	ld	d,h
17398 5C1D  4D          	ld	c,l
17399 5C1E  44          	ld	b,h
17400 5C1F  13          	inc	de
17401 5C20  DD 7E 05    	ld	a,(ix+5)
17402 5C23  12          	ld	(de),a
17403 5C24  21 04 00    	ld	hl,0x0004
17404 5C27  09          	add	hl,bc
17405 5C28  36 02       	ld	(hl),0x02
17406 5C2A  59          	ld	e, c
17407 5C2B  50          	ld	d, b
17408 5C2C  13          	inc	de
17409 5C2D  13          	inc	de
17410 5C2E  DD 7E 06    	ld	a,(ix+6)
17411 5C31  12          	ld	(de),a
17412 5C32  03          	inc	bc
17413 5C33  03          	inc	bc
17414 5C34  03          	inc	bc
17415 5C35  DD 7E 07    	ld	a,(ix+7)
17416 5C38  02          	ld	(bc),a
17417 5C39  21 2C 00    	ld	hl,_numenemyshoots
17418 5C3C  34          	inc	(hl)
17419 5C3D              l_InitEnemyshootDirection_00103:
17420 5C3D  DD E1       	pop	ix
17421 5C3F  C9          	ret
17422 5C40              	SECTION code_compiler
17423 5C40              ;	---------------------------------
17424 5C40              ; Function SpreadEnemyshootDirection
17425 5C40              ; ---------------------------------
17426 5C40              _SpreadEnemyshootDirection:
17427 5C40  DD E5       	push	ix
17428 5C42  DD 21 00 00 	ld	ix,0
17429 5C46  DD 39       	add	ix,sp
17430 5C48  0E 00       	ld	c,0x00
17431 5C4A              l_SpreadEnemyshootDirection_00103:
17432 5C4A  79          	ld	a,c
17433 5C4B  DD 96 0A    	sub	a,(ix+10)
17434 5C4E  30 2D       	jr	NC,l_SpreadEnemyshootDirection_00105
17435 5C50  DD 7E 08    	ld	a,(ix+8)
17436 5C53  81          	add	a, c
17437 5C54  5F          	ld	e,a
17438 5C55  DD 7E 09    	ld	a,(ix+9)
17439 5C58  CE 00       	adc	a,0x00
17440 5C5A  57          	ld	d,a
17441 5C5B  1A          	ld	a,(de)
17442 5C5C  47          	ld	b,a
17443 5C5D  DD 7E 06    	ld	a,(ix+6)
17444 5C60  81          	add	a, c
17445 5C61  5F          	ld	e,a
17446 5C62  DD 7E 07    	ld	a,(ix+7)
17447 5C65  CE 00       	adc	a,0x00
17448 5C67  57          	ld	d,a
17449 5C68  1A          	ld	a,(de)
17450 5C69  57          	ld	d,a
17451 5C6A  C5          	push	bc
17452 5C6B  4A          	ld	c, d
17453 5C6C  C5          	push	bc
17454 5C6D  DD 66 05    	ld	h,(ix+5)
17455 5C70  DD 6E 04    	ld	l,(ix+4)
17456 5C73  E5          	push	hl
17457 5C74  CD F7 5B    	call	_InitEnemyshootDirection
17458 5C77  F1          	pop	af
17459 5C78  F1          	pop	af
17460 5C79  C1          	pop	bc
17461 5C7A  0C          	inc	c
17462 5C7B  18 CD       	jr	l_SpreadEnemyshootDirection_00103
17463 5C7D              l_SpreadEnemyshootDirection_00105:
17464 5C7D  DD E1       	pop	ix
17465 5C7F  C9          	ret
17466 5C80              	SECTION code_compiler
17467 5C80              ;	---------------------------------
17468 5C80              ; Function InitEnemyshootLaser
17469 5C80              ; ---------------------------------
17470 5C80              _InitEnemyshootLaser:
17471 5C80  DD E5       	push	ix
17472 5C82  DD 21 00 00 	ld	ix,0
17473 5C86  DD 39       	add	ix,sp
17474 5C88  21 2B 00    	ld	hl,_shootcount
17475 5C8B  34          	inc	(hl)
17476 5C8C  21 2C 00    	ld	hl,_numenemyshoots
17477 5C8F  7E          	ld	a,(hl)
17478 5C90  D6 0A       	sub	a,0x0a
17479 5C92  30 40       	jr	NC,l_InitEnemyshootLaser_00103
17480 5C94  6E          	ld	l,(hl)
17481 5C95  26 00       	ld	h,0x00
17482 5C97  4D          	ld	c,l
17483 5C98  44          	ld	b,h
17484 5C99  29          	add	hl, hl
17485 5C9A  29          	add	hl, hl
17486 5C9B  09          	add	hl, bc
17487 5C9C  01 2D 00    	ld	bc,_enemyshoots
17488 5C9F  09          	add	hl,bc
17489 5CA0  DD 7E 04    	ld	a,(ix+4)
17490 5CA3  77          	ld	(hl),a
17491 5CA4  5D          	ld	e,l
17492 5CA5  54          	ld	d,h
17493 5CA6  4D          	ld	c,l
17494 5CA7  44          	ld	b,h
17495 5CA8  13          	inc	de
17496 5CA9  DD 7E 05    	ld	a,(ix+5)
17497 5CAC  12          	ld	(de),a
17498 5CAD  21 04 00    	ld	hl,0x0004
17499 5CB0  09          	add	hl,bc
17500 5CB1  36 03       	ld	(hl),0x03
17501 5CB3  59          	ld	e, c
17502 5CB4  50          	ld	d, b
17503 5CB5  13          	inc	de
17504 5CB6  13          	inc	de
17505 5CB7  AF          	xor	a, a
17506 5CB8  12          	ld	(de),a
17507 5CB9  03          	inc	bc
17508 5CBA  03          	inc	bc
17509 5CBB  03          	inc	bc
17510 5CBC  3A 0F 00    	ld	a,(_gamelevel)
17511 5CBF  87          	add	a, a
17512 5CC0  C6 07       	add	a,0x07
17513 5CC2  02          	ld	(bc),a
17514 5CC3  21 2C 00    	ld	hl,_numenemyshoots
17515 5CC6  34          	inc	(hl)
17516 5CC7  3E 01       	ld	a,0x01
17517 5CC9  F5          	push	af
17518 5CCA  33          	inc	sp
17519 5CCB  21 00 00    	ld	hl,_enemylaser_psg
17520 5CCE  E5          	push	hl
17521 5CCF  CD E0 03    	call	_PlaySound
17522 5CD2  F1          	pop	af
17523 5CD3  33          	inc	sp
17524 5CD4              l_InitEnemyshootLaser_00103:
17525 5CD4  DD E1       	pop	ix
17526 5CD6  C9          	ret
17527 5CD7              	SECTION code_compiler
17528 5CD7              ;	---------------------------------
17529 5CD7              ; Function InitEnemyshoot
17530 5CD7              ; ---------------------------------
17531 5CD7              _InitEnemyshoot:
17532 5CD7  DD E5       	push	ix
17533 5CD9  DD 21 00 00 	ld	ix,0
17534 5CDD  DD 39       	add	ix,sp
17535 5CDF  21 F8 FF    	ld	hl,-8
17536 5CE2  39          	add	hl,sp
17537 5CE3  F9          	ld	sp,hl
17538 5CE4  21 2B 00    	ld	hl,_shootcount
17539 5CE7  34          	inc	(hl)
17540 5CE8  3A 2C 00    	ld	a,(_numenemyshoots)
17541 5CEB  D6 0A       	sub	a,0x0a
17542 5CED  D2 E1 5D    	jp	NC,l_InitEnemyshoot_00108
17543 5CF0  3A 0F 00    	ld	a,(_gamelevel)
17544 5CF3  4F          	ld	c,a
17545 5CF4  06 00       	ld	b,0x00
17546 5CF6  3E 04       	ld	a,0x04
17547 5CF8  91          	sub	a, c
17548 5CF9  4F          	ld	c,a
17549 5CFA  3E 00       	ld	a,0x00
17550 5CFC  98          	sbc	a, b
17551 5CFD  47          	ld	b,a
17552 5CFE  3A 2B 00    	ld	a,(_shootcount)
17553 5D01  5F          	ld	e,a
17554 5D02  16 00       	ld	d,0x00
17555 5D04  C5          	push	bc
17556 5D05  D5          	push	de
17557 5D06  CD 00 00    	call	__modsint_callee
17558 5D09  7C          	ld	a,h
17559 5D0A  B5          	or	a,l
17560 5D0B  28 07       	jr	Z,l_InitEnemyshoot_00103
17561 5D0D  DD 7E 06    	ld	a,(ix+6)
17562 5D10  3D          	dec	a
17563 5D11  C2 E1 5D    	jp	NZ,l_InitEnemyshoot_00108
17564 5D14              l_InitEnemyshoot_00103:
17565 5D14  2A 2C 00    	ld	hl,(_numenemyshoots)
17566 5D17  26 00       	ld	h,0x00
17567 5D19  4D          	ld	c,l
17568 5D1A  44          	ld	b,h
17569 5D1B  29          	add	hl, hl
17570 5D1C  29          	add	hl, hl
17571 5D1D  09          	add	hl, bc
17572 5D1E  01 2D 00    	ld	bc,_enemyshoots
17573 5D21  09          	add	hl,bc
17574 5D22  C1          	pop	bc
17575 5D23  3A 12 00    	ld	a,(_playerx)
17576 5D26  E5          	push	hl
17577 5D27  4F          	ld	c,a
17578 5D28  06 00       	ld	b,0x00
17579 5D2A  DD 5E 04    	ld	e,(ix+4)
17580 5D2D  16 00       	ld	d,0x00
17581 5D2F  79          	ld	a,c
17582 5D30  93          	sub	a, e
17583 5D31  DD 77 FC    	ld	(ix-4),a
17584 5D34  78          	ld	a,b
17585 5D35  9A          	sbc	a, d
17586 5D36  DD 77 FD    	ld	(ix-3),a
17587 5D39  3A 13 00    	ld	a,(_playery)
17588 5D3C  4F          	ld	c,a
17589 5D3D  06 00       	ld	b,0x00
17590 5D3F  DD 5E 05    	ld	e,(ix+5)
17591 5D42  16 00       	ld	d,0x00
17592 5D44  79          	ld	a,c
17593 5D45  93          	sub	a, e
17594 5D46  DD 77 FE    	ld	(ix-2),a
17595 5D49  78          	ld	a,b
17596 5D4A  9A          	sbc	a, d
17597 5D4B  DD 77 FF    	ld	(ix-1),a
17598 5D4E  DD 6E FC    	ld	l,(ix-4)
17599 5D51  DD 66 FD    	ld	h,(ix-3)
17600 5D54  CD 00 00    	call	_abs_fastcall
17601 5D57  4D          	ld	c,l
17602 5D58  DD 6E FE    	ld	l,(ix-2)
17603 5D5B  44          	ld	b,h
17604 5D5C  DD 66 FF    	ld	h,(ix-1)
17605 5D5F  CD 00 00    	call	_abs_fastcall
17606 5D62  59          	ld	e,c
17607 5D63  50          	ld	d,b
17608 5D64  EB          	ex	de,hl
17609 5D65  19          	add	hl,de
17610 5D66  DD 75 FA    	ld	(ix-6),l
17611 5D69  DD 74 FB    	ld	(ix-5),h
17612 5D6C  3E 40       	ld	a,0x40
17613 5D6E  BD          	cp	a,l
17614 5D6F  3E 00       	ld	a,0x00
17615 5D71  DD 9E FB    	sbc	a,(ix-5)
17616 5D74  E2 79 5D    	jp	PO, l_InitEnemyshoot_00124
17617 5D77  EE 80       	xor	a,0x80
17618 5D79              l_InitEnemyshoot_00124:
17619 5D79  F2 E1 5D    	jp	P,l_InitEnemyshoot_00108
17620 5D7C  E1          	pop	hl
17621 5D7D  E5          	push	hl
17622 5D7E  DD 7E 04    	ld	a,(ix+4)
17623 5D81  C1          	pop	bc
17624 5D82  77          	ld	(hl),a
17625 5D83  C5          	push	bc
17626 5D84  03          	inc	bc
17627 5D85  DD 7E 05    	ld	a,(ix+5)
17628 5D88  02          	ld	(bc),a
17629 5D89  DD 6E F8    	ld	l,(ix-8)
17630 5D8C  DD 66 F9    	ld	h,(ix-7)
17631 5D8F  11 04 00    	ld	de,0x0004
17632 5D92  19          	add	hl,de
17633 5D93  36 02       	ld	(hl),0x02
17634 5D95  3A 5F 00    	ld	a,(_playstageshootspeed)
17635 5D98  4F          	ld	c,a
17636 5D99  06 00       	ld	b,0x00
17637 5D9B  C5          	push	bc
17638 5D9C  C5          	push	bc
17639 5D9D  DD 6E FC    	ld	l,(ix-4)
17640 5DA0  DD 66 FD    	ld	h,(ix-3)
17641 5DA3  E5          	push	hl
17642 5DA4  CD 00 00    	call	__mulint_callee
17643 5DA7  EB          	ex	de,hl
17644 5DA8  C1          	pop	bc
17645 5DA9  D5          	push	de
17646 5DAA  C5          	push	bc
17647 5DAB  DD 6E FE    	ld	l,(ix-2)
17648 5DAE  DD 66 FF    	ld	h,(ix-1)
17649 5DB1  E5          	push	hl
17650 5DB2  CD 00 00    	call	__mulint_callee
17651 5DB5  D1          	pop	de
17652 5DB6  E5          	push	hl
17653 5DB7  DD 6E FA    	ld	l,(ix-6)
17654 5DBA  DD 66 FB    	ld	h,(ix-5)
17655 5DBD  E5          	push	hl
17656 5DBE  D5          	push	de
17657 5DBF  CD 00 00    	call	__divsint_callee
17658 5DC2  EB          	ex	de,hl
17659 5DC3  C1          	pop	bc
17660 5DC4  D5          	push	de
17661 5DC5  DD 6E FA    	ld	l,(ix-6)
17662 5DC8  DD 66 FB    	ld	h,(ix-5)
17663 5DCB  E5          	push	hl
17664 5DCC  C5          	push	bc
17665 5DCD  CD 00 00    	call	__divsint_callee
17666 5DD0  D1          	pop	de
17667 5DD1  4D          	ld	c,l
17668 5DD2  E1          	pop	hl
17669 5DD3  E5          	push	hl
17670 5DD4  23          	inc	hl
17671 5DD5  23          	inc	hl
17672 5DD6  73          	ld	(hl),e
17673 5DD7  E1          	pop	hl
17674 5DD8  E5          	push	hl
17675 5DD9  23          	inc	hl
17676 5DDA  23          	inc	hl
17677 5DDB  23          	inc	hl
17678 5DDC  71          	ld	(hl),c
17679 5DDD  21 2C 00    	ld	hl,_numenemyshoots
17680 5DE0  34          	inc	(hl)
17681 5DE1              l_InitEnemyshoot_00108:
17682 5DE1  DD F9       	ld	sp, ix
17683 5DE3  DD E1       	pop	ix
17684 5DE5  C9          	ret
17685 5DE6              	SECTION code_compiler
17686 5DE6              ;	---------------------------------
17687 5DE6              ; Function CheckMapCollision
17688 5DE6              ; ---------------------------------
17689 5DE6              _CheckMapCollision:
17690 5DE6  DD E5       	push	ix
17691 5DE8  DD 21 00 00 	ld	ix,0
17692 5DEC  DD 39       	add	ix,sp
17693 5DEE  3A 04 00    	ld	a,(_stageframe2mod)
17694 5DF1  B7          	or	a, a
17695 5DF2  20 28       	jr	NZ,l_CheckMapCollision_00104
17696 5DF4  3E 0F       	ld	a,0x0f
17697 5DF6  F5          	push	af
17698 5DF7  33          	inc	sp
17699 5DF8  CD 27 00    	call	_changeBank
17700 5DFB  33          	inc	sp
17701 5DFC  2A 09 00    	ld	hl,(_playstage)
17702 5DFF  26 00       	ld	h,0x00
17703 5E01  29          	add	hl, hl
17704 5E02  11 00 00    	ld	de,_checkcollisionfunctions
17705 5E05  19          	add	hl,de
17706 5E06  4E          	ld	c,(hl)
17707 5E07  23          	inc	hl
17708 5E08  7E          	ld	a,(hl)
17709 5E09  47          	ld	b,a
17710 5E0A  B1          	or	a,c
17711 5E0B  28 0F       	jr	Z,l_CheckMapCollision_00104
17712 5E0D  DD 66 05    	ld	h,(ix+5)
17713 5E10  DD 6E 04    	ld	l,(ix+4)
17714 5E13  E5          	push	hl
17715 5E14  69          	ld	l, c
17716 5E15  60          	ld	h, b
17717 5E16  CD 00 00    	call	___sdcc_call_hl
17718 5E19  F1          	pop	af
17719 5E1A  18 02       	jr	l_CheckMapCollision_00105
17720 5E1C              l_CheckMapCollision_00104:
17721 5E1C  2E 00       	ld	l,0x00
17722 5E1E              l_CheckMapCollision_00105:
17723 5E1E  DD E1       	pop	ix
17724 5E20  C9          	ret
17725 5E21              	SECTION code_compiler
17726 5E21              ;	---------------------------------
17727 5E21              ; Function RemoveEnemyshoot
17728 5E21              ; ---------------------------------
17729 5E21              _RemoveEnemyshoot:
17730 5E21  DD E5       	push	ix
17731 5E23  DD 21 00 00 	ld	ix,0
17732 5E27  DD 39       	add	ix,sp
17733 5E29  F5          	push	af
17734 5E2A  3A 2C 00    	ld	a,(_numenemyshoots)
17735 5E2D  4F          	ld	c,a
17736 5E2E  06 00       	ld	b,0x00
17737 5E30  0B          	dec	bc
17738 5E31  DD 5E 04    	ld	e,(ix+4)
17739 5E34  7B          	ld	a,e
17740 5E35  17          	rla
17741 5E36  9F          	sbc	a, a
17742 5E37  57          	ld	d,a
17743 5E38  7B          	ld	a,e
17744 5E39  91          	sub	a, c
17745 5E3A  7A          	ld	a,d
17746 5E3B  98          	sbc	a, b
17747 5E3C  E2 41 5E    	jp	PO, l_RemoveEnemyshoot_00109
17748 5E3F  EE 80       	xor	a,0x80
17749 5E41              l_RemoveEnemyshoot_00109:
17750 5E41  F2 95 5E    	jp	P,l_RemoveEnemyshoot_00102
17751 5E44  DD 4E 04    	ld	c,(ix+4)
17752 5E47  79          	ld	a, c
17753 5E48  CB 07       	rlc	a
17754 5E4A  9F          	sbc	a, a
17755 5E4B  47          	ld	b,a
17756 5E4C  69          	ld	l,c
17757 5E4D  67          	ld	h,a
17758 5E4E  29          	add	hl, hl
17759 5E4F  29          	add	hl, hl
17760 5E50  09          	add	hl, bc
17761 5E51  01 2D 00    	ld	bc,_enemyshoots
17762 5E54  09          	add	hl,bc
17763 5E55  4D          	ld	c,l
17764 5E56  44          	ld	b,h
17765 5E57  21 2C 00    	ld	hl,_numenemyshoots
17766 5E5A  5E          	ld	e,(hl)
17767 5E5B  1D          	dec	e
17768 5E5C  16 00       	ld	d,0x00
17769 5E5E  6B          	ld	l, e
17770 5E5F  62          	ld	h, d
17771 5E60  29          	add	hl, hl
17772 5E61  29          	add	hl, hl
17773 5E62  19          	add	hl, de
17774 5E63  11 2D 00    	ld	de,_enemyshoots
17775 5E66  19          	add	hl,de
17776 5E67  D1          	pop	de
17777 5E68  7E          	ld	a,(hl)
17778 5E69  E5          	push	hl
17779 5E6A  02          	ld	(bc),a
17780 5E6B  59          	ld	e, c
17781 5E6C  50          	ld	d, b
17782 5E6D  13          	inc	de
17783 5E6E  E1          	pop	hl
17784 5E6F  E5          	push	hl
17785 5E70  23          	inc	hl
17786 5E71  7E          	ld	a,(hl)
17787 5E72  12          	ld	(de),a
17788 5E73  59          	ld	e, c
17789 5E74  50          	ld	d, b
17790 5E75  13          	inc	de
17791 5E76  13          	inc	de
17792 5E77  E1          	pop	hl
17793 5E78  E5          	push	hl
17794 5E79  23          	inc	hl
17795 5E7A  23          	inc	hl
17796 5E7B  7E          	ld	a,(hl)
17797 5E7C  12          	ld	(de),a
17798 5E7D  59          	ld	e, c
17799 5E7E  50          	ld	d, b
17800 5E7F  13          	inc	de
17801 5E80  13          	inc	de
17802 5E81  13          	inc	de
17803 5E82  E1          	pop	hl
17804 5E83  E5          	push	hl
17805 5E84  23          	inc	hl
17806 5E85  23          	inc	hl
17807 5E86  23          	inc	hl
17808 5E87  7E          	ld	a,(hl)
17809 5E88  12          	ld	(de),a
17810 5E89  03          	inc	bc
17811 5E8A  03          	inc	bc
17812 5E8B  03          	inc	bc
17813 5E8C  03          	inc	bc
17814 5E8D  E1          	pop	hl
17815 5E8E  E5          	push	hl
17816 5E8F  11 04 00    	ld	de,0x0004
17817 5E92  19          	add	hl, de
17818 5E93  7E          	ld	a,(hl)
17819 5E94  02          	ld	(bc),a
17820 5E95              l_RemoveEnemyshoot_00102:
17821 5E95  21 2C 00    	ld	hl,_numenemyshoots
17822 5E98  35          	dec	(hl)
17823 5E99  DD F9       	ld	sp, ix
17824 5E9B  DD E1       	pop	ix
17825 5E9D  C9          	ret
17826 5E9E              	SECTION code_compiler
17827 5E9E              ;	---------------------------------
17828 5E9E              ; Function UpdateEnemyshoot
17829 5E9E              ; ---------------------------------
17830 5E9E              _UpdateEnemyshoot:
17831 5E9E  DD E5       	push	ix
17832 5EA0  DD 21 00 00 	ld	ix,0
17833 5EA4  DD 39       	add	ix,sp
17834 5EA6  F5          	push	af
17835 5EA7  DD 6E 04    	ld	l,(ix+4)
17836 5EAA  DD 66 05    	ld	h,(ix+5)
17837 5EAD  4D          	ld	c,l
17838 5EAE  44          	ld	b,h
17839 5EAF  29          	add	hl, hl
17840 5EB0  29          	add	hl, hl
17841 5EB1  09          	add	hl, bc
17842 5EB2  01 2D 00    	ld	bc,_enemyshoots
17843 5EB5  09          	add	hl,bc
17844 5EB6  5E          	ld	e,(hl)
17845 5EB7  DD 56 04    	ld	d,(ix+4)
17846 5EBA  7B          	ld	a,e
17847 5EBB  D6 08       	sub	a,0x08
17848 5EBD  38 18       	jr	C,l_UpdateEnemyshoot_00109
17849 5EBF  3E F7       	ld	a,0xf7
17850 5EC1  93          	sub	a,e
17851 5EC2  38 13       	jr	C,l_UpdateEnemyshoot_00109
17852 5EC4  4D          	ld	c,l
17853 5EC5  44          	ld	b,h
17854 5EC6  21 01 00    	ld	hl,0x0001
17855 5EC9  09          	add	hl,bc
17856 5ECA  F1          	pop	af
17857 5ECB  7E          	ld	a,(hl)
17858 5ECC  E5          	push	hl
17859 5ECD  67          	ld	h,a
17860 5ECE  D6 08       	sub	a,0x08
17861 5ED0  38 05       	jr	C,l_UpdateEnemyshoot_00109
17862 5ED2  3E B7       	ld	a,0xb7
17863 5ED4  94          	sub	a, h
17864 5ED5  30 09       	jr	NC,l_UpdateEnemyshoot_00110
17865 5ED7              l_UpdateEnemyshoot_00109:
17866 5ED7  D5          	push	de
17867 5ED8  33          	inc	sp
17868 5ED9  CD 21 5E    	call	_RemoveEnemyshoot
17869 5EDC  33          	inc	sp
17870 5EDD  C3 58 5F    	jp	l_UpdateEnemyshoot_00115
17871 5EE0              l_UpdateEnemyshoot_00110:
17872 5EE0  24          	inc	h
17873 5EE1  24          	inc	h
17874 5EE2  24          	inc	h
17875 5EE3  24          	inc	h
17876 5EE4  7B          	ld	a,e
17877 5EE5  C6 04       	add	a,0x04
17878 5EE7  C5          	push	bc
17879 5EE8  D5          	push	de
17880 5EE9  6F          	ld	l,a
17881 5EEA  E5          	push	hl
17882 5EEB  CD E6 5D    	call	_CheckMapCollision
17883 5EEE  F1          	pop	af
17884 5EEF  D1          	pop	de
17885 5EF0  C1          	pop	bc
17886 5EF1  7D          	ld	a,l
17887 5EF2  B7          	or	a, a
17888 5EF3  28 08       	jr	Z,l_UpdateEnemyshoot_00107
17889 5EF5  D5          	push	de
17890 5EF6  33          	inc	sp
17891 5EF7  CD 21 5E    	call	_RemoveEnemyshoot
17892 5EFA  33          	inc	sp
17893 5EFB  18 5B       	jr	l_UpdateEnemyshoot_00115
17894 5EFD              l_UpdateEnemyshoot_00107:
17895 5EFD  0A          	ld	a,(bc)
17896 5EFE  57          	ld	d,a
17897 5EFF  69          	ld	l, c
17898 5F00  60          	ld	h, b
17899 5F01  23          	inc	hl
17900 5F02  23          	inc	hl
17901 5F03  5E          	ld	e,(hl)
17902 5F04  7A          	ld	a,d
17903 5F05  83          	add	a, e
17904 5F06  E1          	pop	hl
17905 5F07  02          	ld	(bc),a
17906 5F08  56          	ld	d,(hl)
17907 5F09  E5          	push	hl
17908 5F0A  69          	ld	l, c
17909 5F0B  60          	ld	h, b
17910 5F0C  23          	inc	hl
17911 5F0D  23          	inc	hl
17912 5F0E  23          	inc	hl
17913 5F0F  5E          	ld	e,(hl)
17914 5F10  7A          	ld	a,d
17915 5F11  83          	add	a, e
17916 5F12  E1          	pop	hl
17917 5F13  E5          	push	hl
17918 5F14  77          	ld	(hl),a
17919 5F15  21 04 00    	ld	hl,0x0004
17920 5F18  09          	add	hl,bc
17921 5F19  7E          	ld	a,(hl)
17922 5F1A  5F          	ld	e,a
17923 5F1B  D6 02       	sub	a,0x02
17924 5F1D  20 13       	jr	NZ,l_UpdateEnemyshoot_00104
17925 5F1F  3A 06 00    	ld	a,(_sprite82anim)
17926 5F22  C6 35       	add	a,0x35
17927 5F24  E1          	pop	hl
17928 5F25  57          	ld	d,a
17929 5F26  5E          	ld	e,(hl)
17930 5F27  0A          	ld	a,(bc)
17931 5F28  E5          	push	hl
17932 5F29  47          	ld	b,a
17933 5F2A  D5          	push	de
17934 5F2B  C5          	push	bc
17935 5F2C  33          	inc	sp
17936 5F2D  CD 00 00    	call	_SMS_addSprite_callee
17937 5F30  18 26       	jr	l_UpdateEnemyshoot_00115
17938 5F32              l_UpdateEnemyshoot_00104:
17939 5F32  7B          	ld	a,e
17940 5F33  D6 03       	sub	a,0x03
17941 5F35  20 21       	jr	NZ,l_UpdateEnemyshoot_00115
17942 5F37  E1          	pop	hl
17943 5F38  7E          	ld	a,(hl)
17944 5F39  E5          	push	hl
17945 5F3A  C6 F8       	add	a,0xf8
17946 5F3C  57          	ld	d,a
17947 5F3D  0A          	ld	a,(bc)
17948 5F3E  5F          	ld	e,a
17949 5F3F  C5          	push	bc
17950 5F40  3E 37       	ld	a,0x37
17951 5F42  F5          	push	af
17952 5F43  33          	inc	sp
17953 5F44  D5          	push	de
17954 5F45  CD 00 00    	call	_SMS_addSprite_callee
17955 5F48  C1          	pop	bc
17956 5F49  E1          	pop	hl
17957 5F4A  56          	ld	d,(hl)
17958 5F4B  0A          	ld	a,(bc)
17959 5F4C  E5          	push	hl
17960 5F4D  47          	ld	b,a
17961 5F4E  3E 38       	ld	a,0x38
17962 5F50  5A          	ld	e,d
17963 5F51  57          	ld	d,a
17964 5F52  D5          	push	de
17965 5F53  C5          	push	bc
17966 5F54  33          	inc	sp
17967 5F55  CD 00 00    	call	_SMS_addSprite_callee
17968 5F58              l_UpdateEnemyshoot_00115:
17969 5F58  DD F9       	ld	sp, ix
17970 5F5A  DD E1       	pop	ix
17971 5F5C  C9          	ret
17972 5F5D              	SECTION code_compiler
17973 5F5D              ;	---------------------------------
17974 5F5D              ; Function UpdateEnemyshoots
17975 5F5D              ; ---------------------------------
17976 5F5D              _UpdateEnemyshoots:
17977 5F5D  21 2C 00    	ld	hl,_numenemyshoots
17978 5F60  7E          	ld	a,(hl)
17979 5F61  B7          	or	a, a
17980 5F62  28 14       	jr	Z,l_UpdateEnemyshoots_00107
17981 5F64  4E          	ld	c,(hl)
17982 5F65  0D          	dec	c
17983 5F66              l_UpdateEnemyshoots_00105:
17984 5F66  CB 79       	bit	7, c
17985 5F68  C0          	ret	NZ
17986 5F69  79          	ld	a,c
17987 5F6A  5F          	ld	e,a
17988 5F6B  17          	rla
17989 5F6C  9F          	sbc	a, a
17990 5F6D  57          	ld	d,a
17991 5F6E  C5          	push	bc
17992 5F6F  D5          	push	de
17993 5F70  CD 9E 5E    	call	_UpdateEnemyshoot
17994 5F73  F1          	pop	af
17995 5F74  C1          	pop	bc
17996 5F75  0D          	dec	c
17997 5F76  18 EE       	jr	l_UpdateEnemyshoots_00105
17998 5F78              l_UpdateEnemyshoots_00107:
17999 5F78  C9          	ret
18000 5F79              	SECTION code_compiler
18001 5F79              ;	---------------------------------
18002 5F79              ; Function InitEnemyshoots
18003 5F79              ; ---------------------------------
18004 5F79              _InitEnemyshoots:
18005 5F79  CD E4 5B    	call	_InitEnemyshootSprites
18006 5F7C  21 2C 00    	ld	hl,_numenemyshoots
18007 5F7F  36 00       	ld	(hl),0x00
18008 5F81  C9          	ret
18009 5F82              	SECTION code_compiler
18010 5F82              ;	---------------------------------
18011 5F82              ; Function KillEnemyshoots
18012 5F82              ; ---------------------------------
18013 5F82              _KillEnemyshoots:
18014 5F82  21 2C 00    	ld	hl,_numenemyshoots
18015 5F85  36 00       	ld	(hl),0x00
18016 5F87  C9          	ret
18017 5F88              	SECTION code_compiler
18018 5F88              ;	---------------------------------
18019 5F88              ; Function TestEnemyShoot
18020 5F88              ; ---------------------------------
18021 5F88              _TestEnemyShoot:
18022 5F88  DD E5       	push	ix
18023 5F8A  DD 21 00 00 	ld	ix,0
18024 5F8E  DD 39       	add	ix,sp
18025 5F90  DD 6E 04    	ld	l,(ix+4)
18026 5F93  DD 66 05    	ld	h,(ix+5)
18027 5F96  4D          	ld	c,l
18028 5F97  44          	ld	b,h
18029 5F98  23          	inc	hl
18030 5F99  23          	inc	hl
18031 5F9A  23          	inc	hl
18032 5F9B  56          	ld	d,(hl)
18033 5F9C  C5          	push	bc
18034 5F9D  DD 7E 06    	ld	a,(ix+6)
18035 5FA0  5A          	ld	e,d
18036 5FA1  57          	ld	d,a
18037 5FA2  D5          	push	de
18038 5FA3  CD 00 00    	call	__moduchar_callee
18039 5FA6  C1          	pop	bc
18040 5FA7  7D          	ld	a,l
18041 5FA8  D6 02       	sub	a,0x02
18042 5FAA  20 17       	jr	NZ,l_TestEnemyShoot_00103
18043 5FAC  69          	ld	l, c
18044 5FAD  60          	ld	h, b
18045 5FAE  23          	inc	hl
18046 5FAF  56          	ld	d,(hl)
18047 5FB0  14          	inc	d
18048 5FB1  14          	inc	d
18049 5FB2  14          	inc	d
18050 5FB3  14          	inc	d
18051 5FB4  0A          	ld	a,(bc)
18052 5FB5  C6 04       	add	a,0x02+0x02
18053 5FB7  47          	ld	b,a
18054 5FB8  AF          	xor	a, a
18055 5FB9  5A          	ld	e,d
18056 5FBA  57          	ld	d,a
18057 5FBB  D5          	push	de
18058 5FBC  C5          	push	bc
18059 5FBD  33          	inc	sp
18060 5FBE  CD D7 5C    	call	_InitEnemyshoot
18061 5FC1  F1          	pop	af
18062 5FC2  33          	inc	sp
18063 5FC3              l_TestEnemyShoot_00103:
18064 5FC3  DD E1       	pop	ix
18065 5FC5  C9          	ret
18066 5FC6              	SECTION code_compiler
18067 5FC6              ;	---------------------------------
18068 5FC6              ; Function TestEnemyShootOne
18069 5FC6              ; ---------------------------------
18070 5FC6              _TestEnemyShootOne:
18071 5FC6  DD E5       	push	ix
18072 5FC8  DD 21 00 00 	ld	ix,0
18073 5FCC  DD 39       	add	ix,sp
18074 5FCE  DD 6E 04    	ld	l,(ix+4)
18075 5FD1  DD 66 05    	ld	h,(ix+5)
18076 5FD4  4D          	ld	c,l
18077 5FD5  44          	ld	b,h
18078 5FD6  23          	inc	hl
18079 5FD7  23          	inc	hl
18080 5FD8  23          	inc	hl
18081 5FD9  DD 7E 06    	ld	a,(ix+6)
18082 5FDC  96          	sub	a,(hl)
18083 5FDD  20 17       	jr	NZ,l_TestEnemyShootOne_00103
18084 5FDF  69          	ld	l, c
18085 5FE0  60          	ld	h, b
18086 5FE1  23          	inc	hl
18087 5FE2  56          	ld	d,(hl)
18088 5FE3  14          	inc	d
18089 5FE4  14          	inc	d
18090 5FE5  14          	inc	d
18091 5FE6  14          	inc	d
18092 5FE7  0A          	ld	a,(bc)
18093 5FE8  C6 04       	add	a,0x02+0x02
18094 5FEA  47          	ld	b,a
18095 5FEB  AF          	xor	a, a
18096 5FEC  5A          	ld	e,d
18097 5FED  57          	ld	d,a
18098 5FEE  D5          	push	de
18099 5FEF  C5          	push	bc
18100 5FF0  33          	inc	sp
18101 5FF1  CD D7 5C    	call	_InitEnemyshoot
18102 5FF4  F1          	pop	af
18103 5FF5  33          	inc	sp
18104 5FF6              l_TestEnemyShootOne_00103:
18105 5FF6  DD E1       	pop	ix
18106 5FF8  C9          	ret
18107 5FF9              	SECTION code_compiler
18108 5FF9              ;	---------------------------------
18109 5FF9              ; Function TestEnemyShootComplex
18110 5FF9              ; ---------------------------------
18111 5FF9              _TestEnemyShootComplex:
18112 5FF9  DD E5       	push	ix
18113 5FFB  DD 21 00 00 	ld	ix,0
18114 5FFF  DD 39       	add	ix,sp
18115 6001  DD 6E 04    	ld	l,(ix+4)
18116 6004  DD 66 05    	ld	h,(ix+5)
18117 6007  4D          	ld	c,l
18118 6008  44          	ld	b,h
18119 6009  23          	inc	hl
18120 600A  23          	inc	hl
18121 600B  23          	inc	hl
18122 600C  56          	ld	d,(hl)
18123 600D  C5          	push	bc
18124 600E  DD 7E 06    	ld	a,(ix+6)
18125 6011  5A          	ld	e,d
18126 6012  57          	ld	d,a
18127 6013  D5          	push	de
18128 6014  CD 00 00    	call	__moduchar_callee
18129 6017  C1          	pop	bc
18130 6018  7D          	ld	a,l
18131 6019  D6 02       	sub	a,0x02
18132 601B  20 1A       	jr	NZ,l_TestEnemyShootComplex_00103
18133 601D  69          	ld	l, c
18134 601E  60          	ld	h, b
18135 601F  23          	inc	hl
18136 6020  7E          	ld	a,(hl)
18137 6021  DD 86 08    	add	a,(ix+8)
18138 6024  57          	ld	d,a
18139 6025  0A          	ld	a,(bc)
18140 6026  4F          	ld	c,a
18141 6027  DD 86 07    	add	a,(ix+7)
18142 602A  47          	ld	b,a
18143 602B  3E 01       	ld	a,0x01
18144 602D  5A          	ld	e,d
18145 602E  57          	ld	d,a
18146 602F  D5          	push	de
18147 6030  C5          	push	bc
18148 6031  33          	inc	sp
18149 6032  CD D7 5C    	call	_InitEnemyshoot
18150 6035  F1          	pop	af
18151 6036  33          	inc	sp
18152 6037              l_TestEnemyShootComplex_00103:
18153 6037  DD E1       	pop	ix
18154 6039  C9          	ret
18155 603A              	SECTION code_compiler
18156 603A              ;	---------------------------------
18157 603A              ; Function DrawPlayerShoot
18158 603A              ; ---------------------------------
18159 603A              _DrawPlayerShoot:
18160 603A  DD E5       	push	ix
18161 603C  DD 21 00 00 	ld	ix,0
18162 6040  DD 39       	add	ix,sp
18163 6042  21 F9 FF    	ld	hl,-7
18164 6045  39          	add	hl,sp
18165 6046  F9          	ld	sp,hl
18166 6047  DD 4E 04    	ld	c,(ix+4)
18167 604A  DD 46 05    	ld	b,(ix+5)
18168 604D  21 02 00    	ld	hl,0x0002
18169 6050  09          	add	hl,bc
18170 6051  DD 75 FC    	ld	(ix-4),l
18171 6054  DD 74 FD    	ld	(ix-3),h
18172 6057  7E          	ld	a,(hl)
18173 6058  DD 77 FE    	ld	(ix-2),a
18174 605B  3A 19 00    	ld	a,(_playershootlevel)
18175 605E  3D          	dec	a
18176 605F  20 04       	jr	NZ,l_DrawPlayerShoot_00124
18177 6061  3E 01       	ld	a,0x01
18178 6063  18 01       	jr	l_DrawPlayerShoot_00125
18179 6065              l_DrawPlayerShoot_00124:
18180 6065  AF          	xor	a,a
18181 6066              l_DrawPlayerShoot_00125:
18182 6066  DD 77 FB    	ld	(ix-5),a
18183 6069  21 01 00    	ld	hl,0x0001
18184 606C  09          	add	hl,bc
18185 606D  F1          	pop	af
18186 606E  56          	ld	d,(hl)
18187 606F  0A          	ld	a,(bc)
18188 6070  E5          	push	hl
18189 6071  5F          	ld	e,a
18190 6072  C6 04       	add	a,0x04
18191 6074  DD 77 FF    	ld	(ix-1),a
18192 6077  DD 7E FE    	ld	a,(ix-2)
18193 607A  3D          	dec	a
18194 607B  20 6E       	jr	NZ,l_DrawPlayerShoot_00108
18195 607D  DD 7E FB    	ld	a,(ix-5)
18196 6080  B7          	or	a, a
18197 6081  28 43       	jr	Z,l_DrawPlayerShoot_00102
18198 6083  C5          	push	bc
18199 6084  3E 11       	ld	a,0x11
18200 6086  F5          	push	af
18201 6087  33          	inc	sp
18202 6088  D5          	push	de
18203 6089  CD 00 00    	call	_SMS_addSprite_callee
18204 608C  C1          	pop	bc
18205 608D  E1          	pop	hl
18206 608E  7E          	ld	a,(hl)
18207 608F  E5          	push	hl
18208 6090  C6 08       	add	a,0x08
18209 6092  57          	ld	d,a
18210 6093  0A          	ld	a,(bc)
18211 6094  5F          	ld	e,a
18212 6095  C5          	push	bc
18213 6096  3E 12       	ld	a,0x12
18214 6098  F5          	push	af
18215 6099  33          	inc	sp
18216 609A  D5          	push	de
18217 609B  CD 00 00    	call	_SMS_addSprite_callee
18218 609E  C1          	pop	bc
18219 609F  E1          	pop	hl
18220 60A0  56          	ld	d,(hl)
18221 60A1  0A          	ld	a,(bc)
18222 60A2  E5          	push	hl
18223 60A3  C6 08       	add	a,0x08
18224 60A5  5F          	ld	e,a
18225 60A6  C5          	push	bc
18226 60A7  3E 11       	ld	a,0x11
18227 60A9  F5          	push	af
18228 60AA  33          	inc	sp
18229 60AB  D5          	push	de
18230 60AC  CD 00 00    	call	_SMS_addSprite_callee
18231 60AF  C1          	pop	bc
18232 60B0  E1          	pop	hl
18233 60B1  7E          	ld	a,(hl)
18234 60B2  E5          	push	hl
18235 60B3  C6 08       	add	a,0x08
18236 60B5  57          	ld	d,a
18237 60B6  0A          	ld	a,(bc)
18238 60B7  C6 08       	add	a,0x08
18239 60B9  47          	ld	b,a
18240 60BA  3E 12       	ld	a,0x12
18241 60BC  5A          	ld	e,d
18242 60BD  57          	ld	d,a
18243 60BE  D5          	push	de
18244 60BF  C5          	push	bc
18245 60C0  33          	inc	sp
18246 60C1  CD 00 00    	call	_SMS_addSprite_callee
18247 60C4  18 61       	jr	l_DrawPlayerShoot_00110
18248 60C6              l_DrawPlayerShoot_00102:
18249 60C6  C5          	push	bc
18250 60C7  3E 11       	ld	a,0x11
18251 60C9  5A          	ld	e,d
18252 60CA  57          	ld	d,a
18253 60CB  D5          	push	de
18254 60CC  DD 7E FF    	ld	a,(ix-1)
18255 60CF  F5          	push	af
18256 60D0  33          	inc	sp
18257 60D1  CD 00 00    	call	_SMS_addSprite_callee
18258 60D4  C1          	pop	bc
18259 60D5  E1          	pop	hl
18260 60D6  7E          	ld	a,(hl)
18261 60D7  E5          	push	hl
18262 60D8  C6 08       	add	a,0x08
18263 60DA  57          	ld	d,a
18264 60DB  0A          	ld	a,(bc)
18265 60DC  C6 04       	add	a,0x02+0x02
18266 60DE  47          	ld	b,a
18267 60DF  3E 12       	ld	a,0x12
18268 60E1  5A          	ld	e,d
18269 60E2  57          	ld	d,a
18270 60E3  D5          	push	de
18271 60E4  C5          	push	bc
18272 60E5  33          	inc	sp
18273 60E6  CD 00 00    	call	_SMS_addSprite_callee
18274 60E9  18 3C       	jr	l_DrawPlayerShoot_00110
18275 60EB              l_DrawPlayerShoot_00108:
18276 60EB  DD 7E FE    	ld	a,(ix-2)
18277 60EE  C6 10       	add	a,0x10
18278 60F0  67          	ld	h,a
18279 60F1  DD 7E FB    	ld	a,(ix-5)
18280 60F4  B7          	or	a, a
18281 60F5  28 26       	jr	Z,l_DrawPlayerShoot_00105
18282 60F7  1D          	dec	e
18283 60F8  1D          	dec	e
18284 60F9  C5          	push	bc
18285 60FA  E5          	push	hl
18286 60FB  33          	inc	sp
18287 60FC  D5          	push	de
18288 60FD  CD 00 00    	call	_SMS_addSprite_callee
18289 6100  C1          	pop	bc
18290 6101  DD 6E FC    	ld	l,(ix-4)
18291 6104  DD 66 FD    	ld	h,(ix-3)
18292 6107  7E          	ld	a,(hl)
18293 6108  C6 10       	add	a,0x10
18294 610A  E1          	pop	hl
18295 610B  5F          	ld	e,a
18296 610C  56          	ld	d,(hl)
18297 610D  0A          	ld	a,(bc)
18298 610E  E5          	push	hl
18299 610F  C6 0A       	add	a,0x0a
18300 6111  47          	ld	b,a
18301 6112  7B          	ld	a,e
18302 6113  5A          	ld	e,d
18303 6114  57          	ld	d,a
18304 6115  D5          	push	de
18305 6116  C5          	push	bc
18306 6117  33          	inc	sp
18307 6118  CD 00 00    	call	_SMS_addSprite_callee
18308 611B  18 0A       	jr	l_DrawPlayerShoot_00110
18309 611D              l_DrawPlayerShoot_00105:
18310 611D  6A          	ld	l,d
18311 611E  E5          	push	hl
18312 611F  DD 7E FF    	ld	a,(ix-1)
18313 6122  F5          	push	af
18314 6123  33          	inc	sp
18315 6124  CD 00 00    	call	_SMS_addSprite_callee
18316 6127              l_DrawPlayerShoot_00110:
18317 6127  DD F9       	ld	sp, ix
18318 6129  DD E1       	pop	ix
18319 612B  C9          	ret
18320 612C              	SECTION code_compiler
18321 612C              ;	---------------------------------
18322 612C              ; Function InitPlayershootSprites
18323 612C              ; ---------------------------------
18324 612C              _InitPlayershootSprites:
18325 612C  3E 08       	ld	a,0x08
18326 612E  F5          	push	af
18327 612F  33          	inc	sp
18328 6130  21 10 01    	ld	hl,0x0110
18329 6133  E5          	push	hl
18330 6134  21 00 00    	ld	hl,_playershoot_psgcompr
18331 6137  E5          	push	hl
18332 6138  CD FD 00    	call	_LoadSprite
18333 613B  F1          	pop	af
18334 613C  F1          	pop	af
18335 613D  33          	inc	sp
18336 613E  C9          	ret
18337 613F              	SECTION code_compiler
18338 613F              ;	---------------------------------
18339 613F              ; Function RemovePlayershoot
18340 613F              ; ---------------------------------
18341 613F              _RemovePlayershoot:
18342 613F  DD E5       	push	ix
18343 6141  DD 21 00 00 	ld	ix,0
18344 6145  DD 39       	add	ix,sp
18345 6147  F5          	push	af
18346 6148  3A 1B 00    	ld	a,(_numplayershoots)
18347 614B  4F          	ld	c,a
18348 614C  06 00       	ld	b,0x00
18349 614E  0B          	dec	bc
18350 614F  DD 5E 04    	ld	e,(ix+4)
18351 6152  7B          	ld	a,e
18352 6153  17          	rla
18353 6154  9F          	sbc	a, a
18354 6155  57          	ld	d,a
18355 6156  7B          	ld	a,e
18356 6157  91          	sub	a, c
18357 6158  7A          	ld	a,d
18358 6159  98          	sbc	a, b
18359 615A  E2 5F 61    	jp	PO, l_RemovePlayershoot_00109
18360 615D  EE 80       	xor	a,0x80
18361 615F              l_RemovePlayershoot_00109:
18362 615F  F2 B3 61    	jp	P,l_RemovePlayershoot_00102
18363 6162  DD 4E 04    	ld	c,(ix+4)
18364 6165  79          	ld	a, c
18365 6166  CB 07       	rlc	a
18366 6168  9F          	sbc	a, a
18367 6169  47          	ld	b,a
18368 616A  69          	ld	l,c
18369 616B  67          	ld	h,a
18370 616C  29          	add	hl, hl
18371 616D  29          	add	hl, hl
18372 616E  09          	add	hl, bc
18373 616F  01 1C 00    	ld	bc,_playershoots
18374 6172  09          	add	hl,bc
18375 6173  4D          	ld	c,l
18376 6174  44          	ld	b,h
18377 6175  21 1B 00    	ld	hl,_numplayershoots
18378 6178  5E          	ld	e,(hl)
18379 6179  1D          	dec	e
18380 617A  16 00       	ld	d,0x00
18381 617C  6B          	ld	l, e
18382 617D  62          	ld	h, d
18383 617E  29          	add	hl, hl
18384 617F  29          	add	hl, hl
18385 6180  19          	add	hl, de
18386 6181  11 1C 00    	ld	de,_playershoots
18387 6184  19          	add	hl,de
18388 6185  D1          	pop	de
18389 6186  7E          	ld	a,(hl)
18390 6187  E5          	push	hl
18391 6188  02          	ld	(bc),a
18392 6189  59          	ld	e, c
18393 618A  50          	ld	d, b
18394 618B  13          	inc	de
18395 618C  E1          	pop	hl
18396 618D  E5          	push	hl
18397 618E  23          	inc	hl
18398 618F  7E          	ld	a,(hl)
18399 6190  12          	ld	(de),a
18400 6191  59          	ld	e, c
18401 6192  50          	ld	d, b
18402 6193  13          	inc	de
18403 6194  13          	inc	de
18404 6195  E1          	pop	hl
18405 6196  E5          	push	hl
18406 6197  23          	inc	hl
18407 6198  23          	inc	hl
18408 6199  7E          	ld	a,(hl)
18409 619A  12          	ld	(de),a
18410 619B  59          	ld	e, c
18411 619C  50          	ld	d, b
18412 619D  13          	inc	de
18413 619E  13          	inc	de
18414 619F  13          	inc	de
18415 61A0  E1          	pop	hl
18416 61A1  E5          	push	hl
18417 61A2  23          	inc	hl
18418 61A3  23          	inc	hl
18419 61A4  23          	inc	hl
18420 61A5  7E          	ld	a,(hl)
18421 61A6  12          	ld	(de),a
18422 61A7  03          	inc	bc
18423 61A8  03          	inc	bc
18424 61A9  03          	inc	bc
18425 61AA  03          	inc	bc
18426 61AB  E1          	pop	hl
18427 61AC  E5          	push	hl
18428 61AD  11 04 00    	ld	de,0x0004
18429 61B0  19          	add	hl, de
18430 61B1  7E          	ld	a,(hl)
18431 61B2  02          	ld	(bc),a
18432 61B3              l_RemovePlayershoot_00102:
18433 61B3  21 1B 00    	ld	hl,_numplayershoots
18434 61B6  35          	dec	(hl)
18435 61B7  DD F9       	ld	sp, ix
18436 61B9  DD E1       	pop	ix
18437 61BB  C9          	ret
18438 61BC              	SECTION code_compiler
18439 61BC              ;	---------------------------------
18440 61BC              ; Function UpdatePlayershoot
18441 61BC              ; ---------------------------------
18442 61BC              _UpdatePlayershoot:
18443 61BC  DD E5       	push	ix
18444 61BE  DD 21 00 00 	ld	ix,0
18445 61C2  DD 39       	add	ix,sp
18446 61C4  21 F8 FF    	ld	hl,-8
18447 61C7  39          	add	hl,sp
18448 61C8  F9          	ld	sp,hl
18449 61C9  DD 6E 04    	ld	l,(ix+4)
18450 61CC  DD 66 05    	ld	h,(ix+5)
18451 61CF  4D          	ld	c,l
18452 61D0  44          	ld	b,h
18453 61D1  29          	add	hl, hl
18454 61D2  29          	add	hl, hl
18455 61D3  09          	add	hl, bc
18456 61D4  01 1C 00    	ld	bc,_playershoots
18457 61D7  09          	add	hl,bc
18458 61D8  4D          	ld	c,l
18459 61D9  44          	ld	b,h
18460 61DA  21 01 00    	ld	hl,0x0001
18461 61DD  09          	add	hl,bc
18462 61DE  DD 75 FE    	ld	(ix-2),l
18463 61E1  DD 74 FF    	ld	(ix-1),h
18464 61E4  5E          	ld	e,(hl)
18465 61E5  DD 7E 04    	ld	a,(ix+4)
18466 61E8  DD 77 FA    	ld	(ix-6),a
18467 61EB  7B          	ld	a,e
18468 61EC  D6 0A       	sub	a,0x0a
18469 61EE  38 0B       	jr	C,l_UpdatePlayershoot_00114
18470 61F0  0A          	ld	a,(bc)
18471 61F1  57          	ld	d,a
18472 61F2  D6 07       	sub	a,0x07
18473 61F4  38 05       	jr	C,l_UpdatePlayershoot_00114
18474 61F6  3E F1       	ld	a,0xf1
18475 61F8  92          	sub	a, d
18476 61F9  30 0C       	jr	NC,l_UpdatePlayershoot_00115
18477 61FB              l_UpdatePlayershoot_00114:
18478 61FB  DD 7E FA    	ld	a,(ix-6)
18479 61FE  F5          	push	af
18480 61FF  33          	inc	sp
18481 6200  CD 3F 61    	call	_RemovePlayershoot
18482 6203  33          	inc	sp
18483 6204  C3 1C 63    	jp	l_UpdatePlayershoot_00122
18484 6207              l_UpdatePlayershoot_00115:
18485 6207  69          	ld	l, c
18486 6208  60          	ld	h, b
18487 6209  23          	inc	hl
18488 620A  23          	inc	hl
18489 620B  23          	inc	hl
18490 620C  5E          	ld	e,(hl)
18491 620D  7A          	ld	a,d
18492 620E  83          	add	a, e
18493 620F  02          	ld	(bc),a
18494 6210  DD 6E FE    	ld	l,(ix-2)
18495 6213  DD 66 FF    	ld	h,(ix-1)
18496 6216  5E          	ld	e,(hl)
18497 6217  69          	ld	l, c
18498 6218  60          	ld	h, b
18499 6219  23          	inc	hl
18500 621A  23          	inc	hl
18501 621B  23          	inc	hl
18502 621C  23          	inc	hl
18503 621D  56          	ld	d,(hl)
18504 621E  7B          	ld	a,e
18505 621F  92          	sub	a, d
18506 6220  DD 6E FE    	ld	l,(ix-2)
18507 6223  DD 66 FF    	ld	h,(ix-1)
18508 6226  77          	ld	(hl),a
18509 6227  3A 04 00    	ld	a,(_stageframe2mod)
18510 622A  B7          	or	a, a
18511 622B  C2 17 63    	jp	NZ,l_UpdatePlayershoot_00113
18512 622E  DD 6E FE    	ld	l,(ix-2)
18513 6231  DD 66 FF    	ld	h,(ix-1)
18514 6234  56          	ld	d,(hl)
18515 6235  14          	inc	d
18516 6236  14          	inc	d
18517 6237  14          	inc	d
18518 6238  14          	inc	d
18519 6239  0A          	ld	a,(bc)
18520 623A  C6 08       	add	a,0x08
18521 623C  C5          	push	bc
18522 623D  5F          	ld	e,a
18523 623E  D5          	push	de
18524 623F  CD E6 5D    	call	_CheckMapCollision
18525 6242  F1          	pop	af
18526 6243  C1          	pop	bc
18527 6244  7D          	ld	a,l
18528 6245  B7          	or	a, a
18529 6246  28 26       	jr	Z,l_UpdatePlayershoot_00110
18530 6248  DD 6E FE    	ld	l,(ix-2)
18531 624B  DD 66 FF    	ld	h,(ix-1)
18532 624E  56          	ld	d,(hl)
18533 624F  14          	inc	d
18534 6250  14          	inc	d
18535 6251  14          	inc	d
18536 6252  14          	inc	d
18537 6253  0A          	ld	a,(bc)
18538 6254  C6 04       	add	a,0x02+0x02
18539 6256  5F          	ld	e,a
18540 6257  C5          	push	bc
18541 6258  AF          	xor	a, a
18542 6259  F5          	push	af
18543 625A  33          	inc	sp
18544 625B  D5          	push	de
18545 625C  CD 43 0B    	call	_InitExplosion
18546 625F  F1          	pop	af
18547 6260  33          	inc	sp
18548 6261  DD 7E FA    	ld	a,(ix-6)
18549 6264  F5          	push	af
18550 6265  33          	inc	sp
18551 6266  CD 3F 61    	call	_RemovePlayershoot
18552 6269  33          	inc	sp
18553 626A  C1          	pop	bc
18554 626B  C3 17 63    	jp	l_UpdatePlayershoot_00113
18555 626E              l_UpdatePlayershoot_00110:
18556 626E  3A 89 00    	ld	a,(_numenemies)
18557 6271  B7          	or	a, a
18558 6272  CA 17 63    	jp	Z,l_UpdatePlayershoot_00113
18559 6275  C6 FF       	add	a,0xff
18560 6277  DD 77 F8    	ld	(ix-8),a
18561 627A  DD 77 F9    	ld	(ix-7),a
18562 627D              l_UpdatePlayershoot_00120:
18563 627D  DD CB F9 7E 	bit	7,(ix-7)
18564 6281  C2 17 63    	jp	NZ,l_UpdatePlayershoot_00113
18565 6284  DD 5E F9    	ld	e,(ix-7)
18566 6287  7B          	ld	a, e
18567 6288  CB 07       	rlc	a
18568 628A  9F          	sbc	a, a
18569 628B  57          	ld	d, a
18570 628C  6B          	ld	l, e
18571 628D  62          	ld	h, d
18572 628E  29          	add	hl, hl
18573 628F  29          	add	hl, hl
18574 6290  29          	add	hl, hl
18575 6291  19          	add	hl, de
18576 6292  11 8A 00    	ld	de,_enemies
18577 6295  19          	add	hl,de
18578 6296  C5          	push	bc
18579 6297  E5          	push	hl
18580 6298  C5          	push	bc
18581 6299  E5          	push	hl
18582 629A  CD CB 45    	call	_checkEnemyPlayerShoot
18583 629D  F1          	pop	af
18584 629E  F1          	pop	af
18585 629F  D1          	pop	de
18586 62A0  C1          	pop	bc
18587 62A1  7D          	ld	a,l
18588 62A2  3D          	dec	a
18589 62A3  20 66       	jr	NZ,l_UpdatePlayershoot_00121
18590 62A5  21 06 00    	ld	hl,0x0006
18591 62A8  19          	add	hl,de
18592 62A9  DD 75 FC    	ld	(ix-4),l
18593 62AC  DD 74 FD    	ld	(ix-3),h
18594 62AF  7E          	ld	a,(hl)
18595 62B0  DD 77 FB    	ld	(ix-5),a
18596 62B3  3A 19 00    	ld	a,(_playershootlevel)
18597 62B6  5F          	ld	e,a
18598 62B7  16 00       	ld	d,0x00
18599 62B9  13          	inc	de
18600 62BA  DD 6E FB    	ld	l,(ix-5)
18601 62BD  26 00       	ld	h,0x00
18602 62BF  7B          	ld	a,e
18603 62C0  95          	sub	a, l
18604 62C1  7A          	ld	a,d
18605 62C2  9C          	sbc	a, h
18606 62C3  E2 C8 62    	jp	PO, l_UpdatePlayershoot_00162
18607 62C6  EE 80       	xor	a,0x80
18608 62C8              l_UpdatePlayershoot_00162:
18609 62C8  FA D6 62    	jp	M,l_UpdatePlayershoot_00102
18610 62CB  DD 7E F8    	ld	a,(ix-8)
18611 62CE  F5          	push	af
18612 62CF  33          	inc	sp
18613 62D0  CD CB 47    	call	_KillEnemy
18614 62D3  33          	inc	sp
18615 62D4  18 2A       	jr	l_UpdatePlayershoot_00103
18616 62D6              l_UpdatePlayershoot_00102:
18617 62D6  21 19 00    	ld	hl,_playershootlevel
18618 62D9  5E          	ld	e,(hl)
18619 62DA  1C          	inc	e
18620 62DB  DD 7E FB    	ld	a,(ix-5)
18621 62DE  93          	sub	a, e
18622 62DF  DD 6E FC    	ld	l,(ix-4)
18623 62E2  DD 66 FD    	ld	h,(ix-3)
18624 62E5  77          	ld	(hl),a
18625 62E6  DD 6E FE    	ld	l,(ix-2)
18626 62E9  DD 66 FF    	ld	h,(ix-1)
18627 62EC  56          	ld	d,(hl)
18628 62ED  14          	inc	d
18629 62EE  14          	inc	d
18630 62EF  14          	inc	d
18631 62F0  14          	inc	d
18632 62F1  0A          	ld	a,(bc)
18633 62F2  C6 04       	add	a,0x02+0x02
18634 62F4  47          	ld	b,a
18635 62F5  AF          	xor	a, a
18636 62F6  5A          	ld	e,d
18637 62F7  57          	ld	d,a
18638 62F8  D5          	push	de
18639 62F9  C5          	push	bc
18640 62FA  33          	inc	sp
18641 62FB  CD 43 0B    	call	_InitExplosion
18642 62FE  F1          	pop	af
18643 62FF  33          	inc	sp
18644 6300              l_UpdatePlayershoot_00103:
18645 6300  DD 7E FA    	ld	a,(ix-6)
18646 6303  F5          	push	af
18647 6304  33          	inc	sp
18648 6305  CD 3F 61    	call	_RemovePlayershoot
18649 6308  33          	inc	sp
18650 6309  18 11       	jr	l_UpdatePlayershoot_00122
18651 630B              l_UpdatePlayershoot_00121:
18652 630B  DD 35 F9    	dec	(ix-7)
18653 630E  DD 7E F9    	ld	a,(ix-7)
18654 6311  DD 77 F8    	ld	(ix-8),a
18655 6314  C3 7D 62    	jp	l_UpdatePlayershoot_00120
18656 6317              l_UpdatePlayershoot_00113:
18657 6317  C5          	push	bc
18658 6318  CD 3A 60    	call	_DrawPlayerShoot
18659 631B  F1          	pop	af
18660 631C              l_UpdatePlayershoot_00122:
18661 631C  DD F9       	ld	sp, ix
18662 631E  DD E1       	pop	ix
18663 6320  C9          	ret
18664 6321              	SECTION code_compiler
18665 6321              ;	---------------------------------
18666 6321              ; Function UpdatePlayershoots
18667 6321              ; ---------------------------------
18668 6321              _UpdatePlayershoots:
18669 6321  21 1B 00    	ld	hl,_numplayershoots
18670 6324  7E          	ld	a,(hl)
18671 6325  B7          	or	a, a
18672 6326  28 14       	jr	Z,l_UpdatePlayershoots_00107
18673 6328  4E          	ld	c,(hl)
18674 6329  0D          	dec	c
18675 632A              l_UpdatePlayershoots_00105:
18676 632A  CB 79       	bit	7, c
18677 632C  C0          	ret	NZ
18678 632D  79          	ld	a,c
18679 632E  5F          	ld	e,a
18680 632F  17          	rla
18681 6330  9F          	sbc	a, a
18682 6331  57          	ld	d,a
18683 6332  C5          	push	bc
18684 6333  D5          	push	de
18685 6334  CD BC 61    	call	_UpdatePlayershoot
18686 6337  F1          	pop	af
18687 6338  C1          	pop	bc
18688 6339  0D          	dec	c
18689 633A  18 EE       	jr	l_UpdatePlayershoots_00105
18690 633C              l_UpdatePlayershoots_00107:
18691 633C  C9          	ret
18692 633D              	SECTION code_compiler
18693 633D              ;	---------------------------------
18694 633D              ; Function InitPlayershoot
18695 633D              ; ---------------------------------
18696 633D              _InitPlayershoot:
18697 633D  DD E5       	push	ix
18698 633F  DD 21 00 00 	ld	ix,0
18699 6343  DD 39       	add	ix,sp
18700 6345  F5          	push	af
18701 6346  21 1B 00    	ld	hl,_numplayershoots
18702 6349  4E          	ld	c,(hl)
18703 634A  34          	inc	(hl)
18704 634B  06 00       	ld	b,0x00
18705 634D  69          	ld	l, c
18706 634E  60          	ld	h, b
18707 634F  29          	add	hl, hl
18708 6350  29          	add	hl, hl
18709 6351  09          	add	hl, bc
18710 6352  01 1C 00    	ld	bc,_playershoots
18711 6355  09          	add	hl,bc
18712 6356  DD 7E 04    	ld	a,(ix+4)
18713 6359  77          	ld	(hl),a
18714 635A  5D          	ld	e,l
18715 635B  54          	ld	d,h
18716 635C  4D          	ld	c,l
18717 635D  44          	ld	b,h
18718 635E  13          	inc	de
18719 635F  DD 7E 05    	ld	a,(ix+5)
18720 6362  12          	ld	(de),a
18721 6363  59          	ld	e, c
18722 6364  50          	ld	d, b
18723 6365  13          	inc	de
18724 6366  13          	inc	de
18725 6367  DD 7E 06    	ld	a,(ix+6)
18726 636A  12          	ld	(de),a
18727 636B  C5          	push	bc
18728 636C  3E 0F       	ld	a,0x0f
18729 636E  F5          	push	af
18730 636F  33          	inc	sp
18731 6370  CD 27 00    	call	_changeBank
18732 6373  33          	inc	sp
18733 6374  C1          	pop	bc
18734 6375  59          	ld	e, c
18735 6376  50          	ld	d, b
18736 6377  13          	inc	de
18737 6378  13          	inc	de
18738 6379  13          	inc	de
18739 637A  3E 00       	ld	a,+((_playershootspeedsx) & 0xFF)
18740 637C  DD 86 06    	add	a,(ix+6)
18741 637F  DD 77 FE    	ld	(ix-2),a
18742 6382  3E 00       	ld	a,+((_playershootspeedsx) / 256)
18743 6384  CE 00       	adc	a,0x00
18744 6386  DD 77 FF    	ld	(ix-1),a
18745 6389  E1          	pop	hl
18746 638A  7E          	ld	a,(hl)
18747 638B  E5          	push	hl
18748 638C  12          	ld	(de),a
18749 638D  03          	inc	bc
18750 638E  03          	inc	bc
18751 638F  03          	inc	bc
18752 6390  03          	inc	bc
18753 6391  3E 00       	ld	a,+((_playershootspeedsy) & 0xFF)
18754 6393  DD 86 06    	add	a,(ix+6)
18755 6396  5F          	ld	e,a
18756 6397  3E 00       	ld	a,+((_playershootspeedsy) / 256)
18757 6399  CE 00       	adc	a,0x00
18758 639B  57          	ld	d,a
18759 639C  1A          	ld	a,(de)
18760 639D  02          	ld	(bc),a
18761 639E  DD F9       	ld	sp, ix
18762 63A0  DD E1       	pop	ix
18763 63A2  C9          	ret
18764 63A3              	SECTION code_compiler
18765 63A3              ;	---------------------------------
18766 63A3              ; Function InitPlayershoots
18767 63A3              ; ---------------------------------
18768 63A3              _InitPlayershoots:
18769 63A3  CD 2C 61    	call	_InitPlayershootSprites
18770 63A6  21 1B 00    	ld	hl,_numplayershoots
18771 63A9  36 00       	ld	(hl),0x00
18772 63AB  C9          	ret
18773 63AC              	SECTION code_compiler
18774 63AC              ;	---------------------------------
18775 63AC              ; Function InitPowerupSprites
18776 63AC              ; ---------------------------------
18777 63AC              _InitPowerupSprites:
18778 63AC  3E 0A       	ld	a,0x0a
18779 63AE  F5          	push	af
18780 63AF  33          	inc	sp
18781 63B0  21 14 01    	ld	hl,0x0114
18782 63B3  E5          	push	hl
18783 63B4  21 00 00    	ld	hl,_powerup_psgcompr
18784 63B7  E5          	push	hl
18785 63B8  CD FD 00    	call	_LoadSprite
18786 63BB  F1          	pop	af
18787 63BC  F1          	pop	af
18788 63BD  33          	inc	sp
18789 63BE  C9          	ret
18790 63BF              	SECTION code_compiler
18791 63BF              ;	---------------------------------
18792 63BF              ; Function InitPowerups
18793 63BF              ; ---------------------------------
18794 63BF              	defc _InitPowerups	=	_InitPowerupSprites
18795 63BF              	SECTION code_compiler
18796 63BF              ;	---------------------------------
18797 63BF              ; Function UpdatePowerup
18798 63BF              ; ---------------------------------
18799 63BF              _UpdatePowerup:
18800 63BF  DD E5       	push	ix
18801 63C1  DD 21 00 00 	ld	ix,0
18802 63C5  DD 39       	add	ix,sp
18803 63C7  F5          	push	af
18804 63C8  3A 38 01    	ld	a,(_powerupt)
18805 63CB  B7          	or	a, a
18806 63CC  CA B3 64    	jp	Z,l_UpdatePowerup_00121
18807 63CF  3A 02 00    	ld	a,(_stageframe)
18808 63D2  E6 07       	and	a,0x07
18809 63D4  20 04       	jr	NZ,l_UpdatePowerup_00102
18810 63D6  21 39 01    	ld	hl,_powerupv
18811 63D9  34          	inc	(hl)
18812 63DA              l_UpdatePowerup_00102:
18813 63DA  3A 37 01    	ld	a,(_powerupy)
18814 63DD  21 39 01    	ld	hl,_powerupv
18815 63E0  86          	add	a, (hl)
18816 63E1  32 37 01    	ld	(_powerupy),a
18817 63E4  2A 38 01    	ld	hl,(_powerupt)
18818 63E7  26 00       	ld	h,0x00
18819 63E9  29          	add	hl,hl
18820 63EA  01 12 01    	ld	bc,0x0112
18821 63ED  09          	add	hl,bc
18822 63EE  3A 37 01    	ld	a,(_powerupy)
18823 63F1  4D          	ld	c,l
18824 63F2  44          	ld	b,h
18825 63F3  21 10 08    	ld	hl,0x0810
18826 63F6  E5          	push	hl
18827 63F7  F5          	push	af
18828 63F8  33          	inc	sp
18829 63F9  3A 36 01    	ld	a,(_powerupx)
18830 63FC  F5          	push	af
18831 63FD  33          	inc	sp
18832 63FE  C5          	push	bc
18833 63FF  CD 46 00    	call	_DrawSpriteArray
18834 6402  21 06 00    	ld	hl,6
18835 6405  39          	add	hl,sp
18836 6406  F9          	ld	sp,hl
18837 6407  3A 37 01    	ld	a,(_powerupy)
18838 640A  D6 C0       	sub	a,0xc0
18839 640C  38 05       	jr	C,l_UpdatePowerup_00104
18840 640E  21 38 01    	ld	hl,_powerupt
18841 6411  36 00       	ld	(hl),0x00
18842 6413              l_UpdatePowerup_00104:
18843 6413  3A 14 00    	ld	a,(_playertype)
18844 6416  FE 03       	cp	a,0x03
18845 6418  28 05       	jr	Z,l_UpdatePowerup_00116
18846 641A  D6 05       	sub	a,0x05
18847 641C  C2 B3 64    	jp	NZ,l_UpdatePowerup_00121
18848 641F              l_UpdatePowerup_00116:
18849 641F  3A 12 00    	ld	a,(_playerx)
18850 6422  4F          	ld	c,a
18851 6423  06 00       	ld	b,0x00
18852 6425  21 10 00    	ld	hl,0x0010
18853 6428  09          	add	hl,bc
18854 6429  E3          	ex	(sp), hl
18855 642A  3A 36 01    	ld	a,(_powerupx)
18856 642D  5F          	ld	e,a
18857 642E  16 00       	ld	d,0x00
18858 6430  7B          	ld	a,e
18859 6431  DD 96 FE    	sub	a,(ix-2)
18860 6434  7A          	ld	a,d
18861 6435  DD 9E FF    	sbc	a,(ix-1)
18862 6438  E2 3D 64    	jp	PO, l_UpdatePowerup_00170
18863 643B  EE 80       	xor	a,0x80
18864 643D              l_UpdatePowerup_00170:
18865 643D  F2 B3 64    	jp	P,l_UpdatePowerup_00121
18866 6440  21 10 00    	ld	hl,0x0010
18867 6443  19          	add	hl,de
18868 6444  79          	ld	a,c
18869 6445  95          	sub	a, l
18870 6446  78          	ld	a,b
18871 6447  9C          	sbc	a, h
18872 6448  E2 4D 64    	jp	PO, l_UpdatePowerup_00171
18873 644B  EE 80       	xor	a,0x80
18874 644D              l_UpdatePowerup_00171:
18875 644D  F2 B3 64    	jp	P,l_UpdatePowerup_00121
18876 6450  3A 13 00    	ld	a,(_playery)
18877 6453  4F          	ld	c,a
18878 6454  06 00       	ld	b,0x00
18879 6456  21 10 00    	ld	hl,0x0010
18880 6459  09          	add	hl,bc
18881 645A  E3          	ex	(sp), hl
18882 645B  3A 37 01    	ld	a,(_powerupy)
18883 645E  5F          	ld	e,a
18884 645F  16 00       	ld	d,0x00
18885 6461  7B          	ld	a,e
18886 6462  DD 96 FE    	sub	a,(ix-2)
18887 6465  7A          	ld	a,d
18888 6466  DD 9E FF    	sbc	a,(ix-1)
18889 6469  E2 6E 64    	jp	PO, l_UpdatePowerup_00172
18890 646C  EE 80       	xor	a,0x80
18891 646E              l_UpdatePowerup_00172:
18892 646E  F2 B3 64    	jp	P,l_UpdatePowerup_00121
18893 6471  21 08 00    	ld	hl,0x0008
18894 6474  19          	add	hl,de
18895 6475  79          	ld	a,c
18896 6476  95          	sub	a, l
18897 6477  78          	ld	a,b
18898 6478  9C          	sbc	a, h
18899 6479  E2 7E 64    	jp	PO, l_UpdatePowerup_00173
18900 647C  EE 80       	xor	a,0x80
18901 647E              l_UpdatePowerup_00173:
18902 647E  F2 B3 64    	jp	P,l_UpdatePowerup_00121
18903 6481  3A 38 01    	ld	a,(_powerupt)
18904 6484  3D          	dec	a
18905 6485  20 07       	jr	NZ,l_UpdatePowerup_00109
18906 6487  21 18 00    	ld	hl,_playerspeed
18907 648A  36 03       	ld	(hl),0x03
18908 648C  18 13       	jr	l_UpdatePowerup_00110
18909 648E              l_UpdatePowerup_00109:
18910 648E  3A 38 01    	ld	a,(_powerupt)
18911 6491  D6 02       	sub	a,0x02
18912 6493  20 07       	jr	NZ,l_UpdatePowerup_00106
18913 6495  21 19 00    	ld	hl,_playershootlevel
18914 6498  36 01       	ld	(hl),0x01
18915 649A  18 05       	jr	l_UpdatePowerup_00110
18916 649C              l_UpdatePowerup_00106:
18917 649C  21 1A 00    	ld	hl,_playershootmax
18918 649F  36 03       	ld	(hl),0x03
18919 64A1              l_UpdatePowerup_00110:
18920 64A1  21 38 01    	ld	hl,_powerupt
18921 64A4  36 00       	ld	(hl),0x00
18922 64A6  3E 01       	ld	a,0x01
18923 64A8  F5          	push	af
18924 64A9  33          	inc	sp
18925 64AA  21 00 00    	ld	hl,_powerup_psg
18926 64AD  E5          	push	hl
18927 64AE  CD E0 03    	call	_PlaySound
18928 64B1  F1          	pop	af
18929 64B2  33          	inc	sp
18930 64B3              l_UpdatePowerup_00121:
18931 64B3  DD F9       	ld	sp, ix
18932 64B5  DD E1       	pop	ix
18933 64B7  C9          	ret
18934 64B8              	SECTION code_compiler
18935 64B8              ;	---------------------------------
18936 64B8              ; Function InitPowerup
18937 64B8              ; ---------------------------------
18938 64B8              _InitPowerup:
18939 64B8  DD E5       	push	ix
18940 64BA  DD 21 00 00 	ld	ix,0
18941 64BE  DD 39       	add	ix,sp
18942 64C0  3A 14 00    	ld	a,(_playertype)
18943 64C3  D6 03       	sub	a,0x03
18944 64C5  20 46       	jr	NZ,l_InitPowerup_00107
18945 64C7  3A 38 01    	ld	a,(_powerupt)
18946 64CA  B7          	or	a, a
18947 64CB  20 40       	jr	NZ,l_InitPowerup_00107
18948 64CD  21 3A 01    	ld	hl,_powerupcounter
18949 64D0  34          	inc	(hl)
18950 64D1  20 02       	jr	NZ,l_InitPowerup_00123
18951 64D3  23          	inc	hl
18952 64D4  34          	inc	(hl)
18953 64D5              l_InitPowerup_00123:
18954 64D5  21 3A 01    	ld	hl,_powerupcounter
18955 64D8  7E          	ld	a,(hl)
18956 64D9  D6 06       	sub	a,0x06
18957 64DB  20 30       	jr	NZ,l_InitPowerup_00107
18958 64DD  23          	inc	hl
18959 64DE  7E          	ld	a,(hl)
18960 64DF  B7          	or	a, a
18961 64E0  20 2B       	jr	NZ,l_InitPowerup_00107
18962 64E2  CD 00 00    	call	_myRand
18963 64E5  06 03       	ld	b,0x03
18964 64E7  4D          	ld	c, l
18965 64E8  C5          	push	bc
18966 64E9  CD 00 00    	call	__moduchar_callee
18967 64EC  7D          	ld	a,l
18968 64ED  3C          	inc	a
18969 64EE  32 38 01    	ld	(_powerupt),a
18970 64F1  DD 4E 04    	ld	c,(ix+4)
18971 64F4  DD 46 05    	ld	b,(ix+5)
18972 64F7  0A          	ld	a,(bc)
18973 64F8  32 36 01    	ld	(_powerupx),a
18974 64FB  69          	ld	l, c
18975 64FC  60          	ld	h, b
18976 64FD  23          	inc	hl
18977 64FE  7E          	ld	a,(hl)
18978 64FF  32 37 01    	ld	(_powerupy),a
18979 6502  21 00 00    	ld	hl,0x0000
18980 6505  22 3A 01    	ld	(_powerupcounter),hl
18981 6508  21 39 01    	ld	hl,_powerupv
18982 650B  36 FF       	ld	(hl),0xff
18983 650D              l_InitPowerup_00107:
18984 650D  DD E1       	pop	ix
18985 650F  C9          	ret
18986 6510              	SECTION code_compiler
18987 6510              ;	---------------------------------
18988 6510              ; Function RemovePlayer
18989 6510              ; ---------------------------------
18990 6510              _RemovePlayer:
18991 6510  21 14 00    	ld	hl,_playertype
18992 6513  36 04       	ld	(hl),0x04
18993 6515  CD 44 69    	call	_InitPlayerConstants
18994 6518  2A 13 00    	ld	hl,(_playery)
18995 651B  26 01       	ld	h,0x01
18996 651D  3A 12 00    	ld	a,(_playerx)
18997 6520  E5          	push	hl
18998 6521  F5          	push	af
18999 6522  33          	inc	sp
19000 6523  CD 43 0B    	call	_InitExplosion
19001 6526  F1          	pop	af
19002 6527  33          	inc	sp
19003 6528  CD 45 0A    	call	_DoBarrom
19004 652B  CD 82 5F    	call	_KillEnemyshoots
19005 652E  AF          	xor	a, a
19006 652F  F5          	push	af
19007 6530  33          	inc	sp
19008 6531  CD 5C 48    	call	_KillEnemies
19009 6534  33          	inc	sp
19010 6535  C9          	ret
19011 6536              	SECTION code_compiler
19012 6536              ;	---------------------------------
19013 6536              ; Function CheckPlayerEnemyCollision
19014 6536              ; ---------------------------------
19015 6536              _CheckPlayerEnemyCollision:
19016 6536  DD E5       	push	ix
19017 6538  DD 21 00 00 	ld	ix,0
19018 653C  DD 39       	add	ix,sp
19019 653E  F5          	push	af
19020 653F  F5          	push	af
19021 6540  3B          	dec	sp
19022 6541  3A 89 00    	ld	a,(_numenemies)
19023 6544  B7          	or	a, a
19024 6545  CA EB 65    	jp	Z,l_CheckPlayerEnemyCollision_00111
19025 6548  DD 36 FD 00 	ld	(ix-3),0x00
19026 654C              l_CheckPlayerEnemyCollision_00113:
19027 654C  DD 7E FD    	ld	a,(ix-3)
19028 654F  21 89 00    	ld	hl,_numenemies
19029 6552  96          	sub	a, (hl)
19030 6553  D2 EB 65    	jp	NC,l_CheckPlayerEnemyCollision_00111
19031 6556  DD 6E FD    	ld	l,(ix-3)
19032 6559  26 00       	ld	h,0x00
19033 655B  4D          	ld	c,l
19034 655C  44          	ld	b,h
19035 655D  29          	add	hl, hl
19036 655E  29          	add	hl, hl
19037 655F  29          	add	hl, hl
19038 6560  09          	add	hl, bc
19039 6561  01 8A 00    	ld	bc,_enemies
19040 6564  09          	add	hl,bc
19041 6565  C1          	pop	bc
19042 6566  E5          	push	hl
19043 6567  23          	inc	hl
19044 6568  4E          	ld	c,(hl)
19045 6569  E1          	pop	hl
19046 656A  06 00       	ld	b,0x00
19047 656C  E5          	push	hl
19048 656D  11 08 00    	ld	de,0x0008
19049 6570  19          	add	hl, de
19050 6571  6E          	ld	l,(hl)
19051 6572  26 00       	ld	h,0x00
19052 6574  09          	add	hl,bc
19053 6575  DD 75 FE    	ld	(ix-2),l
19054 6578  DD 74 FF    	ld	(ix-1),h
19055 657B  2A 13 00    	ld	hl,(_playery)
19056 657E  26 00       	ld	h,0x00
19057 6580  5D          	ld	e,l
19058 6581  54          	ld	d,h
19059 6582  23          	inc	hl
19060 6583  23          	inc	hl
19061 6584  23          	inc	hl
19062 6585  7D          	ld	a,l
19063 6586  DD 96 FE    	sub	a,(ix-2)
19064 6589  7C          	ld	a,h
19065 658A  DD 9E FF    	sbc	a,(ix-1)
19066 658D  E2 92 65    	jp	PO, l_CheckPlayerEnemyCollision_00145
19067 6590  EE 80       	xor	a,0x80
19068 6592              l_CheckPlayerEnemyCollision_00145:
19069 6592  F2 E5 65    	jp	P,l_CheckPlayerEnemyCollision_00114
19070 6595  21 0D 00    	ld	hl,0x000d
19071 6598  19          	add	hl,de
19072 6599  79          	ld	a,c
19073 659A  95          	sub	a, l
19074 659B  78          	ld	a,b
19075 659C  9C          	sbc	a, h
19076 659D  E2 A2 65    	jp	PO, l_CheckPlayerEnemyCollision_00146
19077 65A0  EE 80       	xor	a,0x80
19078 65A2              l_CheckPlayerEnemyCollision_00146:
19079 65A2  F2 E5 65    	jp	P,l_CheckPlayerEnemyCollision_00114
19080 65A5  E1          	pop	hl
19081 65A6  5E          	ld	e,(hl)
19082 65A7  3A 12 00    	ld	a,(_playerx)
19083 65AA  E5          	push	hl
19084 65AB  4F          	ld	c,a
19085 65AC  06 00       	ld	b,0x00
19086 65AE  21 0D 00    	ld	hl,0x000d
19087 65B1  09          	add	hl,bc
19088 65B2  16 00       	ld	d,0x00
19089 65B4  7B          	ld	a,e
19090 65B5  95          	sub	a, l
19091 65B6  7A          	ld	a,d
19092 65B7  9C          	sbc	a, h
19093 65B8  E2 BD 65    	jp	PO, l_CheckPlayerEnemyCollision_00147
19094 65BB  EE 80       	xor	a,0x80
19095 65BD              l_CheckPlayerEnemyCollision_00147:
19096 65BD  F2 E5 65    	jp	P,l_CheckPlayerEnemyCollision_00114
19097 65C0  E1          	pop	hl
19098 65C1  E5          	push	hl
19099 65C2  3E 07       	ld	a,+((0x0007) & 0xFF)
19100 65C4  85          	add	a,l
19101 65C5  6F          	ld	l,a
19102 65C6  3E 00       	ld	a,+((0x0007) / 256)
19103 65C8  8C          	adc	a,h
19104 65C9  67          	ld	h,a
19105 65CA  6E          	ld	l,(hl)
19106 65CB  26 00       	ld	h,0x00
19107 65CD  19          	add	hl,de
19108 65CE  03          	inc	bc
19109 65CF  03          	inc	bc
19110 65D0  03          	inc	bc
19111 65D1  58          	ld	e,b
19112 65D2  79          	ld	a,c
19113 65D3  95          	sub	a, l
19114 65D4  7B          	ld	a,e
19115 65D5  9C          	sbc	a, h
19116 65D6  E2 DB 65    	jp	PO, l_CheckPlayerEnemyCollision_00148
19117 65D9  EE 80       	xor	a,0x80
19118 65DB              l_CheckPlayerEnemyCollision_00148:
19119 65DB  F2 E5 65    	jp	P,l_CheckPlayerEnemyCollision_00114
19120 65DE  CD 10 65    	call	_RemovePlayer
19121 65E1  2E 01       	ld	l,0x01
19122 65E3  18 08       	jr	l_CheckPlayerEnemyCollision_00115
19123 65E5              l_CheckPlayerEnemyCollision_00114:
19124 65E5  DD 34 FD    	inc	(ix-3)
19125 65E8  C3 4C 65    	jp	l_CheckPlayerEnemyCollision_00113
19126 65EB              l_CheckPlayerEnemyCollision_00111:
19127 65EB  2E 00       	ld	l,0x00
19128 65ED              l_CheckPlayerEnemyCollision_00115:
19129 65ED  DD F9       	ld	sp, ix
19130 65EF  DD E1       	pop	ix
19131 65F1  C9          	ret
19132 65F2              	SECTION code_compiler
19133 65F2              ;	---------------------------------
19134 65F2              ; Function CheckPlayerEnemyshootCollision
19135 65F2              ; ---------------------------------
19136 65F2              _CheckPlayerEnemyshootCollision:
19137 65F2  DD E5       	push	ix
19138 65F4  DD 21 00 00 	ld	ix,0
19139 65F8  DD 39       	add	ix,sp
19140 65FA  F5          	push	af
19141 65FB  F5          	push	af
19142 65FC  3B          	dec	sp
19143 65FD  3A 2C 00    	ld	a,(_numenemyshoots)
19144 6600  B7          	or	a, a
19145 6601  CA 8D 66    	jp	Z,l_CheckPlayerEnemyshootCollision_00108
19146 6604  DD 36 FD 00 	ld	(ix-3),0x00
19147 6608              l_CheckPlayerEnemyshootCollision_00110:
19148 6608  DD 7E FD    	ld	a,(ix-3)
19149 660B  21 2C 00    	ld	hl,_numenemyshoots
19150 660E  96          	sub	a, (hl)
19151 660F  30 7C       	jr	NC,l_CheckPlayerEnemyshootCollision_00108
19152 6611  DD 6E FD    	ld	l,(ix-3)
19153 6614  26 00       	ld	h,0x00
19154 6616  4D          	ld	c,l
19155 6617  44          	ld	b,h
19156 6618  29          	add	hl, hl
19157 6619  29          	add	hl, hl
19158 661A  09          	add	hl, bc
19159 661B  01 2D 00    	ld	bc,_enemyshoots
19160 661E  09          	add	hl,bc
19161 661F  C1          	pop	bc
19162 6620  E5          	push	hl
19163 6621  23          	inc	hl
19164 6622  4E          	ld	c,(hl)
19165 6623  06 00       	ld	b,0x00
19166 6625  21 05 00    	ld	hl,0x0005
19167 6628  09          	add	hl,bc
19168 6629  DD 75 FE    	ld	(ix-2),l
19169 662C  DD 74 FF    	ld	(ix-1),h
19170 662F  3A 13 00    	ld	a,(_playery)
19171 6632  5F          	ld	e,a
19172 6633  16 00       	ld	d,0x00
19173 6635  7B          	ld	a,e
19174 6636  DD 96 FE    	sub	a,(ix-2)
19175 6639  7A          	ld	a,d
19176 663A  DD 9E FF    	sbc	a,(ix-1)
19177 663D  E2 42 66    	jp	PO, l_CheckPlayerEnemyshootCollision_00142
19178 6640  EE 80       	xor	a,0x80
19179 6642              l_CheckPlayerEnemyshootCollision_00142:
19180 6642  F2 87 66    	jp	P,l_CheckPlayerEnemyshootCollision_00111
19181 6645  21 0D 00    	ld	hl,0x000d
19182 6648  19          	add	hl,de
19183 6649  79          	ld	a,c
19184 664A  95          	sub	a, l
19185 664B  78          	ld	a,b
19186 664C  9C          	sbc	a, h
19187 664D  E2 52 66    	jp	PO, l_CheckPlayerEnemyshootCollision_00143
19188 6650  EE 80       	xor	a,0x80
19189 6652              l_CheckPlayerEnemyshootCollision_00143:
19190 6652  F2 87 66    	jp	P,l_CheckPlayerEnemyshootCollision_00111
19191 6655  E1          	pop	hl
19192 6656  5E          	ld	e,(hl)
19193 6657  3A 12 00    	ld	a,(_playerx)
19194 665A  E5          	push	hl
19195 665B  4F          	ld	c,a
19196 665C  06 00       	ld	b,0x00
19197 665E  21 0D 00    	ld	hl,0x000d
19198 6661  09          	add	hl,bc
19199 6662  16 00       	ld	d,0x00
19200 6664  7B          	ld	a,e
19201 6665  95          	sub	a, l
19202 6666  7A          	ld	a,d
19203 6667  9C          	sbc	a, h
19204 6668  E2 6D 66    	jp	PO, l_CheckPlayerEnemyshootCollision_00144
19205 666B  EE 80       	xor	a,0x80
19206 666D              l_CheckPlayerEnemyshootCollision_00144:
19207 666D  F2 87 66    	jp	P,l_CheckPlayerEnemyshootCollision_00111
19208 6670  21 05 00    	ld	hl,0x0005
19209 6673  19          	add	hl,de
19210 6674  79          	ld	a,c
19211 6675  95          	sub	a, l
19212 6676  78          	ld	a,b
19213 6677  9C          	sbc	a, h
19214 6678  E2 7D 66    	jp	PO, l_CheckPlayerEnemyshootCollision_00145
19215 667B  EE 80       	xor	a,0x80
19216 667D              l_CheckPlayerEnemyshootCollision_00145:
19217 667D  F2 87 66    	jp	P,l_CheckPlayerEnemyshootCollision_00111
19218 6680  CD 10 65    	call	_RemovePlayer
19219 6683  2E 01       	ld	l,0x01
19220 6685  18 08       	jr	l_CheckPlayerEnemyshootCollision_00112
19221 6687              l_CheckPlayerEnemyshootCollision_00111:
19222 6687  DD 34 FD    	inc	(ix-3)
19223 668A  C3 08 66    	jp	l_CheckPlayerEnemyshootCollision_00110
19224 668D              l_CheckPlayerEnemyshootCollision_00108:
19225 668D  2E 00       	ld	l,0x00
19226 668F              l_CheckPlayerEnemyshootCollision_00112:
19227 668F  DD F9       	ld	sp, ix
19228 6691  DD E1       	pop	ix
19229 6693  C9          	ret
19230 6694              	SECTION code_compiler
19231 6694              ;	---------------------------------
19232 6694              ; Function UpdatePlayerIndicators
19233 6694              ; ---------------------------------
19234 6694              _UpdatePlayerIndicators:
19235 6694  0E 00       	ld	c,0x00
19236 6696              l_UpdatePlayerIndicators_00103:
19237 6696  79          	ld	a,c
19238 6697  21 0D 00    	ld	hl,_numplayers
19239 669A  96          	sub	a, (hl)
19240 669B  D0          	ret	NC
19241 669C  79          	ld	a,c
19242 669D  07          	rlca
19243 669E  07          	rlca
19244 669F  07          	rlca
19245 66A0  E6 F8       	and	a,0xf8
19246 66A2  47          	ld	b,a
19247 66A3  3E F0       	ld	a,0xf0
19248 66A5  90          	sub	a, b
19249 66A6  47          	ld	b,a
19250 66A7  C5          	push	bc
19251 66A8  21 04 0E    	ld	hl,0x0e04
19252 66AB  E5          	push	hl
19253 66AC  C5          	push	bc
19254 66AD  33          	inc	sp
19255 66AE  CD 00 00    	call	_SMS_addSprite_callee
19256 66B1  C1          	pop	bc
19257 66B2  0C          	inc	c
19258 66B3  18 E1       	jr	l_UpdatePlayerIndicators_00103
19259 66B5              	SECTION code_compiler
19260 66B5              ;	---------------------------------
19261 66B5              ; Function InitPlayer
19262 66B5              ; ---------------------------------
19263 66B5              _InitPlayer:
19264 66B5  21 12 00    	ld	hl,_playerx
19265 66B8  36 80       	ld	(hl),0x80
19266 66BA  21 13 00    	ld	hl,_playery
19267 66BD  36 C8       	ld	(hl),0xc8
19268 66BF  21 14 00    	ld	hl,_playertype
19269 66C2  36 01       	ld	(hl),0x01
19270 66C4  21 15 00    	ld	hl,_playercounter
19271 66C7  36 00       	ld	(hl),0x00
19272 66C9  C9          	ret
19273 66CA              	SECTION code_compiler
19274 66CA              ;	---------------------------------
19275 66CA              ; Function InitPlayerSprite
19276 66CA              ; ---------------------------------
19277 66CA              _InitPlayerSprite:
19278 66CA  3E 0E       	ld	a,0x0e
19279 66CC  F5          	push	af
19280 66CD  33          	inc	sp
19281 66CE  21 00 01    	ld	hl,0x0100
19282 66D1  E5          	push	hl
19283 66D2  21 00 00    	ld	hl,_player_psgcompr
19284 66D5  E5          	push	hl
19285 66D6  CD FD 00    	call	_LoadSprite
19286 66D9  F1          	pop	af
19287 66DA  F1          	pop	af
19288 66DB  33          	inc	sp
19289 66DC  C9          	ret
19290 66DD              	SECTION code_compiler
19291 66DD              ;	---------------------------------
19292 66DD              ; Function DrawPlayer
19293 66DD              ; ---------------------------------
19294 66DD              _DrawPlayer:
19295 66DD  2A 17 00    	ld	hl,(_playerside)
19296 66E0  26 00       	ld	h,0x00
19297 66E2  01 00 01    	ld	bc,0x0100
19298 66E5  09          	add	hl,bc
19299 66E6  3A 13 00    	ld	a,(_playery)
19300 66E9  E5          	push	hl
19301 66EA  F5          	push	af
19302 66EB  33          	inc	sp
19303 66EC  3A 12 00    	ld	a,(_playerx)
19304 66EF  F5          	push	af
19305 66F0  33          	inc	sp
19306 66F1  CD A7 00    	call	_DrawQuadSprite
19307 66F4  F1          	pop	af
19308 66F5  F1          	pop	af
19309 66F6  3A 06 00    	ld	a,(_sprite82anim)
19310 66F9  C6 0C       	add	a,0x0c
19311 66FB  47          	ld	b,a
19312 66FC  3A 13 00    	ld	a,(_playery)
19313 66FF  C6 10       	add	a,0x10
19314 6701  57          	ld	d,a
19315 6702  3A 12 00    	ld	a,(_playerx)
19316 6705  C6 04       	add	a,0x04
19317 6707  4A          	ld	c, d
19318 6708  C5          	push	bc
19319 6709  F5          	push	af
19320 670A  33          	inc	sp
19321 670B  CD 00 00    	call	_SMS_addSprite_callee
19322 670E  C9          	ret
19323 670F              	SECTION code_compiler
19324 670F              ;	---------------------------------
19325 670F              ; Function MovePlayer
19326 670F              ; ---------------------------------
19327 670F              _MovePlayer:
19328 670F  DD E5       	push	ix
19329 6711  DD 21 00 00 	ld	ix,0
19330 6715  DD 39       	add	ix,sp
19331 6717  F5          	push	af
19332 6718  3A 18 00    	ld	a,(_playerspeed)
19333 671B  4F          	ld	c,a
19334 671C  06 00       	ld	b,0x00
19335 671E  3A 00 00    	ld	a,(_keystatus)
19336 6721  E6 04       	and	a,0x04
19337 6723  28 2A       	jr	Z,l_MovePlayer_00104
19338 6725  21 17 00    	ld	hl,_playerside
19339 6728  36 04       	ld	(hl),0x04
19340 672A  21 0F 00    	ld	hl,0x000f
19341 672D  09          	add	hl,bc
19342 672E  E3          	ex	(sp), hl
19343 672F  3A 12 00    	ld	a,(_playerx)
19344 6732  5F          	ld	e,a
19345 6733  16 00       	ld	d,0x00
19346 6735  DD 7E FE    	ld	a,(ix-2)
19347 6738  93          	sub	a, e
19348 6739  DD 7E FF    	ld	a,(ix-1)
19349 673C  9A          	sbc	a, d
19350 673D  E2 42 67    	jp	PO, l_MovePlayer_00152
19351 6740  EE 80       	xor	a,0x80
19352 6742              l_MovePlayer_00152:
19353 6742  F2 4F 67    	jp	P,l_MovePlayer_00104
19354 6745  3A 12 00    	ld	a,(_playerx)
19355 6748  21 18 00    	ld	hl,_playerspeed
19356 674B  96          	sub	a, (hl)
19357 674C  32 12 00    	ld	(_playerx),a
19358 674F              l_MovePlayer_00104:
19359 674F  3A 00 00    	ld	a,(_keystatus)
19360 6752  E6 08       	and	a,0x08
19361 6754  28 29       	jr	Z,l_MovePlayer_00108
19362 6756  21 17 00    	ld	hl,_playerside
19363 6759  36 08       	ld	(hl),0x08
19364 675B  3E E9       	ld	a,0xe9
19365 675D  91          	sub	a, c
19366 675E  4F          	ld	c,a
19367 675F  3E 00       	ld	a,0x00
19368 6761  98          	sbc	a, b
19369 6762  47          	ld	b,a
19370 6763  3A 12 00    	ld	a,(_playerx)
19371 6766  5F          	ld	e,a
19372 6767  16 00       	ld	d,0x00
19373 6769  7B          	ld	a,e
19374 676A  91          	sub	a, c
19375 676B  7A          	ld	a,d
19376 676C  98          	sbc	a, b
19377 676D  E2 72 67    	jp	PO, l_MovePlayer_00154
19378 6770  EE 80       	xor	a,0x80
19379 6772              l_MovePlayer_00154:
19380 6772  F2 7F 67    	jp	P,l_MovePlayer_00108
19381 6775  3A 12 00    	ld	a,(_playerx)
19382 6778  21 18 00    	ld	hl,_playerspeed
19383 677B  86          	add	a, (hl)
19384 677C  32 12 00    	ld	(_playerx),a
19385 677F              l_MovePlayer_00108:
19386 677F  3A 00 00    	ld	a,(_keystatus)
19387 6782  0F          	rrca
19388 6783  30 10       	jr	NC,l_MovePlayer_00112
19389 6785  3E 18       	ld	a,0x18
19390 6787  21 13 00    	ld	hl,_playery
19391 678A  96          	sub	a, (hl)
19392 678B  30 08       	jr	NC,l_MovePlayer_00112
19393 678D  7E          	ld	a,(hl)
19394 678E  21 18 00    	ld	hl,_playerspeed
19395 6791  96          	sub	a, (hl)
19396 6792  32 13 00    	ld	(_playery),a
19397 6795              l_MovePlayer_00112:
19398 6795  3A 00 00    	ld	a,(_keystatus)
19399 6798  E6 02       	and	a,0x02
19400 679A  28 10       	jr	Z,l_MovePlayer_00117
19401 679C  21 13 00    	ld	hl,_playery
19402 679F  7E          	ld	a,(hl)
19403 67A0  D6 AC       	sub	a,0xac
19404 67A2  30 08       	jr	NC,l_MovePlayer_00117
19405 67A4  7E          	ld	a,(hl)
19406 67A5  21 18 00    	ld	hl,_playerspeed
19407 67A8  86          	add	a, (hl)
19408 67A9  32 13 00    	ld	(_playery),a
19409 67AC              l_MovePlayer_00117:
19410 67AC  DD F9       	ld	sp, ix
19411 67AE  DD E1       	pop	ix
19412 67B0  C9          	ret
19413 67B1              	SECTION code_compiler
19414 67B1              ;	---------------------------------
19415 67B1              ; Function CheckShootPlayer
19416 67B1              ; ---------------------------------
19417 67B1              _CheckShootPlayer:
19418 67B1  21 16 00    	ld	hl,_playershootcounter
19419 67B4  34          	inc	(hl)
19420 67B5  3A 00 00    	ld	a,(_keystatus)
19421 67B8  E6 20       	and	a,0x20
19422 67BA  28 51       	jr	Z,l_CheckShootPlayer_00112
19423 67BC  3E 06       	ld	a,0x06
19424 67BE  21 16 00    	ld	hl,_playershootcounter
19425 67C1  96          	sub	a, (hl)
19426 67C2  30 73       	jr	NC,l_CheckShootPlayer_00114
19427 67C4  3A 1A 00    	ld	a,(_playershootmax)
19428 67C7  4F          	ld	c,a
19429 67C8  06 00       	ld	b,0x00
19430 67CA  0B          	dec	bc
19431 67CB  3A 1B 00    	ld	a,(_numplayershoots)
19432 67CE  5F          	ld	e,a
19433 67CF  16 00       	ld	d,0x00
19434 67D1  7B          	ld	a,e
19435 67D2  91          	sub	a, c
19436 67D3  7A          	ld	a,d
19437 67D4  98          	sbc	a, b
19438 67D5  E2 DA 67    	jp	PO, l_CheckShootPlayer_00141
19439 67D8  EE 80       	xor	a,0x80
19440 67DA              l_CheckShootPlayer_00141:
19441 67DA  F2 37 68    	jp	P,l_CheckShootPlayer_00114
19442 67DD  21 16 00    	ld	hl,_playershootcounter
19443 67E0  36 00       	ld	(hl),0x00
19444 67E2  3A 12 00    	ld	a,(_playerx)
19445 67E5  C6 F8       	add	a,0xf8
19446 67E7  47          	ld	b,a
19447 67E8  AF          	xor	a, a
19448 67E9  F5          	push	af
19449 67EA  33          	inc	sp
19450 67EB  3A 13 00    	ld	a,(_playery)
19451 67EE  48          	ld	c,b
19452 67EF  47          	ld	b,a
19453 67F0  C5          	push	bc
19454 67F1  CD 3D 63    	call	_InitPlayershoot
19455 67F4  F1          	pop	af
19456 67F5  33          	inc	sp
19457 67F6  3A 12 00    	ld	a,(_playerx)
19458 67F9  C6 08       	add	a,0x08
19459 67FB  47          	ld	b,a
19460 67FC  3E 03       	ld	a,0x03
19461 67FE  F5          	push	af
19462 67FF  33          	inc	sp
19463 6800  3A 13 00    	ld	a,(_playery)
19464 6803  48          	ld	c,b
19465 6804  47          	ld	b,a
19466 6805  C5          	push	bc
19467 6806  CD 3D 63    	call	_InitPlayershoot
19468 6809  F1          	pop	af
19469 680A  33          	inc	sp
19470 680B  18 2A       	jr	l_CheckShootPlayer_00114
19471 680D              l_CheckShootPlayer_00112:
19472 680D  3A 00 00    	ld	a,(_keystatus)
19473 6810  E6 10       	and	a,0x10
19474 6812  C8          	ret	Z
19475 6813  3E 03       	ld	a,0x03
19476 6815  21 16 00    	ld	hl,_playershootcounter
19477 6818  96          	sub	a, (hl)
19478 6819  D0          	ret	NC
19479 681A  3A 1B 00    	ld	a,(_numplayershoots)
19480 681D  21 1A 00    	ld	hl,_playershootmax
19481 6820  96          	sub	a, (hl)
19482 6821  D0          	ret	NC
19483 6822  21 16 00    	ld	hl,_playershootcounter
19484 6825  36 00       	ld	(hl),0x00
19485 6827  2A 13 00    	ld	hl,(_playery)
19486 682A  26 01       	ld	h,0x01
19487 682C  3A 12 00    	ld	a,(_playerx)
19488 682F  E5          	push	hl
19489 6830  F5          	push	af
19490 6831  33          	inc	sp
19491 6832  CD 3D 63    	call	_InitPlayershoot
19492 6835  F1          	pop	af
19493 6836  33          	inc	sp
19494 6837              l_CheckShootPlayer_00114:
19495 6837  C9          	ret
19496 6838              	SECTION code_compiler
19497 6838              ;	---------------------------------
19498 6838              ; Function UpdatePlayerState6
19499 6838              ; ---------------------------------
19500 6838              _UpdatePlayerState6:
19501 6838  3A 15 00    	ld	a,(_playercounter)
19502 683B  07          	rlca
19503 683C  07          	rlca
19504 683D  07          	rlca
19505 683E  07          	rlca
19506 683F  E6 0F       	and	a,0x0f
19507 6841  4F          	ld	c,a
19508 6842  21 13 00    	ld	hl,_playery
19509 6845  96          	sub	a, (hl)
19510 6846  30 06       	jr	NC,l_UpdatePlayerState6_00102
19511 6848  7E          	ld	a,(hl)
19512 6849  91          	sub	a, c
19513 684A  77          	ld	(hl),a
19514 684B  CD DD 66    	call	_DrawPlayer
19515 684E              l_UpdatePlayerState6_00102:
19516 684E  3A 15 00    	ld	a,(_playercounter)
19517 6851  D6 A0       	sub	a,0xa0
19518 6853  C0          	ret	NZ
19519 6854  21 0B 00    	ld	hl,_stagenum
19520 6857  34          	inc	(hl)
19521 6858  21 0E 00    	ld	hl,_exitplaystage
19522 685B  36 01       	ld	(hl),0x01
19523 685D  C9          	ret
19524 685E              	SECTION code_compiler
19525 685E              ;	---------------------------------
19526 685E              ; Function UpdatePlayerState5
19527 685E              ; ---------------------------------
19528 685E              _UpdatePlayerState5:
19529 685E  CD 0F 67    	call	_MovePlayer
19530 6861  CD DD 66    	call	_DrawPlayer
19531 6864  3A 15 00    	ld	a,(_playercounter)
19532 6867  D6 50       	sub	a,0x50
19533 6869  C0          	ret	NZ
19534 686A  21 14 00    	ld	hl,_playertype
19535 686D  36 06       	ld	(hl),0x06
19536 686F  21 09 00    	ld	hl,0x0009
19537 6872  E5          	push	hl
19538 6873  21 00 00    	ld	hl,_afterboss_psg
19539 6876  E5          	push	hl
19540 6877  CD 16 04    	call	_PlayMusic
19541 687A  F1          	pop	af
19542 687B  F1          	pop	af
19543 687C  21 15 00    	ld	hl,_playercounter
19544 687F  36 00       	ld	(hl),0x00
19545 6881  C9          	ret
19546 6882              	SECTION code_compiler
19547 6882              ;	---------------------------------
19548 6882              ; Function UpdatePlayerState4
19549 6882              ; ---------------------------------
19550 6882              _UpdatePlayerState4:
19551 6882  3A 15 00    	ld	a,(_playercounter)
19552 6885  D6 28       	sub	a,0x28
19553 6887  38 15       	jr	C,l_UpdatePlayerState4_00106
19554 6889  21 0D 00    	ld	hl,_numplayers
19555 688C  35          	dec (hl)
19556 688D  20 0C       	jr	NZ,l_UpdatePlayerState4_00102
19557 688F  21 0B 00    	ld	hl,_stagenum
19558 6892  36 00       	ld	(hl),0x00
19559 6894  21 0E 00    	ld	hl,_exitplaystage
19560 6897  36 01       	ld	(hl),0x01
19561 6899  18 03       	jr	l_UpdatePlayerState4_00106
19562 689B              l_UpdatePlayerState4_00102:
19563 689B  CD B5 66    	call	_InitPlayer
19564 689E              l_UpdatePlayerState4_00106:
19565 689E  C9          	ret
19566 689F              	SECTION code_compiler
19567 689F              ;	---------------------------------
19568 689F              ; Function UpdatePlayerState3
19569 689F              ; ---------------------------------
19570 689F              _UpdatePlayerState3:
19571 689F  21 06 00    	ld	hl,0x0006
19572 68A2  E5          	push	hl
19573 68A3  2A 02 00    	ld	hl,(_stageframe)
19574 68A6  E5          	push	hl
19575 68A7  CD 00 00    	call	__moduint_callee
19576 68AA  7D          	ld	a,l
19577 68AB  B7          	or	a,a
19578 68AC  4D          	ld	c,l
19579 68AD  20 1A       	jr	NZ,l_UpdatePlayerState3_00113
19580 68AF  3A 13 00    	ld	a,(_playery)
19581 68B2  C6 08       	add	a,0x08
19582 68B4  47          	ld	b,a
19583 68B5  3A 12 00    	ld	a,(_playerx)
19584 68B8  C6 08       	add	a,0x08
19585 68BA  4F          	ld	c,a
19586 68BB  C5          	push	bc
19587 68BC  CD E6 5D    	call	_CheckMapCollision
19588 68BF  F1          	pop	af
19589 68C0  7D          	ld	a,l
19590 68C1  B7          	or	a, a
19591 68C2  28 1F       	jr	Z,l_UpdatePlayerState3_00114
19592 68C4  CD 10 65    	call	_RemovePlayer
19593 68C7  18 23       	jr	l_UpdatePlayerState3_00115
19594 68C9              l_UpdatePlayerState3_00113:
19595 68C9  79          	ld	a,c
19596 68CA  D6 02       	sub	a,0x02
19597 68CC  20 09       	jr	NZ,l_UpdatePlayerState3_00110
19598 68CE  CD 36 65    	call	_CheckPlayerEnemyCollision
19599 68D1  7D          	ld	a,l
19600 68D2  B7          	or	a, a
19601 68D3  28 0E       	jr	Z,l_UpdatePlayerState3_00114
19602 68D5  18 15       	jr	l_UpdatePlayerState3_00115
19603 68D7              l_UpdatePlayerState3_00110:
19604 68D7  79          	ld	a,c
19605 68D8  D6 04       	sub	a,0x04
19606 68DA  20 07       	jr	NZ,l_UpdatePlayerState3_00114
19607 68DC  CD F2 65    	call	_CheckPlayerEnemyshootCollision
19608 68DF  7D          	ld	a,l
19609 68E0  B7          	or	a, a
19610 68E1  20 09       	jr	NZ,l_UpdatePlayerState3_00115
19611 68E3              l_UpdatePlayerState3_00114:
19612 68E3  CD B1 67    	call	_CheckShootPlayer
19613 68E6  CD 0F 67    	call	_MovePlayer
19614 68E9  CD DD 66    	call	_DrawPlayer
19615 68EC              l_UpdatePlayerState3_00115:
19616 68EC  C9          	ret
19617 68ED              	SECTION code_compiler
19618 68ED              ;	---------------------------------
19619 68ED              ; Function UpdatePlayerState2
19620 68ED              ; ---------------------------------
19621 68ED              _UpdatePlayerState2:
19622 68ED  3E 40       	ld	a,0x40
19623 68EF  21 15 00    	ld	hl,_playercounter
19624 68F2  96          	sub	a, (hl)
19625 68F3  30 05       	jr	NC,l_UpdatePlayerState2_00102
19626 68F5  21 14 00    	ld	hl,_playertype
19627 68F8  36 03       	ld	(hl),0x03
19628 68FA              l_UpdatePlayerState2_00102:
19629 68FA  CD B1 67    	call	_CheckShootPlayer
19630 68FD  CD 0F 67    	call	_MovePlayer
19631 6900  3A 15 00    	ld	a,(_playercounter)
19632 6903  CB 3F       	srl	a
19633 6905  0F          	rrca
19634 6906  D8          	ret	C
19635 6907  C3 DD 66    	jp  _DrawPlayer
19636 690A              	SECTION code_compiler
19637 690A              ;	---------------------------------
19638 690A              ; Function UpdatePlayerState1
19639 690A              ; ---------------------------------
19640 690A              _UpdatePlayerState1:
19641 690A  21 13 00    	ld	hl,_playery
19642 690D  7E          	ld	a,(hl)
19643 690E  3D          	dec	a
19644 690F  77          	ld	(hl),a
19645 6910  D6 96       	sub	a,0x96
19646 6912  D2 DD 66    	jp	NC,_DrawPlayer
19647 6915  21 14 00    	ld	hl,_playertype
19648 6918  36 02       	ld	(hl),0x02
19649 691A  21 15 00    	ld	hl,_playercounter
19650 691D  36 00       	ld	(hl),0x00
19651 691F  C3 DD 66    	jp  _DrawPlayer
19652 6922              	SECTION code_compiler
19653 6922              ;	---------------------------------
19654 6922              ; Function UpdatePlayer
19655 6922              ; ---------------------------------
19656 6922              _UpdatePlayer:
19657 6922  21 15 00    	ld	hl,_playercounter
19658 6925  34          	inc	(hl)
19659 6926  21 17 00    	ld	hl,_playerside
19660 6929  36 00       	ld	(hl),0x00
19661 692B  3E 0F       	ld	a,0x0f
19662 692D  F5          	push	af
19663 692E  33          	inc	sp
19664 692F  CD 27 00    	call	_changeBank
19665 6932  33          	inc	sp
19666 6933  01 00 00    	ld	bc,_playerupdatefunctions+0
19667 6936  2A 14 00    	ld	hl,(_playertype)
19668 6939  26 00       	ld	h,0x00
19669 693B  29          	add	hl, hl
19670 693C  09          	add	hl,bc
19671 693D  4E          	ld	c,(hl)
19672 693E  23          	inc	hl
19673 693F  66          	ld	h,(hl)
19674 6940  69          	ld	l, c
19675 6941  C3 00 00    	jp  ___sdcc_call_hl
19676 6944              	SECTION code_compiler
19677 6944              ;	---------------------------------
19678 6944              ; Function InitPlayerConstants
19679 6944              ; ---------------------------------
19680 6944              _InitPlayerConstants:
19681 6944  21 18 00    	ld	hl,_playerspeed
19682 6947  36 02       	ld	(hl),0x02
19683 6949  21 19 00    	ld	hl,_playershootlevel
19684 694C  36 00       	ld	(hl),0x00
19685 694E  21 1A 00    	ld	hl,_playershootmax
19686 6951  36 02       	ld	(hl),0x02
19687 6953  21 15 00    	ld	hl,_playercounter
19688 6956  36 00       	ld	(hl),0x00
19689 6958  21 16 00    	ld	hl,_playershootcounter
19690 695B  36 00       	ld	(hl),0x00
19691 695D  C9          	ret
19692 695E              	SECTION code_compiler
19693 695E              ;	---------------------------------
19694 695E              ; Function InitStageSprite
19695 695E              ; ---------------------------------
19696 695E              _InitStageSprite:
19697 695E  DD E5       	push	ix
19698 6960  DD 21 00 00 	ld	ix,0
19699 6964  DD 39       	add	ix,sp
19700 6966  F5          	push	af
19701 6967  DD 6E 04    	ld	l,(ix+4)
19702 696A  26 00       	ld	h,0x00
19703 696C  29          	add	hl,hl
19704 696D  EB          	ex	de,hl
19705 696E  21 00 00    	ld	hl,_imagepointers
19706 6971  19          	add	hl,de
19707 6972  4E          	ld	c,(hl)
19708 6973  23          	inc	hl
19709 6974  46          	ld	b,(hl)
19710 6975  21 00 00    	ld	hl,_imagebases
19711 6978  19          	add	hl,de
19712 6979  5E          	ld	e,(hl)
19713 697A  23          	inc	hl
19714 697B  56          	ld	d,(hl)
19715 697C  3E 00       	ld	a,+((_imagebanks) & 0xFF)
19716 697E  DD 86 04    	add	a,(ix+4)
19717 6981  DD 77 FE    	ld	(ix-2),a
19718 6984  3E 00       	ld	a,+((_imagebanks) / 256)
19719 6986  CE 00       	adc	a,0x00
19720 6988  DD 77 FF    	ld	(ix-1),a
19721 698B  E1          	pop	hl
19722 698C  E5          	push	hl
19723 698D  66          	ld	h,(hl)
19724 698E  E5          	push	hl
19725 698F  33          	inc	sp
19726 6990  D5          	push	de
19727 6991  C5          	push	bc
19728 6992  CD FD 00    	call	_LoadSprite
19729 6995  DD F9       	ld	sp,ix
19730 6997  DD E1       	pop	ix
19731 6999  C9          	ret
19732 699A              	SECTION code_compiler
19733 699A              ;	---------------------------------
19734 699A              ; Function InitStageSprites
19735 699A              ; ---------------------------------
19736 699A              _InitStageSprites:
19737 699A  DD E5       	push	ix
19738 699C  DD 21 00 00 	ld	ix,0
19739 69A0  DD 39       	add	ix,sp
19740 69A2  0E 00       	ld	c,0x00
19741 69A4              l_InitStageSprites_00103:
19742 69A4  79          	ld	a,c
19743 69A5  DD 96 06    	sub	a,(ix+6)
19744 69A8  30 22       	jr	NC,l_InitStageSprites_00105
19745 69AA  C5          	push	bc
19746 69AB  3E 0F       	ld	a,0x0f
19747 69AD  F5          	push	af
19748 69AE  33          	inc	sp
19749 69AF  CD 27 00    	call	_changeBank
19750 69B2  33          	inc	sp
19751 69B3  C1          	pop	bc
19752 69B4  DD 7E 04    	ld	a,(ix+4)
19753 69B7  81          	add	a, c
19754 69B8  5F          	ld	e,a
19755 69B9  DD 7E 05    	ld	a,(ix+5)
19756 69BC  CE 00       	adc	a,0x00
19757 69BE  57          	ld	d,a
19758 69BF  1A          	ld	a,(de)
19759 69C0  47          	ld	b,a
19760 69C1  C5          	push	bc
19761 69C2  C5          	push	bc
19762 69C3  33          	inc	sp
19763 69C4  CD 5E 69    	call	_InitStageSprite
19764 69C7  33          	inc	sp
19765 69C8  C1          	pop	bc
19766 69C9  0C          	inc	c
19767 69CA  18 D8       	jr	l_InitStageSprites_00103
19768 69CC              l_InitStageSprites_00105:
19769 69CC  DD E1       	pop	ix
19770 69CE  C9          	ret
19771 69CF              	SECTION code_compiler
19772 69CF              ;	---------------------------------
19773 69CF              ; Function InitAfterBossStage
19774 69CF              ; ---------------------------------
19775 69CF              _InitAfterBossStage:
19776 69CF  CD 82 5F    	call	_KillEnemyshoots
19777 69D2  3E 01       	ld	a,0x01
19778 69D4  F5          	push	af
19779 69D5  33          	inc	sp
19780 69D6  CD 5C 48    	call	_KillEnemies
19781 69D9  33          	inc	sp
19782 69DA  CD 00 00    	call	_PSGStop
19783 69DD  21 14 00    	ld	hl,_playertype
19784 69E0  36 05       	ld	(hl),0x05
19785 69E2  21 15 00    	ld	hl,_playercounter
19786 69E5  36 00       	ld	(hl),0x00
19787 69E7  C9          	ret
19788 69E8              	SECTION code_compiler
19789 69E8              ;	---------------------------------
19790 69E8              ; Function InitCustomStageData
19791 69E8              ; ---------------------------------
19792 69E8              _InitCustomStageData:
19793 69E8  3A 0F 00    	ld	a,(_gamelevel)
19794 69EB  C6 05       	add	a,0x05
19795 69ED  32 5F 00    	ld	(_playstageshootspeed),a
19796 69F0  3E 0F       	ld	a,0x0f
19797 69F2  F5          	push	af
19798 69F3  33          	inc	sp
19799 69F4  CD 27 00    	call	_changeBank
19800 69F7  33          	inc	sp
19801 69F8  01 00 00    	ld	bc,_initstagefunctions+0
19802 69FB  2A 09 00    	ld	hl,(_playstage)
19803 69FE  26 00       	ld	h,0x00
19804 6A00  29          	add	hl, hl
19805 6A01  09          	add	hl,bc
19806 6A02  4E          	ld	c,(hl)
19807 6A03  23          	inc	hl
19808 6A04  66          	ld	h,(hl)
19809 6A05  69          	ld	l, c
19810 6A06  C3 00 00    	jp  ___sdcc_call_hl
19811 6A09              	SECTION code_compiler
19812 6A09              ;	---------------------------------
19813 6A09              ; Function UpdatePlayStage
19814 6A09              ; ---------------------------------
19815 6A09              _UpdatePlayStage:
19816 6A09  3E 0F       	ld	a,0x0f
19817 6A0B  F5          	push	af
19818 6A0C  33          	inc	sp
19819 6A0D  CD 27 00    	call	_changeBank
19820 6A10  33          	inc	sp
19821 6A11  01 00 00    	ld	bc,_updatestagefunctions+0
19822 6A14  2A 09 00    	ld	hl,(_playstage)
19823 6A17  26 00       	ld	h,0x00
19824 6A19  29          	add	hl, hl
19825 6A1A  09          	add	hl,bc
19826 6A1B  4E          	ld	c,(hl)
19827 6A1C  23          	inc	hl
19828 6A1D  66          	ld	h,(hl)
19829 6A1E  69          	ld	l, c
19830 6A1F  C3 00 00    	jp  ___sdcc_call_hl
19831 6A22              	SECTION code_compiler
19832 6A22              ;	---------------------------------
19833 6A22              ; Function InitStageData
19834 6A22              ; ---------------------------------
19835 6A22              _InitStageData:
19836 6A22  DD E5       	push	ix
19837 6A24  DD 21 00 00 	ld	ix,0
19838 6A28  DD 39       	add	ix,sp
19839 6A2A  21 F4 FF    	ld	hl,-12
19840 6A2D  39          	add	hl,sp
19841 6A2E  F9          	ld	sp,hl
19842 6A2F  3E 0F       	ld	a,0x0f
19843 6A31  F5          	push	af
19844 6A32  33          	inc	sp
19845 6A33  CD 27 00    	call	_changeBank
19846 6A36  33          	inc	sp
19847 6A37  06 04       	ld	b,0x03+1
19848 6A39  DD 4E 04    	ld	c,(ix+4)
19849 6A3C  DD 7E 05    	ld	a,(ix+5)
19850 6A3F  18 03       	jr	l_InitStageData_00110
19851 6A41              l_InitStageData_00109:
19852 6A41  CB 21       	sla	c
19853 6A43  17          	rla
19854 6A44              l_InitStageData_00110:
19855 6A44  10 FB       	djnz	l_InitStageData_00109
19856 6A46  DD 71 04    	ld	(ix+4),c
19857 6A49  69          	ld	l, c
19858 6A4A  DD 77 05    	ld	(ix+5),a
19859 6A4D  67          	ld	h,a
19860 6A4E  29          	add	hl,hl
19861 6A4F  01 00 00    	ld	bc,_stageinitdata
19862 6A52  09          	add	hl,bc
19863 6A53  5E          	ld	e,(hl)
19864 6A54  23          	inc	hl
19865 6A55  56          	ld	d,(hl)
19866 6A56  DD 34 04    	inc	(ix+4)
19867 6A59  20 03       	jr	NZ,l_InitStageData_00113
19868 6A5B  DD 34 05    	inc	(ix+5)
19869 6A5E              l_InitStageData_00113:
19870 6A5E  DD 6E 04    	ld	l,(ix+4)
19871 6A61  DD 66 05    	ld	h,(ix+5)
19872 6A64  29          	add	hl,hl
19873 6A65  01 00 00    	ld	bc,_stageinitdata
19874 6A68  09          	add	hl,bc
19875 6A69  4E          	ld	c,(hl)
19876 6A6A  23          	inc	hl
19877 6A6B  46          	ld	b,(hl)
19878 6A6C  DD 71 FE    	ld	(ix-2),c
19879 6A6F  DD 70 FF    	ld	(ix-1),b
19880 6A72  DD 34 04    	inc	(ix+4)
19881 6A75  20 03       	jr	NZ,l_InitStageData_00116
19882 6A77  DD 34 05    	inc	(ix+5)
19883 6A7A              l_InitStageData_00116:
19884 6A7A  DD 6E 04    	ld	l,(ix+4)
19885 6A7D  DD 66 05    	ld	h,(ix+5)
19886 6A80  29          	add	hl,hl
19887 6A81  01 00 00    	ld	bc,_stageinitdata
19888 6A84  09          	add	hl,bc
19889 6A85  7E          	ld	a,(hl)
19890 6A86  DD 77 F6    	ld	(ix-10),a
19891 6A89  23          	inc	hl
19892 6A8A  7E          	ld	a,(hl)
19893 6A8B  DD 77 F7    	ld	(ix-9),a
19894 6A8E  DD 34 04    	inc	(ix+4)
19895 6A91  20 03       	jr	NZ,l_InitStageData_00119
19896 6A93  DD 34 05    	inc	(ix+5)
19897 6A96              l_InitStageData_00119:
19898 6A96  DD 6E 04    	ld	l,(ix+4)
19899 6A99  DD 66 05    	ld	h,(ix+5)
19900 6A9C  29          	add	hl,hl
19901 6A9D  01 00 00    	ld	bc,_stageinitdata
19902 6AA0  09          	add	hl,bc
19903 6AA1  4E          	ld	c,(hl)
19904 6AA2  23          	inc	hl
19905 6AA3  46          	ld	b,(hl)
19906 6AA4  DD 71 FC    	ld	(ix-4),c
19907 6AA7  DD 70 FD    	ld	(ix-3),b
19908 6AAA  DD 34 04    	inc	(ix+4)
19909 6AAD  20 03       	jr	NZ,l_InitStageData_00122
19910 6AAF  DD 34 05    	inc	(ix+5)
19911 6AB2              l_InitStageData_00122:
19912 6AB2  DD 6E 04    	ld	l,(ix+4)
19913 6AB5  DD 66 05    	ld	h,(ix+5)
19914 6AB8  29          	add	hl,hl
19915 6AB9  01 00 00    	ld	bc,_stageinitdata
19916 6ABC  09          	add	hl,bc
19917 6ABD  7E          	ld	a,(hl)
19918 6ABE  DD 77 FA    	ld	(ix-6),a
19919 6AC1  23          	inc	hl
19920 6AC2  7E          	ld	a,(hl)
19921 6AC3  DD 77 FB    	ld	(ix-5),a
19922 6AC6  DD 34 04    	inc	(ix+4)
19923 6AC9  20 03       	jr	NZ,l_InitStageData_00125
19924 6ACB  DD 34 05    	inc	(ix+5)
19925 6ACE              l_InitStageData_00125:
19926 6ACE  DD 6E 04    	ld	l,(ix+4)
19927 6AD1  DD 66 05    	ld	h,(ix+5)
19928 6AD4  29          	add	hl,hl
19929 6AD5  01 00 00    	ld	bc,_stageinitdata
19930 6AD8  09          	add	hl,bc
19931 6AD9  7E          	ld	a,(hl)
19932 6ADA  DD 77 F8    	ld	(ix-8),a
19933 6ADD  23          	inc	hl
19934 6ADE  7E          	ld	a,(hl)
19935 6ADF  DD 77 F9    	ld	(ix-7),a
19936 6AE2  DD 34 04    	inc	(ix+4)
19937 6AE5  20 03       	jr	NZ,l_InitStageData_00128
19938 6AE7  DD 34 05    	inc	(ix+5)
19939 6AEA              l_InitStageData_00128:
19940 6AEA  DD 4E 04    	ld	c,(ix+4)
19941 6AED  DD 46 05    	ld	b,(ix+5)
19942 6AF0  21 01 00    	ld	hl,0x0001
19943 6AF3  09          	add	hl,bc
19944 6AF4  DD 75 04    	ld	(ix+4),l
19945 6AF7  DD 74 05    	ld	(ix+5),h
19946 6AFA  69          	ld	l, c
19947 6AFB  60          	ld	h, b
19948 6AFC  29          	add	hl, hl
19949 6AFD  01 00 00    	ld	bc,_stageinitdata
19950 6B00  09          	add	hl,bc
19951 6B01  4E          	ld	c,(hl)
19952 6B02  23          	inc	hl
19953 6B03  46          	ld	b,(hl)
19954 6B04  E1          	pop	hl
19955 6B05  C5          	push	bc
19956 6B06  DD 6E 04    	ld	l,(ix+4)
19957 6B09  DD 66 05    	ld	h,(ix+5)
19958 6B0C  29          	add	hl,hl
19959 6B0D  01 00 00    	ld	bc,_stageinitdata
19960 6B10  09          	add	hl,bc
19961 6B11  4E          	ld	c,(hl)
19962 6B12  DD 46 FE    	ld	b,(ix-2)
19963 6B15  21 F8 00    	ld	hl,_playstagebank
19964 6B18  70          	ld	(hl),b
19965 6B19  C5          	push	bc
19966 6B1A  C5          	push	bc
19967 6B1B  33          	inc	sp
19968 6B1C  D5          	push	de
19969 6B1D  CD 7D 01    	call	_LoadBGPalette
19970 6B20  F1          	pop	af
19971 6B21  33          	inc	sp
19972 6B22  DD 6E FA    	ld	l,(ix-6)
19973 6B25  DD 66 FB    	ld	h,(ix-5)
19974 6B28  E5          	push	hl
19975 6B29  DD 6E FC    	ld	l,(ix-4)
19976 6B2C  DD 66 FD    	ld	h,(ix-3)
19977 6B2F  E5          	push	hl
19978 6B30  DD 6E F6    	ld	l,(ix-10)
19979 6B33  DD 66 F7    	ld	h,(ix-9)
19980 6B36  E5          	push	hl
19981 6B37  CD 21 06    	call	_SetMapLines
19982 6B3A  21 06 00    	ld	hl,6
19983 6B3D  39          	add	hl,sp
19984 6B3E  F9          	ld	sp,hl
19985 6B3F  C1          	pop	bc
19986 6B40  C5          	push	bc
19987 6B41  C5          	push	bc
19988 6B42  33          	inc	sp
19989 6B43  CD 01 07    	call	_InitMap
19990 6B46  33          	inc	sp
19991 6B47  C1          	pop	bc
19992 6B48  DD 7E F9    	ld	a,(ix-7)
19993 6B4B  DD B6 F8    	or	a,(ix-8)
19994 6B4E  28 13       	jr	Z,l_InitStageData_00103
19995 6B50  DD 46 F4    	ld	b,(ix-12)
19996 6B53  79          	ld	a,c
19997 6B54  48          	ld	c,b
19998 6B55  47          	ld	b,a
19999 6B56  C5          	push	bc
20000 6B57  DD 6E F8    	ld	l,(ix-8)
20001 6B5A  DD 66 F9    	ld	h,(ix-7)
20002 6B5D  E5          	push	hl
20003 6B5E  CD 16 04    	call	_PlayMusic
20004 6B61  F1          	pop	af
20005 6B62  F1          	pop	af
20006 6B63              l_InitStageData_00103:
20007 6B63  DD F9       	ld	sp, ix
20008 6B65  DD E1       	pop	ix
20009 6B67  C9          	ret
20010 6B68              	SECTION code_compiler
20011 6B68              ;	---------------------------------
20012 6B68              ; Function UpdateStagePassA
20013 6B68              ; ---------------------------------
20014 6B68              _UpdateStagePassA:
20015 6B68  CD 94 66    	call	_UpdatePlayerIndicators
20016 6B6B  CD BF 63    	call	_UpdatePowerup
20017 6B6E  CD 22 69    	call	_UpdatePlayer
20018 6B71  CD 21 63    	call	_UpdatePlayershoots
20019 6B74  CD 5D 5F    	call	_UpdateEnemyshoots
20020 6B77  C3 90 0B    	jp  _UpdateExplosions
20021 6B7A              	SECTION code_compiler
20022 6B7A              ;	---------------------------------
20023 6B7A              ; Function UpdateStagePassB
20024 6B7A              ; ---------------------------------
20025 6B7A              	defc _UpdateStagePassB	=	_UpdateEnemies
20026 6B7A              	SECTION code_compiler
20027 6B7A              ;	---------------------------------
20028 6B7A              ; Function InitPlayStage
20029 6B7A              ; ---------------------------------
20030 6B7A              _InitPlayStage:
20031 6B7A  3A 0B 00    	ld	a,(_stagenum)
20032 6B7D  32 0C 00    	ld	(_laststagenum),a
20033 6B80  CD FD 02    	call	_InitStage
20034 6B83  CD EE 49    	call	_InitScripts
20035 6B86  CD E8 49    	call	_InitEnemies
20036 6B89  CD 79 5F    	call	_InitEnemyshoots
20037 6B8C  21 40 01    	ld	hl,0x0140
20038 6B8F  CD 00 00    	call	_SMS_VDPturnOffFeature_fastcall
20039 6B92  CD 67 08    	call	_InitScroller
20040 6B95  CD 4B 0A    	call	_InitBarrom
20041 6B98  3A 0B 00    	ld	a,(_stagenum)
20042 6B9B  D6 06       	sub	a,0x06
20043 6B9D  30 1E       	jr	NC,l_InitPlayStage_00102
20044 6B9F  3A 08 00    	ld	a,(_basestage)
20045 6BA2  4F          	ld	c,a
20046 6BA3  06 00       	ld	b,0x00
20047 6BA5  3A 0B 00    	ld	a,(_stagenum)
20048 6BA8  5F          	ld	e,a
20049 6BA9  16 00       	ld	d,0x00
20050 6BAB  69          	ld	l, c
20051 6BAC  60          	ld	h, b
20052 6BAD  19          	add	hl,de
20053 6BAE  01 05 00    	ld	bc,0x0005
20054 6BB1  C5          	push	bc
20055 6BB2  E5          	push	hl
20056 6BB3  CD 00 00    	call	__modsint_callee
20057 6BB6  7D          	ld	a, l
20058 6BB7  3C          	inc	a
20059 6BB8  32 09 00    	ld	(_playstage),a
20060 6BBB  18 06       	jr	l_InitPlayStage_00103
20061 6BBD              l_InitPlayStage_00102:
20062 6BBD  3A 0B 00    	ld	a,(_stagenum)
20063 6BC0  32 09 00    	ld	(_playstage),a
20064 6BC3              l_InitPlayStage_00103:
20065 6BC3  3A 09 00    	ld	a,(_playstage)
20066 6BC6  4F          	ld	c,a
20067 6BC7  06 00       	ld	b,0x00
20068 6BC9  0B          	dec	bc
20069 6BCA  21 00 00    	ld	hl,_stagedatamarks
20070 6BCD  09          	add	hl,bc
20071 6BCE  4E          	ld	c,(hl)
20072 6BCF  06 00       	ld	b,0x00
20073 6BD1  C5          	push	bc
20074 6BD2  CD 22 6A    	call	_InitStageData
20075 6BD5  F1          	pop	af
20076 6BD6  CD E8 69    	call	_InitCustomStageData
20077 6BD9  CD CA 66    	call	_InitPlayerSprite
20078 6BDC  CD A3 63    	call	_InitPlayershoots
20079 6BDF  CD 00 00    	call	_InitPowerups
20080 6BE2  CD 14 0C    	call	_InitExplosions
20081 6BE5  CD B5 66    	call	_InitPlayer
20082 6BE8  21 40 01    	ld	hl,0x0140
20083 6BEB  CD 00 00    	call	_SMS_VDPturnOnFeature_fastcall
20084 6BEE  21 0E 00    	ld	hl,_exitplaystage
20085 6BF1  36 00       	ld	(hl),0x00
20086 6BF3  21 0A 00    	ld	hl,_updateplaystage
20087 6BF6  36 01       	ld	(hl),0x01
20088 6BF8  21 11 00    	ld	hl,_gamepause
20089 6BFB  36 00       	ld	(hl),0x00
20090 6BFD              l_InitPlayStage_00115:
20091 6BFD  CD 35 03    	call	_checkgamepause
20092 6C00  3A 11 00    	ld	a,(_gamepause)
20093 6C03  B7          	or	a, a
20094 6C04  20 2C       	jr	NZ,l_InitPlayStage_00112
20095 6C06  CD 6A 03    	call	_UpdateStage
20096 6C09  CD A1 08    	call	_UpdateScroller
20097 6C0C  CD D6 09    	call	_UpdateBarrom
20098 6C0F  3A 04 00    	ld	a,(_stageframe2mod)
20099 6C12  B7          	or	a, a
20100 6C13  20 05       	jr	NZ,l_InitPlayStage_00105
20101 6C15  CD 68 6B    	call	_UpdateStagePassA
20102 6C18  18 03       	jr	l_InitPlayStage_00106
20103 6C1A              l_InitPlayStage_00105:
20104 6C1A  CD 00 00    	call	_UpdateStagePassB
20105 6C1D              l_InitPlayStage_00106:
20106 6C1D  3A 02 00    	ld	a,(_stageframe)
20107 6C20  E6 0F       	and	a,0x0f
20108 6C22  20 03       	jr	NZ,l_InitPlayStage_00108
20109 6C24  CD 19 4D    	call	_UpdateScripts
20110 6C27              l_InitPlayStage_00108:
20111 6C27  3A 0E 00    	ld	a,(_exitplaystage)
20112 6C2A  3D          	dec	a
20113 6C2B  28 12       	jr	Z,l_InitPlayStage_00117
20114 6C2D  CD 77 04    	call	_UpdatePSG
20115 6C30  18 CB       	jr	l_InitPlayStage_00115
20116 6C32              l_InitPlayStage_00112:
20117 6C32  CD 77 04    	call	_UpdatePSG
20118 6C35  CD 00 00    	call	_SMS_waitForVBlank
20119 6C38  21 35 01    	ld	hl,_numinterrupts
20120 6C3B  36 00       	ld	(hl),0x00
20121 6C3D  18 BE       	jr	l_InitPlayStage_00115
20122 6C3F              l_InitPlayStage_00117:
20123 6C3F  C9          	ret
20124 6C40              	SECTION code_compiler
20125 6C40              ;	---------------------------------
20126 6C40              ; Function main
20127 6C40              ; ---------------------------------
20128 6C40              _main:
20129 6C40  CD AC 01    	call	_InitConsole
20130 6C43  21 0F 00    	ld	hl,_gamelevel
20131 6C46  36 00       	ld	(hl),0x00
20132 6C48  21 10 00    	ld	hl,_gamestock
20133 6C4B  36 03       	ld	(hl),0x03
20134 6C4D              l_main_00113:
20135 6C4D  CD 39 4D    	call	_InitMikGamesStage
20136 6C50  3E 01       	ld	a,0x01
20137 6C52  F5          	push	af
20138 6C53  33          	inc	sp
20139 6C54  CD 02 52    	call	_InitIntroStage
20140 6C57  33          	inc	sp
20141 6C58  3E 04       	ld	a,0x04
20142 6C5A  F5          	push	af
20143 6C5B  33          	inc	sp
20144 6C5C  CD 02 52    	call	_InitIntroStage
20145 6C5F  33          	inc	sp
20146 6C60  3E 02       	ld	a,0x02
20147 6C62  F5          	push	af
20148 6C63  33          	inc	sp
20149 6C64  CD 02 52    	call	_InitIntroStage
20150 6C67  33          	inc	sp
20151 6C68  CD A1 4D    	call	_InitLogoStage
20152 6C6B  3A 2E 01    	ld	a,(_dojukebox)
20153 6C6E  3D          	dec	a
20154 6C6F  20 03       	jr	NZ,l_main_00102
20155 6C71  CD 9D 4F    	call	_InitJukeboxStage
20156 6C74              l_main_00102:
20157 6C74  CD 9B 53    	call	_InitSelectorStage
20158 6C77  21 0B 00    	ld	hl,_stagenum
20159 6C7A  36 01       	ld	(hl),0x01
20160 6C7C  3A 10 00    	ld	a,(_gamestock)
20161 6C7F  32 0D 00    	ld	(_numplayers),a
20162 6C82              l_main_00109:
20163 6C82  21 0B 00    	ld	hl,_stagenum
20164 6C85  7E          	ld	a,(hl)
20165 6C86  D6 0A       	sub	a,0x0a
20166 6C88  30 C3       	jr	NC,l_main_00113
20167 6C8A  7E          	ld	a,(hl)
20168 6C8B  B7          	or	a, a
20169 6C8C  20 05       	jr	NZ,l_main_00107
20170 6C8E  CD 38 54    	call	_InitGameoverStage
20171 6C91  18 EF       	jr	l_main_00109
20172 6C93              l_main_00107:
20173 6C93  3A 0B 00    	ld	a,(_stagenum)
20174 6C96  D6 09       	sub	a,0x09
20175 6C98  20 12       	jr	NZ,l_main_00104
20176 6C9A  3E 05       	ld	a,0x05
20177 6C9C  F5          	push	af
20178 6C9D  33          	inc	sp
20179 6C9E  CD 02 52    	call	_InitIntroStage
20180 6CA1  33          	inc	sp
20181 6CA2  3E 03       	ld	a,0x03
20182 6CA4  F5          	push	af
20183 6CA5  33          	inc	sp
20184 6CA6  CD 02 52    	call	_InitIntroStage
20185 6CA9  33          	inc	sp
20186 6CAA  18 D6       	jr	l_main_00109
20187 6CAC              l_main_00104:
20188 6CAC  CD 7A 6B    	call	_InitPlayStage
20189 6CAF  18 D1       	jr	l_main_00109
20190 6CB1              	SECTION data_compiler
20191 0000              _state:
20192 0000  09 03 00 00 	DEFB +0x09,0x03,+0x00,+0x00	; 777
20193 0004              _barromx:
20194 0004  FD          	DEFB +0xfd	; -3
20195 0005  03          	DEFB +0x03	;  3
20196 0006  FD          	DEFB +0xfd	; -3
20197 0007  03          	DEFB +0x03	;  3
20198 0008  FE          	DEFB +0xfe	; -2
20199 0009  02          	DEFB +0x02	;  2
20200 000A  FE          	DEFB +0xfe	; -2
20201 000B  02          	DEFB +0x02	;  2
20202 000C  FF          	DEFB +0xff	; -1
20203 000D  01          	DEFB +0x01	;  1
20204 000E  FF          	DEFB +0xff	; -1
20205 000F  01          	DEFB +0x01	;  1
20206 0010              _barromy:
20207 0010  03          	DEFB +0x03	;  3
20208 0011  FD          	DEFB +0xfd	; -3
20209 0012  03          	DEFB +0x03	;  3
20210 0013  FD          	DEFB +0xfd	; -3
20211 0014  FE          	DEFB +0xfe	; -2
20212 0015  02          	DEFB +0x02	;  2
20213 0016  02          	DEFB +0x02	;  2
20214 0017  FE          	DEFB +0xfe	; -2
20215 0018  01          	DEFB +0x01	;  1
20216 0019  FF          	DEFB +0xff	; -1
20217 001A  FF          	DEFB +0xff	; -1
20218 001B  01          	DEFB +0x01	;  1
20219 001C              	SECTION IGNORE
20220 0000              
